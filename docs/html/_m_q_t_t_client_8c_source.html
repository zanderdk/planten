<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Plante: esp32-snippets/networking/mqtt/paho_mqtt_embedded_c/MQTTClient-C/src/MQTTClient.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Plante
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_m_q_t_t_client_8c_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">MQTTClient.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_m_q_t_t_client_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*******************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2014, 2015 IBM Corp.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * All rights reserved. This program and the accompanying materials</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * are made available under the terms of the Eclipse Public License v1.0</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * and Eclipse Distribution License v1.0 which accompany this distribution.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * The Eclipse Public License is available at</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *    http://www.eclipse.org/legal/epl-v10.html</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * and the Eclipse Distribution License is available at</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *   http://www.eclipse.org/org/documents/edl-v10.php.</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * Contributors:</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *    Allan Stockdill-Mander/Ian Craggs - initial API and implementation and/or initial documentation</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *******************************************************************************/</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_c_2src_2_m_q_t_t_client_8h.html">MQTTClient.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> NewMessageData(<a class="code" href="struct_message_data.html">MessageData</a>* md, <a class="code" href="struct_m_q_t_t_string.html">MQTTString</a>* aTopicName, <a class="code" href="struct_m_q_t_t_message.html">MQTTMessage</a>* aMessage) {</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    md-&gt;<a class="code" href="struct_message_data.html#af131ee91d1113bb77e8258394c9aad77">topicName</a> = aTopicName;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    md-&gt;<a class="code" href="struct_message_data.html#a1ebcc1407b2fe6653df93bc6a0530cce">message</a> = aMessage;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;}</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> getNextPacketId(<a class="code" href="struct_m_q_t_t_client.html">MQTTClient</a> *c) {</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <span class="keywordflow">return</span> c-&gt;<a class="code" href="struct_m_q_t_t_client.html#ac5007e87a2eca33a38c50ef2fa46fc8c">next_packetid</a> = (c-&gt;<a class="code" href="struct_m_q_t_t_client.html#ac5007e87a2eca33a38c50ef2fa46fc8c">next_packetid</a> == <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#aa6ae71e8be050e41896f2a66231396fe">MAX_PACKET_ID</a>) ? 1 : c-&gt;<a class="code" href="struct_m_q_t_t_client.html#ac5007e87a2eca33a38c50ef2fa46fc8c">next_packetid</a> + 1;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;}</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> sendPacket(<a class="code" href="struct_m_q_t_t_client.html">MQTTClient</a>* c, <span class="keywordtype">int</span> length, <a class="code" href="struct_timer.html">Timer</a>* <a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>)</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;{</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>, </div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        sent = 0;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    </div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keywordflow">while</span> (sent &lt; length &amp;&amp; !<a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a1d5e89eb91a028bdd0523a2d6777b214">TimerIsExpired</a>(<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>))</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    {</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a1e1b117b259c9628c37fb3074fb73c91">ipstack</a>-&gt;<a class="code" href="struct_network.html#a24e1241d4ee7666686fc015747fa98fc">mqttwrite</a>(c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a1e1b117b259c9628c37fb3074fb73c91">ipstack</a>, &amp;c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a2c90f267c7e9ace31dae3656f358cf06">buf</a>[sent], length, <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#ade4fb2f5ebbcd5b3d8e55f5f2370a8e2">TimerLeftMS</a>(<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>));</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> &lt; 0)  <span class="comment">// there was an error writing the data</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        sent += <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    }</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordflow">if</span> (sent == length)</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    {</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a22de0fe4526bbfef0fc9f8a7b668a6d6">TimerCountdown</a>(&amp;c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a31088e9ce2a488c51f87e9d095592a0c">ping_timer</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#ab44054d233d95140c1913d4f48a5cd0e">keepAliveInterval</a>); <span class="comment">// record the fact that we have successfully sent the packet</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a>;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    }</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;}</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="_c_2src_2_m_q_t_t_client_8h.html#a1b807d1a945d29222d8392a0615623fe">   52</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="_m_q_t_t_client_8c.html#ac33ece78d50eb5fb43fb2403eb885a5e">MQTTClientInit</a>(<a class="code" href="struct_m_q_t_t_client.html">MQTTClient</a>* c, <a class="code" href="struct_network.html">Network</a>* <a class="code" href="mqtt__paho_8c.html#a2d9a64328e83ad37af17cbeb5e73b5df">network</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> command_timeout_ms,</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* sendbuf, <span class="keywordtype">size_t</span> sendbuf_size, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* readbuf, <span class="keywordtype">size_t</span> readbuf_size)</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;{</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a1e1b117b259c9628c37fb3074fb73c91">ipstack</a> = <a class="code" href="mqtt__paho_8c.html#a2d9a64328e83ad37af17cbeb5e73b5df">network</a>;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    </div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &lt; <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a097fe1f2aed537fea5c806f7c231535e">MAX_MESSAGE_HANDLERS</a>; ++<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>)</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a884f6eaea90316853efd47232341810b">messageHandlers</a>[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].<a class="code" href="struct_m_q_t_t_client_1_1_message_handlers.html#a4c743a05485e337e93e3bfddeb8b0e48">topicFilter</a> = 0;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a6eef27b715d33fbc2e599564a8372c57">command_timeout_ms</a> = command_timeout_ms;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a2c90f267c7e9ace31dae3656f358cf06">buf</a> = sendbuf;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a11ccb60760e1aa9fea2b034ffbac399c">buf_size</a> = sendbuf_size;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a35da0eb5f42240e7e847fbeeb95c2ea9">readbuf</a> = readbuf;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a1726c74d4b606c44bbe8323c14612d49">readbuf_size</a> = readbuf_size;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a8296a1d0bdb7b6320c2016831e13a7d8">isconnected</a> = 0;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a068a622e9a5e7e331489bfc46abfb9c0">ping_outstanding</a> = 0;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a6f9d05e7190ad9de38b2497a82e2ad28">defaultMessageHandler</a> = NULL;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    c-&gt;<a class="code" href="struct_m_q_t_t_client.html#ac5007e87a2eca33a38c50ef2fa46fc8c">next_packetid</a> = 1;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a980a6cac528fade13ffdc5804a1d83bd">TimerInit</a>(&amp;c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a31088e9ce2a488c51f87e9d095592a0c">ping_timer</a>);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#if defined(MQTT_TASK)</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#ab1960b2b7e7c7bbc6e0d91ed55da13d2">MutexInit</a>(&amp;c-&gt;mutex);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;}</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> decodePacket(<a class="code" href="struct_m_q_t_t_client.html">MQTTClient</a>* c, <span class="keywordtype">int</span>* <a class="code" href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a>, <span class="keywordtype">int</span> <a class="code" href="multi-uv_8c.html#afb43b78d9a22f95e721353db4408304c">timeout</a>)</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;{</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordtype">int</span> multiplier = 1;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = 0;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="_m_q_t_t_packet_8c.html#a166c9117b1ef3db3292d475f300ca560">MAX_NO_OF_REMAINING_LENGTH_BYTES</a> = 4;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    *<a class="code" href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a> = 0;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">do</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_m_q_t_t_packet_8h.html#acc42076253600be964e110149b458971a5cbe32551f8036958703f757c0d1a857">MQTTPACKET_READ_ERROR</a>;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="keywordflow">if</span> (++<a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> &gt; <a class="code" href="_m_q_t_t_packet_8c.html#a166c9117b1ef3db3292d475f300ca560">MAX_NO_OF_REMAINING_LENGTH_BYTES</a>)</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_m_q_t_t_packet_8h.html#acc42076253600be964e110149b458971a5cbe32551f8036958703f757c0d1a857">MQTTPACKET_READ_ERROR</a>; <span class="comment">/* bad data */</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            <span class="keywordflow">goto</span> exit;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        }</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a1e1b117b259c9628c37fb3074fb73c91">ipstack</a>-&gt;<a class="code" href="struct_network.html#abb56b43e21aa03a9ae608baf7d5b6ad0">mqttread</a>(c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a1e1b117b259c9628c37fb3074fb73c91">ipstack</a>, &amp;<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>, 1, <a class="code" href="multi-uv_8c.html#afb43b78d9a22f95e721353db4408304c">timeout</a>);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> != 1)</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            <span class="keywordflow">goto</span> exit;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        *<a class="code" href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a> += (<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &amp; 127) * multiplier;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        multiplier *= 128;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    } <span class="keywordflow">while</span> ((<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &amp; 128) != 0);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;exit:</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;}</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> readPacket(<a class="code" href="struct_m_q_t_t_client.html">MQTTClient</a>* c, <a class="code" href="struct_timer.html">Timer</a>* <a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>)</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;{</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="union_m_q_t_t_header.html">MQTTHeader</a> header = {0};</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = 0;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordtype">int</span> rem_len = 0;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment">/* 1. read the header byte.  This has the packet type in it */</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordflow">if</span> (c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a1e1b117b259c9628c37fb3074fb73c91">ipstack</a>-&gt;<a class="code" href="struct_network.html#abb56b43e21aa03a9ae608baf7d5b6ad0">mqttread</a>(c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a1e1b117b259c9628c37fb3074fb73c91">ipstack</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a35da0eb5f42240e7e847fbeeb95c2ea9">readbuf</a>, 1, <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#ade4fb2f5ebbcd5b3d8e55f5f2370a8e2">TimerLeftMS</a>(<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>)) != 1)</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keywordflow">goto</span> exit;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = 1;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="comment">/* 2. read the remaining length.  This is variable in itself */</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    decodePacket(c, &amp;rem_len, <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#ade4fb2f5ebbcd5b3d8e55f5f2370a8e2">TimerLeftMS</a>(<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>));</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> += <a class="code" href="_m_q_t_t_packet_8c.html#a5464b2e101bc4dc199e58486c4ffaa9f">MQTTPacket_encode</a>(c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a35da0eb5f42240e7e847fbeeb95c2ea9">readbuf</a> + 1, rem_len); <span class="comment">/* put the original remaining length back into the buffer */</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">/* 3. read the rest of the buffer using a callback to supply the rest of the data */</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">if</span> (rem_len &gt; 0 &amp;&amp; (c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a1e1b117b259c9628c37fb3074fb73c91">ipstack</a>-&gt;<a class="code" href="struct_network.html#abb56b43e21aa03a9ae608baf7d5b6ad0">mqttread</a>(c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a1e1b117b259c9628c37fb3074fb73c91">ipstack</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a35da0eb5f42240e7e847fbeeb95c2ea9">readbuf</a> + <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>, rem_len, <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#ade4fb2f5ebbcd5b3d8e55f5f2370a8e2">TimerLeftMS</a>(<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>)) != rem_len))</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keywordflow">goto</span> exit;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    header.<a class="code" href="union_m_q_t_t_header.html#a9b2c40029ba354713e46b76ca74b2420">byte</a> = c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a35da0eb5f42240e7e847fbeeb95c2ea9">readbuf</a>[0];</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = header.<a class="code" href="union_m_q_t_t_header.html#af366887430d3f755e398cea31022c1a3">bits</a>.<a class="code" href="union_m_q_t_t_header.html#aab9204aefddf8f4f6c6d6f58f4c1ab1c">type</a>;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;exit:</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">// assume topic filter and name is in correct format</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">// # can only be at end</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">// + and # can only be next to separator</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> isTopicMatched(<span class="keywordtype">char</span>* topicFilter, <a class="code" href="struct_m_q_t_t_string.html">MQTTString</a>* topicName)</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;{</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordtype">char</span>* curf = topicFilter;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordtype">char</span>* curn = topicName-&gt;<a class="code" href="struct_m_q_t_t_string.html#a78847a9d8950eeefa8e270a5c67c9a35">lenstring</a>.<a class="code" href="struct_m_q_t_t_len_string.html#ac875ffa1e0af752d17a10be055c33377">data</a>;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordtype">char</span>* curn_end = curn + topicName-&gt;<a class="code" href="struct_m_q_t_t_string.html#a78847a9d8950eeefa8e270a5c67c9a35">lenstring</a>.<a class="code" href="struct_m_q_t_t_len_string.html#a7eb20db2b77f5e224e12d94c78573fa3">len</a>;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    </div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">while</span> (*curf &amp;&amp; curn &lt; curn_end)</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">if</span> (*curn == <span class="charliteral">&#39;/&#39;</span> &amp;&amp; *curf != <span class="charliteral">&#39;/&#39;</span>)</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keywordflow">if</span> (*curf != <span class="charliteral">&#39;+&#39;</span> &amp;&amp; *curf != <span class="charliteral">&#39;#&#39;</span> &amp;&amp; *curf != *curn)</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">if</span> (*curf == <span class="charliteral">&#39;+&#39;</span>)</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        {   <span class="comment">// skip until we meet the next separator, or end of string</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="keywordtype">char</span>* nextpos = curn + 1;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            <span class="keywordflow">while</span> (nextpos &lt; curn_end &amp;&amp; *nextpos != <span class="charliteral">&#39;/&#39;</span>)</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                nextpos = ++curn + 1;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*curf == <span class="charliteral">&#39;#&#39;</span>)</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            curn = curn_end - 1;    <span class="comment">// skip until end of string</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        curf++;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        curn++;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    };</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    </div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">return</span> (curn == curn_end) &amp;&amp; (*curf == <span class="charliteral">&#39;\0&#39;</span>);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="_m_q_t_t_client_8c.html#a9ee5e1a3021798303d1efab7996dbd36">  162</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="_m_q_t_t_client_8c.html#a9ee5e1a3021798303d1efab7996dbd36">deliverMessage</a>(<a class="code" href="struct_m_q_t_t_client.html">MQTTClient</a>* c, <a class="code" href="struct_m_q_t_t_string.html">MQTTString</a>* topicName, <a class="code" href="struct_m_q_t_t_message.html">MQTTMessage</a>* message)</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;{</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">// we have to find the right message handler - indexed by topic</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &lt; <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a097fe1f2aed537fea5c806f7c231535e">MAX_MESSAGE_HANDLERS</a>; ++<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>)</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keywordflow">if</span> (c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a884f6eaea90316853efd47232341810b">messageHandlers</a>[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].<a class="code" href="struct_m_q_t_t_client_1_1_message_handlers.html#a4c743a05485e337e93e3bfddeb8b0e48">topicFilter</a> != 0 &amp;&amp; (<a class="code" href="_m_q_t_t_packet_8c.html#a37bbf8101236ecfae4b6bb2e63c10075">MQTTPacket_equals</a>(topicName, (<span class="keywordtype">char</span>*)c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a884f6eaea90316853efd47232341810b">messageHandlers</a>[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].<a class="code" href="struct_m_q_t_t_client_1_1_message_handlers.html#a4c743a05485e337e93e3bfddeb8b0e48">topicFilter</a>) ||</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                isTopicMatched((<span class="keywordtype">char</span>*)c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a884f6eaea90316853efd47232341810b">messageHandlers</a>[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].<a class="code" href="struct_m_q_t_t_client_1_1_message_handlers.html#a4c743a05485e337e93e3bfddeb8b0e48">topicFilter</a>, topicName)))</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            <span class="keywordflow">if</span> (c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a884f6eaea90316853efd47232341810b">messageHandlers</a>[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].<a class="code" href="struct_m_q_t_t_client_1_1_message_handlers.html#a078ecd719784ee968e078cd7114a8122">fp</a> != NULL)</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                <a class="code" href="struct_message_data.html">MessageData</a> md;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                NewMessageData(&amp;md, topicName, message);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a884f6eaea90316853efd47232341810b">messageHandlers</a>[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].<a class="code" href="struct_m_q_t_t_client_1_1_message_handlers.html#a078ecd719784ee968e078cd7114a8122">fp</a>(&amp;md);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a>;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            }</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        }</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    }</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    </div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> == <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a> &amp;&amp; c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a6f9d05e7190ad9de38b2497a82e2ad28">defaultMessageHandler</a> != NULL) </div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <a class="code" href="struct_message_data.html">MessageData</a> md;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        NewMessageData(&amp;md, topicName, message);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a6f9d05e7190ad9de38b2497a82e2ad28">defaultMessageHandler</a>(&amp;md);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a>;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    }   </div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    </div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="_m_q_t_t_client_8c.html#aec16090cf96b12cdfc44acda8908e6a2">  195</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="_m_q_t_t_client_8c.html#aec16090cf96b12cdfc44acda8908e6a2">keepalive</a>(<a class="code" href="struct_m_q_t_t_client.html">MQTTClient</a>* c)</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;{</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">if</span> (c-&gt;<a class="code" href="struct_m_q_t_t_client.html#ab44054d233d95140c1913d4f48a5cd0e">keepAliveInterval</a> == 0)</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a>;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">goto</span> exit;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a1d5e89eb91a028bdd0523a2d6777b214">TimerIsExpired</a>(&amp;c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a31088e9ce2a488c51f87e9d095592a0c">ping_timer</a>))</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="keywordflow">if</span> (!c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a068a622e9a5e7e331489bfc46abfb9c0">ping_outstanding</a>)</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <a class="code" href="struct_timer.html">Timer</a> <a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a980a6cac528fade13ffdc5804a1d83bd">TimerInit</a>(&amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#ad436e72ddaa1056d56874fc4ef18ddd3">TimerCountdownMS</a>(&amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>, 1000);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = <a class="code" href="_m_q_t_t_connect_8h.html#abd5c098c9e4a5cf2f5607e4a9db6c43b">MQTTSerialize_pingreq</a>(c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a2c90f267c7e9ace31dae3656f358cf06">buf</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a11ccb60760e1aa9fea2b034ffbac399c">buf_size</a>);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> &gt; 0 &amp;&amp; (<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = sendPacket(c, <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>, &amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>)) == <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a>) <span class="comment">// send the ping packet</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a068a622e9a5e7e331489bfc46abfb9c0">ping_outstanding</a> = 1;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        }</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;exit:</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="_m_q_t_t_client_8c.html#a2bcf85f488f98b6d8e539f37c37eab78">  223</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="_m_q_t_t_client_8c.html#a2bcf85f488f98b6d8e539f37c37eab78">cycle</a>(<a class="code" href="struct_m_q_t_t_client.html">MQTTClient</a>* c, <a class="code" href="struct_timer.html">Timer</a>* <a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>)</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;{</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="comment">// read the socket, see what work is due</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> packet_type = readPacket(c, <a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    </div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = 0,</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">switch</span> (packet_type)</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    {</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1aa636430e8d9563704f7328824d6bc0a5">CONNACK</a>:</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1afbeab5fd4cdcb49a725fc27099c16cc2">PUBACK</a>:</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1abe48cb8225101545fd55752f2534348d">SUBACK</a>:</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1abd1a204dcfa4933760cd12e779f36fc5">PUBLISH</a>:</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            <a class="code" href="struct_m_q_t_t_string.html">MQTTString</a> topicName;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            <a class="code" href="struct_m_q_t_t_message.html">MQTTMessage</a> msg;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            <span class="keywordtype">int</span> intQoS;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="_m_q_t_t_deserialize_publish_8c.html#a72900aeb8c3a63ea49a61020fd7dd45a">MQTTDeserialize_publish</a>(&amp;msg.<a class="code" href="struct_m_q_t_t_message.html#ae5c0b6be79df260085c568b493504d02">dup</a>, &amp;intQoS, &amp;msg.<a class="code" href="struct_m_q_t_t_message.html#aa903bbd4711f5d32d74b62177e55f600">retained</a>, &amp;msg.<a class="code" href="struct_m_q_t_t_message.html#af11a16d150c3b71b245da58c1767975e">id</a>, &amp;topicName,</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;               (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>**)&amp;msg.<a class="code" href="struct_m_q_t_t_message.html#aa19661c630c682cf7f8a4c07f6e76eb8">payload</a>, (<span class="keywordtype">int</span>*)&amp;msg.<a class="code" href="struct_m_q_t_t_message.html#aafb263922d2283f05264a71b1dedb420">payloadlen</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a35da0eb5f42240e7e847fbeeb95c2ea9">readbuf</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a1726c74d4b606c44bbe8323c14612d49">readbuf_size</a>) != 1)</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                <span class="keywordflow">goto</span> exit;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            msg.<a class="code" href="struct_m_q_t_t_message.html#a790d3de41808e7486ad6d92417361649">qos</a> = (<span class="keyword">enum</span> <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a2a5744b0ca3f049979e6777b75d7a634">QoS</a>)intQoS;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <a class="code" href="curl__printf_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>(<span class="stringliteral">&quot;X1\n&quot;</span>);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <a class="code" href="_m_q_t_t_client_8c.html#a9ee5e1a3021798303d1efab7996dbd36">deliverMessage</a>(c, &amp;topicName, &amp;msg);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            <a class="code" href="curl__printf_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>(<span class="stringliteral">&quot;Publish ... qos = %d\n&quot;</span>, msg.<a class="code" href="struct_m_q_t_t_message.html#a790d3de41808e7486ad6d92417361649">qos</a>);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            <span class="keywordflow">if</span> (msg.<a class="code" href="struct_m_q_t_t_message.html#a790d3de41808e7486ad6d92417361649">qos</a> != <a class="code" href="_pub_sub_client_8h.html#a396015e492b0fee8da37c7168d9cdb33a7d2552996d8248e57b28f5328fc1e003">QOS0</a>)</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            {</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                <span class="keywordflow">if</span> (msg.<a class="code" href="struct_m_q_t_t_message.html#a790d3de41808e7486ad6d92417361649">qos</a> == <a class="code" href="_pub_sub_client_8h.html#a396015e492b0fee8da37c7168d9cdb33a2102e003f98d5f996f203b66b2827764">QOS1</a>) {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                    <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = <a class="code" href="_m_q_t_t_packet_8h.html#acc606fd1a635e8603c1418c81bca4ecf">MQTTSerialize_ack</a>(c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a2c90f267c7e9ace31dae3656f358cf06">buf</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a11ccb60760e1aa9fea2b034ffbac399c">buf_size</a>, <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1afbeab5fd4cdcb49a725fc27099c16cc2">PUBACK</a>, 0, msg.<a class="code" href="struct_m_q_t_t_message.html#af11a16d150c3b71b245da58c1767975e">id</a>);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg.<a class="code" href="struct_m_q_t_t_message.html#a790d3de41808e7486ad6d92417361649">qos</a> == <a class="code" href="_pub_sub_client_8h.html#a396015e492b0fee8da37c7168d9cdb33a00677da1fb3fc1bdfa05c33dcaa3ad7c">QOS2</a>) {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                    <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = <a class="code" href="_m_q_t_t_packet_8h.html#acc606fd1a635e8603c1418c81bca4ecf">MQTTSerialize_ack</a>(c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a2c90f267c7e9ace31dae3656f358cf06">buf</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a11ccb60760e1aa9fea2b034ffbac399c">buf_size</a>, <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a1e2c2a84e88263f41d3b9bed26bf4e89">PUBREC</a>, 0, msg.<a class="code" href="struct_m_q_t_t_message.html#af11a16d150c3b71b245da58c1767975e">id</a>);</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                } <span class="keywordflow">if</span> (<a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> &lt;= 0) {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                    <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                    <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = sendPacket(c, <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>, <a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> == <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>) {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                    <span class="keywordflow">goto</span> exit; <span class="comment">// there was a problem</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                }</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            }</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a1e2c2a84e88263f41d3b9bed26bf4e89">PUBREC</a>:</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> mypacketid;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> dup, <a class="code" href="form_8d.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="_m_q_t_t_deserialize_publish_8c.html#aef7f705e677e0467230a24a1134ec1f2">MQTTDeserialize_ack</a>(&amp;<a class="code" href="form_8d.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>, &amp;dup, &amp;mypacketid, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a35da0eb5f42240e7e847fbeeb95c2ea9">readbuf</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a1726c74d4b606c44bbe8323c14612d49">readbuf_size</a>) != 1)</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = <a class="code" href="_m_q_t_t_packet_8h.html#acc606fd1a635e8603c1418c81bca4ecf">MQTTSerialize_ack</a>(c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a2c90f267c7e9ace31dae3656f358cf06">buf</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a11ccb60760e1aa9fea2b034ffbac399c">buf_size</a>, <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1ad6c983841148fc8d12e721038df5bb85">PUBREL</a>, 0, mypacketid)) &lt;= 0)</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = sendPacket(c, <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>, <a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>)) != <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a>) <span class="comment">// send the PUBREL packet</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>; <span class="comment">// there was a problem</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> == <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>)</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                <span class="keywordflow">goto</span> exit; <span class="comment">// there was a problem</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        }</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1acae9f9c28803a317d9302650dc7dab0c">PUBCOMP</a>:</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a1a3a12a071fc8874e9518b1c94aaef30">PINGRESP</a>:</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a068a622e9a5e7e331489bfc46abfb9c0">ping_outstanding</a> = 0;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    }</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="_m_q_t_t_client_8c.html#aec16090cf96b12cdfc44acda8908e6a2">keepalive</a>(c);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;exit:</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> == <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a>)</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = packet_type;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;}</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="_c_2src_2_m_q_t_t_client_8h.html#a58c730449140aeb34a09d9ce03f63420">  295</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="_m_q_t_t_client_8c.html#a9f16d095bec66d37341c2bc282e95a8b">MQTTYield</a>(<a class="code" href="struct_m_q_t_t_client.html">MQTTClient</a>* c, <span class="keywordtype">int</span> timeout_ms)</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;{</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a>;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <a class="code" href="struct_timer.html">Timer</a> <a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a980a6cac528fade13ffdc5804a1d83bd">TimerInit</a>(&amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#ad436e72ddaa1056d56874fc4ef18ddd3">TimerCountdownMS</a>(&amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>, timeout_ms);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">do</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="_m_q_t_t_client_8c.html#a2bcf85f488f98b6d8e539f37c37eab78">cycle</a>(c, &amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>) == <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>)</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        }</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    } <span class="keywordflow">while</span> (!<a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a1d5e89eb91a028bdd0523a2d6777b214">TimerIsExpired</a>(&amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>));</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        </div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;}</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno"><a class="line" href="_m_q_t_t_client_8c.html#ad461e22b960431333e9f27c658eafce0">  316</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="_m_q_t_t_client_8c.html#ad461e22b960431333e9f27c658eafce0">MQTTRun</a>(<span class="keywordtype">void</span>* parm)</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;{</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <a class="code" href="struct_timer.html">Timer</a> <a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <a class="code" href="struct_m_q_t_t_client.html">MQTTClient</a>* c = (<a class="code" href="struct_m_q_t_t_client.html">MQTTClient</a>*)parm;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a980a6cac528fade13ffdc5804a1d83bd">TimerInit</a>(&amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">while</span> (1)</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    {</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="preprocessor">#if defined(MQTT_TASK)</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a343e2b852184ade4f93c9edab5c8a88b">MutexLock</a>(&amp;c-&gt;mutex);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#ad436e72ddaa1056d56874fc4ef18ddd3">TimerCountdownMS</a>(&amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>, 500); <span class="comment">/* Don&#39;t wait too long if no traffic is incoming */</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <a class="code" href="_m_q_t_t_client_8c.html#a2bcf85f488f98b6d8e539f37c37eab78">cycle</a>(c, &amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="preprocessor">#if defined(MQTT_TASK)</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a6f5a157ddcad639555da72f4d6259ac6">MutexUnlock</a>(&amp;c-&gt;mutex);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    } </div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;}</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="preprocessor">#if defined(MQTT_TASK)</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="keywordtype">int</span> MQTTStartTask(<a class="code" href="struct_m_q_t_t_client.html">MQTTClient</a>* client)</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;{</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a3d29c95540245ee7f0db058d12f0cb76">ThreadStart</a>(&amp;client-&gt;thread, &amp;<a class="code" href="_m_q_t_t_client_8c.html#ad461e22b960431333e9f27c658eafce0">MQTTRun</a>, client);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;}</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno"><a class="line" href="_m_q_t_t_client_8c.html#a418e2bc4b929202f5ea4008beddc14d0">  345</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="_m_q_t_t_client_8c.html#a418e2bc4b929202f5ea4008beddc14d0">waitfor</a>(<a class="code" href="struct_m_q_t_t_client.html">MQTTClient</a>* c, <span class="keywordtype">int</span> packet_type, <a class="code" href="struct_timer.html">Timer</a>* <a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>)</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;{</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    </div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordflow">do</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    {</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a1d5e89eb91a028bdd0523a2d6777b214">TimerIsExpired</a>(<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>))</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <span class="keywordflow">break</span>; <span class="comment">// we timed out</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    }</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">while</span> ((<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_m_q_t_t_client_8c.html#a2bcf85f488f98b6d8e539f37c37eab78">cycle</a>(c, <a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>)) != packet_type);  </div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    </div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;}</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno"><a class="line" href="_c_2src_2_m_q_t_t_client_8h.html#aaabae251a5f9ac323aa5aafdb5d6e661">  360</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="_m_q_t_t_client_8c.html#aa1a8424f1f1919e34a710f8508822c88">MQTTConnect</a>(<a class="code" href="struct_m_q_t_t_client.html">MQTTClient</a>* c, <a class="code" href="struct_m_q_t_t_packet__connect_data.html">MQTTPacket_connectData</a>* <a class="code" href="fail-early_8d.html#a188ba6f263db5df5a64e1cc11fb0c098">options</a>)</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;{</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <a class="code" href="struct_timer.html">Timer</a> connect_timer;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="struct_m_q_t_t_packet__connect_data.html">MQTTPacket_connectData</a> default_options = <a class="code" href="_m_q_t_t_connect_8h.html#a3e475310d0fdc12dfb3ae2d4e802bb7b">MQTTPacket_connectData_initializer</a>;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = 0;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="preprocessor">#if defined(MQTT_TASK)</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a343e2b852184ade4f93c9edab5c8a88b">MutexLock</a>(&amp;c-&gt;mutex);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">if</span> (c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a8296a1d0bdb7b6320c2016831e13a7d8">isconnected</a>) <span class="comment">/* don&#39;t send connect packet again if we are already connected */</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">goto</span> exit;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    </div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a980a6cac528fade13ffdc5804a1d83bd">TimerInit</a>(&amp;connect_timer);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#ad436e72ddaa1056d56874fc4ef18ddd3">TimerCountdownMS</a>(&amp;connect_timer, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a6eef27b715d33fbc2e599564a8372c57">command_timeout_ms</a>);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="fail-early_8d.html#a188ba6f263db5df5a64e1cc11fb0c098">options</a> == 0)</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <a class="code" href="fail-early_8d.html#a188ba6f263db5df5a64e1cc11fb0c098">options</a> = &amp;default_options; <span class="comment">/* set default options if none were supplied */</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    </div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    c-&gt;<a class="code" href="struct_m_q_t_t_client.html#ab44054d233d95140c1913d4f48a5cd0e">keepAliveInterval</a> = <a class="code" href="fail-early_8d.html#a188ba6f263db5df5a64e1cc11fb0c098">options</a>-&gt;keepAliveInterval;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a22de0fe4526bbfef0fc9f8a7b668a6d6">TimerCountdown</a>(&amp;c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a31088e9ce2a488c51f87e9d095592a0c">ping_timer</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#ab44054d233d95140c1913d4f48a5cd0e">keepAliveInterval</a>);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = <a class="code" href="_m_q_t_t_connect_8h.html#a612f9e23a665b10198fc59e676dc94f9">MQTTSerialize_connect</a>(c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a2c90f267c7e9ace31dae3656f358cf06">buf</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a11ccb60760e1aa9fea2b034ffbac399c">buf_size</a>, <a class="code" href="fail-early_8d.html#a188ba6f263db5df5a64e1cc11fb0c098">options</a>)) &lt;= 0) {</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keywordflow">goto</span> exit;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = sendPacket(c, <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>, &amp;connect_timer)) != <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a>) {  <span class="comment">// send the connect packet</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keywordflow">goto</span> exit; <span class="comment">// there was a problem</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    }</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    </div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="comment">// this will be a blocking call, wait for the connack</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="_m_q_t_t_client_8c.html#a418e2bc4b929202f5ea4008beddc14d0">waitfor</a>(c, <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1aa636430e8d9563704f7328824d6bc0a5">CONNACK</a>, &amp;connect_timer) == <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1aa636430e8d9563704f7328824d6bc0a5">CONNACK</a>)</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    {</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> connack_rc = 255;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> sessionPresent = 0;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="_m_q_t_t_connect_8h.html#a356cb5639f3d0d6d002b4a144a58f11a">MQTTDeserialize_connack</a>(&amp;sessionPresent, &amp;connack_rc, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a35da0eb5f42240e7e847fbeeb95c2ea9">readbuf</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a1726c74d4b606c44bbe8323c14612d49">readbuf_size</a>) == 1) {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = connack_rc;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        }</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        }</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    }</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    }</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    </div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;exit:</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> == <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a>) {</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <a class="code" href="curl__printf_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>(<span class="stringliteral">&quot;Now connected!\n&quot;</span>);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a8296a1d0bdb7b6320c2016831e13a7d8">isconnected</a> = 1;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    }</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="preprocessor">#if defined(MQTT_TASK)</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a6f5a157ddcad639555da72f4d6259ac6">MutexUnlock</a>(&amp;c-&gt;mutex);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;}</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno"><a class="line" href="_c_2src_2_m_q_t_t_client_8h.html#a0e89ec7a59f29b38a1c8a20c2b4c5553">  419</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="_m_q_t_t_client_8c.html#acd7fd9ceb34eb5ed2a294c960f3361ed">MQTTSubscribe</a>(<a class="code" href="struct_m_q_t_t_client.html">MQTTClient</a>* c, <span class="keyword">const</span> <span class="keywordtype">char</span>* topicFilter, <span class="keyword">enum</span> <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a2a5744b0ca3f049979e6777b75d7a634">QoS</a> qos, <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a57263a23e77cb842104b9a1d39dba53e">messageHandler</a> <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a57263a23e77cb842104b9a1d39dba53e">messageHandler</a>)</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;{ </div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>;  </div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <a class="code" href="struct_timer.html">Timer</a> <a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = 0;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <a class="code" href="struct_m_q_t_t_string.html">MQTTString</a> topic = <a class="code" href="_m_q_t_t_packet_8h.html#a34afa3fe58c14803eec9957875c70342">MQTTString_initializer</a>;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    topic.<a class="code" href="struct_m_q_t_t_string.html#a00126e87a6bbc0ddd66918920fd4a425">cstring</a> = (<span class="keywordtype">char</span> *)topicFilter;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    </div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="preprocessor">#if defined(MQTT_TASK)</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a343e2b852184ade4f93c9edab5c8a88b">MutexLock</a>(&amp;c-&gt;mutex);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">if</span> (!c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a8296a1d0bdb7b6320c2016831e13a7d8">isconnected</a>) {</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <a class="code" href="curl__printf_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a>(<span class="stringliteral">&quot;Not connected\n&quot;</span>);</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="keywordflow">goto</span> exit;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    }</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a980a6cac528fade13ffdc5804a1d83bd">TimerInit</a>(&amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#ad436e72ddaa1056d56874fc4ef18ddd3">TimerCountdownMS</a>(&amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a6eef27b715d33fbc2e599564a8372c57">command_timeout_ms</a>);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    </div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = <a class="code" href="_m_q_t_t_subscribe_8h.html#aa88712c28d8b9ad842d4d9c7453c8528">MQTTSerialize_subscribe</a>(c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a2c90f267c7e9ace31dae3656f358cf06">buf</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a11ccb60760e1aa9fea2b034ffbac399c">buf_size</a>, 0, getNextPacketId(c), 1, &amp;topic, (<span class="keywordtype">int</span>*)&amp;qos);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> &lt;= 0)</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="keywordflow">goto</span> exit;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = sendPacket(c, <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>, &amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>)) != <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a>) <span class="comment">// send the subscribe packet</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="keywordflow">goto</span> exit;             <span class="comment">// there was a problem</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    </div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="_m_q_t_t_client_8c.html#a418e2bc4b929202f5ea4008beddc14d0">waitfor</a>(c, <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1abe48cb8225101545fd55752f2534348d">SUBACK</a>, &amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>) == <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1abe48cb8225101545fd55752f2534348d">SUBACK</a>)      <span class="comment">// wait for suback </span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    {</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <span class="keywordtype">int</span> count = 0, grantedQoS = -1;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> mypacketid;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="_m_q_t_t_subscribe_8h.html#a67a03482ca40e354dec5abc8561004e4">MQTTDeserialize_suback</a>(&amp;mypacketid, 1, &amp;count, &amp;grantedQoS, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a35da0eb5f42240e7e847fbeeb95c2ea9">readbuf</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a1726c74d4b606c44bbe8323c14612d49">readbuf_size</a>) == 1)</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = grantedQoS; <span class="comment">// 0, 1, 2 or 0x80 </span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> != 0x80)</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        {</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &lt; <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a097fe1f2aed537fea5c806f7c231535e">MAX_MESSAGE_HANDLERS</a>; ++<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>)</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            {</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                <span class="keywordflow">if</span> (c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a884f6eaea90316853efd47232341810b">messageHandlers</a>[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].<a class="code" href="struct_m_q_t_t_client_1_1_message_handlers.html#a4c743a05485e337e93e3bfddeb8b0e48">topicFilter</a> == 0)</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                {</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                    c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a884f6eaea90316853efd47232341810b">messageHandlers</a>[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].<a class="code" href="struct_m_q_t_t_client_1_1_message_handlers.html#a4c743a05485e337e93e3bfddeb8b0e48">topicFilter</a> = topicFilter;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                    c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a884f6eaea90316853efd47232341810b">messageHandlers</a>[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].<a class="code" href="struct_m_q_t_t_client_1_1_message_handlers.html#a078ecd719784ee968e078cd7114a8122">fp</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a57263a23e77cb842104b9a1d39dba53e">messageHandler</a>;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                    <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = 0;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                }</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            }</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        }</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    }</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordflow">else</span> </div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        </div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;exit:</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="preprocessor">#if defined(MQTT_TASK)</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a6f5a157ddcad639555da72f4d6259ac6">MutexUnlock</a>(&amp;c-&gt;mutex);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;}</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno"><a class="line" href="_c_2src_2_m_q_t_t_client_8h.html#a304c6771fad97479959e74e697d65abf">  477</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="_m_q_t_t_client_8c.html#a863d46972c7a248001a8d9e26d0dc9cc">MQTTUnsubscribe</a>(<a class="code" href="struct_m_q_t_t_client.html">MQTTClient</a>* c, <span class="keyword">const</span> <span class="keywordtype">char</span>* topicFilter)</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;{   </div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <a class="code" href="struct_timer.html">Timer</a> <a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>;    </div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <a class="code" href="struct_m_q_t_t_string.html">MQTTString</a> topic = <a class="code" href="_m_q_t_t_packet_8h.html#a34afa3fe58c14803eec9957875c70342">MQTTString_initializer</a>;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    topic.<a class="code" href="struct_m_q_t_t_string.html#a00126e87a6bbc0ddd66918920fd4a425">cstring</a> = (<span class="keywordtype">char</span> *)topicFilter;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = 0;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="preprocessor">#if defined(MQTT_TASK)</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a343e2b852184ade4f93c9edab5c8a88b">MutexLock</a>(&amp;c-&gt;mutex);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">if</span> (!c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a8296a1d0bdb7b6320c2016831e13a7d8">isconnected</a>)</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="keywordflow">goto</span> exit;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a980a6cac528fade13ffdc5804a1d83bd">TimerInit</a>(&amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#ad436e72ddaa1056d56874fc4ef18ddd3">TimerCountdownMS</a>(&amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a6eef27b715d33fbc2e599564a8372c57">command_timeout_ms</a>);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    </div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = <a class="code" href="_m_q_t_t_unsubscribe_8h.html#a9f16e69d4c62e3a9ef1d2734510bc016">MQTTSerialize_unsubscribe</a>(c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a2c90f267c7e9ace31dae3656f358cf06">buf</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a11ccb60760e1aa9fea2b034ffbac399c">buf_size</a>, 0, getNextPacketId(c), 1, &amp;topic)) &lt;= 0)</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <span class="keywordflow">goto</span> exit;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = sendPacket(c, <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>, &amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>)) != <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a>) <span class="comment">// send the subscribe packet</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="keywordflow">goto</span> exit; <span class="comment">// there was a problem</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    </div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="_m_q_t_t_client_8c.html#a418e2bc4b929202f5ea4008beddc14d0">waitfor</a>(c, <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a722b573f419f3cdb3b2263f7dd00a3ae">UNSUBACK</a>, &amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>) == <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a722b573f419f3cdb3b2263f7dd00a3ae">UNSUBACK</a>)</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    {</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> mypacketid;  <span class="comment">// should be the same as the packetid above</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="_m_q_t_t_unsubscribe_8h.html#a959e05d42b06a5c6a7cecbaa61bee68d">MQTTDeserialize_unsuback</a>(&amp;mypacketid, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a35da0eb5f42240e7e847fbeeb95c2ea9">readbuf</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a1726c74d4b606c44bbe8323c14612d49">readbuf_size</a>) == 1)</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = 0; </div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    }</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    </div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;exit:</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="preprocessor">#if defined(MQTT_TASK)</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a6f5a157ddcad639555da72f4d6259ac6">MutexUnlock</a>(&amp;c-&gt;mutex);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;}</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div><div class="line"><a name="l00516"></a><span class="lineno"><a class="line" href="_c_2src_2_m_q_t_t_client_8h.html#adec8c6f40312ff6404a2ed2b38db6e6b">  516</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="_m_q_t_t_client_8c.html#a7e8f2a81795698d3612c3d16cad165f7">MQTTPublish</a>(<a class="code" href="struct_m_q_t_t_client.html">MQTTClient</a>* c, <span class="keyword">const</span> <span class="keywordtype">char</span>* topicName, <a class="code" href="struct_m_q_t_t_message.html">MQTTMessage</a>* message)</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;{</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <a class="code" href="struct_timer.html">Timer</a> <a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>;   </div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <a class="code" href="struct_m_q_t_t_string.html">MQTTString</a> topic = <a class="code" href="_m_q_t_t_packet_8h.html#a34afa3fe58c14803eec9957875c70342">MQTTString_initializer</a>;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    topic.<a class="code" href="struct_m_q_t_t_string.html#a00126e87a6bbc0ddd66918920fd4a425">cstring</a> = (<span class="keywordtype">char</span> *)topicName;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = 0;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="preprocessor">#if defined(MQTT_TASK)</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a343e2b852184ade4f93c9edab5c8a88b">MutexLock</a>(&amp;c-&gt;mutex);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordflow">if</span> (!c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a8296a1d0bdb7b6320c2016831e13a7d8">isconnected</a>)</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="keywordflow">goto</span> exit;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a980a6cac528fade13ffdc5804a1d83bd">TimerInit</a>(&amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>);</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#ad436e72ddaa1056d56874fc4ef18ddd3">TimerCountdownMS</a>(&amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a6eef27b715d33fbc2e599564a8372c57">command_timeout_ms</a>);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keywordflow">if</span> (message-&gt;<a class="code" href="struct_m_q_t_t_message.html#a790d3de41808e7486ad6d92417361649">qos</a> == <a class="code" href="_pub_sub_client_8h.html#a396015e492b0fee8da37c7168d9cdb33a2102e003f98d5f996f203b66b2827764">QOS1</a> || message-&gt;<a class="code" href="struct_m_q_t_t_message.html#a790d3de41808e7486ad6d92417361649">qos</a> == <a class="code" href="_pub_sub_client_8h.html#a396015e492b0fee8da37c7168d9cdb33a00677da1fb3fc1bdfa05c33dcaa3ad7c">QOS2</a>)</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        message-&gt;<a class="code" href="struct_m_q_t_t_message.html#af11a16d150c3b71b245da58c1767975e">id</a> = getNextPacketId(c);</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    </div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = <a class="code" href="_m_q_t_t_publish_8h.html#a65f4a3f8efdd0c3c67d980adbaa9adb5">MQTTSerialize_publish</a>(c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a2c90f267c7e9ace31dae3656f358cf06">buf</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a11ccb60760e1aa9fea2b034ffbac399c">buf_size</a>, 0, message-&gt;<a class="code" href="struct_m_q_t_t_message.html#a790d3de41808e7486ad6d92417361649">qos</a>, message-&gt;<a class="code" href="struct_m_q_t_t_message.html#aa903bbd4711f5d32d74b62177e55f600">retained</a>, message-&gt;<a class="code" href="struct_m_q_t_t_message.html#af11a16d150c3b71b245da58c1767975e">id</a>, </div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;              topic, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)message-&gt;<a class="code" href="struct_m_q_t_t_message.html#aa19661c630c682cf7f8a4c07f6e76eb8">payload</a>, message-&gt;<a class="code" href="struct_m_q_t_t_message.html#aafb263922d2283f05264a71b1dedb420">payloadlen</a>);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> &lt;= 0)</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="keywordflow">goto</span> exit;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = sendPacket(c, <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>, &amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>)) != <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a>) <span class="comment">// send the subscribe packet</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="keywordflow">goto</span> exit; <span class="comment">// there was a problem</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    </div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordflow">if</span> (message-&gt;<a class="code" href="struct_m_q_t_t_message.html#a790d3de41808e7486ad6d92417361649">qos</a> == <a class="code" href="_pub_sub_client_8h.html#a396015e492b0fee8da37c7168d9cdb33a2102e003f98d5f996f203b66b2827764">QOS1</a>)</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    {</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="_m_q_t_t_client_8c.html#a418e2bc4b929202f5ea4008beddc14d0">waitfor</a>(c, <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1afbeab5fd4cdcb49a725fc27099c16cc2">PUBACK</a>, &amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>) == <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1afbeab5fd4cdcb49a725fc27099c16cc2">PUBACK</a>)</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        {</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> mypacketid;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> dup, <a class="code" href="form_8d.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="_m_q_t_t_deserialize_publish_8c.html#aef7f705e677e0467230a24a1134ec1f2">MQTTDeserialize_ack</a>(&amp;<a class="code" href="form_8d.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>, &amp;dup, &amp;mypacketid, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a35da0eb5f42240e7e847fbeeb95c2ea9">readbuf</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a1726c74d4b606c44bbe8323c14612d49">readbuf_size</a>) != 1)</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        }</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    }</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (message-&gt;<a class="code" href="struct_m_q_t_t_message.html#a790d3de41808e7486ad6d92417361649">qos</a> == <a class="code" href="_pub_sub_client_8h.html#a396015e492b0fee8da37c7168d9cdb33a00677da1fb3fc1bdfa05c33dcaa3ad7c">QOS2</a>)</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    {</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="_m_q_t_t_client_8c.html#a418e2bc4b929202f5ea4008beddc14d0">waitfor</a>(c, <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1acae9f9c28803a317d9302650dc7dab0c">PUBCOMP</a>, &amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>) == <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1acae9f9c28803a317d9302650dc7dab0c">PUBCOMP</a>)</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        {</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> mypacketid;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> dup, <a class="code" href="form_8d.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="_m_q_t_t_deserialize_publish_8c.html#aef7f705e677e0467230a24a1134ec1f2">MQTTDeserialize_ack</a>(&amp;<a class="code" href="form_8d.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>, &amp;dup, &amp;mypacketid, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a35da0eb5f42240e7e847fbeeb95c2ea9">readbuf</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a1726c74d4b606c44bbe8323c14612d49">readbuf_size</a>) != 1)</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        }</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    }</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    </div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;exit:</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="preprocessor">#if defined(MQTT_TASK)</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a6f5a157ddcad639555da72f4d6259ac6">MutexUnlock</a>(&amp;c-&gt;mutex);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;}</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno"><a class="line" href="_c_2src_2_m_q_t_t_client_8h.html#aeb43faa510209845bd9bd07343f20a7b">  576</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="_m_q_t_t_client_8c.html#a9fb8eebda68ffdb896c1f95e93fc28b4">MQTTDisconnect</a>(<a class="code" href="struct_m_q_t_t_client.html">MQTTClient</a>* c)</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;{  </div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a>;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <a class="code" href="struct_timer.html">Timer</a> <a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>;     <span class="comment">// we might wait for incomplete incoming publishes to complete</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = 0;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="preprocessor">#if defined(MQTT_TASK)</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a343e2b852184ade4f93c9edab5c8a88b">MutexLock</a>(&amp;c-&gt;mutex);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a980a6cac528fade13ffdc5804a1d83bd">TimerInit</a>(&amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#ad436e72ddaa1056d56874fc4ef18ddd3">TimerCountdownMS</a>(&amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a6eef27b715d33fbc2e599564a8372c57">command_timeout_ms</a>);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = <a class="code" href="_m_q_t_t_connect_8h.html#aa30ad14dad5094716ec3de426d20ca37">MQTTSerialize_disconnect</a>(c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a2c90f267c7e9ace31dae3656f358cf06">buf</a>, c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a11ccb60760e1aa9fea2b034ffbac399c">buf_size</a>);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> &gt; 0)</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = sendPacket(c, <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>, &amp;<a class="code" href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a>);            <span class="comment">// send the disconnect packet</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        </div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    c-&gt;<a class="code" href="struct_m_q_t_t_client.html#a8296a1d0bdb7b6320c2016831e13a7d8">isconnected</a> = 0;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="preprocessor">#if defined(MQTT_TASK)</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <a class="code" href="_m_q_t_t_free_r_t_o_s_8c.html#a6f5a157ddcad639555da72f4d6259ac6">MutexUnlock</a>(&amp;c-&gt;mutex);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;}</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div><div class="ttc" id="_pub_sub_client_8h_html_a396015e492b0fee8da37c7168d9cdb33a7d2552996d8248e57b28f5328fc1e003"><div class="ttname"><a href="_pub_sub_client_8h.html#a396015e492b0fee8da37c7168d9cdb33a7d2552996d8248e57b28f5328fc1e003">QOS0</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00093">PubSubClient.h:93</a></div></div>
<div class="ttc" id="_m_q_t_t_client_8c_html_ac33ece78d50eb5fb43fb2403eb885a5e"><div class="ttname"><a href="_m_q_t_t_client_8c.html#ac33ece78d50eb5fb43fb2403eb885a5e">MQTTClientInit</a></div><div class="ttdeci">void MQTTClientInit(MQTTClient *c, Network *network, unsigned int command_timeout_ms, unsigned char *sendbuf, size_t sendbuf_size, unsigned char *readbuf, size_t readbuf_size)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_client_8c_source.html#l00052">MQTTClient.c:52</a></div></div>
<div class="ttc" id="struct_m_q_t_t_client_html_a31088e9ce2a488c51f87e9d095592a0c"><div class="ttname"><a href="struct_m_q_t_t_client.html#a31088e9ce2a488c51f87e9d095592a0c">MQTTClient::ping_timer</a></div><div class="ttdeci">Timer ping_timer</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00115">MQTTClient.h:115</a></div></div>
<div class="ttc" id="struct_message_data_html"><div class="ttname"><a href="struct_message_data.html">MessageData</a></div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00086">MQTTClient.h:86</a></div></div>
<div class="ttc" id="struct_m_q_t_t_message_html"><div class="ttname"><a href="struct_m_q_t_t_message.html">MQTTMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00076">MQTTClient.h:76</a></div></div>
<div class="ttc" id="_m_q_t_t_free_r_t_o_s_8c_html_a1d5e89eb91a028bdd0523a2d6777b214"><div class="ttname"><a href="_m_q_t_t_free_r_t_o_s_8c.html#a1d5e89eb91a028bdd0523a2d6777b214">TimerIsExpired</a></div><div class="ttdeci">char TimerIsExpired(Timer *timer)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_free_r_t_o_s_8c_source.html#l00074">MQTTFreeRTOS.c:74</a></div></div>
<div class="ttc" id="_m_q_t_t_client_8c_html_a418e2bc4b929202f5ea4008beddc14d0"><div class="ttname"><a href="_m_q_t_t_client_8c.html#a418e2bc4b929202f5ea4008beddc14d0">waitfor</a></div><div class="ttdeci">int waitfor(MQTTClient *c, int packet_type, Timer *timer)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_client_8c_source.html#l00345">MQTTClient.c:345</a></div></div>
<div class="ttc" id="union_m_q_t_t_header_html_a9b2c40029ba354713e46b76ca74b2420"><div class="ttname"><a href="union_m_q_t_t_header.html#a9b2c40029ba354713e46b76ca74b2420">MQTTHeader::byte</a></div><div class="ttdeci">unsigned char byte</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_packet_8h_source.html#l00055">MQTTPacket.h:55</a></div></div>
<div class="ttc" id="struct_m_q_t_t_client_html_a8296a1d0bdb7b6320c2016831e13a7d8"><div class="ttname"><a href="struct_m_q_t_t_client.html#a8296a1d0bdb7b6320c2016831e13a7d8">MQTTClient::isconnected</a></div><div class="ttdeci">int isconnected</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00104">MQTTClient.h:104</a></div></div>
<div class="ttc" id="_m_q_t_t_connect_8h_html_abd5c098c9e4a5cf2f5607e4a9db6c43b"><div class="ttname"><a href="_m_q_t_t_connect_8h.html#abd5c098c9e4a5cf2f5607e4a9db6c43b">MQTTSerialize_pingreq</a></div><div class="ttdeci">DLLExport int MQTTSerialize_pingreq(unsigned char *buf, int buflen)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_connect_client_8c_source.html#l00213">MQTTConnectClient.c:213</a></div></div>
<div class="ttc" id="struct_m_q_t_t_client_html_a884f6eaea90316853efd47232341810b"><div class="ttname"><a href="struct_m_q_t_t_client.html#a884f6eaea90316853efd47232341810b">MQTTClient::messageHandlers</a></div><div class="ttdeci">struct MQTTClient::MessageHandlers messageHandlers[MAX_MESSAGE_HANDLERS]</div></div>
<div class="ttc" id="union_m_q_t_t_header_html_af366887430d3f755e398cea31022c1a3"><div class="ttname"><a href="union_m_q_t_t_header.html#af366887430d3f755e398cea31022c1a3">MQTTHeader::bits</a></div><div class="ttdeci">struct MQTTHeader::@64 bits</div></div>
<div class="ttc" id="_m_q_t_t_free_r_t_o_s_8c_html_a343e2b852184ade4f93c9edab5c8a88b"><div class="ttname"><a href="_m_q_t_t_free_r_t_o_s_8c.html#a343e2b852184ade4f93c9edab5c8a88b">MutexLock</a></div><div class="ttdeci">int MutexLock(Mutex *mutex)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_free_r_t_o_s_8c_source.html#l00043">MQTTFreeRTOS.c:43</a></div></div>
<div class="ttc" id="_m_q_t_t_free_r_t_o_s_8c_html_a3d29c95540245ee7f0db058d12f0cb76"><div class="ttname"><a href="_m_q_t_t_free_r_t_o_s_8c.html#a3d29c95540245ee7f0db058d12f0cb76">ThreadStart</a></div><div class="ttdeci">int ThreadStart(Thread *thread, void(*fn)(void *), void *arg)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_free_r_t_o_s_8c_source.html#l00021">MQTTFreeRTOS.c:21</a></div></div>
<div class="ttc" id="struct_m_q_t_t_string_html"><div class="ttname"><a href="struct_m_q_t_t_string.html">MQTTString</a></div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_packet_8h_source.html#l00081">MQTTPacket.h:81</a></div></div>
<div class="ttc" id="struct_m_q_t_t_message_html_aa19661c630c682cf7f8a4c07f6e76eb8"><div class="ttname"><a href="struct_m_q_t_t_message.html#aa19661c630c682cf7f8a4c07f6e76eb8">MQTTMessage::payload</a></div><div class="ttdeci">void * payload</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00082">MQTTClient.h:82</a></div></div>
<div class="ttc" id="_m_q_t_t_connect_8h_html_a612f9e23a665b10198fc59e676dc94f9"><div class="ttname"><a href="_m_q_t_t_connect_8h.html#a612f9e23a665b10198fc59e676dc94f9">MQTTSerialize_connect</a></div><div class="ttdeci">DLLExport int MQTTSerialize_connect(unsigned char *buf, int buflen, MQTTPacket_connectData *options)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_connect_client_8c_source.html#l00058">MQTTConnectClient.c:58</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ac243cf15beb51b2206e36da86c2f95f1a1a3a12a071fc8874e9518b1c94aaef30"><div class="ttname"><a href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a1a3a12a071fc8874e9518b1c94aaef30">PINGRESP</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00087">PubSubClient.h:87</a></div></div>
<div class="ttc" id="_m_q_t_t_client_8c_html_aec16090cf96b12cdfc44acda8908e6a2"><div class="ttname"><a href="_m_q_t_t_client_8c.html#aec16090cf96b12cdfc44acda8908e6a2">keepalive</a></div><div class="ttdeci">int keepalive(MQTTClient *c)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_client_8c_source.html#l00195">MQTTClient.c:195</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ac243cf15beb51b2206e36da86c2f95f1ad6c983841148fc8d12e721038df5bb85"><div class="ttname"><a href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1ad6c983841148fc8d12e721038df5bb85">PUBREL</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00080">PubSubClient.h:80</a></div></div>
<div class="ttc" id="_m_q_t_t_free_r_t_o_s_8c_html_ab1960b2b7e7c7bbc6e0d91ed55da13d2"><div class="ttname"><a href="_m_q_t_t_free_r_t_o_s_8c.html#ab1960b2b7e7c7bbc6e0d91ed55da13d2">MutexInit</a></div><div class="ttdeci">void MutexInit(Mutex *mutex)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_free_r_t_o_s_8c_source.html#l00038">MQTTFreeRTOS.c:38</a></div></div>
<div class="ttc" id="multi-uv_8c_html_afb43b78d9a22f95e721353db4408304c"><div class="ttname"><a href="multi-uv_8c.html#afb43b78d9a22f95e721353db4408304c">timeout</a></div><div class="ttdeci">uv_timer_t timeout</div><div class="ttdef"><b>Definition:</b> <a href="multi-uv_8c_source.html#l00042">multi-uv.c:42</a></div></div>
<div class="ttc" id="_m_q_t_t_client_8c_html_a9fb8eebda68ffdb896c1f95e93fc28b4"><div class="ttname"><a href="_m_q_t_t_client_8c.html#a9fb8eebda68ffdb896c1f95e93fc28b4">MQTTDisconnect</a></div><div class="ttdeci">int MQTTDisconnect(MQTTClient *c)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_client_8c_source.html#l00576">MQTTClient.c:576</a></div></div>
<div class="ttc" id="_m_q_t_t_publish_8h_html_a65f4a3f8efdd0c3c67d980adbaa9adb5"><div class="ttname"><a href="_m_q_t_t_publish_8h.html#a65f4a3f8efdd0c3c67d980adbaa9adb5">MQTTSerialize_publish</a></div><div class="ttdeci">DLLExport int MQTTSerialize_publish(unsigned char *buf, int buflen, unsigned char dup, int qos, unsigned char retained, unsigned short packetid, MQTTString topicName, unsigned char *payload, int payloadlen)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_serialize_publish_8c_source.html#l00055">MQTTSerializePublish.c:55</a></div></div>
<div class="ttc" id="_m_q_t_t_unsubscribe_8h_html_a959e05d42b06a5c6a7cecbaa61bee68d"><div class="ttname"><a href="_m_q_t_t_unsubscribe_8h.html#a959e05d42b06a5c6a7cecbaa61bee68d">MQTTDeserialize_unsuback</a></div><div class="ttdeci">DLLExport int MQTTDeserialize_unsuback(unsigned short *packetid, unsigned char *buf, int len)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_unsubscribe_client_8c_source.html#l00092">MQTTUnsubscribeClient.c:92</a></div></div>
<div class="ttc" id="_m_q_t_t_deserialize_publish_8c_html_a72900aeb8c3a63ea49a61020fd7dd45a"><div class="ttname"><a href="_m_q_t_t_deserialize_publish_8c.html#a72900aeb8c3a63ea49a61020fd7dd45a">MQTTDeserialize_publish</a></div><div class="ttdeci">int MQTTDeserialize_publish(unsigned char *dup, int *qos, unsigned char *retained, unsigned short *packetid, MQTTString *topicName, unsigned char **payload, int *payloadlen, unsigned char *buf, int buflen)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_deserialize_publish_8c_source.html#l00036">MQTTDeserializePublish.c:36</a></div></div>
<div class="ttc" id="namespacedictserver_html_aeb700c49a1a229869c3b36509a6c6c32"><div class="ttname"><a href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">dictserver.rc</a></div><div class="ttdeci">def rc</div><div class="ttdef"><b>Definition:</b> <a href="dictserver_8py_source.html#l00153">dictserver.py:153</a></div></div>
<div class="ttc" id="struct_m_q_t_t_client_html"><div class="ttname"><a href="struct_m_q_t_t_client.html">MQTTClient</a></div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00094">MQTTClient.h:94</a></div></div>
<div class="ttc" id="_m_q_t_t_connect_8h_html_a356cb5639f3d0d6d002b4a144a58f11a"><div class="ttname"><a href="_m_q_t_t_connect_8h.html#a356cb5639f3d0d6d002b4a144a58f11a">MQTTDeserialize_connack</a></div><div class="ttdeci">DLLExport int MQTTDeserialize_connack(unsigned char *sessionPresent, unsigned char *connack_rc, unsigned char *buf, int buflen)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_connect_client_8c_source.html#l00132">MQTTConnectClient.c:132</a></div></div>
<div class="ttc" id="_m_q_t_t_connect_8h_html_aa30ad14dad5094716ec3de426d20ca37"><div class="ttname"><a href="_m_q_t_t_connect_8h.html#aa30ad14dad5094716ec3de426d20ca37">MQTTSerialize_disconnect</a></div><div class="ttdeci">DLLExport int MQTTSerialize_disconnect(unsigned char *buf, int buflen)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_connect_client_8c_source.html#l00201">MQTTConnectClient.c:201</a></div></div>
<div class="ttc" id="struct_m_q_t_t_client_1_1_message_handlers_html_a078ecd719784ee968e078cd7114a8122"><div class="ttname"><a href="struct_m_q_t_t_client_1_1_message_handlers.html#a078ecd719784ee968e078cd7114a8122">MQTTClient::MessageHandlers::fp</a></div><div class="ttdeci">void(* fp)(MessageData *)</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00109">MQTTClient.h:109</a></div></div>
<div class="ttc" id="_m_q_t_t_free_r_t_o_s_8c_html_a22de0fe4526bbfef0fc9f8a7b668a6d6"><div class="ttname"><a href="_m_q_t_t_free_r_t_o_s_8c.html#a22de0fe4526bbfef0fc9f8a7b668a6d6">TimerCountdown</a></div><div class="ttdeci">void TimerCountdown(Timer *timer, unsigned int timeout)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_free_r_t_o_s_8c_source.html#l00061">MQTTFreeRTOS.c:61</a></div></div>
<div class="ttc" id="_m_q_t_t_free_r_t_o_s_8c_html_a6f5a157ddcad639555da72f4d6259ac6"><div class="ttname"><a href="_m_q_t_t_free_r_t_o_s_8c.html#a6f5a157ddcad639555da72f4d6259ac6">MutexUnlock</a></div><div class="ttdeci">int MutexUnlock(Mutex *mutex)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_free_r_t_o_s_8c_source.html#l00048">MQTTFreeRTOS.c:48</a></div></div>
<div class="ttc" id="_c_2src_2_m_q_t_t_client_8h_html_aa6ae71e8be050e41896f2a66231396fe"><div class="ttname"><a href="_c_2src_2_m_q_t_t_client_8h.html#aa6ae71e8be050e41896f2a66231396fe">MAX_PACKET_ID</a></div><div class="ttdeci">#define MAX_PACKET_ID</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00048">MQTTClient.h:48</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_a396015e492b0fee8da37c7168d9cdb33a00677da1fb3fc1bdfa05c33dcaa3ad7c"><div class="ttname"><a href="_pub_sub_client_8h.html#a396015e492b0fee8da37c7168d9cdb33a00677da1fb3fc1bdfa05c33dcaa3ad7c">QOS2</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00095">PubSubClient.h:95</a></div></div>
<div class="ttc" id="_m_q_t_t_client_8c_html_ad461e22b960431333e9f27c658eafce0"><div class="ttname"><a href="_m_q_t_t_client_8c.html#ad461e22b960431333e9f27c658eafce0">MQTTRun</a></div><div class="ttdeci">void MQTTRun(void *parm)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_client_8c_source.html#l00316">MQTTClient.c:316</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ac243cf15beb51b2206e36da86c2f95f1afbeab5fd4cdcb49a725fc27099c16cc2"><div class="ttname"><a href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1afbeab5fd4cdcb49a725fc27099c16cc2">PUBACK</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00078">PubSubClient.h:78</a></div></div>
<div class="ttc" id="struct_m_q_t_t_client_html_a6f9d05e7190ad9de38b2497a82e2ad28"><div class="ttname"><a href="struct_m_q_t_t_client.html#a6f9d05e7190ad9de38b2497a82e2ad28">MQTTClient::defaultMessageHandler</a></div><div class="ttdeci">void(* defaultMessageHandler)(MessageData *)</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00112">MQTTClient.h:112</a></div></div>
<div class="ttc" id="_m_q_t_t_packet_8h_html_acc606fd1a635e8603c1418c81bca4ecf"><div class="ttname"><a href="_m_q_t_t_packet_8h.html#acc606fd1a635e8603c1418c81bca4ecf">MQTTSerialize_ack</a></div><div class="ttdeci">int MQTTSerialize_ack(unsigned char *buf, int buflen, unsigned char type, unsigned char dup, unsigned short packetid)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_serialize_publish_8c_source.html#l00104">MQTTSerializePublish.c:104</a></div></div>
<div class="ttc" id="_m_q_t_t_packet_8c_html_a37bbf8101236ecfae4b6bb2e63c10075"><div class="ttname"><a href="_m_q_t_t_packet_8c.html#a37bbf8101236ecfae4b6bb2e63c10075">MQTTPacket_equals</a></div><div class="ttdeci">int MQTTPacket_equals(MQTTString *a, char *bptr)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_packet_8c_source.html#l00260">MQTTPacket.c:260</a></div></div>
<div class="ttc" id="unit1303_8c_html_ac8936188af0c1d2f8b9d0cd25fde43b2"><div class="ttname"><a href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a></div><div class="ttdeci">unsigned int i</div><div class="ttdef"><b>Definition:</b> <a href="unit1303_8c_source.html#l00078">unit1303.c:78</a></div></div>
<div class="ttc" id="_m_q_t_t_packet_8c_html_a5464b2e101bc4dc199e58486c4ffaa9f"><div class="ttname"><a href="_m_q_t_t_packet_8c.html#a5464b2e101bc4dc199e58486c4ffaa9f">MQTTPacket_encode</a></div><div class="ttdeci">int MQTTPacket_encode(unsigned char *buf, int length)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_packet_8c_source.html#l00029">MQTTPacket.c:29</a></div></div>
<div class="ttc" id="_m_q_t_t_client_8c_html_a863d46972c7a248001a8d9e26d0dc9cc"><div class="ttname"><a href="_m_q_t_t_client_8c.html#a863d46972c7a248001a8d9e26d0dc9cc">MQTTUnsubscribe</a></div><div class="ttdeci">int MQTTUnsubscribe(MQTTClient *c, const char *topicFilter)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_client_8c_source.html#l00477">MQTTClient.c:477</a></div></div>
<div class="ttc" id="struct_m_q_t_t_client_html_a068a622e9a5e7e331489bfc46abfb9c0"><div class="ttname"><a href="struct_m_q_t_t_client.html#a068a622e9a5e7e331489bfc46abfb9c0">MQTTClient::ping_outstanding</a></div><div class="ttdeci">char ping_outstanding</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00103">MQTTClient.h:103</a></div></div>
<div class="ttc" id="struct_m_q_t_t_message_html_a790d3de41808e7486ad6d92417361649"><div class="ttname"><a href="struct_m_q_t_t_message.html#a790d3de41808e7486ad6d92417361649">MQTTMessage::qos</a></div><div class="ttdeci">enum QoS qos</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00078">MQTTClient.h:78</a></div></div>
<div class="ttc" id="curl__sasl_8c_html_a7360b55975153b822efc5217b7734e6a"><div class="ttname"><a href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a></div><div class="ttdeci">size_t len</div><div class="ttdef"><b>Definition:</b> <a href="curl__sasl_8c_source.html#l00055">curl_sasl.c:55</a></div></div>
<div class="ttc" id="struct_timer_html"><div class="ttname"><a href="struct_timer.html">Timer</a></div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_c_c3200_8h_source.html#l00028">MQTTCC3200.h:28</a></div></div>
<div class="ttc" id="struct_message_data_html_af131ee91d1113bb77e8258394c9aad77"><div class="ttname"><a href="struct_message_data.html#af131ee91d1113bb77e8258394c9aad77">MessageData::topicName</a></div><div class="ttdeci">MQTTString * topicName</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00089">MQTTClient.h:89</a></div></div>
<div class="ttc" id="struct_m_q_t_t_string_html_a78847a9d8950eeefa8e270a5c67c9a35"><div class="ttname"><a href="struct_m_q_t_t_string.html#a78847a9d8950eeefa8e270a5c67c9a35">MQTTString::lenstring</a></div><div class="ttdeci">MQTTLenString lenstring</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_packet_8h_source.html#l00084">MQTTPacket.h:84</a></div></div>
<div class="ttc" id="form_8d_html_a7aead736a07eaf25623ad7bfa1f0ee2d"><div class="ttname"><a href="form_8d.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a></div><div class="ttdeci">type</div><div class="ttdef"><b>Definition:</b> <a href="form_8d_source.html#l00048">form.d:48</a></div></div>
<div class="ttc" id="struct_m_q_t_t_client_html_a1e1b117b259c9628c37fb3074fb73c91"><div class="ttname"><a href="struct_m_q_t_t_client.html#a1e1b117b259c9628c37fb3074fb73c91">MQTTClient::ipstack</a></div><div class="ttdeci">Network * ipstack</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00114">MQTTClient.h:114</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ac243cf15beb51b2206e36da86c2f95f1acae9f9c28803a317d9302650dc7dab0c"><div class="ttname"><a href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1acae9f9c28803a317d9302650dc7dab0c">PUBCOMP</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00081">PubSubClient.h:81</a></div></div>
<div class="ttc" id="struct_m_q_t_t_message_html_af11a16d150c3b71b245da58c1767975e"><div class="ttname"><a href="struct_m_q_t_t_message.html#af11a16d150c3b71b245da58c1767975e">MQTTMessage::id</a></div><div class="ttdeci">unsigned short id</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00081">MQTTClient.h:81</a></div></div>
<div class="ttc" id="_m_q_t_t_client_8c_html_aa1a8424f1f1919e34a710f8508822c88"><div class="ttname"><a href="_m_q_t_t_client_8c.html#aa1a8424f1f1919e34a710f8508822c88">MQTTConnect</a></div><div class="ttdeci">int MQTTConnect(MQTTClient *c, MQTTPacket_connectData *options)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_client_8c_source.html#l00360">MQTTClient.c:360</a></div></div>
<div class="ttc" id="_m_q_t_t_packet_8c_html_a166c9117b1ef3db3292d475f300ca560"><div class="ttname"><a href="_m_q_t_t_packet_8c.html#a166c9117b1ef3db3292d475f300ca560">MAX_NO_OF_REMAINING_LENGTH_BYTES</a></div><div class="ttdeci">#define MAX_NO_OF_REMAINING_LENGTH_BYTES</div></div>
<div class="ttc" id="struct_network_html_a24e1241d4ee7666686fc015747fa98fc"><div class="ttname"><a href="struct_network.html#a24e1241d4ee7666686fc015747fa98fc">Network::mqttwrite</a></div><div class="ttdeci">int(* mqttwrite)(Network *, unsigned char *, int, int)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_c_c3200_8h_source.html#l00039">MQTTCC3200.h:39</a></div></div>
<div class="ttc" id="_m_q_t_t_packet_8h_html_acc42076253600be964e110149b458971a5cbe32551f8036958703f757c0d1a857"><div class="ttname"><a href="_m_q_t_t_packet_8h.html#acc42076253600be964e110149b458971a5cbe32551f8036958703f757c0d1a857">MQTTPACKET_READ_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_packet_8h_source.html#l00039">MQTTPacket.h:39</a></div></div>
<div class="ttc" id="curl__printf_8h_html_a3cb9f0894fab1c8fbb0753c9c7c2a8d9"><div class="ttname"><a href="curl__printf_8h.html#a3cb9f0894fab1c8fbb0753c9c7c2a8d9">printf</a></div><div class="ttdeci">#define printf</div><div class="ttdef"><b>Definition:</b> <a href="curl__printf_8h_source.html#l00040">curl_printf.h:40</a></div></div>
<div class="ttc" id="asiohiper_8cpp_html_a6363ad0c2267201dc689dbbbc4ae4305"><div class="ttname"><a href="asiohiper_8cpp.html#a6363ad0c2267201dc689dbbbc4ae4305">timer</a></div><div class="ttdeci">boost::asio::deadline_timer timer(io_service)</div></div>
<div class="ttc" id="_m_q_t_t_subscribe_8h_html_aa88712c28d8b9ad842d4d9c7453c8528"><div class="ttname"><a href="_m_q_t_t_subscribe_8h.html#aa88712c28d8b9ad842d4d9c7453c8528">MQTTSerialize_subscribe</a></div><div class="ttdeci">DLLExport int MQTTSerialize_subscribe(unsigned char *buf, int buflen, unsigned char dup, unsigned short packetid, int count, MQTTString topicFilters[], int requestedQoSs[])</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_subscribe_client_8c_source.html#l00050">MQTTSubscribeClient.c:50</a></div></div>
<div class="ttc" id="mqtt__paho_8c_html_a2d9a64328e83ad37af17cbeb5e73b5df"><div class="ttname"><a href="mqtt__paho_8c.html#a2d9a64328e83ad37af17cbeb5e73b5df">network</a></div><div class="ttdeci">Network network</div><div class="ttdef"><b>Definition:</b> <a href="mqtt__paho_8c_source.html#l00013">mqtt_paho.c:13</a></div></div>
<div class="ttc" id="struct_m_q_t_t_string_html_a00126e87a6bbc0ddd66918920fd4a425"><div class="ttname"><a href="struct_m_q_t_t_string.html#a00126e87a6bbc0ddd66918920fd4a425">MQTTString::cstring</a></div><div class="ttdeci">char * cstring</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_packet_8h_source.html#l00083">MQTTPacket.h:83</a></div></div>
<div class="ttc" id="_c_2src_2_m_q_t_t_client_8h_html"><div class="ttname"><a href="_c_2src_2_m_q_t_t_client_8h.html">MQTTClient.h</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ac243cf15beb51b2206e36da86c2f95f1abd1a204dcfa4933760cd12e779f36fc5"><div class="ttname"><a href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1abd1a204dcfa4933760cd12e779f36fc5">PUBLISH</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00077">PubSubClient.h:77</a></div></div>
<div class="ttc" id="_m_q_t_t_client_8c_html_a9ee5e1a3021798303d1efab7996dbd36"><div class="ttname"><a href="_m_q_t_t_client_8c.html#a9ee5e1a3021798303d1efab7996dbd36">deliverMessage</a></div><div class="ttdeci">int deliverMessage(MQTTClient *c, MQTTString *topicName, MQTTMessage *message)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_client_8c_source.html#l00162">MQTTClient.c:162</a></div></div>
<div class="ttc" id="struct_m_q_t_t_len_string_html_a7eb20db2b77f5e224e12d94c78573fa3"><div class="ttname"><a href="struct_m_q_t_t_len_string.html#a7eb20db2b77f5e224e12d94c78573fa3">MQTTLenString::len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_packet_8h_source.html#l00077">MQTTPacket.h:77</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ac243cf15beb51b2206e36da86c2f95f1a722b573f419f3cdb3b2263f7dd00a3ae"><div class="ttname"><a href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a722b573f419f3cdb3b2263f7dd00a3ae">UNSUBACK</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00085">PubSubClient.h:85</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ac243cf15beb51b2206e36da86c2f95f1a1e2c2a84e88263f41d3b9bed26bf4e89"><div class="ttname"><a href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a1e2c2a84e88263f41d3b9bed26bf4e89">PUBREC</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00079">PubSubClient.h:79</a></div></div>
<div class="ttc" id="_m_q_t_t_client_8c_html_acd7fd9ceb34eb5ed2a294c960f3361ed"><div class="ttname"><a href="_m_q_t_t_client_8c.html#acd7fd9ceb34eb5ed2a294c960f3361ed">MQTTSubscribe</a></div><div class="ttdeci">int MQTTSubscribe(MQTTClient *c, const char *topicFilter, enum QoS qos, messageHandler messageHandler)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_client_8c_source.html#l00419">MQTTClient.c:419</a></div></div>
<div class="ttc" id="struct_m_q_t_t_client_html_a1726c74d4b606c44bbe8323c14612d49"><div class="ttname"><a href="struct_m_q_t_t_client.html#a1726c74d4b606c44bbe8323c14612d49">MQTTClient::readbuf_size</a></div><div class="ttdeci">size_t readbuf_size</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00098">MQTTClient.h:98</a></div></div>
<div class="ttc" id="_m_q_t_t_free_r_t_o_s_8c_html_a980a6cac528fade13ffdc5804a1d83bd"><div class="ttname"><a href="_m_q_t_t_free_r_t_o_s_8c.html#a980a6cac528fade13ffdc5804a1d83bd">TimerInit</a></div><div class="ttdeci">void TimerInit(Timer *timer)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_free_r_t_o_s_8c_source.html#l00080">MQTTFreeRTOS.c:80</a></div></div>
<div class="ttc" id="_c_2src_2_m_q_t_t_client_8h_html_a2a5744b0ca3f049979e6777b75d7a634"><div class="ttname"><a href="_c_2src_2_m_q_t_t_client_8h.html#a2a5744b0ca3f049979e6777b75d7a634">QoS</a></div><div class="ttdeci">QoS</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00054">MQTTClient.h:54</a></div></div>
<div class="ttc" id="_m_q_t_t_deserialize_publish_8c_html_aef7f705e677e0467230a24a1134ec1f2"><div class="ttname"><a href="_m_q_t_t_deserialize_publish_8c.html#aef7f705e677e0467230a24a1134ec1f2">MQTTDeserialize_ack</a></div><div class="ttdeci">int MQTTDeserialize_ack(unsigned char *packettype, unsigned char *dup, unsigned short *packetid, unsigned char *buf, int buflen)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_deserialize_publish_8c_source.html#l00082">MQTTDeserializePublish.c:82</a></div></div>
<div class="ttc" id="_m_q_t_t_free_r_t_o_s_8c_html_ade4fb2f5ebbcd5b3d8e55f5f2370a8e2"><div class="ttname"><a href="_m_q_t_t_free_r_t_o_s_8c.html#ade4fb2f5ebbcd5b3d8e55f5f2370a8e2">TimerLeftMS</a></div><div class="ttdeci">int TimerLeftMS(Timer *timer)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_free_r_t_o_s_8c_source.html#l00067">MQTTFreeRTOS.c:67</a></div></div>
<div class="ttc" id="struct_m_q_t_t_client_html_ab44054d233d95140c1913d4f48a5cd0e"><div class="ttname"><a href="struct_m_q_t_t_client.html#ab44054d233d95140c1913d4f48a5cd0e">MQTTClient::keepAliveInterval</a></div><div class="ttdeci">unsigned int keepAliveInterval</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00102">MQTTClient.h:102</a></div></div>
<div class="ttc" id="struct_m_q_t_t_client_1_1_message_handlers_html_a4c743a05485e337e93e3bfddeb8b0e48"><div class="ttname"><a href="struct_m_q_t_t_client_1_1_message_handlers.html#a4c743a05485e337e93e3bfddeb8b0e48">MQTTClient::MessageHandlers::topicFilter</a></div><div class="ttdeci">const char * topicFilter</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00108">MQTTClient.h:108</a></div></div>
<div class="ttc" id="_c_2src_2_m_q_t_t_client_8h_html_a097fe1f2aed537fea5c806f7c231535e"><div class="ttname"><a href="_c_2src_2_m_q_t_t_client_8h.html#a097fe1f2aed537fea5c806f7c231535e">MAX_MESSAGE_HANDLERS</a></div><div class="ttdeci">#define MAX_MESSAGE_HANDLERS</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00051">MQTTClient.h:51</a></div></div>
<div class="ttc" id="_m_q_t_t_free_r_t_o_s_8c_html_ad436e72ddaa1056d56874fc4ef18ddd3"><div class="ttname"><a href="_m_q_t_t_free_r_t_o_s_8c.html#ad436e72ddaa1056d56874fc4ef18ddd3">TimerCountdownMS</a></div><div class="ttdeci">void TimerCountdownMS(Timer *timer, unsigned int timeout_ms)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_free_r_t_o_s_8c_source.html#l00054">MQTTFreeRTOS.c:54</a></div></div>
<div class="ttc" id="struct_m_q_t_t_message_html_aafb263922d2283f05264a71b1dedb420"><div class="ttname"><a href="struct_m_q_t_t_message.html#aafb263922d2283f05264a71b1dedb420">MQTTMessage::payloadlen</a></div><div class="ttdeci">size_t payloadlen</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00083">MQTTClient.h:83</a></div></div>
<div class="ttc" id="struct_message_data_html_a1ebcc1407b2fe6653df93bc6a0530cce"><div class="ttname"><a href="struct_message_data.html#a1ebcc1407b2fe6653df93bc6a0530cce">MessageData::message</a></div><div class="ttdeci">MQTTMessage * message</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00088">MQTTClient.h:88</a></div></div>
<div class="ttc" id="_m_q_t_t_unsubscribe_8h_html_a9f16e69d4c62e3a9ef1d2734510bc016"><div class="ttname"><a href="_m_q_t_t_unsubscribe_8h.html#a9f16e69d4c62e3a9ef1d2734510bc016">MQTTSerialize_unsubscribe</a></div><div class="ttdeci">DLLExport int MQTTSerialize_unsubscribe(unsigned char *buf, int buflen, unsigned char dup, unsigned short packetid, int count, MQTTString topicFilters[])</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_unsubscribe_client_8c_source.html#l00049">MQTTUnsubscribeClient.c:49</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ac243cf15beb51b2206e36da86c2f95f1abe48cb8225101545fd55752f2534348d"><div class="ttname"><a href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1abe48cb8225101545fd55752f2534348d">SUBACK</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00083">PubSubClient.h:83</a></div></div>
<div class="ttc" id="struct_m_q_t_t_len_string_html_ac875ffa1e0af752d17a10be055c33377"><div class="ttname"><a href="struct_m_q_t_t_len_string.html#ac875ffa1e0af752d17a10be055c33377">MQTTLenString::data</a></div><div class="ttdeci">char * data</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_packet_8h_source.html#l00078">MQTTPacket.h:78</a></div></div>
<div class="ttc" id="struct_m_q_t_t_client_html_a11ccb60760e1aa9fea2b034ffbac399c"><div class="ttname"><a href="struct_m_q_t_t_client.html#a11ccb60760e1aa9fea2b034ffbac399c">MQTTClient::buf_size</a></div><div class="ttdeci">size_t buf_size</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00098">MQTTClient.h:98</a></div></div>
<div class="ttc" id="struct_m_q_t_t_message_html_aa903bbd4711f5d32d74b62177e55f600"><div class="ttname"><a href="struct_m_q_t_t_message.html#aa903bbd4711f5d32d74b62177e55f600">MQTTMessage::retained</a></div><div class="ttdeci">unsigned char retained</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00079">MQTTClient.h:79</a></div></div>
<div class="ttc" id="unit1602_8c_html_a1f81d06f9ccd5ec47176a7fc466b6030"><div class="ttname"><a href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a></div><div class="ttdeci">UNITTEST_START int * value</div><div class="ttdef"><b>Definition:</b> <a href="unit1602_8c_source.html#l00051">unit1602.c:51</a></div></div>
<div class="ttc" id="struct_network_html_abb56b43e21aa03a9ae608baf7d5b6ad0"><div class="ttname"><a href="struct_network.html#abb56b43e21aa03a9ae608baf7d5b6ad0">Network::mqttread</a></div><div class="ttdeci">int(* mqttread)(Network *, unsigned char *, int, int)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_c_c3200_8h_source.html#l00038">MQTTCC3200.h:38</a></div></div>
<div class="ttc" id="_c_2src_2_m_q_t_t_client_8h_html_a57263a23e77cb842104b9a1d39dba53e"><div class="ttname"><a href="_c_2src_2_m_q_t_t_client_8h.html#a57263a23e77cb842104b9a1d39dba53e">messageHandler</a></div><div class="ttdeci">void(* messageHandler)(MessageData *)</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00092">MQTTClient.h:92</a></div></div>
<div class="ttc" id="_m_q_t_t_client_8c_html_a9f16d095bec66d37341c2bc282e95a8b"><div class="ttname"><a href="_m_q_t_t_client_8c.html#a9f16d095bec66d37341c2bc282e95a8b">MQTTYield</a></div><div class="ttdeci">int MQTTYield(MQTTClient *c, int timeout_ms)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_client_8c_source.html#l00295">MQTTClient.c:295</a></div></div>
<div class="ttc" id="_c_2src_2_m_q_t_t_client_8h_html_a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6"><div class="ttname"><a href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beaa5571864412c8275a2e18a931fddcaa6">FAILURE</a></div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00057">MQTTClient.h:57</a></div></div>
<div class="ttc" id="_c_2src_2_m_q_t_t_client_8h_html_a3a1b953333a5fc9894544c465f1205beac7f69f7c9e5aea9b8f54cf02870e2bf8"><div class="ttname"><a href="_c_2src_2_m_q_t_t_client_8h.html#a3a1b953333a5fc9894544c465f1205beac7f69f7c9e5aea9b8f54cf02870e2bf8">SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00057">MQTTClient.h:57</a></div></div>
<div class="ttc" id="struct_m_q_t_t_client_html_ac5007e87a2eca33a38c50ef2fa46fc8c"><div class="ttname"><a href="struct_m_q_t_t_client.html#ac5007e87a2eca33a38c50ef2fa46fc8c">MQTTClient::next_packetid</a></div><div class="ttdeci">unsigned int next_packetid</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00096">MQTTClient.h:96</a></div></div>
<div class="ttc" id="struct_m_q_t_t_message_html_ae5c0b6be79df260085c568b493504d02"><div class="ttname"><a href="struct_m_q_t_t_message.html#ae5c0b6be79df260085c568b493504d02">MQTTMessage::dup</a></div><div class="ttdeci">unsigned char dup</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00080">MQTTClient.h:80</a></div></div>
<div class="ttc" id="_m_q_t_t_subscribe_8h_html_a67a03482ca40e354dec5abc8561004e4"><div class="ttname"><a href="_m_q_t_t_subscribe_8h.html#a67a03482ca40e354dec5abc8561004e4">MQTTDeserialize_suback</a></div><div class="ttdeci">DLLExport int MQTTDeserialize_suback(unsigned short *packetid, int maxcount, int *count, int grantedQoSs[], unsigned char *buf, int len)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_subscribe_client_8c_source.html#l00100">MQTTSubscribeClient.c:100</a></div></div>
<div class="ttc" id="struct_m_q_t_t_packet__connect_data_html"><div class="ttname"><a href="struct_m_q_t_t_packet__connect_data.html">MQTTPacket_connectData</a></div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_connect_8h_source.html#l00088">MQTTConnect.h:88</a></div></div>
<div class="ttc" id="_m_q_t_t_client_8c_html_a7e8f2a81795698d3612c3d16cad165f7"><div class="ttname"><a href="_m_q_t_t_client_8c.html#a7e8f2a81795698d3612c3d16cad165f7">MQTTPublish</a></div><div class="ttdeci">int MQTTPublish(MQTTClient *c, const char *topicName, MQTTMessage *message)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_client_8c_source.html#l00516">MQTTClient.c:516</a></div></div>
<div class="ttc" id="_m_q_t_t_packet_8h_html_a34afa3fe58c14803eec9957875c70342"><div class="ttname"><a href="_m_q_t_t_packet_8h.html#a34afa3fe58c14803eec9957875c70342">MQTTString_initializer</a></div><div class="ttdeci">#define MQTTString_initializer</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_packet_8h_source.html#l00087">MQTTPacket.h:87</a></div></div>
<div class="ttc" id="struct_m_q_t_t_client_html_a6eef27b715d33fbc2e599564a8372c57"><div class="ttname"><a href="struct_m_q_t_t_client.html#a6eef27b715d33fbc2e599564a8372c57">MQTTClient::command_timeout_ms</a></div><div class="ttdeci">unsigned int command_timeout_ms</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00096">MQTTClient.h:96</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_a396015e492b0fee8da37c7168d9cdb33a2102e003f98d5f996f203b66b2827764"><div class="ttname"><a href="_pub_sub_client_8h.html#a396015e492b0fee8da37c7168d9cdb33a2102e003f98d5f996f203b66b2827764">QOS1</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00094">PubSubClient.h:94</a></div></div>
<div class="ttc" id="union_m_q_t_t_header_html"><div class="ttname"><a href="union_m_q_t_t_header.html">MQTTHeader</a></div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_packet_8h_source.html#l00053">MQTTPacket.h:53</a></div></div>
<div class="ttc" id="struct_m_q_t_t_client_html_a35da0eb5f42240e7e847fbeeb95c2ea9"><div class="ttname"><a href="struct_m_q_t_t_client.html#a35da0eb5f42240e7e847fbeeb95c2ea9">MQTTClient::readbuf</a></div><div class="ttdeci">unsigned char * readbuf</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00100">MQTTClient.h:100</a></div></div>
<div class="ttc" id="_m_q_t_t_client_8c_html_a2bcf85f488f98b6d8e539f37c37eab78"><div class="ttname"><a href="_m_q_t_t_client_8c.html#a2bcf85f488f98b6d8e539f37c37eab78">cycle</a></div><div class="ttdeci">int cycle(MQTTClient *c, Timer *timer)</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_client_8c_source.html#l00223">MQTTClient.c:223</a></div></div>
<div class="ttc" id="struct_m_q_t_t_client_html_a2c90f267c7e9ace31dae3656f358cf06"><div class="ttname"><a href="struct_m_q_t_t_client.html#a2c90f267c7e9ace31dae3656f358cf06">MQTTClient::buf</a></div><div class="ttdeci">unsigned char * buf</div><div class="ttdef"><b>Definition:</b> <a href="_c_2src_2_m_q_t_t_client_8h_source.html#l00100">MQTTClient.h:100</a></div></div>
<div class="ttc" id="fail-early_8d_html_a188ba6f263db5df5a64e1cc11fb0c098"><div class="ttname"><a href="fail-early_8d.html#a188ba6f263db5df5a64e1cc11fb0c098">options</a></div><div class="ttdeci">Long do not continue it will attempt to operate on each given one by one.By it will ignore errors if there are more URLs given and the last URL s success will determine the error code curl returns.So early failures will be hidden by subsequent successful transfers.Using this curl will instead return an error on the first transfer that independent of the amount of URLs that are given on the command line.This no transfer failures go undetected by scripts and similar.This option is global and does not need to be specified for each use of next.This option does not imply which causes transfers to fail due to the server s HTTP status code.You can combine the two options</div><div class="ttdef"><b>Definition:</b> <a href="fail-early_8d_source.html#l00002">fail-early.d:2</a></div></div>
<div class="ttc" id="union_m_q_t_t_header_html_aab9204aefddf8f4f6c6d6f58f4c1ab1c"><div class="ttname"><a href="union_m_q_t_t_header.html#aab9204aefddf8f4f6c6d6f58f4c1ab1c">MQTTHeader::type</a></div><div class="ttdeci">unsigned int type</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_packet_8h_source.html#l00070">MQTTPacket.h:70</a></div></div>
<div class="ttc" id="_m_q_t_t_connect_8h_html_a3e475310d0fdc12dfb3ae2d4e802bb7b"><div class="ttname"><a href="_m_q_t_t_connect_8h.html#a3e475310d0fdc12dfb3ae2d4e802bb7b">MQTTPacket_connectData_initializer</a></div><div class="ttdeci">#define MQTTPacket_connectData_initializer</div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_connect_8h_source.html#l00124">MQTTConnect.h:124</a></div></div>
<div class="ttc" id="struct_network_html"><div class="ttname"><a href="struct_network.html">Network</a></div><div class="ttdef"><b>Definition:</b> <a href="_m_q_t_t_c_c3200_8h_source.html#l00035">MQTTCC3200.h:35</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ac243cf15beb51b2206e36da86c2f95f1aa636430e8d9563704f7328824d6bc0a5"><div class="ttname"><a href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1aa636430e8d9563704f7328824d6bc0a5">CONNACK</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00076">PubSubClient.h:76</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_2b66d65f09a100230911d819a169d69c.html">esp32-snippets</a></li><li class="navelem"><a class="el" href="dir_e6509e8e306afd21d8371d681599573a.html">networking</a></li><li class="navelem"><a class="el" href="dir_bc0c0b9b7f6662c190af4a813f93d198.html">mqtt</a></li><li class="navelem"><a class="el" href="dir_f010d300aa4f2aca70794602db48245c.html">paho_mqtt_embedded_c</a></li><li class="navelem"><a class="el" href="dir_4e2249accfd21053bfe0afba98c6c9d9.html">MQTTClient-C</a></li><li class="navelem"><a class="el" href="dir_03e0230c61ae196345da51f7ec2971e7.html">src</a></li><li class="navelem"><a class="el" href="_m_q_t_t_client_8c.html">MQTTClient.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
