<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Plante: esp32-snippets/cpp_utils/PubSubClient.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Plante
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_pub_sub_client_8cpp_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">PubSubClient.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_pub_sub_client_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> PubSubClient.cpp - A simple client for MQTT.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> Nick O&#39;Leary</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> http://knolleary.net</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> edit by marcel.seerig</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;esp_log.h&quot;</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_pub_sub_client_8h.html">PubSubClient.h</a>&quot;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_task_8h.html">Task.h</a>&quot;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_free_r_t_o_s_8h.html">FreeRTOS.h</a>&quot;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_free_r_t_o_s_timer_8h.html">FreeRTOSTimer.h</a>&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;sdkconfig.h&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* TAG = <span class="stringliteral">&quot;PubSubClient&quot;</span>;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno"><a class="line" href="_pub_sub_client_8cpp.html#ad36413d98f7e61d62238254a870f59b2">   19</a></span>&#160;<span class="preprocessor">#define pgm_read_byte_near(x) *(x)</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="class_pub_sub_client_task.html">   27</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_pub_sub_client_task.html">PubSubClientTask</a>: <span class="keyword">public</span> <a class="code" href="class_task.html">Task</a> {</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="class_pub_sub_client_task.html#a325d615f1f9137953e13ce1649f081c9">   29</a></span>&#160;    <a class="code" href="class_pub_sub_client_task.html#a325d615f1f9137953e13ce1649f081c9">PubSubClientTask</a>(<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>) :</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        <a class="code" href="class_task.html">Task</a>(<a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>, 16 * 1024) {</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        taskName = <a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    };</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> taskName;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keywordtype">void</span> run(<span class="keywordtype">void</span>* <a class="code" href="structdata.html">data</a>) {</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        <a class="code" href="class_pub_sub_client.html">PubSubClient</a>* pPubSubClient = (<a class="code" href="class_pub_sub_client.html">PubSubClient</a>*) <a class="code" href="structdata.html">data</a>;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        ESP_LOGD(<span class="stringliteral">&quot;PubSubClientTask&quot;</span>, <span class="stringliteral">&quot;PubSubClientTask Task started!&quot;</span>);</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;            <span class="keywordflow">if</span> (pPubSubClient-&gt;<a class="code" href="class_pub_sub_client.html#a7f2097ea474209f9454dbdcb671fa2e9">connected</a>()) {</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                uint16_t <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = pPubSubClient-&gt;readPacket();</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> &gt; 0) { <span class="comment">// if there was data</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                    pPubSubClient-&gt;keepAliveTimer-&gt;<a class="code" href="class_free_r_t_o_s_timer.html#ae1f243c23d6d6edece568fe0e9de0209">reset</a>(0); <span class="comment">//lastInActivity = t;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                    <a class="code" href="structmqtt__message.html">mqtt_message</a>* msg = <span class="keyword">new</span> <a class="code" href="structmqtt__message.html">mqtt_message</a>;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                    pPubSubClient-&gt;parseData(msg, <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                    <span class="comment">//pPubSubClient-&gt;dumpData(msg);</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                    ESP_LOGD(TAG, <span class="stringliteral">&quot;Message type (%s)!&quot;</span>, pPubSubClient-&gt;messageType_toString(msg-&gt;<a class="code" href="structmqtt__message.html#a9471d7f2bb4489e6126a9a708621d088">type</a>).c_str());</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                    <span class="keywordflow">if</span> (msg-&gt;<a class="code" href="structmqtt__message.html#a9471d7f2bb4489e6126a9a708621d088">type</a> == <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1abd1a204dcfa4933760cd12e779f36fc5">PUBLISH</a>) {</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                        <span class="keywordflow">if</span> (pPubSubClient-&gt;callback) {</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                            <span class="keywordflow">if</span> (msg-&gt;<a class="code" href="structmqtt__message.html#a6a041ddd10d315dd739831db3bd7ec0e">qos</a> == <a class="code" href="_pub_sub_client_8h.html#a396015e492b0fee8da37c7168d9cdb33a7d2552996d8248e57b28f5328fc1e003">QOS0</a>) {</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                                pPubSubClient-&gt;callback(msg-&gt;<a class="code" href="structmqtt__message.html#a078ecbb904424484f996625808eceb7f">topic</a>, msg-&gt;<a class="code" href="structmqtt__message.html#a74e6c0f1e925eb38fb0d4cec8c6a6152">payload</a>);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg-&gt;<a class="code" href="structmqtt__message.html#a6a041ddd10d315dd739831db3bd7ec0e">qos</a> == <a class="code" href="_pub_sub_client_8h.html#a396015e492b0fee8da37c7168d9cdb33a2102e003f98d5f996f203b66b2827764">QOS1</a>) {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                                pPubSubClient-&gt;callback(msg-&gt;<a class="code" href="structmqtt__message.html#a078ecbb904424484f996625808eceb7f">topic</a>, msg-&gt;<a class="code" href="structmqtt__message.html#a74e6c0f1e925eb38fb0d4cec8c6a6152">payload</a>);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                                pPubSubClient-&gt;buffer[0] = <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1afbeab5fd4cdcb49a725fc27099c16cc2">PUBACK</a>;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                                pPubSubClient-&gt;buffer[1] = 2;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                                pPubSubClient-&gt;buffer[2] = (msg-&gt;<a class="code" href="structmqtt__message.html#ac98fb6538f1af64b814ec2cabc897194">msgId</a> &gt;&gt; 8);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                                pPubSubClient-&gt;buffer[3] = (msg-&gt;<a class="code" href="structmqtt__message.html#ac98fb6538f1af64b814ec2cabc897194">msgId</a> &amp; 0xFF);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                                <span class="keywordtype">int</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = pPubSubClient-&gt;_client-&gt;<a class="code" href="class_socket.html#ad9757badfe9d9903d07ef7c70279ad77">send</a>(pPubSubClient-&gt;buffer, 4);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> &lt; 0) pPubSubClient-&gt;_state = <a class="code" href="_pub_sub_client_8h.html#aaf4eb4a280abe9aa1fccf2a181d30344a00bc8d8fa2a4ef22ac8d9aa337802707">CONNECTION_LOST</a>;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                                pPubSubClient-&gt;keepAliveTimer-&gt;<a class="code" href="class_free_r_t_o_s_timer.html#ae1f243c23d6d6edece568fe0e9de0209">reset</a>(0); <span class="comment">//lastOutActivity = t;</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(msg-&gt;<a class="code" href="structmqtt__message.html#a6a041ddd10d315dd739831db3bd7ec0e">qos</a> == <a class="code" href="_pub_sub_client_8h.html#a396015e492b0fee8da37c7168d9cdb33a00677da1fb3fc1bdfa05c33dcaa3ad7c">QOS2</a>) {</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                                ESP_LOGD(TAG, <span class="stringliteral">&quot;QOS2 is not supported!&quot;</span>);</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                                ESP_LOGD(TAG, <span class="stringliteral">&quot;QOS-Level unkonwon yet!&quot;</span>);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                            }</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                        }</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg-&gt;<a class="code" href="structmqtt__message.html#a9471d7f2bb4489e6126a9a708621d088">type</a> == <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a83d6791930272f999f2ddab083234fa7">PINGREQ</a>) {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                        pPubSubClient-&gt;buffer[0] = <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a1a3a12a071fc8874e9518b1c94aaef30">PINGRESP</a>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                        pPubSubClient-&gt;buffer[1] = 0;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                        <span class="keywordtype">int</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = pPubSubClient-&gt;_client-&gt;<a class="code" href="class_socket.html#ad9757badfe9d9903d07ef7c70279ad77">send</a>(pPubSubClient-&gt;buffer, 2);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> &lt; 0) pPubSubClient-&gt;_state = <a class="code" href="_pub_sub_client_8h.html#aaf4eb4a280abe9aa1fccf2a181d30344a00bc8d8fa2a4ef22ac8d9aa337802707">CONNECTION_LOST</a>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg-&gt;<a class="code" href="structmqtt__message.html#a9471d7f2bb4489e6126a9a708621d088">type</a> == <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a1a3a12a071fc8874e9518b1c94aaef30">PINGRESP</a>) {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                        pPubSubClient-&gt;PING_outstanding = <span class="keyword">false</span>;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg-&gt;<a class="code" href="structmqtt__message.html#a9471d7f2bb4489e6126a9a708621d088">type</a> == <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1abe48cb8225101545fd55752f2534348d">SUBACK</a>) {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                        pPubSubClient-&gt;SUBACK_outstanding = <span class="keyword">false</span>;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                        pPubSubClient-&gt;timeoutTimer-&gt;<a class="code" href="class_free_r_t_o_s_timer.html#adfa6641c22dba498dcd44744294d072d">stop</a>(0);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (msg-&gt;<a class="code" href="structmqtt__message.html#a9471d7f2bb4489e6126a9a708621d088">type</a> == <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a722b573f419f3cdb3b2263f7dd00a3ae">UNSUBACK</a>) {</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                        pPubSubClient-&gt;UNSUBACK_Outstanding = <span class="keyword">false</span>;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                        pPubSubClient-&gt;timeoutTimer-&gt;<a class="code" href="class_free_r_t_o_s_timer.html#adfa6641c22dba498dcd44744294d072d">stop</a>(0);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                    }</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                    <span class="keyword">delete</span>(msg);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                }</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            }</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        } <span class="comment">// while (true)</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    } <span class="comment">// run</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;}; <span class="comment">// PubSubClientTask</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#a63abf28fee11df02d353b83cd08c255e">  104</a></span>&#160;<a class="code" href="class_pub_sub_client.html#a63abf28fee11df02d353b83cd08c255e">PubSubClient::PubSubClient</a>() {</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    setup();</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    this-&gt;_state = <a class="code" href="_pub_sub_client_8h.html#aaf4eb4a280abe9aa1fccf2a181d30344acdaad1112073e3e2ea032424c38c34e1">DISCONNECTED</a>;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    this-&gt;_client = <span class="keyword">new</span> <a class="code" href="class_socket.html">Socket</a>;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="class_pub_sub_client.html#a115733ca6dd337362375d3c4a45300fe">setCallback</a>(NULL);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;}</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#aeb3b73c58a265de2192cda5021b55d38">  112</a></span>&#160;<a class="code" href="class_pub_sub_client.html#a63abf28fee11df02d353b83cd08c255e">PubSubClient::PubSubClient</a>(<a class="code" href="class_socket.html">Socket</a>&amp; client) {</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    setup();</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    this-&gt;_state = <a class="code" href="_pub_sub_client_8h.html#aaf4eb4a280abe9aa1fccf2a181d30344acdaad1112073e3e2ea032424c38c34e1">DISCONNECTED</a>;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="class_pub_sub_client.html#a30e35b9461d26f3d10736ac39c9de418">setClient</a>(client);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;}</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#a5a85198d5b6590eb5e5fa034f9c96780">  119</a></span>&#160;<a class="code" href="class_pub_sub_client.html#a63abf28fee11df02d353b83cd08c255e">PubSubClient::PubSubClient</a>(<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> addr, uint16_t port) {</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    setup();</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    this-&gt;_state = <a class="code" href="_pub_sub_client_8h.html#aaf4eb4a280abe9aa1fccf2a181d30344acdaad1112073e3e2ea032424c38c34e1">DISCONNECTED</a>;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    this-&gt;_client = <span class="keyword">new</span> <a class="code" href="class_socket.html">Socket</a>;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="class_pub_sub_client.html#aa809b115adf6c551dee72d12ecfd8414">setServer</a>(addr, port);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;}</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#aef3210df9c46325888756ea9065e74ea">  127</a></span>&#160;<a class="code" href="class_pub_sub_client.html#a63abf28fee11df02d353b83cd08c255e">PubSubClient::PubSubClient</a>(<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> addr, uint16_t port, <a class="code" href="class_socket.html">Socket</a>&amp; client) {</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    setup();</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    this-&gt;_state = <a class="code" href="_pub_sub_client_8h.html#aaf4eb4a280abe9aa1fccf2a181d30344acdaad1112073e3e2ea032424c38c34e1">DISCONNECTED</a>;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="class_pub_sub_client.html#aa809b115adf6c551dee72d12ecfd8414">setServer</a>(addr, port);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="class_pub_sub_client.html#a30e35b9461d26f3d10736ac39c9de418">setClient</a>(client);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#a21e8a6cfeb5efea893a71cdaa82fa6c0">  135</a></span>&#160;<a class="code" href="class_pub_sub_client.html#a63abf28fee11df02d353b83cd08c255e">PubSubClient::PubSubClient</a>(<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> addr, uint16_t port, <a class="code" href="_pub_sub_client_8h.html#a20b35a8e27959a2b227c6d3c80799122">MQTT_CALLBACK_SIGNATURE</a>, <a class="code" href="class_socket.html">Socket</a>&amp; client) {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    setup();</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    this-&gt;_state = <a class="code" href="_pub_sub_client_8h.html#aaf4eb4a280abe9aa1fccf2a181d30344acdaad1112073e3e2ea032424c38c34e1">DISCONNECTED</a>;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="class_pub_sub_client.html#aa809b115adf6c551dee72d12ecfd8414">setServer</a>(addr, port);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="class_pub_sub_client.html#a115733ca6dd337362375d3c4a45300fe">setCallback</a>(callback);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="class_pub_sub_client.html#a30e35b9461d26f3d10736ac39c9de418">setClient</a>(client);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;}</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#a597a07b746c33a77f77486f426dc85fd">  144</a></span>&#160;<a class="code" href="class_pub_sub_client.html#a597a07b746c33a77f77486f426dc85fd">PubSubClient::~PubSubClient</a>() {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    _client-&gt;<a class="code" href="class_socket.html#aef06605c6725958004116983f1a2051f">close</a>();</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    keepAliveTimer-&gt;<a class="code" href="class_free_r_t_o_s_timer.html#adfa6641c22dba498dcd44744294d072d">stop</a>(0);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    timeoutTimer-&gt;<a class="code" href="class_free_r_t_o_s_timer.html#adfa6641c22dba498dcd44744294d072d">stop</a>(0);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    m_task-&gt;<a class="code" href="class_task.html#aba5eb3d6c2a034aa0e319383fbec68c4">stop</a>();</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keyword">delete</span> (_client);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keyword">delete</span> (keepAliveTimer);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keyword">delete</span> (timeoutTimer);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keyword">delete</span> (m_task);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;}</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="_pub_sub_client_8cpp.html#ac358206ecffc0c74ce9dea1b82e39595">  162</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="_pub_sub_client_8cpp.html#ac358206ecffc0c74ce9dea1b82e39595">keepAliveTimerMapper</a>(<a class="code" href="class_free_r_t_o_s_timer.html">FreeRTOSTimer</a>* pTimer) {</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="class_pub_sub_client.html">PubSubClient</a>* m_pubSubClient = (<a class="code" href="class_pub_sub_client.html">PubSubClient</a>*) pTimer-&gt;<a class="code" href="class_free_r_t_o_s_timer.html#a162a7a248cef2303e6b96048056ef322">getData</a>();</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    m_pubSubClient-&gt;<a class="code" href="class_pub_sub_client.html#a49518d415ae1fc9a115712bb90bcbafb">keepAliveChecker</a>();</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;} <span class="comment">//keepAliveChecker</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="_pub_sub_client_8cpp.html#aa5d038670dee12a871073fd83513ea48">  174</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="_pub_sub_client_8cpp.html#aa5d038670dee12a871073fd83513ea48">timeoutTimerMapper</a>(<a class="code" href="class_free_r_t_o_s_timer.html">FreeRTOSTimer</a>* pTimer) {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <a class="code" href="class_pub_sub_client.html">PubSubClient</a>* m_pubSubClient = (<a class="code" href="class_pub_sub_client.html">PubSubClient</a>*) pTimer-&gt;<a class="code" href="class_free_r_t_o_s_timer.html#a162a7a248cef2303e6b96048056ef322">getData</a>();</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    m_pubSubClient-&gt;<a class="code" href="class_pub_sub_client.html#ac67061f0fdd7b98007f6f7501b6a5dbd">timeoutChecker</a>();</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;} <span class="comment">//keepAliveChecker</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="keywordtype">void</span> PubSubClient::setup() {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    PING_outstanding = <span class="keyword">false</span>;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    SUBACK_outstanding = <span class="keyword">false</span>;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    UNSUBACK_Outstanding = <span class="keyword">false</span>;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    keepAliveTimer = <span class="keyword">new</span> <a class="code" href="class_free_r_t_o_s_timer.html">FreeRTOSTimer</a>((<span class="keywordtype">char</span>*) <span class="stringliteral">&quot;keepAliveTimer&quot;</span>,</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            (<a class="code" href="_pub_sub_client_8h.html#afb4dd8c75385ab30e659314df7c2c335">MQTT_KEEPALIVE</a> * 1000) / portTICK_PERIOD_MS, pdTRUE, <span class="keyword">this</span>,</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <a class="code" href="_pub_sub_client_8cpp.html#ac358206ecffc0c74ce9dea1b82e39595">keepAliveTimerMapper</a>);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    timeoutTimer = <span class="keyword">new</span> <a class="code" href="class_free_r_t_o_s_timer.html">FreeRTOSTimer</a>((<span class="keywordtype">char</span>*) <span class="stringliteral">&quot;timeoutTimer&quot;</span>,</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                (<a class="code" href="_pub_sub_client_8h.html#afb4dd8c75385ab30e659314df7c2c335">MQTT_KEEPALIVE</a> * 1000) / portTICK_PERIOD_MS, pdTRUE, <span class="keyword">this</span>,</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                <a class="code" href="_pub_sub_client_8cpp.html#aa5d038670dee12a871073fd83513ea48">timeoutTimerMapper</a>);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    m_task = <span class="keyword">new</span> <a class="code" href="class_pub_sub_client.html#aa566055775e8c1519b834da048cbc68f">PubSubClientTask</a>(<span class="stringliteral">&quot;PubSubClientTask&quot;</span>);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;} <span class="comment">// setup</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#a49518d415ae1fc9a115712bb90bcbafb">  210</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_pub_sub_client.html#a49518d415ae1fc9a115712bb90bcbafb">PubSubClient::keepAliveChecker</a>() {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">if</span> (PING_outstanding &amp;&amp; <a class="code" href="class_pub_sub_client.html#a7f2097ea474209f9454dbdcb671fa2e9">connected</a>()) {</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        _state = <a class="code" href="_pub_sub_client_8h.html#aaf4eb4a280abe9aa1fccf2a181d30344af0f23e909b306d85fac6d0087800dadc">CONNECTION_TIMEOUT</a>;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="comment">//_client-&gt;close();</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        ESP_LOGD(TAG, <span class="stringliteral">&quot;KeepAlive TIMEOUT!&quot;</span>);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        buffer[0] = <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a83d6791930272f999f2ddab083234fa7">PINGREQ</a>;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        buffer[1] = 0;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = _client-&gt;<a class="code" href="class_socket.html#ad9757badfe9d9903d07ef7c70279ad77">send</a>(buffer, 2);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> &lt; 0) _state = <a class="code" href="_pub_sub_client_8h.html#aaf4eb4a280abe9aa1fccf2a181d30344a00bc8d8fa2a4ef22ac8d9aa337802707">CONNECTION_LOST</a>;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        ESP_LOGD(TAG, <span class="stringliteral">&quot;send KeepAlive REQUEST!&quot;</span>);</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        PING_outstanding = <span class="keyword">true</span>;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;} <span class="comment">//keepAliveChecker</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#ac67061f0fdd7b98007f6f7501b6a5dbd">  233</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_pub_sub_client.html#ac67061f0fdd7b98007f6f7501b6a5dbd">PubSubClient::timeoutChecker</a>() {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_pub_sub_client.html#a7f2097ea474209f9454dbdcb671fa2e9">connected</a>() &amp;&amp; (SUBACK_outstanding || UNSUBACK_Outstanding)) {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        _state = <a class="code" href="_pub_sub_client_8h.html#aaf4eb4a280abe9aa1fccf2a181d30344af0f23e909b306d85fac6d0087800dadc">CONNECTION_TIMEOUT</a>;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="comment">//_client-&gt;close();</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        ESP_LOGD(TAG, <span class="stringliteral">&quot;MQTT TIMEOUT!&quot;</span>);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;} <span class="comment">//keepAliveChecker</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#ae7a37521960b158aff48b7fa17d1e825">  247</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_pub_sub_client.html#af482531348f9031f7713fdee5329d237">PubSubClient::connect</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keywordtype">id</span>) {</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_pub_sub_client.html#af482531348f9031f7713fdee5329d237">connect</a>(<span class="keywordtype">id</span>, NULL, NULL, 0, 0, 0, 0);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;}</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#a83999f75903ea9ca9c9655f9631a4a71">  259</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_pub_sub_client.html#af482531348f9031f7713fdee5329d237">PubSubClient::connect</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keywordtype">id</span>, <span class="keyword">const</span> <span class="keywordtype">char</span>* user, <span class="keyword">const</span> <span class="keywordtype">char</span>* pass) {</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_pub_sub_client.html#af482531348f9031f7713fdee5329d237">connect</a>(<span class="keywordtype">id</span>, user, pass, 0, 0, 0, 0);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;}</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#af659dd03043c52fbf662c4af13c18918">  273</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_pub_sub_client.html#af482531348f9031f7713fdee5329d237">PubSubClient::connect</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keywordtype">id</span>, <span class="keyword">const</span> <span class="keywordtype">char</span>* willTopic, uint8_t willQos, <span class="keywordtype">bool</span> willRetain, <span class="keyword">const</span> <span class="keywordtype">char</span>* willMessage) {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_pub_sub_client.html#af482531348f9031f7713fdee5329d237">connect</a>(<span class="keywordtype">id</span>, NULL, NULL, willTopic, willQos, willRetain, willMessage);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;}</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#ae444eb4da7b7623a305ef1a66910f217">  289</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_pub_sub_client.html#af482531348f9031f7713fdee5329d237">PubSubClient::connect</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keywordtype">id</span>, <span class="keyword">const</span> <span class="keywordtype">char</span>* user, <span class="keyword">const</span> <span class="keywordtype">char</span>* pass, <span class="keyword">const</span> <span class="keywordtype">char</span>* willTopic, uint8_t willQos, <span class="keywordtype">bool</span> willRetain, <span class="keyword">const</span> <span class="keywordtype">char</span>* willMessage) {</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    _config.<a class="code" href="structmqtt___init_type_def.html#a7cdb6f0bed7622ba7bf7bc160af6cc6f">id</a>          = id;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    _config.<a class="code" href="structmqtt___init_type_def.html#ac57df8da075f5064160d4bfb6760c3f6">user</a>        = user;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    _config.<a class="code" href="structmqtt___init_type_def.html#a6adcbcc781556f8292ae8b397fdc1441">pass</a>        = pass;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    _config.<a class="code" href="structmqtt___init_type_def.html#aa43932cb580512f7537641056a816e62">willTopic</a>   = willTopic;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    _config.<a class="code" href="structmqtt___init_type_def.html#a9370bda4eb16e4ef69e967b8d8f335e4">willQos</a>     = willQos;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    _config.<a class="code" href="structmqtt___init_type_def.html#ad30296304185f1f033c30149903764f1">willRetain</a>  = willRetain;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    _config.<a class="code" href="structmqtt___init_type_def.html#a3233ba2b6344e7336a0f929b06d18145">willMessage</a> = willMessage;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_pub_sub_client.html#af482531348f9031f7713fdee5329d237">connect</a>();</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;}</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#af482531348f9031f7713fdee5329d237">  311</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_pub_sub_client.html#af482531348f9031f7713fdee5329d237">PubSubClient::connect</a>() {</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_pub_sub_client.html#a7f2097ea474209f9454dbdcb671fa2e9">connected</a>()) {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        ESP_LOGD(TAG, <span class="stringliteral">&quot;Connect to mqtt server...&quot;</span>);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        ESP_LOGD(TAG, <span class="stringliteral">&quot;ip: %s  port: %d&quot;</span>, _config.<a class="code" href="structmqtt___init_type_def.html#a445b1cf3703342f5291d6423d2498b67">ip</a>.c_str(), _config.<a class="code" href="structmqtt___init_type_def.html#a967e776f054609c9ae5dd3d5ee1cc7df">port</a>);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = _client-&gt;<a class="code" href="class_socket.html#ae537e61bb9f64b0322c6e9c39bb24fde">connect</a>((<span class="keywordtype">char</span> *)_config.<a class="code" href="structmqtt___init_type_def.html#a445b1cf3703342f5291d6423d2498b67">ip</a>.c_str(), _config.<a class="code" href="structmqtt___init_type_def.html#a967e776f054609c9ae5dd3d5ee1cc7df">port</a>);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> == 0) {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            nextMsgId = 1;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="comment">// Leave room in the buffer for header and variable length field</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            uint16_t length = 5;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="preprocessor">#if MQTT_VERSION == MQTT_VERSION_3_1</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            uint8_t d[9] = { 0x00, 0x06, <span class="charliteral">&#39;M&#39;</span>, <span class="charliteral">&#39;Q&#39;</span>, <span class="charliteral">&#39;I&#39;</span>, <span class="charliteral">&#39;s&#39;</span>, <span class="charliteral">&#39;d&#39;</span>, <span class="charliteral">&#39;p&#39;</span>, <a class="code" href="_pub_sub_client_8h.html#a702197a21870dfd505d92530b27754ac">MQTT_VERSION</a> };</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="preprocessor">#define MQTT_HEADER_VERSION_LENGTH 9</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="preprocessor">#elif MQTT_VERSION == MQTT_VERSION_3_1_1</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            uint8_t d[7] = { 0x00, 0x04, <span class="charliteral">&#39;M&#39;</span>, <span class="charliteral">&#39;Q&#39;</span>, <span class="charliteral">&#39;T&#39;</span>, <span class="charliteral">&#39;T&#39;</span>, <a class="code" href="_pub_sub_client_8h.html#a702197a21870dfd505d92530b27754ac">MQTT_VERSION</a> };</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="preprocessor">#define MQTT_HEADER_VERSION_LENGTH 7</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="smooth-gtk-thread_8c.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="smooth-gtk-thread_8c.html#a37d972ae0b47b9099e30983131d31916">j</a> &lt; <a class="code" href="_pub_sub_client_8cpp.html#a2a058a9bce477b71e5cc11907f69b716">MQTT_HEADER_VERSION_LENGTH</a>; <a class="code" href="smooth-gtk-thread_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                buffer[length++] = d[<a class="code" href="smooth-gtk-thread_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>];</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            }</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            uint8_t v;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <span class="keywordflow">if</span> (_config.<a class="code" href="structmqtt___init_type_def.html#aa43932cb580512f7537641056a816e62">willTopic</a>) {</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                v = 0x06 | (_config.<a class="code" href="structmqtt___init_type_def.html#a9370bda4eb16e4ef69e967b8d8f335e4">willQos</a> &lt;&lt; 3) | (_config.<a class="code" href="structmqtt___init_type_def.html#ad30296304185f1f033c30149903764f1">willRetain</a> &lt;&lt; 5);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                v = 0x02;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            }</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            <span class="keywordflow">if</span> (_config.<a class="code" href="structmqtt___init_type_def.html#ac57df8da075f5064160d4bfb6760c3f6">user</a> != NULL) {</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                v = v | 0x80;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                <span class="keywordflow">if</span> (_config.<a class="code" href="structmqtt___init_type_def.html#a6adcbcc781556f8292ae8b397fdc1441">pass</a> != NULL) {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                    v = v | (0x80 &gt;&gt; 1);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                }</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            }</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            buffer[length++] = v;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            buffer[length++] = ((<a class="code" href="_pub_sub_client_8h.html#afb4dd8c75385ab30e659314df7c2c335">MQTT_KEEPALIVE</a>) &gt;&gt; 8);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            buffer[length++] = ((<a class="code" href="_pub_sub_client_8h.html#afb4dd8c75385ab30e659314df7c2c335">MQTT_KEEPALIVE</a>) &amp; 0xFF);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            length = writeString(_config.<a class="code" href="structmqtt___init_type_def.html#a7cdb6f0bed7622ba7bf7bc160af6cc6f">id</a>, buffer, length);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <span class="keywordflow">if</span> (_config.<a class="code" href="structmqtt___init_type_def.html#aa43932cb580512f7537641056a816e62">willTopic</a>) {</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                length = writeString(_config.<a class="code" href="structmqtt___init_type_def.html#aa43932cb580512f7537641056a816e62">willTopic</a>, buffer, length);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                length = writeString(_config.<a class="code" href="structmqtt___init_type_def.html#a3233ba2b6344e7336a0f929b06d18145">willMessage</a>, buffer, length);</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            }</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            <span class="keywordflow">if</span> (_config.<a class="code" href="structmqtt___init_type_def.html#ac57df8da075f5064160d4bfb6760c3f6">user</a> != NULL) {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                length = writeString(_config.<a class="code" href="structmqtt___init_type_def.html#ac57df8da075f5064160d4bfb6760c3f6">user</a>, buffer, length);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                <span class="keywordflow">if</span> (_config.<a class="code" href="structmqtt___init_type_def.html#a6adcbcc781556f8292ae8b397fdc1441">pass</a> != NULL) {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                    length = writeString(_config.<a class="code" href="structmqtt___init_type_def.html#a6adcbcc781556f8292ae8b397fdc1441">pass</a>, buffer, length);</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                }</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            }</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            write(<a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a20391dd2915a0e64343d24c2f2e40b95">CONNECT</a>, buffer, length - 5);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <span class="comment">// start keepAliveTimer in 1ms...</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            keepAliveTimer-&gt;<a class="code" href="class_free_r_t_o_s_timer.html#a4cad6643b084ed3813a424fa60547742">start</a>(0); <span class="comment">//lastInActivity = lastOutActivity = millis();</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            readPacket();</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            uint8_t <a class="code" href="form_8d.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> = buffer[0] &amp; 0xF0;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="form_8d.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> == <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1aa636430e8d9563704f7328824d6bc0a5">CONNACK</a>) {</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                ESP_LOGD(TAG, <span class="stringliteral">&quot;Connected to mqtt server!&quot;</span>);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                keepAliveTimer-&gt;<a class="code" href="class_free_r_t_o_s_timer.html#ae1f243c23d6d6edece568fe0e9de0209">reset</a>(0); <span class="comment">//lastInActivity = millis();</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                PING_outstanding = <span class="keyword">false</span>;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                _state = <a class="code" href="_pub_sub_client_8h.html#aaf4eb4a280abe9aa1fccf2a181d30344a7a691a2430ec26878897b5fbc9c22a4c">CONNECTED</a>;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                m_task-&gt;<a class="code" href="class_task.html#a6f13d13787e21dc929b61d112b863433">start</a>(<span class="keyword">this</span>);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                _state = (<a class="code" href="_pub_sub_client_8h.html#aaf4eb4a280abe9aa1fccf2a181d30344">mqtt_state</a>) buffer[3];</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                ESP_LOGD(TAG, <span class="stringliteral">&quot;Error: %d&quot;</span>, _state);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            }</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            keepAliveTimer-&gt;<a class="code" href="class_free_r_t_o_s_timer.html#adfa6641c22dba498dcd44744294d072d">stop</a>(0);</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            _state = <a class="code" href="_pub_sub_client_8h.html#aaf4eb4a280abe9aa1fccf2a181d30344a0b40fcca1def55cec2d61f92ab1abde1">CONNECT_FAILED</a>;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        }</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    }</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;}</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="keywordtype">size_t</span> PubSubClient::readPacket() {</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordtype">size_t</span> res = _client-&gt;<a class="code" href="class_socket.html#abeb5751e47f3fa96755aba55d29c300a">receive</a>(buffer, <a class="code" href="_pub_sub_client_8h.html#ae09b594688a59f1427c7e45259e039b9">MQTT_MAX_PACKET_SIZE</a>);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">if</span> (res &gt; <a class="code" href="_pub_sub_client_8h.html#ae09b594688a59f1427c7e45259e039b9">MQTT_MAX_PACKET_SIZE</a>) {</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        res = 0; <span class="comment">// This will cause the packet to be ignored.</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    }</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">return</span> (uint16_t) res;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;}</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#a59500b307e27b6ec9007ef1f3a0c24db">  419</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_pub_sub_client.html#a59500b307e27b6ec9007ef1f3a0c24db">PubSubClient::publish</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* topic, <span class="keyword">const</span> <span class="keywordtype">char</span>* payload) {</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_pub_sub_client.html#a59500b307e27b6ec9007ef1f3a0c24db">publish</a>(topic, (<span class="keyword">const</span> uint8_t*) payload, strlen(payload), <span class="keyword">false</span>);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;}</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#a7daa0a786e0bcb8447cc2e9c5acaae7b">  431</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_pub_sub_client.html#a59500b307e27b6ec9007ef1f3a0c24db">PubSubClient::publish</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* topic, <span class="keyword">const</span> <span class="keywordtype">char</span>* payload, <span class="keywordtype">bool</span> retained) {</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_pub_sub_client.html#a59500b307e27b6ec9007ef1f3a0c24db">publish</a>(topic, (<span class="keyword">const</span> uint8_t*) payload, strlen(payload), retained);</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;}</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#a640422e51b06a9021140766928645a6d">  443</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_pub_sub_client.html#a59500b307e27b6ec9007ef1f3a0c24db">PubSubClient::publish</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* topic, <span class="keyword">const</span> uint8_t* payload, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> plength) {</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_pub_sub_client.html#a59500b307e27b6ec9007ef1f3a0c24db">publish</a>(topic, payload, plength, <span class="keyword">false</span>);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;}</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00456"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#ad2cd5fb0bbd16f2b177faeda3ec3ca61">  456</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_pub_sub_client.html#a59500b307e27b6ec9007ef1f3a0c24db">PubSubClient::publish</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* topic, <span class="keyword">const</span> uint8_t* payload, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> plength, <span class="keywordtype">bool</span> retained) {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_pub_sub_client.html#a7f2097ea474209f9454dbdcb671fa2e9">connected</a>()) {</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="_pub_sub_client_8h.html#ae09b594688a59f1427c7e45259e039b9">MQTT_MAX_PACKET_SIZE</a> &lt; 5 + 2 + strlen(topic) + plength) {</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <span class="comment">// Too long</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        }</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="comment">// Leave room in the buffer for header and variable length field</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        uint16_t length = 5;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        length = writeString(topic, buffer, length);</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        uint16_t <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &lt; plength; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++) {</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            buffer[length++] = payload[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>];</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        }</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        uint8_t header = <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1abd1a204dcfa4933760cd12e779f36fc5">PUBLISH</a>;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">if</span> (retained) {</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            header |= 1;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        }</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <span class="keywordflow">return</span> write(header, buffer, length - 5);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    }</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;}</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">//bool PubSubClient::publish_P(const char* topic, const uint8_t* payload,</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">//      unsigned int plength, bool retained) {</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">//  uint8_t llen = 0;</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">//  uint8_t digit;</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">//  unsigned int rc = 0;</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">//  uint16_t tlen;</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">//  unsigned int pos = 0;</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">//  unsigned int i;</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">//  uint8_t header;</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">//  unsigned int len;</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">//  if (!connected()) {</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">//      return false;</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">//  }</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment">//  tlen = strlen(topic);</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">//  header = PUBLISH;</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">//  if (retained) {</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">//      header |= 1;</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">//  }</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment">//  buffer[pos++] = header;</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">//  len = plength + 2 + tlen;</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">//  do {</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">//      digit = len % 128;</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">//      len = len / 128;</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">//      if (len &gt; 0) {</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">//          digit |= 0x80;</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">//      }</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">//      buffer[pos++] = digit;</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">//      llen++;</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">//  } while (len &gt; 0);</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">//  pos = writeString(topic, buffer, pos);</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">//  rc += _client-&gt;send(buffer, pos);</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">//  for (i = 0; i &lt; plength; i++) {</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">//      //rc += _client-&gt;send((char)pgm_read_byte_near(payload + i));</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">//      //rc += _client-&gt;send((uint8_t*) pgm_read_byte_near(payload + i), 1);</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">//  }</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">//  keepAliveTimer-&gt;reset(0); //lastOutActivity = millis();</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment">//  return rc == tlen + 4 + plength;</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment">//}</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="keywordtype">bool</span> PubSubClient::write(uint8_t header, uint8_t* <a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>, uint16_t length) {</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    uint8_t lenBuf[4];</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    uint8_t llen = 0;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    uint8_t digit;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    uint8_t pos = 0;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    uint16_t <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = length;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordflow">do</span> {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        digit = <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> % 128;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> / 128;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> &gt; 0) {</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            digit |= 0x80;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        }</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        lenBuf[pos++] = digit;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        llen++;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    } <span class="keywordflow">while</span> (<a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> &gt; 0);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>[4 - llen] = header;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &lt; llen; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++) {</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>[5 - llen + <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>] = lenBuf[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>];</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    }</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">//#ifdef MQTT_MAX_TRANSFER_SIZE</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">//  uint8_t* writeBuf = buf + (4 - llen);</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">//  uint16_t bytesRemaining = length + 1 + llen;  //Match the length type</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">//  uint8_t bytesToWrite;</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">//  bool result = true;</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">//  while ((bytesRemaining &gt; 0) &amp;&amp; result) {</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment">//      bytesToWrite = (bytesRemaining &gt; MQTT_MAX_TRANSFER_SIZE) ? MQTT_MAX_TRANSFER_SIZE : bytesRemaining;</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">//      rc = _client-&gt;write(writeBuf, bytesToWrite);</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">//      result = (rc == bytesToWrite);</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">//      bytesRemaining -= rc;</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">//      writeBuf += rc;</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment">//  }</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment">//  return result;</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">//#else</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = _client-&gt;<a class="code" href="class_socket.html#ad9757badfe9d9903d07ef7c70279ad77">send</a>(<a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a> + (4 - llen), length + 1 + llen);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> &lt; 0) _state = <a class="code" href="_pub_sub_client_8h.html#aaf4eb4a280abe9aa1fccf2a181d30344a00bc8d8fa2a4ef22ac8d9aa337802707">CONNECTION_LOST</a>;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    keepAliveTimer-&gt;<a class="code" href="class_free_r_t_o_s_timer.html#ae1f243c23d6d6edece568fe0e9de0209">reset</a>(0); <span class="comment">//lastOutActivity = millis();</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> == 1 + llen + length);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">//#endif</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;}</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00584"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#a62ae269568ef379fb21a434f7e6d4a06">  584</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_pub_sub_client.html#a62ae269568ef379fb21a434f7e6d4a06">PubSubClient::subscribe</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* topic, <span class="keywordtype">bool</span> ack) {</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="_pub_sub_client_8h.html#ae09b594688a59f1427c7e45259e039b9">MQTT_MAX_PACKET_SIZE</a> &lt; 9 + strlen(topic)) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Too long</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_pub_sub_client.html#a7f2097ea474209f9454dbdcb671fa2e9">connected</a>()) {</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="comment">// Leave room in the buffer for header and variable length field</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        uint16_t length = 5;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        nextMsgId++;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="keywordflow">if</span> (nextMsgId == 0) {</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            nextMsgId = 1;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        }</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        buffer[length++] = (nextMsgId &gt;&gt; 8);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        buffer[length++] = (nextMsgId &amp; 0xFF);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        length = writeString(topic, buffer, length);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        buffer[length++] = <a class="code" href="_pub_sub_client_8h.html#a396015e492b0fee8da37c7168d9cdb33a2102e003f98d5f996f203b66b2827764">QOS1</a>;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <span class="keywordflow">if</span> (write(<a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1abc6f919ff681f5f552b2f7d1f0fba832">SUBSCRIBE</a> | <a class="code" href="_pub_sub_client_8h.html#a396015e492b0fee8da37c7168d9cdb33a2102e003f98d5f996f203b66b2827764">QOS1</a>, buffer, length - 5)) {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            SUBACK_outstanding = <span class="keyword">true</span>;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            <span class="keywordflow">if</span> (ack) timeoutTimer-&gt;<a class="code" href="class_free_r_t_o_s_timer.html#a4cad6643b084ed3813a424fa60547742">start</a>(0);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        }</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    }</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;}</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div><div class="line"><a name="l00614"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#af6178d5e981a461e53424e3158d63b0e">  614</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_pub_sub_client.html#af6178d5e981a461e53424e3158d63b0e">PubSubClient::isSubscribeDone</a>() {</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keywordflow">return</span> !SUBACK_outstanding;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;}</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#af828241dd14833967c27b902b43b6491">  625</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_pub_sub_client.html#af828241dd14833967c27b902b43b6491">PubSubClient::unsubscribe</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* topic, <span class="keywordtype">bool</span> ack) {</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="_pub_sub_client_8h.html#ae09b594688a59f1427c7e45259e039b9">MQTT_MAX_PACKET_SIZE</a> &lt; 9 + strlen(topic)) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// Too long</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_pub_sub_client.html#a7f2097ea474209f9454dbdcb671fa2e9">connected</a>()) {</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        uint16_t length = 5;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        nextMsgId++;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="keywordflow">if</span> (nextMsgId == 0) {</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            nextMsgId = 1;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        }</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        buffer[length++] = (nextMsgId &gt;&gt; 8);</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        buffer[length++] = (nextMsgId &amp; 0xFF);</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        length = writeString(topic, buffer, length);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <span class="keywordflow">if</span> (write(<a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a8395e5981c15d813c588c86988fd4aea">UNSUBSCRIBE</a> | <a class="code" href="_pub_sub_client_8h.html#a396015e492b0fee8da37c7168d9cdb33a2102e003f98d5f996f203b66b2827764">QOS1</a>, buffer, length - 5)) {</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            UNSUBACK_Outstanding = <span class="keyword">true</span>;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <span class="keywordflow">if</span> (ack) timeoutTimer-&gt;<a class="code" href="class_free_r_t_o_s_timer.html#a4cad6643b084ed3813a424fa60547742">start</a>(0);</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        }</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    }</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;}</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#a3bd39e46772e74c818ebbfedd4fa076f">  653</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_pub_sub_client.html#a3bd39e46772e74c818ebbfedd4fa076f">PubSubClient::isUnsubscribeDone</a>() {</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keywordflow">return</span> !UNSUBACK_Outstanding;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;}</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00662"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#ac0d1c6de8a88a9f9fda04126c8cf2fe0">  662</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_pub_sub_client.html#ac0d1c6de8a88a9f9fda04126c8cf2fe0">PubSubClient::disconnect</a>() {</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    buffer[0] = <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a2f6318afb30e8e2817e6203ebedc8173">DISCONNECT</a>;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    buffer[1] = 0;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    _client-&gt;<a class="code" href="class_socket.html#ad9757badfe9d9903d07ef7c70279ad77">send</a>(buffer, 2);</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    _state = <a class="code" href="_pub_sub_client_8h.html#aaf4eb4a280abe9aa1fccf2a181d30344acdaad1112073e3e2ea032424c38c34e1">DISCONNECTED</a>;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    _client-&gt;<a class="code" href="class_socket.html#aef06605c6725958004116983f1a2051f">close</a>();</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    keepAliveTimer-&gt;<a class="code" href="class_free_r_t_o_s_timer.html#adfa6641c22dba498dcd44744294d072d">stop</a>(0); <span class="comment">//lastInActivity = lastOutActivity = millis();</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    timeoutTimer-&gt;<a class="code" href="class_free_r_t_o_s_timer.html#adfa6641c22dba498dcd44744294d072d">stop</a>(0);</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;}</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;uint16_t PubSubClient::writeString(<span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keywordtype">string</span>, uint8_t* <a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>, uint16_t pos) {</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* idp = <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">string</a>;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    uint16_t <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    pos += 2;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="keywordflow">while</span> (*idp) {</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>[pos++] = *idp++;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    }</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>[pos - <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> - 2] = (<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &gt;&gt; 8);</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>[pos - <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> - 1] = (<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &amp; 0xFF);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordflow">return</span> pos;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;}</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#a7f2097ea474209f9454dbdcb671fa2e9">  694</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_pub_sub_client.html#a7f2097ea474209f9454dbdcb671fa2e9">PubSubClient::connected</a>() {</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordflow">if</span> (this-&gt;_state != <a class="code" href="_pub_sub_client_8h.html#aaf4eb4a280abe9aa1fccf2a181d30344a7a691a2430ec26878897b5fbc9c22a4c">CONNECTED</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="keywordflow">if</span> (_client == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!_client-&gt;<a class="code" href="class_socket.html#a5ccaf81da2b6f25dded056e6dbf7f410">isValid</a>()) {</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        this-&gt;_state = <a class="code" href="_pub_sub_client_8h.html#aaf4eb4a280abe9aa1fccf2a181d30344a00bc8d8fa2a4ef22ac8d9aa337802707">CONNECTION_LOST</a>;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="keywordflow">if</span> (_client-&gt;<a class="code" href="class_socket.html#a5ccaf81da2b6f25dded056e6dbf7f410">isValid</a>()) _client-&gt;<a class="code" href="class_socket.html#aef06605c6725958004116983f1a2051f">close</a>();</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        keepAliveTimer-&gt;<a class="code" href="class_free_r_t_o_s_timer.html#adfa6641c22dba498dcd44744294d072d">stop</a>(0);</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        timeoutTimer-&gt;<a class="code" href="class_free_r_t_o_s_timer.html#adfa6641c22dba498dcd44744294d072d">stop</a>(0);</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    }</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;}</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00719"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#aa809b115adf6c551dee72d12ecfd8414">  719</a></span>&#160;<a class="code" href="class_pub_sub_client.html">PubSubClient</a>&amp; <a class="code" href="class_pub_sub_client.html#aa809b115adf6c551dee72d12ecfd8414">PubSubClient::setServer</a>(<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> ip, uint16_t port) {</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    _config.<a class="code" href="structmqtt___init_type_def.html#a445b1cf3703342f5291d6423d2498b67">ip</a> = ip;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    _config.<a class="code" href="structmqtt___init_type_def.html#a967e776f054609c9ae5dd3d5ee1cc7df">port</a> = port;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;}</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div><div class="line"><a name="l00731"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#a115733ca6dd337362375d3c4a45300fe">  731</a></span>&#160;<a class="code" href="class_pub_sub_client.html">PubSubClient</a>&amp; <a class="code" href="class_pub_sub_client.html#a115733ca6dd337362375d3c4a45300fe">PubSubClient::setCallback</a>(<a class="code" href="_pub_sub_client_8h.html#a20b35a8e27959a2b227c6d3c80799122">MQTT_CALLBACK_SIGNATURE</a>) {</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    this-&gt;callback = callback;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;}</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;</div><div class="line"><a name="l00742"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#a30e35b9461d26f3d10736ac39c9de418">  742</a></span>&#160;<a class="code" href="class_pub_sub_client.html">PubSubClient</a>&amp; <a class="code" href="class_pub_sub_client.html#a30e35b9461d26f3d10736ac39c9de418">PubSubClient::setClient</a>(<a class="code" href="class_socket.html">Socket</a>&amp; client) {</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    this-&gt;_client = &amp;client;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;}</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;</div><div class="line"><a name="l00753"></a><span class="lineno"><a class="line" href="class_pub_sub_client.html#a8a7025562e55ee15fd4469b75d535b1d">  753</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="class_pub_sub_client.html#a8a7025562e55ee15fd4469b75d535b1d">PubSubClient::state</a>() {</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="keywordflow">return</span> this-&gt;_state;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;}</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="keywordtype">void</span> PubSubClient::parseData(<a class="code" href="structmqtt__message.html">mqtt_message</a>* msg, uint16_t <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>) {</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="comment">/********* Parse Fixed header *********/</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    msg-&gt;<a class="code" href="structmqtt__message.html#a9471d7f2bb4489e6126a9a708621d088">type</a> = buffer[0] &amp; 0xF0;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="comment">/* read DUP-Flag */</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordflow">if</span> (msg-&gt;<a class="code" href="structmqtt__message.html#a9471d7f2bb4489e6126a9a708621d088">type</a> == <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1abd1a204dcfa4933760cd12e779f36fc5">PUBLISH</a>) {</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        msg-&gt;<a class="code" href="structmqtt__message.html#abe26dcac8e251f5978ea62ebb5ae0ec2">dup</a> = (<a class="code" href="curl__setup__once_8h.html#af6a258d8f3ee5206d682d799316314b1">bool</a>) (buffer[0] &amp; 0x18) &gt;&gt; 3;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    }</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="comment">/* read QoS-Level */</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordflow">if</span>(msg-&gt;<a class="code" href="structmqtt__message.html#a9471d7f2bb4489e6126a9a708621d088">type</a> == <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1abd1a204dcfa4933760cd12e779f36fc5">PUBLISH</a>) {</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        msg-&gt;<a class="code" href="structmqtt__message.html#a6a041ddd10d315dd739831db3bd7ec0e">qos</a> = (buffer[0] &amp; 0x06);</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    }</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="comment">/* read RETAIN-Frag */</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="keywordflow">if</span>(msg-&gt;<a class="code" href="structmqtt__message.html#a9471d7f2bb4489e6126a9a708621d088">type</a> == <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1abd1a204dcfa4933760cd12e779f36fc5">PUBLISH</a>) {</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        msg-&gt;<a class="code" href="structmqtt__message.html#a7a41d1fca8f8d0d656ad3d5115cf2a4f">retained</a> = (<a class="code" href="curl__setup__once_8h.html#af6a258d8f3ee5206d682d799316314b1">bool</a>) (buffer[0] &amp; 0x01);</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    }</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    uint8_t remainingLength = buffer[1];</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <span class="comment">/********* Parse Variable header *********/</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <span class="keywordtype">int</span> pos = 2;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="comment">/* read topic name */</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keywordflow">if</span> (msg-&gt;<a class="code" href="structmqtt__message.html#a9471d7f2bb4489e6126a9a708621d088">type</a> == <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1abd1a204dcfa4933760cd12e779f36fc5">PUBLISH</a>) {</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        uint16_t topicLen = (buffer[2] &lt;&lt; 8) + buffer[3];</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        msg-&gt;<a class="code" href="structmqtt__message.html#a078ecbb904424484f996625808eceb7f">topic</a> = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 4; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &lt; (topicLen + 4); <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++) {</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            msg-&gt;<a class="code" href="structmqtt__message.html#a078ecbb904424484f996625808eceb7f">topic</a> += (char) buffer[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>];</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            pos++;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        }</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    }</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="comment">/* read Message ID */</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="keywordflow">if</span> (msg-&gt;<a class="code" href="structmqtt__message.html#a9471d7f2bb4489e6126a9a708621d088">type</a> == <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1abd1a204dcfa4933760cd12e779f36fc5">PUBLISH</a> || msg-&gt;<a class="code" href="structmqtt__message.html#a9471d7f2bb4489e6126a9a708621d088">type</a> == <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1afbeab5fd4cdcb49a725fc27099c16cc2">PUBACK</a> || msg-&gt;<a class="code" href="structmqtt__message.html#a9471d7f2bb4489e6126a9a708621d088">type</a> == <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a1e2c2a84e88263f41d3b9bed26bf4e89">PUBREC</a> || msg-&gt;<a class="code" href="structmqtt__message.html#a9471d7f2bb4489e6126a9a708621d088">type</a> == <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1acae9f9c28803a317d9302650dc7dab0c">PUBCOMP</a> || msg-&gt;<a class="code" href="structmqtt__message.html#a9471d7f2bb4489e6126a9a708621d088">type</a> ==  <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1abe48cb8225101545fd55752f2534348d">SUBACK</a> || msg-&gt;<a class="code" href="structmqtt__message.html#a9471d7f2bb4489e6126a9a708621d088">type</a> ==  <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a722b573f419f3cdb3b2263f7dd00a3ae">UNSUBACK</a>) {</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        msg-&gt;<a class="code" href="structmqtt__message.html#ac98fb6538f1af64b814ec2cabc897194">msgId</a> = (buffer[pos] &lt;&lt; 8) + (buffer[pos + 1]);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        pos += 2;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    }</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="comment">/********* read Payload *********/</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordflow">if</span> (msg-&gt;<a class="code" href="structmqtt__message.html#a9471d7f2bb4489e6126a9a708621d088">type</a> == <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1abd1a204dcfa4933760cd12e779f36fc5">PUBLISH</a>) {</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        msg-&gt;<a class="code" href="structmqtt__message.html#a74e6c0f1e925eb38fb0d4cec8c6a6152">payload</a> = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = pos; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &lt; remainingLength + 2; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++) {</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            msg-&gt;<a class="code" href="structmqtt__message.html#a74e6c0f1e925eb38fb0d4cec8c6a6152">payload</a> += (char) buffer[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>];</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        }</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    }</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;}</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="keywordtype">void</span> PubSubClient::dumpData(<a class="code" href="structmqtt__message.html">mqtt_message</a>* msg) {</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    ESP_LOGD(TAG, <span class="stringliteral">&quot;mqtt_message_type: %s&quot;</span>, messageType_toString(msg-&gt;<a class="code" href="structmqtt__message.html#a9471d7f2bb4489e6126a9a708621d088">type</a>).c_str());</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    ESP_LOGD(TAG, <span class="stringliteral">&quot;mqtt_qos:          %d&quot;</span>, msg-&gt;<a class="code" href="structmqtt__message.html#a6a041ddd10d315dd739831db3bd7ec0e">qos</a>);</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    ESP_LOGD(TAG, <span class="stringliteral">&quot;retained:          %d&quot;</span>, msg-&gt;<a class="code" href="structmqtt__message.html#a7a41d1fca8f8d0d656ad3d5115cf2a4f">retained</a>);</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    ESP_LOGD(TAG, <span class="stringliteral">&quot;dup:               %d&quot;</span>, msg-&gt;<a class="code" href="structmqtt__message.html#abe26dcac8e251f5978ea62ebb5ae0ec2">dup</a>);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    ESP_LOGD(TAG, <span class="stringliteral">&quot;topic:             %s&quot;</span>, msg-&gt;<a class="code" href="structmqtt__message.html#a078ecbb904424484f996625808eceb7f">topic</a>.c_str());</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    ESP_LOGD(TAG, <span class="stringliteral">&quot;payload:           %s&quot;</span>, msg-&gt;<a class="code" href="structmqtt__message.html#a74e6c0f1e925eb38fb0d4cec8c6a6152">payload</a>.c_str());</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    ESP_LOGD(TAG, <span class="stringliteral">&quot;msgId:             %d&quot;</span>, msg-&gt;<a class="code" href="structmqtt__message.html#ac98fb6538f1af64b814ec2cabc897194">msgId</a>);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;}</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> PubSubClient::messageType_toString(uint8_t <a class="code" href="form_8d.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>) {</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> = <span class="stringliteral">&quot;Not in list!&quot;</span>;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="form_8d.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>) {</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a20391dd2915a0e64343d24c2f2e40b95">CONNECT</a>    : <a class="code" href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> = <span class="stringliteral">&quot;CONNECT&quot;</span>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1aa636430e8d9563704f7328824d6bc0a5">CONNACK</a>    : <a class="code" href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> = <span class="stringliteral">&quot;CONNACK&quot;</span>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1abd1a204dcfa4933760cd12e779f36fc5">PUBLISH</a>    : <a class="code" href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> = <span class="stringliteral">&quot;PUBLISH&quot;</span>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1afbeab5fd4cdcb49a725fc27099c16cc2">PUBACK</a>  : <a class="code" href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> = <span class="stringliteral">&quot;PUBACK&quot;</span>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a1e2c2a84e88263f41d3b9bed26bf4e89">PUBREC</a>  : <a class="code" href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> = <span class="stringliteral">&quot;PUBREC&quot;</span>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1ad6c983841148fc8d12e721038df5bb85">PUBREL</a>  : <a class="code" href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> = <span class="stringliteral">&quot;PUBREL&quot;</span>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1acae9f9c28803a317d9302650dc7dab0c">PUBCOMP</a>    : <a class="code" href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> = <span class="stringliteral">&quot;PUBCOMP&quot;</span>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1abc6f919ff681f5f552b2f7d1f0fba832">SUBSCRIBE</a>  : <a class="code" href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> = <span class="stringliteral">&quot;SUBSCRIBE&quot;</span>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1abe48cb8225101545fd55752f2534348d">SUBACK</a>  : <a class="code" href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> = <span class="stringliteral">&quot;SUBACK&quot;</span>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a8395e5981c15d813c588c86988fd4aea">UNSUBSCRIBE</a>: <a class="code" href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> = <span class="stringliteral">&quot;UNSUBSCRIBE&quot;</span>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a722b573f419f3cdb3b2263f7dd00a3ae">UNSUBACK</a>   : <a class="code" href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> = <span class="stringliteral">&quot;UNSUBACK&quot;</span>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a83d6791930272f999f2ddab083234fa7">PINGREQ</a>    : <a class="code" href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> = <span class="stringliteral">&quot;PINGREQ&quot;</span>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a1a3a12a071fc8874e9518b1c94aaef30">PINGRESP</a>   : <a class="code" href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> = <span class="stringliteral">&quot;PINGRESP&quot;</span>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a2f6318afb30e8e2817e6203ebedc8173">DISCONNECT</a> : <a class="code" href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> = <span class="stringliteral">&quot;DISCONNECT&quot;</span>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a6136a0872216f91100b42ea04333af70">Reserved</a>   : <a class="code" href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> = <span class="stringliteral">&quot;Reserved&quot;</span>; <span class="keywordflow">break</span>;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <a class="code" href="fail-early_8d.html#a98eb7992d8c75ac2693c317c9d4c6ead">default</a>      : <span class="keywordflow">break</span>;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    }</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;}</div><div class="ttc" id="_pub_sub_client_8h_html_a396015e492b0fee8da37c7168d9cdb33a7d2552996d8248e57b28f5328fc1e003"><div class="ttname"><a href="_pub_sub_client_8h.html#a396015e492b0fee8da37c7168d9cdb33a7d2552996d8248e57b28f5328fc1e003">QOS0</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00093">PubSubClient.h:93</a></div></div>
<div class="ttc" id="structmqtt__message_html_a74e6c0f1e925eb38fb0d4cec8c6a6152"><div class="ttname"><a href="structmqtt__message.html#a74e6c0f1e925eb38fb0d4cec8c6a6152">mqtt_message::payload</a></div><div class="ttdeci">std::string payload</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00104">PubSubClient.h:104</a></div></div>
<div class="ttc" id="class_socket_html_a5ccaf81da2b6f25dded056e6dbf7f410"><div class="ttname"><a href="class_socket.html#a5ccaf81da2b6f25dded056e6dbf7f410">Socket::isValid</a></div><div class="ttdeci">bool isValid()</div><div class="ttdef"><b>Definition:</b> <a href="_socket_8cpp_source.html#l00249">Socket.cpp:249</a></div></div>
<div class="ttc" id="_pub_sub_client_8cpp_html_ac358206ecffc0c74ce9dea1b82e39595"><div class="ttname"><a href="_pub_sub_client_8cpp.html#ac358206ecffc0c74ce9dea1b82e39595">keepAliveTimerMapper</a></div><div class="ttdeci">void keepAliveTimerMapper(FreeRTOSTimer *pTimer)</div><div class="ttdoc">This is a Timer called routine mapping routine, which calls the PubSubClient member function keepAliv...</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8cpp_source.html#l00162">PubSubClient.cpp:162</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ac243cf15beb51b2206e36da86c2f95f1abc6f919ff681f5f552b2f7d1f0fba832"><div class="ttname"><a href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1abc6f919ff681f5f552b2f7d1f0fba832">SUBSCRIBE</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00082">PubSubClient.h:82</a></div></div>
<div class="ttc" id="structmqtt___init_type_def_html_a967e776f054609c9ae5dd3d5ee1cc7df"><div class="ttname"><a href="structmqtt___init_type_def.html#a967e776f054609c9ae5dd3d5ee1cc7df">mqtt_InitTypeDef::port</a></div><div class="ttdeci">uint16_t port</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00049">PubSubClient.h:49</a></div></div>
<div class="ttc" id="class_socket_html_abeb5751e47f3fa96755aba55d29c300a"><div class="ttname"><a href="class_socket.html#abeb5751e47f3fa96755aba55d29c300a">Socket::receive</a></div><div class="ttdeci">size_t receive(uint8_t *data, size_t length, bool exact=false)</div><div class="ttdoc">Receive data from the partner. Receive data from the socket partner. If exact = false, we read as much data as is available without blocking up to length. If exact = true, we will block until we have received exactly length bytes or there are no more bytes to read. </div><div class="ttdef"><b>Definition:</b> <a href="_socket_8cpp_source.html#l00349">Socket.cpp:349</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ac243cf15beb51b2206e36da86c2f95f1a8395e5981c15d813c588c86988fd4aea"><div class="ttname"><a href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a8395e5981c15d813c588c86988fd4aea">UNSUBSCRIBE</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00084">PubSubClient.h:84</a></div></div>
<div class="ttc" id="structmqtt___init_type_def_html_a445b1cf3703342f5291d6423d2498b67"><div class="ttname"><a href="structmqtt___init_type_def.html#a445b1cf3703342f5291d6423d2498b67">mqtt_InitTypeDef::ip</a></div><div class="ttdeci">std::string ip</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00048">PubSubClient.h:48</a></div></div>
<div class="ttc" id="class_task_html_a6f13d13787e21dc929b61d112b863433"><div class="ttname"><a href="class_task.html#a6f13d13787e21dc929b61d112b863433">Task::start</a></div><div class="ttdeci">void start(void *taskData=nullptr)</div><div class="ttdoc">Start an instance of the task. </div><div class="ttdef"><b>Definition:</b> <a href="_task_8cpp_source.html#l00070">Task.cpp:70</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ac243cf15beb51b2206e36da86c2f95f1a20391dd2915a0e64343d24c2f2e40b95"><div class="ttname"><a href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a20391dd2915a0e64343d24c2f2e40b95">CONNECT</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00075">PubSubClient.h:75</a></div></div>
<div class="ttc" id="class_pub_sub_client_html_ac0d1c6de8a88a9f9fda04126c8cf2fe0"><div class="ttname"><a href="class_pub_sub_client.html#ac0d1c6de8a88a9f9fda04126c8cf2fe0">PubSubClient::disconnect</a></div><div class="ttdeci">void disconnect()</div><div class="ttdoc">Disconnect form MQTT server and close the socket. </div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8cpp_source.html#l00662">PubSubClient.cpp:662</a></div></div>
<div class="ttc" id="_task_8h_html"><div class="ttname"><a href="_task_8h.html">Task.h</a></div></div>
<div class="ttc" id="fail-early_8d_html_a98eb7992d8c75ac2693c317c9d4c6ead"><div class="ttname"><a href="fail-early_8d.html#a98eb7992d8c75ac2693c317c9d4c6ead">default</a></div><div class="ttdeci">Long do not continue it will attempt to operate on each given one by one.By default</div><div class="ttdef"><b>Definition:</b> <a href="fail-early_8d_source.html#l00002">fail-early.d:2</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_aaf4eb4a280abe9aa1fccf2a181d30344af0f23e909b306d85fac6d0087800dadc"><div class="ttname"><a href="_pub_sub_client_8h.html#aaf4eb4a280abe9aa1fccf2a181d30344af0f23e909b306d85fac6d0087800dadc">CONNECTION_TIMEOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00062">PubSubClient.h:62</a></div></div>
<div class="ttc" id="connect-to_8d_html_a450c41f520f7661f0a48b8fd2597a74c"><div class="ttname"><a href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">string</a></div><div class="ttdeci">Long connect to e.g.at a specific cluster node in a cluster of servers.This option is only used to establish the network connection.It does NOT affect the hostname port that is used for TLS meaning any host port.HOST2 and PORT2 may also be the empty string</div><div class="ttdef"><b>Definition:</b> <a href="connect-to_8d_source.html#l00014">connect-to.d:14</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ac243cf15beb51b2206e36da86c2f95f1a1a3a12a071fc8874e9518b1c94aaef30"><div class="ttname"><a href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a1a3a12a071fc8874e9518b1c94aaef30">PINGRESP</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00087">PubSubClient.h:87</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ac243cf15beb51b2206e36da86c2f95f1ad6c983841148fc8d12e721038df5bb85"><div class="ttname"><a href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1ad6c983841148fc8d12e721038df5bb85">PUBREL</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00080">PubSubClient.h:80</a></div></div>
<div class="ttc" id="class_free_r_t_o_s_timer_html"><div class="ttname"><a href="class_free_r_t_o_s_timer.html">FreeRTOSTimer</a></div><div class="ttdoc">Wrapper around the FreeRTOS timer functions. </div><div class="ttdef"><b>Definition:</b> <a href="_free_r_t_o_s_timer_8h_source.html#l00016">FreeRTOSTimer.h:16</a></div></div>
<div class="ttc" id="class_socket_html_aef06605c6725958004116983f1a2051f"><div class="ttname"><a href="class_socket.html#aef06605c6725958004116983f1a2051f">Socket::close</a></div><div class="ttdeci">int close()</div><div class="ttdoc">Close the socket. </div><div class="ttdef"><b>Definition:</b> <a href="_socket_8cpp_source.html#l00135">Socket.cpp:135</a></div></div>
<div class="ttc" id="class_pub_sub_client_html_aa566055775e8c1519b834da048cbc68f"><div class="ttname"><a href="class_pub_sub_client.html#aa566055775e8c1519b834da048cbc68f">PubSubClient::PubSubClientTask</a></div><div class="ttdeci">friend class PubSubClientTask</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00148">PubSubClient.h:148</a></div></div>
<div class="ttc" id="class_free_r_t_o_s_timer_html_a162a7a248cef2303e6b96048056ef322"><div class="ttname"><a href="class_free_r_t_o_s_timer.html#a162a7a248cef2303e6b96048056ef322">FreeRTOSTimer::getData</a></div><div class="ttdeci">void * getData()</div><div class="ttdoc">Get the user supplied data associated with the timer. </div><div class="ttdef"><b>Definition:</b> <a href="_free_r_t_o_s_timer_8cpp_source.html#l00132">FreeRTOSTimer.cpp:132</a></div></div>
<div class="ttc" id="structmqtt__message_html"><div class="ttname"><a href="structmqtt__message.html">mqtt_message</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00098">PubSubClient.h:98</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_aaf4eb4a280abe9aa1fccf2a181d30344a7a691a2430ec26878897b5fbc9c22a4c"><div class="ttname"><a href="_pub_sub_client_8h.html#aaf4eb4a280abe9aa1fccf2a181d30344a7a691a2430ec26878897b5fbc9c22a4c">CONNECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00066">PubSubClient.h:66</a></div></div>
<div class="ttc" id="namespacedictserver_html_aeb700c49a1a229869c3b36509a6c6c32"><div class="ttname"><a href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">dictserver.rc</a></div><div class="ttdeci">def rc</div><div class="ttdef"><b>Definition:</b> <a href="dictserver_8py_source.html#l00153">dictserver.py:153</a></div></div>
<div class="ttc" id="class_socket_html_ad9757badfe9d9903d07ef7c70279ad77"><div class="ttname"><a href="class_socket.html#ad9757badfe9d9903d07ef7c70279ad77">Socket::send</a></div><div class="ttdeci">int send(std::string value) const</div><div class="ttdoc">Send a string to the partner. </div><div class="ttdef"><b>Definition:</b> <a href="_socket_8cpp_source.html#l00457">Socket.cpp:457</a></div></div>
<div class="ttc" id="structmqtt__message_html_a6a041ddd10d315dd739831db3bd7ec0e"><div class="ttname"><a href="structmqtt__message.html#a6a041ddd10d315dd739831db3bd7ec0e">mqtt_message::qos</a></div><div class="ttdeci">uint8_t qos</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00100">PubSubClient.h:100</a></div></div>
<div class="ttc" id="class_pub_sub_client_html_a63abf28fee11df02d353b83cd08c255e"><div class="ttname"><a href="class_pub_sub_client.html#a63abf28fee11df02d353b83cd08c255e">PubSubClient::PubSubClient</a></div><div class="ttdeci">PubSubClient()</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8cpp_source.html#l00104">PubSubClient.cpp:104</a></div></div>
<div class="ttc" id="structmqtt___init_type_def_html_a3233ba2b6344e7336a0f929b06d18145"><div class="ttname"><a href="structmqtt___init_type_def.html#a3233ba2b6344e7336a0f929b06d18145">mqtt_InitTypeDef::willMessage</a></div><div class="ttdeci">const char * willMessage</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00058">PubSubClient.h:58</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_a396015e492b0fee8da37c7168d9cdb33a00677da1fb3fc1bdfa05c33dcaa3ad7c"><div class="ttname"><a href="_pub_sub_client_8h.html#a396015e492b0fee8da37c7168d9cdb33a00677da1fb3fc1bdfa05c33dcaa3ad7c">QOS2</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00095">PubSubClient.h:95</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ac243cf15beb51b2206e36da86c2f95f1afbeab5fd4cdcb49a725fc27099c16cc2"><div class="ttname"><a href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1afbeab5fd4cdcb49a725fc27099c16cc2">PUBACK</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00078">PubSubClient.h:78</a></div></div>
<div class="ttc" id="structmqtt___init_type_def_html_ac57df8da075f5064160d4bfb6760c3f6"><div class="ttname"><a href="structmqtt___init_type_def.html#ac57df8da075f5064160d4bfb6760c3f6">mqtt_InitTypeDef::user</a></div><div class="ttdeci">const char * user</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00051">PubSubClient.h:51</a></div></div>
<div class="ttc" id="structmqtt___init_type_def_html_aa43932cb580512f7537641056a816e62"><div class="ttname"><a href="structmqtt___init_type_def.html#aa43932cb580512f7537641056a816e62">mqtt_InitTypeDef::willTopic</a></div><div class="ttdeci">const char * willTopic</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00055">PubSubClient.h:55</a></div></div>
<div class="ttc" id="unit1304_8c_html_a937d4dd628a8858b443a399410d2600b"><div class="ttname"><a href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a></div><div class="ttdeci">UNITTEST_START int result</div><div class="ttdef"><b>Definition:</b> <a href="unit1304_8c_source.html#l00049">unit1304.c:49</a></div></div>
<div class="ttc" id="class_pub_sub_client_html_a62ae269568ef379fb21a434f7e6d4a06"><div class="ttname"><a href="class_pub_sub_client.html#a62ae269568ef379fb21a434f7e6d4a06">PubSubClient::subscribe</a></div><div class="ttdeci">bool subscribe(const char *topic, bool ack=false)</div><div class="ttdoc">Subscribe a MQTT topic. </div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8cpp_source.html#l00584">PubSubClient.cpp:584</a></div></div>
<div class="ttc" id="smooth-gtk-thread_8c_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="smooth-gtk-thread_8c.html#a37d972ae0b47b9099e30983131d31916">j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="smooth-gtk-thread_8c_source.html#l00047">smooth-gtk-thread.c:47</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_aaf4eb4a280abe9aa1fccf2a181d30344acdaad1112073e3e2ea032424c38c34e1"><div class="ttname"><a href="_pub_sub_client_8h.html#aaf4eb4a280abe9aa1fccf2a181d30344acdaad1112073e3e2ea032424c38c34e1">DISCONNECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00065">PubSubClient.h:65</a></div></div>
<div class="ttc" id="class_pub_sub_client_html_a3bd39e46772e74c818ebbfedd4fa076f"><div class="ttname"><a href="class_pub_sub_client.html#a3bd39e46772e74c818ebbfedd4fa076f">PubSubClient::isUnsubscribeDone</a></div><div class="ttdeci">bool isUnsubscribeDone()</div><div class="ttdoc">Check the state of unsubscription. If there was received a unsubscription ACK, we return a true here...</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8cpp_source.html#l00653">PubSubClient.cpp:653</a></div></div>
<div class="ttc" id="unit1303_8c_html_ac8936188af0c1d2f8b9d0cd25fde43b2"><div class="ttname"><a href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a></div><div class="ttdeci">unsigned int i</div><div class="ttdef"><b>Definition:</b> <a href="unit1303_8c_source.html#l00078">unit1303.c:78</a></div></div>
<div class="ttc" id="structmqtt___init_type_def_html_a6adcbcc781556f8292ae8b397fdc1441"><div class="ttname"><a href="structmqtt___init_type_def.html#a6adcbcc781556f8292ae8b397fdc1441">mqtt_InitTypeDef::pass</a></div><div class="ttdeci">const char * pass</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00052">PubSubClient.h:52</a></div></div>
<div class="ttc" id="curl__sasl_8c_html_a7360b55975153b822efc5217b7734e6a"><div class="ttname"><a href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a></div><div class="ttdeci">size_t len</div><div class="ttdef"><b>Definition:</b> <a href="curl__sasl_8c_source.html#l00055">curl_sasl.c:55</a></div></div>
<div class="ttc" id="class_pub_sub_client_task_html_a325d615f1f9137953e13ce1649f081c9"><div class="ttname"><a href="class_pub_sub_client_task.html#a325d615f1f9137953e13ce1649f081c9">PubSubClientTask::PubSubClientTask</a></div><div class="ttdeci">PubSubClientTask(std::string name)</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8cpp_source.html#l00029">PubSubClient.cpp:29</a></div></div>
<div class="ttc" id="class_pub_sub_client_task_html"><div class="ttname"><a href="class_pub_sub_client_task.html">PubSubClientTask</a></div><div class="ttdoc">A task that will handle the PubSubClient. </div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8cpp_source.html#l00027">PubSubClient.cpp:27</a></div></div>
<div class="ttc" id="form_8d_html_a7aead736a07eaf25623ad7bfa1f0ee2d"><div class="ttname"><a href="form_8d.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a></div><div class="ttdeci">type</div><div class="ttdef"><b>Definition:</b> <a href="form_8d_source.html#l00048">form.d:48</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ac243cf15beb51b2206e36da86c2f95f1acae9f9c28803a317d9302650dc7dab0c"><div class="ttname"><a href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1acae9f9c28803a317d9302650dc7dab0c">PUBCOMP</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00081">PubSubClient.h:81</a></div></div>
<div class="ttc" id="unit1398_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="unit1398_8c_source.html#l00033">unit1398.c:33</a></div></div>
<div class="ttc" id="class_pub_sub_client_html_a115733ca6dd337362375d3c4a45300fe"><div class="ttname"><a href="class_pub_sub_client.html#a115733ca6dd337362375d3c4a45300fe">PubSubClient::setCallback</a></div><div class="ttdeci">PubSubClient &amp; setCallback(MQTT_CALLBACK_SIGNATURE)</div><div class="ttdoc">Set the callback function for incoming data. </div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8cpp_source.html#l00731">PubSubClient.cpp:731</a></div></div>
<div class="ttc" id="_pub_sub_client_8cpp_html_a2a058a9bce477b71e5cc11907f69b716"><div class="ttname"><a href="_pub_sub_client_8cpp.html#a2a058a9bce477b71e5cc11907f69b716">MQTT_HEADER_VERSION_LENGTH</a></div><div class="ttdeci">#define MQTT_HEADER_VERSION_LENGTH</div></div>
<div class="ttc" id="structmqtt___init_type_def_html_a7cdb6f0bed7622ba7bf7bc160af6cc6f"><div class="ttname"><a href="structmqtt___init_type_def.html#a7cdb6f0bed7622ba7bf7bc160af6cc6f">mqtt_InitTypeDef::id</a></div><div class="ttdeci">const char * id</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00054">PubSubClient.h:54</a></div></div>
<div class="ttc" id="class_pub_sub_client_html_a49518d415ae1fc9a115712bb90bcbafb"><div class="ttname"><a href="class_pub_sub_client.html#a49518d415ae1fc9a115712bb90bcbafb">PubSubClient::keepAliveChecker</a></div><div class="ttdeci">void keepAliveChecker()</div><div class="ttdoc">This is a Timer called routine, which checks the PING_outstanding flag. This flag is set in this func...</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8cpp_source.html#l00210">PubSubClient.cpp:210</a></div></div>
<div class="ttc" id="class_pub_sub_client_html_af6178d5e981a461e53424e3158d63b0e"><div class="ttname"><a href="class_pub_sub_client.html#af6178d5e981a461e53424e3158d63b0e">PubSubClient::isSubscribeDone</a></div><div class="ttdeci">bool isSubscribeDone()</div><div class="ttdoc">Check the state of subscription. If there was received a subscription ACK, we return a true here...</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8cpp_source.html#l00614">PubSubClient.cpp:614</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ac243cf15beb51b2206e36da86c2f95f1a83d6791930272f999f2ddab083234fa7"><div class="ttname"><a href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a83d6791930272f999f2ddab083234fa7">PINGREQ</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00086">PubSubClient.h:86</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ac243cf15beb51b2206e36da86c2f95f1a6136a0872216f91100b42ea04333af70"><div class="ttname"><a href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a6136a0872216f91100b42ea04333af70">Reserved</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00089">PubSubClient.h:89</a></div></div>
<div class="ttc" id="_pub_sub_client_8cpp_html_aa5d038670dee12a871073fd83513ea48"><div class="ttname"><a href="_pub_sub_client_8cpp.html#aa5d038670dee12a871073fd83513ea48">timeoutTimerMapper</a></div><div class="ttdeci">void timeoutTimerMapper(FreeRTOSTimer *pTimer)</div><div class="ttdoc">This is a Timer called routine mapping routine, which calls the PubSubClient member function timeoutC...</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8cpp_source.html#l00174">PubSubClient.cpp:174</a></div></div>
<div class="ttc" id="class_socket_html_ae537e61bb9f64b0322c6e9c39bb24fde"><div class="ttname"><a href="class_socket.html#ae537e61bb9f64b0322c6e9c39bb24fde">Socket::connect</a></div><div class="ttdeci">int connect(struct in_addr address, uint16_t port)</div><div class="ttdoc">Connect to a partner. </div><div class="ttdef"><b>Definition:</b> <a href="_socket_8cpp_source.html#l00164">Socket.cpp:164</a></div></div>
<div class="ttc" id="remote-name_8d_html_aa335f8bb20424b03700f57b150bf0aa6"><div class="ttname"><a href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a></div><div class="ttdeci">Long the path is cut off.The file will be saved in the current working directory.If you want the file saved in a different make sure you change the current working directory before invoking curl with this option.The remote file name to use for saving is extracted from the given nothing and if it already exists it will be overwritten.If you want the server to be able to choose the file name refer to remote header name which can be used in addition to this option.If the server chooses a file name and that name already exists it will not be overwritten.There is no URL decoding done on the file name.If it has or other URL encoded parts of the name</div><div class="ttdef"><b>Definition:</b> <a href="remote-name_8d_source.html#l00006">remote-name.d:6</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ac243cf15beb51b2206e36da86c2f95f1abd1a204dcfa4933760cd12e779f36fc5"><div class="ttname"><a href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1abd1a204dcfa4933760cd12e779f36fc5">PUBLISH</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00077">PubSubClient.h:77</a></div></div>
<div class="ttc" id="structmqtt___init_type_def_html_ad30296304185f1f033c30149903764f1"><div class="ttname"><a href="structmqtt___init_type_def.html#ad30296304185f1f033c30149903764f1">mqtt_InitTypeDef::willRetain</a></div><div class="ttdeci">bool willRetain</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00057">PubSubClient.h:57</a></div></div>
<div class="ttc" id="structmqtt__message_html_ac98fb6538f1af64b814ec2cabc897194"><div class="ttname"><a href="structmqtt__message.html#ac98fb6538f1af64b814ec2cabc897194">mqtt_message::msgId</a></div><div class="ttdeci">uint16_t msgId</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00105">PubSubClient.h:105</a></div></div>
<div class="ttc" id="structmqtt__message_html_a7a41d1fca8f8d0d656ad3d5115cf2a4f"><div class="ttname"><a href="structmqtt__message.html#a7a41d1fca8f8d0d656ad3d5115cf2a4f">mqtt_message::retained</a></div><div class="ttdeci">bool retained</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00101">PubSubClient.h:101</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ac243cf15beb51b2206e36da86c2f95f1a722b573f419f3cdb3b2263f7dd00a3ae"><div class="ttname"><a href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a722b573f419f3cdb3b2263f7dd00a3ae">UNSUBACK</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00085">PubSubClient.h:85</a></div></div>
<div class="ttc" id="structmqtt__message_html_a9471d7f2bb4489e6126a9a708621d088"><div class="ttname"><a href="structmqtt__message.html#a9471d7f2bb4489e6126a9a708621d088">mqtt_message::type</a></div><div class="ttdeci">uint8_t type</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00099">PubSubClient.h:99</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ac243cf15beb51b2206e36da86c2f95f1a1e2c2a84e88263f41d3b9bed26bf4e89"><div class="ttname"><a href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a1e2c2a84e88263f41d3b9bed26bf4e89">PUBREC</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00079">PubSubClient.h:79</a></div></div>
<div class="ttc" id="class_free_r_t_o_s_timer_html_adfa6641c22dba498dcd44744294d072d"><div class="ttname"><a href="class_free_r_t_o_s_timer.html#adfa6641c22dba498dcd44744294d072d">FreeRTOSTimer::stop</a></div><div class="ttdeci">void stop(TickType_t blockTime=portMAX_DELAY)</div><div class="ttdoc">Stop the timer from ticking. </div><div class="ttdef"><b>Definition:</b> <a href="_free_r_t_o_s_timer_8cpp_source.html#l00083">FreeRTOSTimer.cpp:83</a></div></div>
<div class="ttc" id="class_pub_sub_client_html_af828241dd14833967c27b902b43b6491"><div class="ttname"><a href="class_pub_sub_client.html#af828241dd14833967c27b902b43b6491">PubSubClient::unsubscribe</a></div><div class="ttdeci">bool unsubscribe(const char *topic, bool ack=false)</div><div class="ttdoc">Unsubscribe a MQTT topic. </div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8cpp_source.html#l00625">PubSubClient.cpp:625</a></div></div>
<div class="ttc" id="curl__setup__once_8h_html_af6a258d8f3ee5206d682d799316314b1"><div class="ttname"><a href="curl__setup__once_8h.html#af6a258d8f3ee5206d682d799316314b1">bool</a></div><div class="ttdeci">bool</div><div class="ttdef"><b>Definition:</b> <a href="curl__setup__once_8h_source.html#l00299">curl_setup_once.h:299</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_aaf4eb4a280abe9aa1fccf2a181d30344"><div class="ttname"><a href="_pub_sub_client_8h.html#aaf4eb4a280abe9aa1fccf2a181d30344">mqtt_state</a></div><div class="ttdeci">mqtt_state</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00061">PubSubClient.h:61</a></div></div>
<div class="ttc" id="class_socket_html"><div class="ttname"><a href="class_socket.html">Socket</a></div><div class="ttdoc">Encapsulate a socket. </div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00062">Socket.h:62</a></div></div>
<div class="ttc" id="class_pub_sub_client_html_aa809b115adf6c551dee72d12ecfd8414"><div class="ttname"><a href="class_pub_sub_client.html#aa809b115adf6c551dee72d12ecfd8414">PubSubClient::setServer</a></div><div class="ttdeci">PubSubClient &amp; setServer(std::string ip, uint16_t port)</div><div class="ttdoc">Set server ip and Port of my MQTT server. </div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8cpp_source.html#l00719">PubSubClient.cpp:719</a></div></div>
<div class="ttc" id="_free_r_t_o_s_timer_8h_html"><div class="ttname"><a href="_free_r_t_o_s_timer_8h.html">FreeRTOSTimer.h</a></div></div>
<div class="ttc" id="class_pub_sub_client_html_a8a7025562e55ee15fd4469b75d535b1d"><div class="ttname"><a href="class_pub_sub_client.html#a8a7025562e55ee15fd4469b75d535b1d">PubSubClient::state</a></div><div class="ttdeci">int state()</div><div class="ttdoc">Get the current MYTT state form the instance. </div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8cpp_source.html#l00753">PubSubClient.cpp:753</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_aaf4eb4a280abe9aa1fccf2a181d30344a0b40fcca1def55cec2d61f92ab1abde1"><div class="ttname"><a href="_pub_sub_client_8h.html#aaf4eb4a280abe9aa1fccf2a181d30344a0b40fcca1def55cec2d61f92ab1abde1">CONNECT_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00064">PubSubClient.h:64</a></div></div>
<div class="ttc" id="_free_r_t_o_s_8h_html"><div class="ttname"><a href="_free_r_t_o_s_8h.html">FreeRTOS.h</a></div></div>
<div class="ttc" id="structmqtt__message_html_abe26dcac8e251f5978ea62ebb5ae0ec2"><div class="ttname"><a href="structmqtt__message.html#abe26dcac8e251f5978ea62ebb5ae0ec2">mqtt_message::dup</a></div><div class="ttdeci">bool dup</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00102">PubSubClient.h:102</a></div></div>
<div class="ttc" id="class_task_html"><div class="ttname"><a href="class_task.html">Task</a></div><div class="ttdoc">Encapsulate a runnable task. </div><div class="ttdef"><b>Definition:</b> <a href="_task_8h_source.html#l00034">Task.h:34</a></div></div>
<div class="ttc" id="class_task_html_aba5eb3d6c2a034aa0e319383fbec68c4"><div class="ttname"><a href="class_task.html#aba5eb3d6c2a034aa0e319383fbec68c4">Task::stop</a></div><div class="ttdeci">void stop()</div><div class="ttdoc">Stop the task. </div><div class="ttdef"><b>Definition:</b> <a href="_task_8cpp_source.html#l00084">Task.cpp:84</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_a20b35a8e27959a2b227c6d3c80799122"><div class="ttname"><a href="_pub_sub_client_8h.html#a20b35a8e27959a2b227c6d3c80799122">MQTT_CALLBACK_SIGNATURE</a></div><div class="ttdeci">#define MQTT_CALLBACK_SIGNATURE</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00108">PubSubClient.h:108</a></div></div>
<div class="ttc" id="unit1398_8c_html_aee5a1edd73e85934dcbe27ccbb1ef1ad"><div class="ttname"><a href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a></div><div class="ttdeci">char buf[3]</div><div class="ttdef"><b>Definition:</b> <a href="unit1398_8c_source.html#l00032">unit1398.c:32</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ac243cf15beb51b2206e36da86c2f95f1abe48cb8225101545fd55752f2534348d"><div class="ttname"><a href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1abe48cb8225101545fd55752f2534348d">SUBACK</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00083">PubSubClient.h:83</a></div></div>
<div class="ttc" id="class_pub_sub_client_html_a7f2097ea474209f9454dbdcb671fa2e9"><div class="ttname"><a href="class_pub_sub_client.html#a7f2097ea474209f9454dbdcb671fa2e9">PubSubClient::connected</a></div><div class="ttdeci">bool connected()</div><div class="ttdoc">Check the connection to the MQTT server. </div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8cpp_source.html#l00694">PubSubClient.cpp:694</a></div></div>
<div class="ttc" id="class_pub_sub_client_html_ac67061f0fdd7b98007f6f7501b6a5dbd"><div class="ttname"><a href="class_pub_sub_client.html#ac67061f0fdd7b98007f6f7501b6a5dbd">PubSubClient::timeoutChecker</a></div><div class="ttdeci">void timeoutChecker()</div><div class="ttdoc">This is a Timer called routine, which is called, when we reach the timeout. Used is this function for...</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8cpp_source.html#l00233">PubSubClient.cpp:233</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_a702197a21870dfd505d92530b27754ac"><div class="ttname"><a href="_pub_sub_client_8h.html#a702197a21870dfd505d92530b27754ac">MQTT_VERSION</a></div><div class="ttdeci">#define MQTT_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00022">PubSubClient.h:22</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_afb4dd8c75385ab30e659314df7c2c335"><div class="ttname"><a href="_pub_sub_client_8h.html#afb4dd8c75385ab30e659314df7c2c335">MQTT_KEEPALIVE</a></div><div class="ttdeci">#define MQTT_KEEPALIVE</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00032">PubSubClient.h:32</a></div></div>
<div class="ttc" id="structmqtt__message_html_a078ecbb904424484f996625808eceb7f"><div class="ttname"><a href="structmqtt__message.html#a078ecbb904424484f996625808eceb7f">mqtt_message::topic</a></div><div class="ttdeci">std::string topic</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00103">PubSubClient.h:103</a></div></div>
<div class="ttc" id="class_free_r_t_o_s_timer_html_a4cad6643b084ed3813a424fa60547742"><div class="ttname"><a href="class_free_r_t_o_s_timer.html#a4cad6643b084ed3813a424fa60547742">FreeRTOSTimer::start</a></div><div class="ttdeci">void start(TickType_t blockTime=portMAX_DELAY)</div><div class="ttdoc">Start the timer ticking. </div><div class="ttdef"><b>Definition:</b> <a href="_free_r_t_o_s_timer_8cpp_source.html#l00076">FreeRTOSTimer.cpp:76</a></div></div>
<div class="ttc" id="class_pub_sub_client_html_a30e35b9461d26f3d10736ac39c9de418"><div class="ttname"><a href="class_pub_sub_client.html#a30e35b9461d26f3d10736ac39c9de418">PubSubClient::setClient</a></div><div class="ttdeci">PubSubClient &amp; setClient(Socket &amp;client)</div><div class="ttdoc">Set the socket, which we want to use for our MQTT communication. </div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8cpp_source.html#l00742">PubSubClient.cpp:742</a></div></div>
<div class="ttc" id="class_pub_sub_client_html_a597a07b746c33a77f77486f426dc85fd"><div class="ttname"><a href="class_pub_sub_client.html#a597a07b746c33a77f77486f426dc85fd">PubSubClient::~PubSubClient</a></div><div class="ttdeci">~PubSubClient()</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8cpp_source.html#l00144">PubSubClient.cpp:144</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ae09b594688a59f1427c7e45259e039b9"><div class="ttname"><a href="_pub_sub_client_8h.html#ae09b594688a59f1427c7e45259e039b9">MQTT_MAX_PACKET_SIZE</a></div><div class="ttdeci">#define MQTT_MAX_PACKET_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00027">PubSubClient.h:27</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html"><div class="ttname"><a href="_pub_sub_client_8h.html">PubSubClient.h</a></div></div>
<div class="ttc" id="class_free_r_t_o_s_timer_html_ae1f243c23d6d6edece568fe0e9de0209"><div class="ttname"><a href="class_free_r_t_o_s_timer.html#ae1f243c23d6d6edece568fe0e9de0209">FreeRTOSTimer::reset</a></div><div class="ttdeci">void reset(TickType_t blockTime=portMAX_DELAY)</div><div class="ttdoc">Reset the timer to the period and start it ticking. </div><div class="ttdef"><b>Definition:</b> <a href="_free_r_t_o_s_timer_8cpp_source.html#l00090">FreeRTOSTimer.cpp:90</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_aaf4eb4a280abe9aa1fccf2a181d30344a00bc8d8fa2a4ef22ac8d9aa337802707"><div class="ttname"><a href="_pub_sub_client_8h.html#aaf4eb4a280abe9aa1fccf2a181d30344a00bc8d8fa2a4ef22ac8d9aa337802707">CONNECTION_LOST</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00063">PubSubClient.h:63</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_a396015e492b0fee8da37c7168d9cdb33a2102e003f98d5f996f203b66b2827764"><div class="ttname"><a href="_pub_sub_client_8h.html#a396015e492b0fee8da37c7168d9cdb33a2102e003f98d5f996f203b66b2827764">QOS1</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00094">PubSubClient.h:94</a></div></div>
<div class="ttc" id="class_pub_sub_client_html_a59500b307e27b6ec9007ef1f3a0c24db"><div class="ttname"><a href="class_pub_sub_client.html#a59500b307e27b6ec9007ef1f3a0c24db">PubSubClient::publish</a></div><div class="ttdeci">bool publish(const char *topic, const char *payload)</div><div class="ttdoc">Publish a MQTT message. </div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8cpp_source.html#l00419">PubSubClient.cpp:419</a></div></div>
<div class="ttc" id="class_pub_sub_client_html_af482531348f9031f7713fdee5329d237"><div class="ttname"><a href="class_pub_sub_client.html#af482531348f9031f7713fdee5329d237">PubSubClient::connect</a></div><div class="ttdeci">bool connect()</div><div class="ttdoc">Connect to a MQTT server with the with the previous settings. Note: do not call this function without...</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8cpp_source.html#l00311">PubSubClient.cpp:311</a></div></div>
<div class="ttc" id="structdata_html"><div class="ttname"><a href="structdata.html">data</a></div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00029">debug.c:29</a></div></div>
<div class="ttc" id="structmqtt___init_type_def_html_a9370bda4eb16e4ef69e967b8d8f335e4"><div class="ttname"><a href="structmqtt___init_type_def.html#a9370bda4eb16e4ef69e967b8d8f335e4">mqtt_InitTypeDef::willQos</a></div><div class="ttdeci">uint8_t willQos</div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00056">PubSubClient.h:56</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ac243cf15beb51b2206e36da86c2f95f1a2f6318afb30e8e2817e6203ebedc8173"><div class="ttname"><a href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1a2f6318afb30e8e2817e6203ebedc8173">DISCONNECT</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00088">PubSubClient.h:88</a></div></div>
<div class="ttc" id="_pub_sub_client_8h_html_ac243cf15beb51b2206e36da86c2f95f1aa636430e8d9563704f7328824d6bc0a5"><div class="ttname"><a href="_pub_sub_client_8h.html#ac243cf15beb51b2206e36da86c2f95f1aa636430e8d9563704f7328824d6bc0a5">CONNACK</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00076">PubSubClient.h:76</a></div></div>
<div class="ttc" id="class_pub_sub_client_html"><div class="ttname"><a href="class_pub_sub_client.html">PubSubClient</a></div><div class="ttdef"><b>Definition:</b> <a href="_pub_sub_client_8h_source.html#l00112">PubSubClient.h:112</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_2b66d65f09a100230911d819a169d69c.html">esp32-snippets</a></li><li class="navelem"><a class="el" href="dir_e66062f3a4d2a5b6b6746a6b0f9c85ac.html">cpp_utils</a></li><li class="navelem"><a class="el" href="_pub_sub_client_8cpp.html">PubSubClient.cpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
