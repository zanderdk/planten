<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Plante: components/curl/lib/multi.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Plante
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('multi_8c_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">multi.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="multi_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/***************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *                                  _   _ ____  _</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *  Project                     ___| | | |  _ \| |</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *                             / __| | | | |_) | |</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *                            | (__| |_| |  _ &lt;| |___</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *                             \___|\___/|_| \_\_____|</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * Copyright (C) 1998 - 2018, Daniel Stenberg, &lt;daniel@haxx.se&gt;, et al.</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * This software is licensed as described in the file COPYING, which</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * you should have received as part of this distribution. The terms</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * are also available at https://curl.haxx.se/docs/copyright.html.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * You may opt to use, copy, modify, merge, publish, distribute and/or sell</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * copies of the Software, and permit persons to whom the Software is</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * furnished to do so, under the terms of the COPYING file.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * This software is distributed on an &quot;AS IS&quot; basis, WITHOUT WARRANTY OF ANY</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * KIND, either express or implied.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> ***************************************************************************/</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="curl__setup_8h.html">curl_setup.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="curl_8h.html">curl/curl.h</a>&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="urldata_8h.html">urldata.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="transfer_8h.html">transfer.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="url_8h.html">url.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="connect_8h.html">connect.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="progress_8h.html">progress.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="easyif_8h.html">easyif.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="share_8h.html">share.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="psl_8h.html">psl.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="multiif_8h.html">multiif.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sendf_8h.html">sendf.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="timeval_8h.html">timeval.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="http_8h.html">http.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="select_8h.html">select.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="warnless_8h.html">warnless.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="speedcheck_8h.html">speedcheck.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="conncache_8h.html">conncache.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="multihandle_8h.html">multihandle.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pipeline_8h.html">pipeline.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sigpipe_8h.html">sigpipe.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vtls_8h.html">vtls/vtls.h</a>&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="connect_8h.html">connect.h</a>&quot;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="http__proxy_8h.html">http_proxy.h</a>&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="http2_8h.html">http2.h</a>&quot;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">/* The last 3 #include files should be in this order */</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="curl__printf_8h.html">curl_printf.h</a>&quot;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="curl__memory_8h.html">curl_memory.h</a>&quot;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="memdebug_8h.html">memdebug.h</a>&quot;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">  CURL_SOCKET_HASH_TABLE_SIZE should be a prime number. Increasing it from 97</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">  to 911 takes on a 32-bit machine 4 x 804 = 3211 more bytes.  Still, every</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">  CURL handle takes 45-50 K memory, therefore this 3K are not significant.</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#ifndef CURL_SOCKET_HASH_TABLE_SIZE</span></div><div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="multi_8c.html#ac47b69b8ab21f9d231e3780ed9999a67">   61</a></span>&#160;<span class="preprocessor">#define CURL_SOCKET_HASH_TABLE_SIZE 911</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#ifndef CURL_CONNECTION_HASH_SIZE</span></div><div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="multi_8c.html#adad279999b00d12aa4240bd26280ab40">   65</a></span>&#160;<span class="preprocessor">#define CURL_CONNECTION_HASH_SIZE 97</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="multi_8c.html#a73a33e645c54c94315ffa9232f98ead1">   68</a></span>&#160;<span class="preprocessor">#define CURL_MULTI_HANDLE 0x000bab1e</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="multi_8c.html#ab6e53cbf757b0790ad040a27772544c4">   70</a></span>&#160;<span class="preprocessor">#define GOOD_MULTI_HANDLE(x) \</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">  ((x) &amp;&amp; (x)-&gt;type == CURL_MULTI_HANDLE)</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="keyword">static</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> singlesocket(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi,</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                              <span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> update_timer(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi);</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="keyword">static</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> add_next_timeout(<span class="keyword">struct</span> <a class="code" href="structcurltime.html">curltime</a> <a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>,</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                                  <span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi,</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                                  <span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *d);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keyword">static</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> <a class="code" href="test_8h.html#a5a82db8b40f056c5cf54cd44691f7dce">multi_timeout</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi,</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                               <span class="keywordtype">long</span> *timeout_ms);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> process_pending_handles(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">#ifdef DEBUGBUILD</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> statename[]={</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="stringliteral">&quot;INIT&quot;</span>,</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="stringliteral">&quot;CONNECT_PEND&quot;</span>,</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="stringliteral">&quot;CONNECT&quot;</span>,</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="stringliteral">&quot;WAITRESOLVE&quot;</span>,</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="stringliteral">&quot;WAITCONNECT&quot;</span>,</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="stringliteral">&quot;WAITPROXYCONNECT&quot;</span>,</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="stringliteral">&quot;SENDPROTOCONNECT&quot;</span>,</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="stringliteral">&quot;PROTOCONNECT&quot;</span>,</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="stringliteral">&quot;WAITDO&quot;</span>,</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="stringliteral">&quot;DO&quot;</span>,</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="stringliteral">&quot;DOING&quot;</span>,</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="stringliteral">&quot;DO_MORE&quot;</span>,</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="stringliteral">&quot;DO_DONE&quot;</span>,</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="stringliteral">&quot;WAITPERFORM&quot;</span>,</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="stringliteral">&quot;PERFORM&quot;</span>,</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="stringliteral">&quot;TOOFAST&quot;</span>,</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="stringliteral">&quot;DONE&quot;</span>,</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="stringliteral">&quot;COMPLETED&quot;</span>,</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="stringliteral">&quot;MSGSENT&quot;</span>,</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;};</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">/* function pointer called once when switching TO a state */</span></div><div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="multi_8c.html#ad00e77448df8f1b5da892c126e7721fc">  109</a></span>&#160;<span class="keyword">typedef</span> void (*<a class="code" href="multi_8c.html#ad00e77448df8f1b5da892c126e7721fc">init_multistate_func</a>)(<span class="keyword">struct </span><a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="get_8d.html#a38b0ef81b65f2aee282c8c217a123176">data</a>);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> Curl_init_completed(<span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>)</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;{</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="comment">/* this is a completed transfer */</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="comment">/* Important: reset the conn pointer so that we don&#39;t point to memory</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">     that could be freed anytime */</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;easy_conn = NULL;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <a class="code" href="multi_8c.html#a7a9f018ccced30e7c65ea89e2c85382f">Curl_expire_clear</a>(<a class="code" href="structdata.html">data</a>); <span class="comment">/* stop all timers */</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">/* always use this function to change state, to make debugging easier */</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="struct_curl__easy.html#a48af5568e2e5d690750ebfea66c3891d">mstate</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383">CURLMstate</a> <a class="code" href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;#ifdef DEBUGBUILD</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                   , <span class="keywordtype">int</span> lineno</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;#endif</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;)</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;{</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383">CURLMstate</a> oldstate = <a class="code" href="structdata.html">data</a>-&gt;mstate;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="multi_8c.html#ad00e77448df8f1b5da892c126e7721fc">init_multistate_func</a> finit[<a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a47cf8c3465f67852269eec4321cc531d">CURLM_STATE_LAST</a>] = {</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    NULL,              <span class="comment">/* INIT */</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    NULL,              <span class="comment">/* CONNECT_PEND */</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="transfer_8c.html#a055b20e035ac986f69148eaa4a44eaaa">Curl_init_CONNECT</a>, <span class="comment">/* CONNECT */</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    NULL,              <span class="comment">/* WAITRESOLVE */</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    NULL,              <span class="comment">/* WAITCONNECT */</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    NULL,              <span class="comment">/* WAITPROXYCONNECT */</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    NULL,              <span class="comment">/* SENDPROTOCONNECT */</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    NULL,              <span class="comment">/* PROTOCONNECT */</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    NULL,              <span class="comment">/* WAITDO */</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="http__proxy_8c.html#a23d5abbb021d10ac416259cad0495c61">Curl_connect_free</a>, <span class="comment">/* DO */</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    NULL,              <span class="comment">/* DOING */</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    NULL,              <span class="comment">/* DO_MORE */</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    NULL,              <span class="comment">/* DO_DONE */</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    NULL,              <span class="comment">/* WAITPERFORM */</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    NULL,              <span class="comment">/* PERFORM */</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    NULL,              <span class="comment">/* TOOFAST */</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    NULL,              <span class="comment">/* DONE */</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    Curl_init_completed, <span class="comment">/* COMPLETED */</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    NULL               <span class="comment">/* MSGSENT */</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  };</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="preprocessor">#if defined(DEBUGBUILD) &amp;&amp; defined(CURL_DISABLE_VERBOSE_STRINGS)</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  (void) lineno;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordflow">if</span>(oldstate == <a class="code" href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a>)</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">/* don&#39;t bother when the new state is the same as the old state */</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;mstate = <a class="code" href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a>;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">#if defined(DEBUGBUILD) &amp;&amp; !defined(CURL_DISABLE_VERBOSE_STRINGS)</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;mstate &gt;= <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383acd3890b70496f93a1fa8179ccde1e235">CURLM_STATE_CONNECT_PEND</a> &amp;&amp;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;     <a class="code" href="structdata.html">data</a>-&gt;mstate &lt; <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a9c82cd8d2874a9b075dcac72b9e50800">CURLM_STATE_COMPLETED</a>) {</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordtype">long</span> connection_id = -5000;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn)</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      connection_id = <a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;connection_id;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>,</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;          <span class="stringliteral">&quot;STATE: %s =&gt; %s handle %p; line %d (connection #%ld)\n&quot;</span>,</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;          statename[oldstate], statename[<a class="code" href="structdata.html">data</a>-&gt;mstate],</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;          (<span class="keywordtype">void</span> *)<a class="code" href="structdata.html">data</a>, lineno, connection_id);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  }</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a> == <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a9c82cd8d2874a9b075dcac72b9e50800">CURLM_STATE_COMPLETED</a>)</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="comment">/* changing to COMPLETED means there&#39;s one less easy handle &#39;alive&#39; */</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;multi-&gt;num_alive--;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="comment">/* if this state has an init-function, run it */</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keywordflow">if</span>(finit[<a class="code" href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a>])</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    finit[<a class="code" href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a>](<a class="code" href="get_8d.html#a38b0ef81b65f2aee282c8c217a123176">data</a>);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;}</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="preprocessor">#ifndef DEBUGBUILD</span></div><div class="line"><a name="l00186"></a><span class="lineno"><a class="line" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">  186</a></span>&#160;<span class="preprocessor">#define multistate(x,y) mstate(x,y)</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="preprocessor">#define multistate(x,y) mstate(x,y, __LINE__)</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment"> * We add one of these structs to the sockhash for a particular socket</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="struct_curl__sh__entry.html">  195</a></span>&#160;<span class="keyword">struct </span><a class="code" href="struct_curl__sh__entry.html">Curl_sh_entry</a> {</div><div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="struct_curl__sh__entry.html#a2b27894ee7605e464ac288ebca47d0f9">  196</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="struct_curl__sh__entry.html#a2b27894ee7605e464ac288ebca47d0f9">easy</a>;</div><div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="struct_curl__sh__entry.html#ae5d8bcf6fe986e6c2b315b0b4fcddcc2">  197</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="struct_curl__sh__entry.html#ae5d8bcf6fe986e6c2b315b0b4fcddcc2">action</a>;  <span class="comment">/* what action READ/WRITE this socket waits for */</span></div><div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="struct_curl__sh__entry.html#aaacf664dc2b48441883d762e3a938014">  198</a></span>&#160;  <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> <a class="code" href="struct_curl__sh__entry.html#aaacf664dc2b48441883d762e3a938014">socket</a>; <span class="comment">/* mainly to ease debugging */</span></div><div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="struct_curl__sh__entry.html#a7d846f0b4d94827cbcae2d9734ef3d26">  199</a></span>&#160;  <span class="keywordtype">void</span> *<a class="code" href="struct_curl__sh__entry.html#a7d846f0b4d94827cbcae2d9734ef3d26">socketp</a>; <span class="comment">/* settable by users with curl_multi_assign() */</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;};</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">/* bits for &#39;action&#39; having no bits means this socket is not expecting any</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">   action */</span></div><div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="multi_8c.html#a025aff213507666ae303062f92fbe8e2">  203</a></span>&#160;<span class="preprocessor">#define SH_READ  1</span></div><div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="multi_8c.html#a89790be9f79d54280ba7aa539de9b573">  204</a></span>&#160;<span class="preprocessor">#define SH_WRITE 2</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">/* look up a given socket in the socket hash, skip invalid sockets */</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="struct_curl__sh__entry.html">Curl_sh_entry</a> *sh_getentry(<span class="keyword">struct</span> <a class="code" href="structcurl__hash.html">curl_hash</a> *sh,</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                                         <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> s)</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;{</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keywordflow">if</span>(s != <a class="code" href="curl_8h.html#ada0bbe252b7b370ef4e135b93b2fe71e">CURL_SOCKET_BAD</a>)</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="comment">/* only look for proper sockets */</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="hash_8c.html#a36789eb2833288dbbdd77d0317132131">Curl_hash_pick</a>(sh, (<span class="keywordtype">char</span> *)&amp;s, <span class="keyword">sizeof</span>(<a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a>));</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;}</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">/* make sure this socket is present in the hash for this handle */</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="struct_curl__sh__entry.html">Curl_sh_entry</a> *sh_addentry(<span class="keyword">struct</span> <a class="code" href="structcurl__hash.html">curl_hash</a> *sh,</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                                         <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> s,</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                                         <span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>)</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;{</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__sh__entry.html">Curl_sh_entry</a> *there = sh_getentry(sh, s);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__sh__entry.html">Curl_sh_entry</a> *check;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keywordflow">if</span>(there)</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="comment">/* it is present, return fine */</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">return</span> there;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="comment">/* not present, add it */</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  check = <a class="code" href="curl__memory_8h.html#abc013d1a27cb591a5316801c509c781f">calloc</a>(1, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="struct_curl__sh__entry.html">Curl_sh_entry</a>));</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="keywordflow">if</span>(!check)</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">return</span> NULL; <span class="comment">/* major failure */</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  check-&gt;<a class="code" href="struct_curl__sh__entry.html#a2b27894ee7605e464ac288ebca47d0f9">easy</a> = <a class="code" href="get_8d.html#a38b0ef81b65f2aee282c8c217a123176">data</a>;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  check-&gt;<a class="code" href="struct_curl__sh__entry.html#aaacf664dc2b48441883d762e3a938014">socket</a> = s;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="comment">/* make/add new hash entry */</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="hash_8c.html#a79767eb92ddbebaedaee7c568b8bf4bd">Curl_hash_add</a>(sh, (<span class="keywordtype">char</span> *)&amp;s, <span class="keyword">sizeof</span>(<a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a>), check)) {</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="curl__memory_8h.html#a9cc854374299a1dd933bf62029761768">free</a>(check);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">return</span> NULL; <span class="comment">/* major failure */</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="keywordflow">return</span> check; <span class="comment">/* things are good in sockhash land */</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;}</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">/* delete the given socket + handle from the hash */</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> sh_delentry(<span class="keyword">struct</span> <a class="code" href="structcurl__hash.html">curl_hash</a> *sh, <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> s)</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;{</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="comment">/* We remove the hash entry. This will end up in a call to</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">     sh_freeentry(). */</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <a class="code" href="hash_8c.html#a1b249bccd7f3b079b31a4254444538d5">Curl_hash_delete</a>(sh, (<span class="keywordtype">char</span> *)&amp;s, <span class="keyword">sizeof</span>(<a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a>));</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;}</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment"> * free a sockhash entry</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> sh_freeentry(<span class="keywordtype">void</span> *freethis)</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;{</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__sh__entry.html">Curl_sh_entry</a> *<a class="code" href="unit1394_8c.html#a0fb9c3165f64b5b79f3928b404818be9">p</a> = (<span class="keyword">struct </span><a class="code" href="struct_curl__sh__entry.html">Curl_sh_entry</a> *) freethis;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <a class="code" href="curl__memory_8h.html#a9cc854374299a1dd933bf62029761768">free</a>(<a class="code" href="unit1394_8c.html#a0fb9c3165f64b5b79f3928b404818be9">p</a>);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;}</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> fd_key_compare(<span class="keywordtype">void</span> *k1, <span class="keywordtype">size_t</span> k1_len, <span class="keywordtype">void</span> *k2, <span class="keywordtype">size_t</span> k2_len)</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;{</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  (void) k1_len; (void) k2_len;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="keywordflow">return</span> (*((<a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> *) k1)) == (*((<a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> *) k2));</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;}</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> hash_fd(<span class="keywordtype">void</span> *<a class="code" href="unit1602_8c.html#a35af0be900467fedbb610bd6ea65ed78">key</a>, <span class="keywordtype">size_t</span> key_length, <span class="keywordtype">size_t</span> slots_num)</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;{</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> fd = *((<a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> *) <a class="code" href="unit1602_8c.html#a35af0be900467fedbb610bd6ea65ed78">key</a>);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  (void) key_length;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="keywordflow">return</span> (fd % slots_num);</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;}</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment"> * sh_init() creates a new socket hash and returns the handle for it.</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment"> * Quote from README.multi_socket:</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment"> * &quot;Some tests at 7000 and 9000 connections showed that the socket hash lookup</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment"> * is somewhat of a bottle neck. Its current implementation may be a bit too</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment"> * limiting. It simply has a fixed-size array, and on each entry in the array</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment"> * it has a linked list with entries. So the hash only checks which list to</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment"> * scan through. The code I had used so for used a list with merely 7 slots</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment"> * (as that is what the DNS hash uses) but with 7000 connections that would</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment"> * make an average of 1000 nodes in each list to run through. I upped that to</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment"> * 97 slots (I believe a prime is suitable) and noticed a significant speed</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment"> * increase.  I need to reconsider the hash implementation or use a rather</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment"> * large default value like this. At 9000 connections I was still below 10us</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment"> * per call.&quot;</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> sh_init(<span class="keyword">struct</span> <a class="code" href="structcurl__hash.html">curl_hash</a> *hash, <span class="keywordtype">int</span> hashsize)</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;{</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="hash_8c.html#ad6fcf4d87ffe2648f214142d0288c8ee">Curl_hash_init</a>(hash, hashsize, hash_fd, fd_key_compare,</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                        sh_freeentry);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;}</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment"> * multi_addmsg()</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment"> * Called when a transfer is completed. Adds the given msg pointer to</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment"> * the list kept in the multi handle.</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="keyword">static</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> multi_addmsg(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi,</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                              <span class="keyword">struct</span> <a class="code" href="struct_curl__message.html">Curl_message</a> *msg)</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;{</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <a class="code" href="llist_8c.html#a9fb691307db5bfd5d29315b96b56ad2b">Curl_llist_insert_next</a>(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#a16a9f16f5b7cdbf738009ab20483d610">msglist</a>, multi-&gt;<a class="code" href="struct_curl__multi.html#a16a9f16f5b7cdbf738009ab20483d610">msglist</a>.<a class="code" href="structcurl__llist.html#a04c1d20c09bc187d0eb71fbaf463a4b7">tail</a>, msg,</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                         &amp;msg-&gt;<a class="code" href="struct_curl__message.html#aef9ba06f06ae40f5d50ed1b1047005fd">list</a>);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a>;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;}</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment"> * multi_freeamsg()</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment"> * Callback used by the llist system when a single list entry is destroyed.</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> multi_freeamsg(<span class="keywordtype">void</span> *<a class="code" href="structa.html">a</a>, <span class="keywordtype">void</span> *b)</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;{</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  (void)<a class="code" href="structa.html">a</a>;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  (void)b;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;}</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="multiif_8h.html#ac7cec4f440d3f46154fc1d0220d2f1dc">  328</a></span>&#160;<span class="keyword">struct </span><a class="code" href="struct_curl__multi.html">Curl_multi</a> *<a class="code" href="multi_8c.html#ac7cec4f440d3f46154fc1d0220d2f1dc">Curl_multi_handle</a>(<span class="keywordtype">int</span> hashsize, <span class="comment">/* socket hash */</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                                     <span class="keywordtype">int</span> chashsize) <span class="comment">/* connection hash */</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;{</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi = <a class="code" href="curl__memory_8h.html#abc013d1a27cb591a5316801c509c781f">calloc</a>(1, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a>));</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keywordflow">if</span>(!multi)</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  multi-&gt;<a class="code" href="struct_curl__multi.html#ae9f56b8b25625e24b8de0dfb9b0e0272">type</a> = <a class="code" href="multi_8c.html#a73a33e645c54c94315ffa9232f98ead1">CURL_MULTI_HANDLE</a>;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="hostip_8c.html#ae84cb7831090ead4c353b412893a259a">Curl_mk_dnscache</a>(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#addd2be231a1ea833776cf7f39e4353a7">hostcache</a>))</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">goto</span> error;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="keywordflow">if</span>(sh_init(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#abab21812b094af393ac6e639bf4d3ee5">sockhash</a>, hashsize))</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">goto</span> error;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="conncache_8c.html#ae8c2e055a5c5a9e187ebedfd95166ee2">Curl_conncache_init</a>(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#a4b99b75205eb20c5958edb9b343becf1">conn_cache</a>, chashsize))</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">goto</span> error;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <a class="code" href="llist_8c.html#adf86d38f256b25809632d659a545c75d">Curl_llist_init</a>(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#a16a9f16f5b7cdbf738009ab20483d610">msglist</a>, multi_freeamsg);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <a class="code" href="llist_8c.html#adf86d38f256b25809632d659a545c75d">Curl_llist_init</a>(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#a27e434e78227c62c5107dc06754d2585">pending</a>, multi_freeamsg);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  multi-&gt;<a class="code" href="struct_curl__multi.html#a0b29ca948d79c169c92f28239fbdd6ea">max_pipeline_length</a> = 5;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  multi-&gt;<a class="code" href="struct_curl__multi.html#a91630f04dcc2513676ee2f3f0879feed">pipelining</a> = <a class="code" href="http2-download_8c.html#af29d172b038fadd90daf541df3b945c6">CURLPIPE_MULTIPLEX</a>;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="comment">/* -1 means it not set by user, use the default value */</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  multi-&gt;<a class="code" href="struct_curl__multi.html#a08af434edc6a2950fd3c03df808c2b9f">maxconnects</a> = -1;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="keywordflow">return</span> multi;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  error:</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <a class="code" href="hash_8c.html#a7e58db026000cd72601150793facbbdc">Curl_hash_destroy</a>(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#abab21812b094af393ac6e639bf4d3ee5">sockhash</a>);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <a class="code" href="hash_8c.html#a7e58db026000cd72601150793facbbdc">Curl_hash_destroy</a>(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#addd2be231a1ea833776cf7f39e4353a7">hostcache</a>);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <a class="code" href="conncache_8c.html#a4b099b50e4232c69faa023dd25e96176">Curl_conncache_destroy</a>(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#a4b99b75205eb20c5958edb9b343becf1">conn_cache</a>);</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <a class="code" href="llist_8c.html#a8ea7dbefac355279ad19f3dfe345a45a">Curl_llist_destroy</a>(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#a16a9f16f5b7cdbf738009ab20483d610">msglist</a>, NULL);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <a class="code" href="llist_8c.html#a8ea7dbefac355279ad19f3dfe345a45a">Curl_llist_destroy</a>(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#a27e434e78227c62c5107dc06754d2585">pending</a>, NULL);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <a class="code" href="curl__memory_8h.html#a9cc854374299a1dd933bf62029761768">free</a>(multi);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;}</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="multi_8c.html#ae6edd0dbd516c21141b4a92adf20c33e">  369</a></span>&#160;<span class="keyword">struct </span><a class="code" href="struct_curl__multi.html">Curl_multi</a> *<a class="code" href="multi_8c.html#ae6edd0dbd516c21141b4a92adf20c33e">curl_multi_init</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;{</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="multi_8c.html#ac7cec4f440d3f46154fc1d0220d2f1dc">Curl_multi_handle</a>(<a class="code" href="multi_8c.html#ac47b69b8ab21f9d231e3780ed9999a67">CURL_SOCKET_HASH_TABLE_SIZE</a>,</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                           <a class="code" href="multi_8c.html#adad279999b00d12aa4240bd26280ab40">CURL_CONNECTION_HASH_SIZE</a>);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;}</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div><div class="line"><a name="l00375"></a><span class="lineno"><a class="line" href="multi_8c.html#a7b85e4aa84035e36ffe7c1f51fdbd2b3">  375</a></span>&#160;<a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> <a class="code" href="multi_8c.html#a7b85e4aa84035e36ffe7c1f51fdbd2b3">curl_multi_add_handle</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi,</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                                <span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>)</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;{</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="comment">/* First, make some basic checks that the CURLM handle is a good handle */</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="multi_8c.html#ab6e53cbf757b0790ad040a27772544c4">GOOD_MULTI_HANDLE</a>(multi))</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a8876b8ad10b9b2e9ee4cfb22034803ed">CURLM_BAD_HANDLE</a>;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="comment">/* Verify that we got a somewhat good easy handle too */</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="urldata_8h.html#a1107f8f3c79ed6d630958c8363ee37da">GOOD_EASY_HANDLE</a>(<a class="code" href="structdata.html">data</a>))</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3af6c791401114f6d764dbb8209838ba31">CURLM_BAD_EASY_HANDLE</a>;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="comment">/* Prevent users from adding same easy handle more than once and prevent</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">     adding to more than one multi stack */</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;multi)</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a0f2a032f9bfe05ff2f3b5fc74d01f7eb">CURLM_ADDED_ALREADY</a>;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="keywordflow">if</span>(multi-&gt;<a class="code" href="struct_curl__multi.html#a598ce59e5d016aee984ab282d66ed2bf">in_callback</a>)</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a02622c2fbef0b11a76595bbfd8353c6a">CURLM_RECURSIVE_API_CALL</a>;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="comment">/* Initialize timeout list for this handle */</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <a class="code" href="llist_8c.html#adf86d38f256b25809632d659a545c75d">Curl_llist_init</a>(&amp;<a class="code" href="structdata.html">data</a>-&gt;state.timeoutlist, NULL);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">   * No failure allowed in this function beyond this point. And no</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">   * modification of easy nor multi handle allowed before this except for</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">   * potential multi&#39;s connection cache growing which won&#39;t be undone in this</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">   * function no matter what.</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;set.errorbuffer)</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;set.errorbuffer[0] = 0;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="comment">/* set the easy handle */</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383abc1cafd6933c18c5d876af92a46942cb">CURLM_STATE_INIT</a>);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="keywordflow">if</span>((<a class="code" href="structdata.html">data</a>-&gt;set.global_dns_cache) &amp;&amp;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;     (<a class="code" href="structdata.html">data</a>-&gt;dns.hostcachetype != HCACHE_GLOBAL)) {</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="comment">/* global dns cache was requested but still isn&#39;t */</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keyword">struct </span><a class="code" href="structcurl__hash.html">curl_hash</a> *global = <a class="code" href="hostip_8c.html#ab2142b86e9e89284e1e8aa9c35488f24">Curl_global_host_cache_init</a>();</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">if</span>(global) {</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <span class="comment">/* only do this if the global cache init works */</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <a class="code" href="structdata.html">data</a>-&gt;dns.hostcache = global;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <a class="code" href="structdata.html">data</a>-&gt;dns.hostcachetype = HCACHE_GLOBAL;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    }</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  }</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="comment">/* for multi interface connections, we share DNS cache automatically if the</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">     easy handle&#39;s one is currently not set. */</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code" href="structdata.html">data</a>-&gt;dns.hostcache ||</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;     (<a class="code" href="structdata.html">data</a>-&gt;dns.hostcachetype == HCACHE_NONE)) {</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;dns.hostcache = &amp;multi-&gt;<a class="code" href="struct_curl__multi.html#addd2be231a1ea833776cf7f39e4353a7">hostcache</a>;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;dns.hostcachetype = HCACHE_MULTI;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  }</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="comment">/* Point to the shared or multi handle connection cache */</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;share &amp;&amp; (<a class="code" href="structdata.html">data</a>-&gt;share-&gt;specifier &amp; (1&lt;&lt; <a class="code" href="curl_8h.html#af898dd6eb71573ccb1668c3d2380549ca7a7c4e67b6d5acb22de6b3623d3c7ace">CURL_LOCK_DATA_CONNECT</a>)))</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;state.conn_cache = &amp;<a class="code" href="structdata.html">data</a>-&gt;share-&gt;conn_cache;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;state.conn_cache = &amp;multi-&gt;<a class="code" href="struct_curl__multi.html#a4b99b75205eb20c5958edb9b343becf1">conn_cache</a>;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="preprocessor">#ifdef USE_LIBPSL</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="comment">/* Do the same for PSL. */</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;share &amp;&amp; (<a class="code" href="structdata.html">data</a>-&gt;share-&gt;specifier &amp; (1 &lt;&lt; <a class="code" href="curl_8h.html#af898dd6eb71573ccb1668c3d2380549caf5548465b13390b94e68b1b3d3b730ef">CURL_LOCK_DATA_PSL</a>)))</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;psl = &amp;<a class="code" href="structdata.html">data</a>-&gt;share-&gt;psl;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;psl = &amp;multi-&gt;psl;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="comment">/* This adds the new entry at the &#39;end&#39; of the doubly-linked circular</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">     list of Curl_easy structs to try and maintain a FIFO queue so</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">     the pipelined requests are in order. */</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="comment">/* We add this new entry last in the list. */</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;next = NULL; <span class="comment">/* end of the line */</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="keywordflow">if</span>(multi-&gt;<a class="code" href="struct_curl__multi.html#af45f45ebf8c94b7510d0571349786e75">easyp</a>) {</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="unit1308_8c.html#a2f29226077aaea62db6864d9b291eadc">last</a> = <a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#a550e88d3c8e68fd0b4885dd764d63b2f">easylp</a>;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <a class="code" href="unit1308_8c.html#a2f29226077aaea62db6864d9b291eadc">last</a>-&gt;<a class="code" href="structcurl__httppost.html#a09be6ec2bb379d4580f5022be3fa65d7">next</a> = <a class="code" href="get_8d.html#a38b0ef81b65f2aee282c8c217a123176">data</a>;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;prev = <a class="code" href="unit1308_8c.html#a2f29226077aaea62db6864d9b291eadc">last</a>;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#a550e88d3c8e68fd0b4885dd764d63b2f">easylp</a> = <a class="code" href="get_8d.html#a38b0ef81b65f2aee282c8c217a123176">data</a>; <span class="comment">/* the new last node */</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  }</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">/* first node, make prev NULL! */</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;prev = NULL;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#a550e88d3c8e68fd0b4885dd764d63b2f">easylp</a> = <a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#af45f45ebf8c94b7510d0571349786e75">easyp</a> = <a class="code" href="get_8d.html#a38b0ef81b65f2aee282c8c217a123176">data</a>; <span class="comment">/* both first and last */</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  }</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="comment">/* make the Curl_easy refer back to this multi handle */</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;multi = <a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="comment">/* Set the timeout for this handle to expire really soon so that it will</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">     be taken care of even when this handle is added in the midst of operation</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">     when only the curl_multi_socket() API is used. During that flow, only</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">     sockets that time-out or have actions will be dealt with. Since this</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">     handle has no action yet, we make sure it times out to get things to</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">     happen. */</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <a class="code" href="multi_8c.html#a759a3f675165554a5f5d6e784afa7fe0">Curl_expire</a>(<a class="code" href="structdata.html">data</a>, 0, <a class="code" href="urldata_8h.html#aabb7db968656c3ee0555ea3d8784310da325bcbe2ebf7e3de886d9af307372ca4">EXPIRE_RUN_NOW</a>);</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="comment">/* increase the node-counter */</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#a0f511dbae6387301f9d6623987609b25">num_easy</a>++;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="comment">/* increase the alive-counter */</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#aa9e3ad6466ada3035eecca089efc513b">num_alive</a>++;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="comment">/* A somewhat crude work-around for a little glitch in update_timer() that</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">     happens if the lastcall time is set to the same time when the handle is</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">     removed as when the next handle is added, as then the check in</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">     update_timer() that prevents calling the application multiple times with</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">     the same timer info will not trigger and then the new handle&#39;s timeout</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">     will not be notified to the app.</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">     The work-around is thus simply to clear the &#39;lastcall&#39; variable to force</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">     update_timer() to always trigger a callback to the app when a new easy</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">     handle is added */</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <a class="code" href="unit1652_8c.html#a1d19b0eef3b3acd31be88886a0277c2e">memset</a>(&amp;<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#a2e319cdf49b37a3035f7e2d1012d374e">timer_lastcall</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#a2e319cdf49b37a3035f7e2d1012d374e">timer_lastcall</a>));</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="comment">/* The closure handle only ever has default timeouts set. To improve the</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">     state somewhat we clone the timeouts from each added handle so that the</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">     closure handle always has the same timeouts as the most recently added</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">     easy handle. */</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;state.conn_cache-&gt;closure_handle-&gt;set.timeout = <a class="code" href="structdata.html">data</a>-&gt;set.timeout;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;state.conn_cache-&gt;closure_handle-&gt;set.server_response_timeout =</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;set.server_response_timeout;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;state.conn_cache-&gt;closure_handle-&gt;set.no_signal =</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;set.no_signal;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  update_timer(<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a>;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;}</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">/* Debug-function, used like this:</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment"> * Curl_hash_print(multi-&gt;sockhash, debug_print_sock_hash);</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment"> * Enable the hash print function first by editing hash.c</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> debug_print_sock_hash(<span class="keywordtype">void</span> *<a class="code" href="unit1394_8c.html#a0fb9c3165f64b5b79f3928b404818be9">p</a>)</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;{</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__sh__entry.html">Curl_sh_entry</a> *sh = (<span class="keyword">struct </span><a class="code" href="struct_curl__sh__entry.html">Curl_sh_entry</a> *)<a class="code" href="unit1394_8c.html#a0fb9c3165f64b5b79f3928b404818be9">p</a>;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <a class="code" href="curl__printf_8h.html#aab6e63106cf29e5160e5c2d63db86d27">fprintf</a>(stderr, <span class="stringliteral">&quot; [easy %p/magic %x/socket %d]&quot;</span>,</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;          (<span class="keywordtype">void</span> *)sh-&gt;data, sh-&gt;data-&gt;magic, (<span class="keywordtype">int</span>)sh-&gt;<a class="code" href="struct_curl__sh__entry.html#aaacf664dc2b48441883d762e3a938014">socket</a>);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;}</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="keyword">static</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> multi_done(<span class="keyword">struct</span> <a class="code" href="structconnectdata.html">connectdata</a> **connp,</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                          <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> status,  <span class="comment">/* an error if this is called</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">                                               after an error was detected */</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                          <span class="keywordtype">bool</span> premature)</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;{</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="keyword">struct </span><a class="code" href="structconnectdata.html">connectdata</a> *conn;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="get_8d.html#a38b0ef81b65f2aee282c8c217a123176">data</a>;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <a class="code" href="curl__setup__once_8h.html#a23d7b88872d6ead46c978b567908d587">DEBUGASSERT</a>(*connp);</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  conn = *connp;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <a class="code" href="structdata.html">data</a> = conn-&gt;<a class="code" href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">data</a>;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <a class="code" href="curl__setup__once_8h.html#a805079d1643f348afa725659b45b6f87">DEBUGF</a>(<a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;multi_done\n&quot;</span>));</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;state.done)</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="comment">/* Stop if multi_done() has already been called */</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;mstate == <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a7c2aa7448cf01c0e395ec38a4afe9569">CURLM_STATE_WAITRESOLVE</a>) {</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="comment">/* still waiting for the resolve to complete */</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    (void)<a class="code" href="asyn_8h.html#ad14e13eb0e765d0d2b825ae8d0ad7c00">Curl_resolver_wait_resolv</a>(conn, NULL);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  }</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <a class="code" href="url_8c.html#a49088dfd99853f4981161b43f512c096">Curl_getoff_all_pipelines</a>(<a class="code" href="structdata.html">data</a>, conn);</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="comment">/* Cleanup possible redirect junk */</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <a class="code" href="memdebug_8h.html#a795660f73c902cc80ac0fe6cda0dbd1c">Curl_safefree</a>(<a class="code" href="structdata.html">data</a>-&gt;req.newurl);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <a class="code" href="memdebug_8h.html#a795660f73c902cc80ac0fe6cda0dbd1c">Curl_safefree</a>(<a class="code" href="structdata.html">data</a>-&gt;req.location);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="keywordflow">switch</span>(status) {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a309ade641c94c3e710ae887405dba78b">CURLE_ABORTED_BY_CALLBACK</a>:</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951adaff0cec927d10c0ec5059ee0104ef62">CURLE_READ_ERROR</a>:</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951acaaed2faf20c957350e90a68282ae314">CURLE_WRITE_ERROR</a>:</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="comment">/* When we&#39;re aborted due to a callback return code it basically have to</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">       be counted as premature as there is trouble ahead if we don&#39;t. We have</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">       many callbacks and protocols work differently, we could potentially do</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">       this more fine-grained in the future. */</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    premature = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="keywordflow">default</span>:</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  }</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="comment">/* this calls the protocol-specific function pointer previously set */</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#ac77e1b77c701181a1ba5e58922504524">done</a>)</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#ac77e1b77c701181a1ba5e58922504524">done</a>(conn, status, premature);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = status;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a309ade641c94c3e710ae887405dba78b">CURLE_ABORTED_BY_CALLBACK</a> != <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="comment">/* avoid this if we already aborted by callback to avoid this calling</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">       another callback */</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="progress_8c.html#a0447e1786dfc3d3d2a2ecace04d63375">Curl_pgrsDone</a>(conn);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> &amp;&amp; <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>)</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a309ade641c94c3e710ae887405dba78b">CURLE_ABORTED_BY_CALLBACK</a>;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  }</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  process_pending_handles(<a class="code" href="structdata.html">data</a>-&gt;multi); <span class="comment">/* connection / multiplex */</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#a7ab37820430680c72aa59e5ce65167e2">send_pipe</a>.<a class="code" href="structcurl__llist.html#abca9151666b85a2a95d44bbbe1dcf8b2">size</a> || conn-&gt;<a class="code" href="structconnectdata.html#a6f14f579b08c62c8114a72b487e9cedf">recv_pipe</a>.<a class="code" href="structcurl__llist.html#abca9151666b85a2a95d44bbbe1dcf8b2">size</a>) {</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="comment">/* Stop if pipeline is not empty . */</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;easy_conn = NULL;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <a class="code" href="curl__setup__once_8h.html#a805079d1643f348afa725659b45b6f87">DEBUGF</a>(<a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Connection still in use %zu/%zu, &quot;</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                 <span class="stringliteral">&quot;no more multi_done now!\n&quot;</span>,</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                 conn-&gt;<a class="code" href="structconnectdata.html#a7ab37820430680c72aa59e5ce65167e2">send_pipe</a>.<a class="code" href="structcurl__llist.html#abca9151666b85a2a95d44bbbe1dcf8b2">size</a>, conn-&gt;<a class="code" href="structconnectdata.html#a6f14f579b08c62c8114a72b487e9cedf">recv_pipe</a>.<a class="code" href="structcurl__llist.html#abca9151666b85a2a95d44bbbe1dcf8b2">size</a>));</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  }</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;state.done = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>; <span class="comment">/* called just now! */</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <a class="code" href="asyn_8h.html#a0184861709315e8de5f48ce59f672bdb">Curl_resolver_cancel</a>(conn);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#a5bc9b1d04e8c04b6d32f31e3415d0810">dns_entry</a>) {</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <a class="code" href="hostip_8c.html#a47fa53659ab4a0c796ea2fd58629674c">Curl_resolv_unlock</a>(<a class="code" href="structdata.html">data</a>, conn-&gt;<a class="code" href="structconnectdata.html#a5bc9b1d04e8c04b6d32f31e3415d0810">dns_entry</a>); <span class="comment">/* done with this */</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    conn-&gt;<a class="code" href="structconnectdata.html#a5bc9b1d04e8c04b6d32f31e3415d0810">dns_entry</a> = NULL;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  }</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <a class="code" href="hostip_8c.html#a77525441d6420606360f8430fa9c15ea">Curl_hostcache_prune</a>(<a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <a class="code" href="memdebug_8h.html#a795660f73c902cc80ac0fe6cda0dbd1c">Curl_safefree</a>(<a class="code" href="structdata.html">data</a>-&gt;state.ulbuf);</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="comment">/* if the transfer was completed in a paused state there can be buffered</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment">     data left to free */</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keywordflow">for</span>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &lt; <a class="code" href="structdata.html">data</a>-&gt;state.tempcount; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++) {</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <a class="code" href="curl__memory_8h.html#a9cc854374299a1dd933bf62029761768">free</a>(<a class="code" href="structdata.html">data</a>-&gt;state.tempwrite[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].buf);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  }</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;state.tempcount = 0;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <span class="comment">/* if data-&gt;set.reuse_forbid is TRUE, it means the libcurl client has</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">     forced us to close this connection. This is ignored for requests taking</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">     place in a NTLM authentication handshake</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">     if conn-&gt;bits.close is TRUE, it means that the connection should be</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment">     closed in spite of all our efforts to be nice, due to protocol</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">     restrictions in our or the server&#39;s end</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">     if premature is TRUE, it means this connection was said to be DONE before</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">     the entire request operation is complete and thus we can&#39;t know in what</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">     state it is for re-using, so we&#39;re forced to close it. In a perfect world</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">     we can add code that keep track of if we really must close it here or not,</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">     but currently we have no such detail knowledge.</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <span class="keywordflow">if</span>((<a class="code" href="structdata.html">data</a>-&gt;set.reuse_forbid</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;#<span class="keywordflow">if</span> defined(USE_NTLM)</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      &amp;&amp; !(conn-&gt;ntlm.state == <a class="code" href="urldata_8h.html#ad606881f90e46a7ccaa95859a6fdef54afabd35bacd3e2bdb1f3bba2bb4432ddf">NTLMSTATE_TYPE2</a> ||</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;           conn-&gt;proxyntlm.state == <a class="code" href="urldata_8h.html#ad606881f90e46a7ccaa95859a6fdef54afabd35bacd3e2bdb1f3bba2bb4432ddf">NTLMSTATE_TYPE2</a>)</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;#endif</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;     ) || conn-&gt;<a class="code" href="structconnectdata.html#a9312f162d29fe7f59bc2b5dbeda85d9d">bits</a>.<a class="code" href="struct_connect_bits.html#aaf15319fba965e2d87ac0ac839ae8351">close</a></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;       || (premature &amp;&amp; !(conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a2fc887b2697c63980406a19108b82a24">flags</a> &amp; <a class="code" href="urldata_8h.html#a81a92a35e60e84d80aa4d2b5a6959722">PROTOPT_STREAM</a>))) {</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> res2 = <a class="code" href="url_8c.html#a3cd816b52d9e4d2393ce905dd98e57a9">Curl_disconnect</a>(<a class="code" href="structdata.html">data</a>, conn, premature);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="comment">/* If we had an error already, make sure we return that one. But</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">       if we got a new error, return that. */</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> &amp;&amp; res2)</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = res2;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  }</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="keywordtype">char</span> <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>[256];</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="comment">/* create string before returning the connection */</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <a class="code" href="unit1652_8c.html#a348cae967f89c4bad8fb37e45a469d1a">msnprintf</a>(<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, <span class="keyword">sizeof</span>(<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>),</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;              <span class="stringliteral">&quot;Connection #%ld to host %s left intact&quot;</span>,</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;              conn-&gt;<a class="code" href="structconnectdata.html#a23709f8003b50c28fb59cd977ee23632">connection_id</a>,</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;              conn-&gt;<a class="code" href="structconnectdata.html#a9312f162d29fe7f59bc2b5dbeda85d9d">bits</a>.<a class="code" href="struct_connect_bits.html#a91829a03c2fae88d0de9c895e9df8cca">socksproxy</a> ? conn-&gt;<a class="code" href="structconnectdata.html#a44ea1ec223e43a877daac8a34167096a">socks_proxy</a>.<a class="code" href="structproxy__info.html#ae2cc9c2eb5c4ea0c4b92bf067e391bdc">host</a>.<a class="code" href="structhostname.html#aee7d0ff8210c25b87d6fdeacf8ea7939">dispname</a> :</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;              conn-&gt;<a class="code" href="structconnectdata.html#a9312f162d29fe7f59bc2b5dbeda85d9d">bits</a>.<a class="code" href="struct_connect_bits.html#a7a7b20d08be448324d83ed41df90adfb">httpproxy</a> ? conn-&gt;<a class="code" href="structconnectdata.html#a4df63a4042ad767671bb3bfd74aa68fc">http_proxy</a>.<a class="code" href="structproxy__info.html#ae2cc9c2eb5c4ea0c4b92bf067e391bdc">host</a>.<a class="code" href="structhostname.html#aee7d0ff8210c25b87d6fdeacf8ea7939">dispname</a> :</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;              conn-&gt;<a class="code" href="structconnectdata.html#a9312f162d29fe7f59bc2b5dbeda85d9d">bits</a>.<a class="code" href="struct_connect_bits.html#ae55bdf35c39d2f5556e9ea5576b9b92e">conn_to_host</a> ? conn-&gt;<a class="code" href="structconnectdata.html#aaf06c7a3f4e682976ea7c3fc86273aa6">conn_to_host</a>.<a class="code" href="structhostname.html#aee7d0ff8210c25b87d6fdeacf8ea7939">dispname</a> :</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;              conn-&gt;<a class="code" href="structconnectdata.html#a91d94af5dfef86510940d658476b61cf">host</a>.<a class="code" href="structhostname.html#aee7d0ff8210c25b87d6fdeacf8ea7939">dispname</a>);</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="comment">/* the connection is no longer in use by this transfer */</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="conncache_8c.html#adb8f4815ab8920bda869c304c90857d9">Curl_conncache_return_conn</a>(conn)) {</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      <span class="comment">/* remember the most recently used connection */</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      <a class="code" href="structdata.html">data</a>-&gt;state.lastconnect = conn;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    }</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <a class="code" href="structdata.html">data</a>-&gt;state.lastconnect = NULL;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  }</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  *connp = NULL; <span class="comment">/* to make the caller of this function better detect that</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">                    this was either closed or handed over to the connection</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment">                    cache here, and therefore cannot be used from this point on</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment">                 */</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <a class="code" href="url_8c.html#a6ba815ed78d02e76c51dc646ffded7dc">Curl_free_request_state</a>(<a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;}</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div><div class="line"><a name="l00664"></a><span class="lineno"><a class="line" href="multi_8c.html#a26c37ccc9da4d05fc29eac32f9129896">  664</a></span>&#160;<a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> <a class="code" href="multi_8c.html#a26c37ccc9da4d05fc29eac32f9129896">curl_multi_remove_handle</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>,</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                                   <span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>)</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;{</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="unit1608_8c.html#a8e67ff5c12b8bbb5baf741515fa674bb">easy</a> = <a class="code" href="get_8d.html#a38b0ef81b65f2aee282c8c217a123176">data</a>;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="keywordtype">bool</span> premature;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="keywordtype">bool</span> easy_owns_conn;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="keyword">struct </span><a class="code" href="structcurl__llist__element.html">curl_llist_element</a> *e;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="comment">/* First, make some basic checks that the CURLM handle is a good handle */</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="multi_8c.html#ab6e53cbf757b0790ad040a27772544c4">GOOD_MULTI_HANDLE</a>(multi))</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a8876b8ad10b9b2e9ee4cfb22034803ed">CURLM_BAD_HANDLE</a>;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="comment">/* Verify that we got a somewhat good easy handle too */</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="urldata_8h.html#a1107f8f3c79ed6d630958c8363ee37da">GOOD_EASY_HANDLE</a>(<a class="code" href="structdata.html">data</a>))</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3af6c791401114f6d764dbb8209838ba31">CURLM_BAD_EASY_HANDLE</a>;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="comment">/* Prevent users from trying to remove same easy handle more than once */</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="structdata.html">data</a>-&gt;multi)</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a>; <span class="comment">/* it is already removed so let&#39;s say it is fine! */</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <span class="keywordflow">if</span>(multi-&gt;<a class="code" href="struct_curl__multi.html#a598ce59e5d016aee984ab282d66ed2bf">in_callback</a>)</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a02622c2fbef0b11a76595bbfd8353c6a">CURLM_RECURSIVE_API_CALL</a>;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  premature = (<a class="code" href="structdata.html">data</a>-&gt;mstate &lt; <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a9c82cd8d2874a9b075dcac72b9e50800">CURLM_STATE_COMPLETED</a>) ? <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> : <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  easy_owns_conn = (<a class="code" href="structdata.html">data</a>-&gt;easy_conn &amp;&amp; (<a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;data == <a class="code" href="unit1608_8c.html#a8e67ff5c12b8bbb5baf741515fa674bb">easy</a>)) ?</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> : <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="comment">/* If the &#39;state&#39; is not INIT or COMPLETED, we might need to do something</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment">     nice to put the easy_handle in a good known state when this returns. */</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="keywordflow">if</span>(premature) {</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="comment">/* this handle is &quot;alive&quot; so we need to count down the total number of</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment">       alive connections when this is removed */</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    multi-&gt;<a class="code" href="struct_curl__multi.html#aa9e3ad6466ada3035eecca089efc513b">num_alive</a>--;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  }</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn &amp;&amp;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;     <a class="code" href="structdata.html">data</a>-&gt;mstate &gt; <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383ad2cd9b2df724837e4d4b56a816c07d63">CURLM_STATE_DO</a> &amp;&amp;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;     <a class="code" href="structdata.html">data</a>-&gt;mstate &lt; <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a9c82cd8d2874a9b075dcac72b9e50800">CURLM_STATE_COMPLETED</a>) {</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="comment">/* Set connection owner so that the DONE function closes it.  We can</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment">       safely do this here since connection is killed. */</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;data = <a class="code" href="unit1608_8c.html#a8e67ff5c12b8bbb5baf741515fa674bb">easy</a>;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="comment">/* If the handle is in a pipeline and has started sending off its</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment">       request but not received its response yet, we need to close</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment">       connection. */</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <a class="code" href="connect_8h.html#a39c490691a02b6643d80882c12b189ed">streamclose</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn, <span class="stringliteral">&quot;Removed with partial response&quot;</span>);</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    easy_owns_conn = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  }</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="comment">/* The timer must be shut down before data-&gt;multi is set to NULL,</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment">     else the timenode will remain in the splay tree after</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment">     curl_easy_cleanup is called. */</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <a class="code" href="multi_8c.html#a7a9f018ccced30e7c65ea89e2c85382f">Curl_expire_clear</a>(<a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn) {</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="comment">/* we must call multi_done() here (if we still own the connection) so that</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">       we don&#39;t leave a half-baked one around */</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keywordflow">if</span>(easy_owns_conn) {</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      <span class="comment">/* multi_done() clears the conn-&gt;data field to lose the association</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment">         between the easy handle and the connection</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">         Note that this ignores the return code simply because there&#39;s</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment">         nothing really useful to do with it anyway! */</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      (void)multi_done(&amp;<a class="code" href="structdata.html">data</a>-&gt;easy_conn, <a class="code" href="structdata.html">data</a>-&gt;result, premature);</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    }</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      <span class="comment">/* Clear connection pipelines, if multi_done above was not called */</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      <a class="code" href="url_8c.html#a49088dfd99853f4981161b43f512c096">Curl_getoff_all_pipelines</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="structdata.html">data</a>-&gt;easy_conn);</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  }</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;connect_queue.ptr)</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="comment">/* the handle was in the pending list waiting for an available connection,</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment">       so go ahead and remove it */</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <a class="code" href="llist_8c.html#a36b09b21eb5d63095a325575113df4f0">Curl_llist_remove</a>(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#a27e434e78227c62c5107dc06754d2585">pending</a>, &amp;<a class="code" href="structdata.html">data</a>-&gt;connect_queue, NULL);</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;dns.hostcachetype == HCACHE_MULTI) {</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="comment">/* stop using the multi handle&#39;s DNS cache, *after* the possible</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment">       multi_done() call above */</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;dns.hostcache = NULL;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;dns.hostcachetype = HCACHE_NONE;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  }</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <a class="code" href="wildcard_8c.html#a32768c48565988ec546842a3c4c9c433">Curl_wildcard_dtor</a>(&amp;<a class="code" href="structdata.html">data</a>-&gt;wildcard);</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <span class="comment">/* destroy the timeout list that is held in the easy handle, do this *after*</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">     multi_done() as that may actually call Curl_expire that uses this */</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <a class="code" href="llist_8c.html#a8ea7dbefac355279ad19f3dfe345a45a">Curl_llist_destroy</a>(&amp;<a class="code" href="structdata.html">data</a>-&gt;state.timeoutlist, NULL);</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  <span class="comment">/* as this was using a shared connection cache we clear the pointer to that</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">     since we&#39;re not part of that multi handle anymore */</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;state.conn_cache = NULL;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <span class="comment">/* change state without using multistate(), only to make singlesocket() do</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">     what we want */</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;mstate = <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a9c82cd8d2874a9b075dcac72b9e50800">CURLM_STATE_COMPLETED</a>;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  singlesocket(multi, <a class="code" href="unit1608_8c.html#a8e67ff5c12b8bbb5baf741515fa674bb">easy</a>); <span class="comment">/* to let the application know what sockets that</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment">                                vanish with this handle */</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <span class="comment">/* Remove the association between the connection and the handle */</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn) {</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;data = NULL;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;easy_conn = NULL;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  }</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="preprocessor">#ifdef USE_LIBPSL</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="comment">/* Remove the PSL association. */</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;psl == &amp;multi-&gt;psl)</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;psl = NULL;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;multi = NULL; <span class="comment">/* clear the association to this multi handle */</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  <span class="comment">/* make sure there&#39;s no pending message in the queue sent from this easy</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment">     handle */</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <span class="keywordflow">for</span>(e = multi-&gt;<a class="code" href="struct_curl__multi.html#a16a9f16f5b7cdbf738009ab20483d610">msglist</a>.<a class="code" href="structcurl__llist.html#a3f6e07aacbee78561127b0166cc28fe7">head</a>; e; e = e-&gt;<a class="code" href="structcurl__llist__element.html#a75de5ec93f47535d096929a045f46467">next</a>) {</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_curl__message.html">Curl_message</a> *msg = e-&gt;<a class="code" href="structcurl__llist__element.html#aa3c3cb90fae86e24d88eea4437bc61ab">ptr</a>;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <span class="keywordflow">if</span>(msg-&gt;<a class="code" href="struct_curl__message.html#a52f673a70ea547a989dff62b35ba6e40">extmsg</a>.<a class="code" href="struct_c_u_r_l_msg.html#a236add50fa3dc85360e4aa7a85a9dfd1">easy_handle</a> == <a class="code" href="unit1608_8c.html#a8e67ff5c12b8bbb5baf741515fa674bb">easy</a>) {</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      <a class="code" href="llist_8c.html#a36b09b21eb5d63095a325575113df4f0">Curl_llist_remove</a>(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#a16a9f16f5b7cdbf738009ab20483d610">msglist</a>, e, NULL);</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      <span class="comment">/* there can only be one from this specific handle */</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    }</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  }</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="comment">/* make the previous node point to our next */</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;prev)</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;prev-&gt;next = <a class="code" href="structdata.html">data</a>-&gt;next;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    multi-&gt;<a class="code" href="struct_curl__multi.html#af45f45ebf8c94b7510d0571349786e75">easyp</a> = <a class="code" href="structdata.html">data</a>-&gt;next; <span class="comment">/* point to first node */</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <span class="comment">/* make our next point to our previous node */</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;next)</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;next-&gt;prev = <a class="code" href="structdata.html">data</a>-&gt;prev;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    multi-&gt;<a class="code" href="struct_curl__multi.html#a550e88d3c8e68fd0b4885dd764d63b2f">easylp</a> = <a class="code" href="structdata.html">data</a>-&gt;prev; <span class="comment">/* point to last node */</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <span class="comment">/* NOTE NOTE NOTE</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment">     We do not touch the easy handle here! */</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  multi-&gt;<a class="code" href="struct_curl__multi.html#a0f511dbae6387301f9d6623987609b25">num_easy</a>--; <span class="comment">/* one less to care about now */</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  update_timer(multi);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a>;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;}</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment">/* Return TRUE if the application asked for a certain set of pipelining */</span></div><div class="line"><a name="l00811"></a><span class="lineno"><a class="line" href="multiif_8h.html#aa21e52a95b57b1ce52a02736bb0ca68c">  811</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="multi_8c.html#aa21e52a95b57b1ce52a02736bb0ca68c">Curl_pipeline_wanted</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi, <span class="keywordtype">int</span> bits)</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;{</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <span class="keywordflow">return</span> (multi &amp;&amp; (multi-&gt;<a class="code" href="struct_curl__multi.html#a91630f04dcc2513676ee2f3f0879feed">pipelining</a> &amp; bits)) ? <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> : <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;}</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;</div><div class="line"><a name="l00816"></a><span class="lineno"><a class="line" href="multiif_8h.html#ae84f9596ab8955a07e25580f1828a975">  816</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="multi_8c.html#ae84f9596ab8955a07e25580f1828a975">Curl_multi_handlePipeBreak</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>)</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;{</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;easy_conn = NULL;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;}</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> waitconnect_getsock(<span class="keyword">struct</span> <a class="code" href="structconnectdata.html">connectdata</a> *conn,</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                               <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> *sock,</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                               <span class="keywordtype">int</span> numsocks)</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;{</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="keywordtype">int</span> s = 0;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = 0;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <span class="keywordflow">if</span>(!numsocks)</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multiif_8h.html#ad755633cd6d4e90c3df49fefd1052bad">GETSOCK_BLANK</a>;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="preprocessor">#ifdef USE_SSL</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="url_8h.html#a5eef24a1090105370832043771d44f1e">CONNECT_FIRSTSOCKET_PROXY_SSL</a>())</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="vtls_8h.html#a665432b41da505b40f72af4161b011aa">Curl_ssl_getsock</a>(conn, sock, numsocks);</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <span class="keywordflow">for</span>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>&lt;2; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++) {</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#a2e6cc8a072c4712d1a113c56ef37dd13">tempsock</a>[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>] != <a class="code" href="curl_8h.html#ada0bbe252b7b370ef4e135b93b2fe71e">CURL_SOCKET_BAD</a>) {</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      sock[s] = conn-&gt;<a class="code" href="structconnectdata.html#a2e6cc8a072c4712d1a113c56ef37dd13">tempsock</a>[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>];</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> |= <a class="code" href="multiif_8h.html#a9aabda59f0ff87c1db3a2d306a410713">GETSOCK_WRITESOCK</a>(s++);</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    }</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  }</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;}</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> waitproxyconnect_getsock(<span class="keyword">struct</span> <a class="code" href="structconnectdata.html">connectdata</a> *conn,</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                                    <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> *sock,</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                                    <span class="keywordtype">int</span> numsocks)</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;{</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="keywordflow">if</span>(!numsocks)</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multiif_8h.html#ad755633cd6d4e90c3df49fefd1052bad">GETSOCK_BLANK</a>;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  sock[0] = conn-&gt;<a class="code" href="structconnectdata.html#a13cc2123ad38902e8ad44e67f10ed7aa">sock</a>[<a class="code" href="urldata_8h.html#a56b23efdd8d04b0179b52224a251bcb7">FIRSTSOCKET</a>];</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="comment">/* when we&#39;ve sent a CONNECT to a proxy, we should rather wait for the</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment">     socket to become readable to be able to get the response headers */</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#afe920189a64c99b8dc93679569406138">connect_state</a>)</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multiif_8h.html#a4ae1fb64a27264765b6a2fe5aca78830">GETSOCK_READSOCK</a>(0);</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="multiif_8h.html#a9aabda59f0ff87c1db3a2d306a410713">GETSOCK_WRITESOCK</a>(0);</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;}</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> domore_getsock(<span class="keyword">struct</span> <a class="code" href="structconnectdata.html">connectdata</a> *conn,</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                          <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> *socks,</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                          <span class="keywordtype">int</span> numsocks)</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;{</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="keywordflow">if</span>(conn &amp;&amp; conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a15e82157dae2fc24151d219318030d7b">domore_getsock</a>)</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <span class="keywordflow">return</span> conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a15e82157dae2fc24151d219318030d7b">domore_getsock</a>(conn, socks, numsocks);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="multiif_8h.html#ad755633cd6d4e90c3df49fefd1052bad">GETSOCK_BLANK</a>;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;}</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment">/* returns bitmapped flags for this handle and its sockets */</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> multi_getsock(<span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>,</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                         <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> *socks, <span class="comment">/* points to numsocks number</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment">                                                  of sockets */</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                         <span class="keywordtype">int</span> numsocks)</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;{</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <span class="comment">/* The no connection case can happen when this is called from</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment">     curl_multi_remove_handle() =&gt; singlesocket() =&gt; multi_getsock().</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="structdata.html">data</a>-&gt;easy_conn)</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;mstate &gt; <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a690ed7a251acfdba578c219baf9942ec">CURLM_STATE_CONNECT</a> &amp;&amp;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;     <a class="code" href="structdata.html">data</a>-&gt;mstate &lt; <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a9c82cd8d2874a9b075dcac72b9e50800">CURLM_STATE_COMPLETED</a>) {</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="comment">/* Set up ownership correctly */</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;data = <a class="code" href="get_8d.html#a38b0ef81b65f2aee282c8c217a123176">data</a>;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  }</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="keywordflow">switch</span>(<a class="code" href="structdata.html">data</a>-&gt;mstate) {</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <span class="keywordflow">default</span>:</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="preprocessor">#if 0 </span><span class="comment">/* switch back on these cases to get the compiler to check for all enums</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment">         to be present */</span><span class="preprocessor"></span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383ad02f91c2d7df2d24690b43e095193787">CURLM_STATE_TOOFAST</a>:  <span class="comment">/* returns 0, so will not select. */</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a9c82cd8d2874a9b075dcac72b9e50800">CURLM_STATE_COMPLETED</a>:</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a5e6dec1bb80d819e0697aea452174cc4">CURLM_STATE_MSGSENT</a>:</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383abc1cafd6933c18c5d876af92a46942cb">CURLM_STATE_INIT</a>:</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a690ed7a251acfdba578c219baf9942ec">CURLM_STATE_CONNECT</a>:</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a6b795acff4967731f9a7b74e07f8b90e">CURLM_STATE_WAITDO</a>:</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a2ee595f45796a08c5f15a53e1a19a249">CURLM_STATE_DONE</a>:</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a47cf8c3465f67852269eec4321cc531d">CURLM_STATE_LAST</a>:</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="comment">/* this will get called with CURLM_STATE_COMPLETED when a handle is</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="comment">       removed */</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a7c2aa7448cf01c0e395ec38a4afe9569">CURLM_STATE_WAITRESOLVE</a>:</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="hostip_8c.html#aaa189624c85f30d5cb0eafe088c2ccd9">Curl_resolv_getsock</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn, socks, numsocks);</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383aaf4414c8ecb8141d248267f79ef02801">CURLM_STATE_PROTOCONNECT</a>:</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a03e0f2a793bcf8e8fc57c441002fa193">CURLM_STATE_SENDPROTOCONNECT</a>:</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="url_8c.html#aa24dd517192957e12b59c39fc45f0851">Curl_protocol_getsock</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn, socks, numsocks);</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383ad2cd9b2df724837e4d4b56a816c07d63">CURLM_STATE_DO</a>:</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383af18e5b0f6ff92007187a5ac6f2494d40">CURLM_STATE_DOING</a>:</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="url_8c.html#a7b6ce3a9f85e357966f8897b3352bca6">Curl_doing_getsock</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn, socks, numsocks);</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a976dd1b43102af21a6df65c22fad7880">CURLM_STATE_WAITPROXYCONNECT</a>:</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordflow">return</span> waitproxyconnect_getsock(<a class="code" href="structdata.html">data</a>-&gt;easy_conn, socks, numsocks);</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383ae8e8f67293766e2144d816f52fe9e29c">CURLM_STATE_WAITCONNECT</a>:</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keywordflow">return</span> waitconnect_getsock(<a class="code" href="structdata.html">data</a>-&gt;easy_conn, socks, numsocks);</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a38e0891b78ed6418ac3509e87c7b02f4">CURLM_STATE_DO_MORE</a>:</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="keywordflow">return</span> domore_getsock(<a class="code" href="structdata.html">data</a>-&gt;easy_conn, socks, numsocks);</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a6cf481b8c9d796a9d0e1587fe6c2f24b">CURLM_STATE_DO_DONE</a>: <span class="comment">/* since is set after DO is completed, we switch</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="comment">                               to waiting for the same as the *PERFORM</span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="comment">                               states */</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383af9985742d6247a55f106eb2ae03f50a2">CURLM_STATE_PERFORM</a>:</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a0dd68b573d04e40a97d73ec43ffe6a47">CURLM_STATE_WAITPERFORM</a>:</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="transfer_8c.html#a672d018ece26cc8a8f2da835cc68122f">Curl_single_getsock</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn, socks, numsocks);</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  }</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;}</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;</div><div class="line"><a name="l00938"></a><span class="lineno"><a class="line" href="multi_8c.html#a5ebcf65dc21312fc068b95865b214538">  938</a></span>&#160;<a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> <a class="code" href="multi_8c.html#a5ebcf65dc21312fc068b95865b214538">curl_multi_fdset</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi,</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                           fd_set *read_fd_set, fd_set *write_fd_set,</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                           fd_set *exc_fd_set, <span class="keywordtype">int</span> *max_fd)</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;{</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  <span class="comment">/* Scan through all the easy handles to get the file descriptors set.</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="comment">     Some easy handles may not have connected to the remote host yet,</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="comment">     and then we must make sure that is done. */</span></div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="get_8d.html#a38b0ef81b65f2aee282c8c217a123176">data</a>;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <span class="keywordtype">int</span> this_max_fd = -1;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> sockbunch[<a class="code" href="multihandle_8h.html#a472aff39aba6058f1e7372319df882c0">MAX_SOCKSPEREASYHANDLE</a>];</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  (void)exc_fd_set; <span class="comment">/* not used */</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="multi_8c.html#ab6e53cbf757b0790ad040a27772544c4">GOOD_MULTI_HANDLE</a>(<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>))</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a8876b8ad10b9b2e9ee4cfb22034803ed">CURLM_BAD_HANDLE</a>;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#a598ce59e5d016aee984ab282d66ed2bf">in_callback</a>)</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a02622c2fbef0b11a76595bbfd8353c6a">CURLM_RECURSIVE_API_CALL</a>;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  <a class="code" href="structdata.html">data</a> = <a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#af45f45ebf8c94b7510d0571349786e75">easyp</a>;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="keywordflow">while</span>(<a class="code" href="structdata.html">data</a>) {</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="keywordtype">int</span> bitmap = multi_getsock(<a class="code" href="structdata.html">data</a>, sockbunch, <a class="code" href="multihandle_8h.html#a472aff39aba6058f1e7372319df882c0">MAX_SOCKSPEREASYHANDLE</a>);</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>&lt; <a class="code" href="multihandle_8h.html#a472aff39aba6058f1e7372319df882c0">MAX_SOCKSPEREASYHANDLE</a>; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++) {</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;      <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> s = <a class="code" href="curl_8h.html#ada0bbe252b7b370ef4e135b93b2fe71e">CURL_SOCKET_BAD</a>;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      <span class="keywordflow">if</span>((bitmap &amp; <a class="code" href="multiif_8h.html#a4ae1fb64a27264765b6a2fe5aca78830">GETSOCK_READSOCK</a>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>)) &amp;&amp; <a class="code" href="select_8h.html#a9bb60ecc6306dd3ddbf4d188f8ac22fc">VALID_SOCK</a>((sockbunch[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>]))) {</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        FD_SET(sockbunch[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>], read_fd_set);</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        s = sockbunch[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>];</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;      }</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      <span class="keywordflow">if</span>((bitmap &amp; <a class="code" href="multiif_8h.html#a9aabda59f0ff87c1db3a2d306a410713">GETSOCK_WRITESOCK</a>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>)) &amp;&amp; <a class="code" href="select_8h.html#a9bb60ecc6306dd3ddbf4d188f8ac22fc">VALID_SOCK</a>((sockbunch[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>]))) {</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        FD_SET(sockbunch[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>], write_fd_set);</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        s = sockbunch[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>];</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;      }</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;      <span class="keywordflow">if</span>(s == <a class="code" href="curl_8h.html#ada0bbe252b7b370ef4e135b93b2fe71e">CURL_SOCKET_BAD</a>)</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        <span class="comment">/* this socket is unused, break out of loop */</span></div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      <span class="keywordflow">if</span>((<span class="keywordtype">int</span>)s &gt; this_max_fd)</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        this_max_fd = (int)s;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    }</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <a class="code" href="structdata.html">data</a> = <a class="code" href="structdata.html">data</a>-&gt;next; <span class="comment">/* check next handle */</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  }</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  *max_fd = this_max_fd;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a>;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;}</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;</div><div class="line"><a name="l00987"></a><span class="lineno"><a class="line" href="multi_8c.html#a8b3a193abc8b11e84a153dd32ef768ba">  987</a></span>&#160;<span class="preprocessor">#define NUM_POLLS_ON_STACK 10</span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div><div class="line"><a name="l00989"></a><span class="lineno"><a class="line" href="multiif_8h.html#a421a331ce21de35d2fc05743a5061301">  989</a></span>&#160;<a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> <a class="code" href="multi_8c.html#a421a331ce21de35d2fc05743a5061301">Curl_multi_wait</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>,</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                          <span class="keyword">struct</span> <a class="code" href="structcurl__waitfd.html">curl_waitfd</a> extra_fds[],</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                          <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> extra_nfds,</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                          <span class="keywordtype">int</span> timeout_ms,</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                          <span class="keywordtype">int</span> *ret,</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                          <span class="keywordtype">bool</span> *gotsocket) <span class="comment">/* if any socket was checked */</span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;{</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="get_8d.html#a38b0ef81b65f2aee282c8c217a123176">data</a>;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> sockbunch[<a class="code" href="multihandle_8h.html#a472aff39aba6058f1e7372319df882c0">MAX_SOCKSPEREASYHANDLE</a>];</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <span class="keywordtype">int</span> bitmap;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nfds = 0;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> curlfds;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="keyword">struct </span><a class="code" href="structpollfd.html">pollfd</a> *ufds = NULL;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <span class="keywordtype">bool</span> ufds_malloc = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="keywordtype">long</span> timeout_internal;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="keywordtype">int</span> retcode = 0;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  <span class="keyword">struct </span><a class="code" href="structpollfd.html">pollfd</a> a_few_on_stack[<a class="code" href="multi_8c.html#a8b3a193abc8b11e84a153dd32ef768ba">NUM_POLLS_ON_STACK</a>];</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  <span class="keywordflow">if</span>(gotsocket)</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    *gotsocket = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="multi_8c.html#ab6e53cbf757b0790ad040a27772544c4">GOOD_MULTI_HANDLE</a>(multi))</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a8876b8ad10b9b2e9ee4cfb22034803ed">CURLM_BAD_HANDLE</a>;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="keywordflow">if</span>(multi-&gt;<a class="code" href="struct_curl__multi.html#a598ce59e5d016aee984ab282d66ed2bf">in_callback</a>)</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a02622c2fbef0b11a76595bbfd8353c6a">CURLM_RECURSIVE_API_CALL</a>;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="comment">/* Count up how many fds we have from the multi handle */</span></div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <a class="code" href="structdata.html">data</a> = multi-&gt;<a class="code" href="struct_curl__multi.html#af45f45ebf8c94b7510d0571349786e75">easyp</a>;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <span class="keywordflow">while</span>(<a class="code" href="structdata.html">data</a>) {</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    bitmap = multi_getsock(<a class="code" href="structdata.html">data</a>, sockbunch, <a class="code" href="multihandle_8h.html#a472aff39aba6058f1e7372319df882c0">MAX_SOCKSPEREASYHANDLE</a>);</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>&lt; <a class="code" href="multihandle_8h.html#a472aff39aba6058f1e7372319df882c0">MAX_SOCKSPEREASYHANDLE</a>; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++) {</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;      <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> s = <a class="code" href="curl_8h.html#ada0bbe252b7b370ef4e135b93b2fe71e">CURL_SOCKET_BAD</a>;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;      <span class="keywordflow">if</span>(bitmap &amp; <a class="code" href="multiif_8h.html#a4ae1fb64a27264765b6a2fe5aca78830">GETSOCK_READSOCK</a>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>)) {</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        ++nfds;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        s = sockbunch[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>];</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;      }</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      <span class="keywordflow">if</span>(bitmap &amp; <a class="code" href="multiif_8h.html#a9aabda59f0ff87c1db3a2d306a410713">GETSOCK_WRITESOCK</a>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>)) {</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        ++nfds;</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        s = sockbunch[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>];</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;      }</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      <span class="keywordflow">if</span>(s == <a class="code" href="curl_8h.html#ada0bbe252b7b370ef4e135b93b2fe71e">CURL_SOCKET_BAD</a>) {</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;      }</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    }</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <a class="code" href="structdata.html">data</a> = <a class="code" href="structdata.html">data</a>-&gt;next; <span class="comment">/* check next handle */</span></div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  }</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  <span class="comment">/* If the internally desired timeout is actually shorter than requested from</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="comment">     the outside, then use the shorter time! But only if the internal timer</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="comment">     is actually larger than -1! */</span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  (void)<a class="code" href="test_8h.html#a5a82db8b40f056c5cf54cd44691f7dce">multi_timeout</a>(multi, &amp;timeout_internal);</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <span class="keywordflow">if</span>((timeout_internal &gt;= 0) &amp;&amp; (timeout_internal &lt; (long)timeout_ms))</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    timeout_ms = (<span class="keywordtype">int</span>)timeout_internal;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  curlfds = nfds; <span class="comment">/* number of internal file descriptors */</span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  nfds += extra_nfds; <span class="comment">/* add the externally provided ones */</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <span class="keywordflow">if</span>(nfds) {</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <span class="keywordflow">if</span>(nfds &gt; <a class="code" href="multi_8c.html#a8b3a193abc8b11e84a153dd32ef768ba">NUM_POLLS_ON_STACK</a>) {</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <span class="comment">/* &#39;nfds&#39; is a 32 bit value and &#39;struct pollfd&#39; is typically 8 bytes</span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment">         big, so at 2^29 sockets this value might wrap. When a process gets</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="comment">         the capability to actually handle over 500 million sockets this</span></div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="comment">         calculation needs a integer overflow check. */</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      ufds = <a class="code" href="curl__memory_8h.html#a2eb0b03d1a9de9615a291b1205969069">malloc</a>(nfds * <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structpollfd.html">pollfd</a>));</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      <span class="keywordflow">if</span>(!ufds)</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a323be072bc47b2a7ff1d3fc4533e8f70">CURLM_OUT_OF_MEMORY</a>;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      ufds_malloc = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    }</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      ufds = &amp;a_few_on_stack[0];</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  }</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  nfds = 0;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="comment">/* only do the second loop if we found descriptors in the first stage run</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="comment">     above */</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  <span class="keywordflow">if</span>(curlfds) {</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="comment">/* Add the curl handles to our pollfds first */</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <a class="code" href="structdata.html">data</a> = multi-&gt;<a class="code" href="struct_curl__multi.html#af45f45ebf8c94b7510d0571349786e75">easyp</a>;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="keywordflow">while</span>(<a class="code" href="structdata.html">data</a>) {</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      bitmap = multi_getsock(<a class="code" href="structdata.html">data</a>, sockbunch, <a class="code" href="multihandle_8h.html#a472aff39aba6058f1e7372319df882c0">MAX_SOCKSPEREASYHANDLE</a>);</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      <span class="keywordflow">for</span>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>&lt; <a class="code" href="multihandle_8h.html#a472aff39aba6058f1e7372319df882c0">MAX_SOCKSPEREASYHANDLE</a>; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++) {</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> s = <a class="code" href="curl_8h.html#ada0bbe252b7b370ef4e135b93b2fe71e">CURL_SOCKET_BAD</a>;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        <span class="keywordflow">if</span>(bitmap &amp; <a class="code" href="multiif_8h.html#a4ae1fb64a27264765b6a2fe5aca78830">GETSOCK_READSOCK</a>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>)) {</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;          ufds[nfds].<a class="code" href="structpollfd.html#aafd0192880c9fdbcdc559b47c9fbb9b4">fd</a> = sockbunch[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>];</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;          ufds[nfds].<a class="code" href="structpollfd.html#ac9b2f2c5b1f9a7487eb57e67cd4960ef">events</a> = <a class="code" href="select_8h.html#a52ac479a805051f59643588b096024ff">POLLIN</a>;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;          ++nfds;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;          s = sockbunch[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>];</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        }</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        <span class="keywordflow">if</span>(bitmap &amp; <a class="code" href="multiif_8h.html#a9aabda59f0ff87c1db3a2d306a410713">GETSOCK_WRITESOCK</a>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>)) {</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;          ufds[nfds].<a class="code" href="structpollfd.html#aafd0192880c9fdbcdc559b47c9fbb9b4">fd</a> = sockbunch[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>];</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;          ufds[nfds].<a class="code" href="structpollfd.html#ac9b2f2c5b1f9a7487eb57e67cd4960ef">events</a> = <a class="code" href="select_8h.html#a91b3c67129ac7675062f316b840a0d58">POLLOUT</a>;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;          ++nfds;</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;          s = sockbunch[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>];</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        }</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;        <span class="keywordflow">if</span>(s == <a class="code" href="curl_8h.html#ada0bbe252b7b370ef4e135b93b2fe71e">CURL_SOCKET_BAD</a>) {</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        }</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      }</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      <a class="code" href="structdata.html">data</a> = <a class="code" href="structdata.html">data</a>-&gt;next; <span class="comment">/* check next handle */</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    }</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  }</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="comment">/* Add external file descriptions from poll-like struct curl_waitfd */</span></div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  <span class="keywordflow">for</span>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &lt; extra_nfds; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++) {</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    ufds[nfds].<a class="code" href="structpollfd.html#aafd0192880c9fdbcdc559b47c9fbb9b4">fd</a> = extra_fds[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].<a class="code" href="structcurl__waitfd.html#ae4712fac510d50249e1a430a3d160a17">fd</a>;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    ufds[nfds].<a class="code" href="structpollfd.html#ac9b2f2c5b1f9a7487eb57e67cd4960ef">events</a> = 0;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <span class="keywordflow">if</span>(extra_fds[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].<a class="code" href="structpollfd.html#ac9b2f2c5b1f9a7487eb57e67cd4960ef">events</a> &amp; <a class="code" href="multi_8h.html#a8060cb4533f16bcc994a9d432925d94e">CURL_WAIT_POLLIN</a>)</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;      ufds[nfds].<a class="code" href="structpollfd.html#ac9b2f2c5b1f9a7487eb57e67cd4960ef">events</a> |= <a class="code" href="select_8h.html#a52ac479a805051f59643588b096024ff">POLLIN</a>;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <span class="keywordflow">if</span>(extra_fds[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].<a class="code" href="structpollfd.html#ac9b2f2c5b1f9a7487eb57e67cd4960ef">events</a> &amp; <a class="code" href="multi_8h.html#a062174f5299cafe7e77cff172fbe38c1">CURL_WAIT_POLLPRI</a>)</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;      ufds[nfds].<a class="code" href="structpollfd.html#ac9b2f2c5b1f9a7487eb57e67cd4960ef">events</a> |= <a class="code" href="select_8h.html#ab6f53b89c7a4cc5e8349f7c778d85168">POLLPRI</a>;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="keywordflow">if</span>(extra_fds[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].<a class="code" href="structpollfd.html#ac9b2f2c5b1f9a7487eb57e67cd4960ef">events</a> &amp; <a class="code" href="multi_8h.html#ab807e242cd069d4496105fda9be157e6">CURL_WAIT_POLLOUT</a>)</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      ufds[nfds].<a class="code" href="structpollfd.html#ac9b2f2c5b1f9a7487eb57e67cd4960ef">events</a> |= <a class="code" href="select_8h.html#a91b3c67129ac7675062f316b840a0d58">POLLOUT</a>;</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    ++nfds;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  }</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <span class="keywordflow">if</span>(nfds) {</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="keywordtype">int</span> pollrc;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <span class="comment">/* wait... */</span></div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    pollrc = <a class="code" href="select_8c.html#ae71a741eee93be102e4bf9083953a8b2">Curl_poll</a>(ufds, nfds, timeout_ms);</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <span class="keywordflow">if</span>(pollrc &gt; 0) {</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;      retcode = pollrc;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;      <span class="comment">/* copy revents results from the poll to the curl_multi_wait poll</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment">         struct, the bit values of the actual underlying poll() implementation</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment">         may not be the same as the ones in the public libcurl API! */</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      <span class="keywordflow">for</span>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &lt; extra_nfds; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++) {</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> mask = 0;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        <span class="keywordtype">unsigned</span> r = ufds[curlfds + <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].<a class="code" href="structpollfd.html#aafb457d11cac415faf0e1e2b825118c2">revents</a>;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        <span class="keywordflow">if</span>(r &amp; <a class="code" href="select_8h.html#a52ac479a805051f59643588b096024ff">POLLIN</a>)</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;          mask |= <a class="code" href="multi_8h.html#a8060cb4533f16bcc994a9d432925d94e">CURL_WAIT_POLLIN</a>;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        <span class="keywordflow">if</span>(r &amp; <a class="code" href="select_8h.html#a91b3c67129ac7675062f316b840a0d58">POLLOUT</a>)</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;          mask |= <a class="code" href="multi_8h.html#ab807e242cd069d4496105fda9be157e6">CURL_WAIT_POLLOUT</a>;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        <span class="keywordflow">if</span>(r &amp; <a class="code" href="select_8h.html#ab6f53b89c7a4cc5e8349f7c778d85168">POLLPRI</a>)</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;          mask |= <a class="code" href="multi_8h.html#a062174f5299cafe7e77cff172fbe38c1">CURL_WAIT_POLLPRI</a>;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        extra_fds[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].<a class="code" href="structcurl__waitfd.html#a14e87b528f4a052ec65edbc14b6ab080">revents</a> = mask;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      }</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    }</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  }</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <span class="keywordflow">if</span>(ufds_malloc)</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <a class="code" href="curl__memory_8h.html#a9cc854374299a1dd933bf62029761768">free</a>(ufds);</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <span class="keywordflow">if</span>(ret)</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    *ret = retcode;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="keywordflow">if</span>(gotsocket &amp;&amp; (extra_fds || curlfds))</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <span class="comment">/* if any socket was checked */</span></div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    *gotsocket = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a>;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;}</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;</div><div class="line"><a name="l01150"></a><span class="lineno"><a class="line" href="multi_8c.html#a53ffedc463320ee92ec76226962563cd"> 1150</a></span>&#160;<a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> <a class="code" href="multi_8c.html#a53ffedc463320ee92ec76226962563cd">curl_multi_wait</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi,</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                          <span class="keyword">struct</span> <a class="code" href="structcurl__waitfd.html">curl_waitfd</a> extra_fds[],</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                          <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> extra_nfds,</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;                          <span class="keywordtype">int</span> timeout_ms,</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                          <span class="keywordtype">int</span> *ret)</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;{</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="multi_8c.html#a421a331ce21de35d2fc05743a5061301">Curl_multi_wait</a>(multi, extra_fds, extra_nfds, timeout_ms, ret, NULL);</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;}</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;<span class="comment"> * Curl_multi_connchanged() is called to tell that there is a connection in</span></div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="comment"> * this multi handle that has changed state (pipelining become possible, the</span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="comment"> * number of allowed streams changed or similar), and a subsequent use of this</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="comment"> * multi handle should move CONNECT_PEND handles back to CONNECT to have them</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="comment"> * retry.</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01165"></a><span class="lineno"><a class="line" href="multiif_8h.html#a72515384372577e4134d210261290c09"> 1165</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="multi_8c.html#a72515384372577e4134d210261290c09">Curl_multi_connchanged</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi)</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;{</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  multi-&gt;<a class="code" href="struct_curl__multi.html#a74e1561d41e7aaa283f2248b581d3716">recheckstate</a> = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;}</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="comment"> * multi_ischanged() is called</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;<span class="comment"> * Returns TRUE/FALSE whether the state is changed to trigger a CONNECT_PEND</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;<span class="comment"> * =&gt; CONNECT action.</span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;<span class="comment"> * Set &#39;clear&#39; to TRUE to have it also clear the state variable.</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> multi_ischanged(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi, <span class="keywordtype">bool</span> clear)</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;{</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <span class="keywordtype">bool</span> retval = multi-&gt;<a class="code" href="struct_curl__multi.html#a74e1561d41e7aaa283f2248b581d3716">recheckstate</a>;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <span class="keywordflow">if</span>(clear)</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    multi-&gt;<a class="code" href="struct_curl__multi.html#a74e1561d41e7aaa283f2248b581d3716">recheckstate</a> = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <span class="keywordflow">return</span> retval;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;}</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;</div><div class="line"><a name="l01186"></a><span class="lineno"><a class="line" href="multiif_8h.html#a20ed1fa1c4fc98dd0a9dbf5b84e020dc"> 1186</a></span>&#160;<a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> <a class="code" href="multi_8c.html#a20ed1fa1c4fc98dd0a9dbf5b84e020dc">Curl_multi_add_perform</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi,</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                                 <span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>,</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                                 <span class="keyword">struct</span> <a class="code" href="structconnectdata.html">connectdata</a> *conn)</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;{</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  <span class="keywordflow">if</span>(multi-&gt;<a class="code" href="struct_curl__multi.html#a598ce59e5d016aee984ab282d66ed2bf">in_callback</a>)</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a02622c2fbef0b11a76595bbfd8353c6a">CURLM_RECURSIVE_API_CALL</a>;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8c.html#a7b85e4aa84035e36ffe7c1f51fdbd2b3">curl_multi_add_handle</a>(multi, <a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>) {</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_single_request.html">SingleRequest</a> *k = &amp;<a class="code" href="structdata.html">data</a>-&gt;req;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <span class="comment">/* pass in NULL for &#39;conn&#39; here since we don&#39;t want to init the</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="comment">       connection, only this transfer */</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <a class="code" href="url_8c.html#a84d25069eedf327bfd18e9960e8976c5">Curl_init_do</a>(<a class="code" href="structdata.html">data</a>, NULL);</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <span class="comment">/* take this handle to the perform state right away */</span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383af9985742d6247a55f106eb2ae03f50a2">CURLM_STATE_PERFORM</a>);</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;easy_conn = conn;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a> |= <a class="code" href="urldata_8h.html#ab141b3290dad267f76cd77a91c641146">KEEP_RECV</a>; <span class="comment">/* setup to receive! */</span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  }</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;}</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="keyword">static</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> multi_reconnect_request(<span class="keyword">struct</span> <a class="code" href="structconnectdata.html">connectdata</a> **connp)</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;{</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;  <span class="keyword">struct </span><a class="code" href="structconnectdata.html">connectdata</a> *conn = *connp;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a> = conn-&gt;<a class="code" href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">data</a>;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <span class="comment">/* This was a re-use of a connection and we got a write error in the</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;<span class="comment">   * DO-phase. Then we DISCONNECT this connection and have another attempt to</span></div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;<span class="comment">   * CONNECT and then DO again! The retry cannot possibly find another</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;<span class="comment">   * connection to re-use, since we only keep one possible connection for</span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="comment">   * each.  */</span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Re-used connection seems dead, get a new one\n&quot;</span>);</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  <a class="code" href="connect_8h.html#a0f98be540dd5a5f56c9ec98dc2489661">connclose</a>(conn, <span class="stringliteral">&quot;Reconnect dead connection&quot;</span>); <span class="comment">/* enforce close */</span></div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = multi_done(&amp;conn, <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>, <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>); <span class="comment">/* we are so done with this */</span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  <span class="comment">/* conn may no longer be a good pointer, clear it to avoid mistakes by</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;<span class="comment">     parent functions */</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  *connp = NULL;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;<span class="comment">   * We need to check for CURLE_SEND_ERROR here as well. This could happen</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;<span class="comment">   * when the request failed on a FTP connection and thus multi_done() itself</span></div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;<span class="comment">   * tried to use the connection (again).</span></div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> || (<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a9e0c77963cb42831dba8d5ee1840e80b">CURLE_SEND_ERROR</a> == <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)) {</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="unit1620_8c.html#a3a33462ee2a725f19a5b920fff903e3f">async</a>;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <span class="keywordtype">bool</span> protocol_done = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <span class="comment">/* Now, redo the connect and get a new connection */</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="url_8c.html#aed7fbd02067820a27a7c58162e3b7812">Curl_connect</a>(<a class="code" href="structdata.html">data</a>, connp, &amp;<a class="code" href="unit1620_8c.html#a3a33462ee2a725f19a5b920fff903e3f">async</a>, &amp;protocol_done);</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;      <span class="comment">/* We have connected or sent away a name resolve query fine */</span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      conn = *connp; <span class="comment">/* setup conn to again point to something nice */</span></div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="unit1620_8c.html#a3a33462ee2a725f19a5b920fff903e3f">async</a>) {</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        <span class="comment">/* Now, if async is TRUE here, we need to wait for the name</span></div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="comment">           to resolve */</span></div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="asyn_8h.html#ad14e13eb0e765d0d2b825ae8d0ad7c00">Curl_resolver_wait_resolv</a>(conn, NULL);</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        <span class="comment">/* Resolved, continue with the connection */</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="hostip_8c.html#a9114f6a0239d0c123cc523c1e37b9c20">Curl_once_resolved</a>(conn, &amp;protocol_done);</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;      }</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    }</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  }</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;}</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;<span class="comment"> * do_complete is called when the DO actions are complete.</span></div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;<span class="comment"> * We init chunking and trailer bits to their default values here immediately</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="comment"> * before receiving any header data for the current request in the pipeline.</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> do_complete(<span class="keyword">struct</span> <a class="code" href="structconnectdata.html">connectdata</a> *conn)</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;{</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  conn-&gt;<a class="code" href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">data</a>-&gt;<a class="code" href="struct_curl__easy.html#a8a13221afd448ab0b91f021b4f5ec7c7">req</a>.<a class="code" href="struct_single_request.html#a3018293fe5f120a8a4c77d16207ab5da">chunk</a> = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  conn-&gt;<a class="code" href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">data</a>-&gt;<a class="code" href="struct_curl__easy.html#a8a13221afd448ab0b91f021b4f5ec7c7">req</a>.<a class="code" href="struct_single_request.html#a52752c225d845162b5426ce3d49d57c5">maxfd</a> = (conn-&gt;<a class="code" href="structconnectdata.html#adbc9021ab6a2581b41035b181d27a1ea">sockfd</a>&gt;conn-&gt;<a class="code" href="structconnectdata.html#a73d6d39e7554e4d764099ab3f1181a40">writesockfd</a>?</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                           conn-&gt;<a class="code" href="structconnectdata.html#adbc9021ab6a2581b41035b181d27a1ea">sockfd</a>:conn-&gt;<a class="code" href="structconnectdata.html#a73d6d39e7554e4d764099ab3f1181a40">writesockfd</a>) + 1;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  <a class="code" href="progress_8c.html#a1344967836d86ae13b5739ed0a6e6916">Curl_pgrsTime</a>(conn-&gt;<a class="code" href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">data</a>, <a class="code" href="progress_8h.html#abc090d144fb55d31dff488d24c46fb2aaab6241ac2eec69ddfb082bb472ca56a7">TIMER_PRETRANSFER</a>);</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;}</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;<span class="keyword">static</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> multi_do(<span class="keyword">struct</span> <a class="code" href="structconnectdata.html">connectdata</a> **connp, <span class="keywordtype">bool</span> *done)</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;{</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  <span class="keyword">struct </span><a class="code" href="structconnectdata.html">connectdata</a> *conn = *connp;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a> = conn-&gt;<a class="code" href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">data</a>;</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a89ffb2a3dbd9c5b06dbbad69b7ef9697">do_it</a>) {</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="comment">/* generic protocol-specific function pointer set in curl_connect() */</span></div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a89ffb2a3dbd9c5b06dbbad69b7ef9697">do_it</a>(conn, done);</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <span class="comment">/* This was formerly done in transfer.c, but we better do it here */</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    <span class="keywordflow">if</span>((<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a9e0c77963cb42831dba8d5ee1840e80b">CURLE_SEND_ERROR</a> == <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) &amp;&amp; conn-&gt;<a class="code" href="structconnectdata.html#a9312f162d29fe7f59bc2b5dbeda85d9d">bits</a>.<a class="code" href="struct_connect_bits.html#a40c9341dbcd23241fd1b75054cf050a2">reuse</a>) {</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;<span class="comment">       * If the connection is using an easy handle, call reconnect</span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;<span class="comment">       * to re-establish the connection.  Otherwise, let the multi logic</span></div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;<span class="comment">       * figure out how to re-establish the connection.</span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;      <span class="keywordflow">if</span>(!<a class="code" href="structdata.html">data</a>-&gt;multi) {</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = multi_reconnect_request(connp);</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;          <span class="comment">/* ... finally back to actually retry the DO phase */</span></div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;          conn = *connp; <span class="comment">/* re-assign conn since multi_reconnect_request</span></div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="comment">                            creates a new connection */</span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;          <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a89ffb2a3dbd9c5b06dbbad69b7ef9697">do_it</a>(conn, done);</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        }</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      }</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    }</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> &amp;&amp; *done)</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      <span class="comment">/* do_complete must be called after the protocol-specific DO function */</span></div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      do_complete(conn);</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  }</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;}</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;<span class="comment"> * multi_do_more() is called during the DO_MORE multi state. It is basically a</span></div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;<span class="comment"> * second stage DO state which (wrongly) was introduced to support FTP&#39;s</span></div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;<span class="comment"> * second connection.</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;<span class="comment"> * TODO: A future libcurl should be able to work away this state.</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;<span class="comment"> * &#39;complete&#39; can return 0 for incomplete, 1 for done and -1 for go back to</span></div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="comment"> * DOING state there&#39;s more work to do!</span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;<span class="keyword">static</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> multi_do_more(<span class="keyword">struct</span> <a class="code" href="structconnectdata.html">connectdata</a> *conn, <span class="keywordtype">int</span> *complete)</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;{</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  *complete = 0;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#af93eecce6f47a96ce7712169a77da247">do_more</a>)</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#af93eecce6f47a96ce7712169a77da247">do_more</a>(conn, complete);</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> &amp;&amp; (*complete == 1))</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="comment">/* do_complete must be called after the protocol-specific DO function */</span></div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    do_complete(conn);</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;}</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;<span class="keyword">static</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> multi_runsingle(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>,</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;                                 <span class="keyword">struct</span> <a class="code" href="structcurltime.html">curltime</a> <a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>,</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                                 <span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>)</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;{</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__message.html">Curl_message</a> *msg = NULL;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  <span class="keywordtype">bool</span> connected;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="unit1620_8c.html#a3a33462ee2a725f19a5b920fff903e3f">async</a>;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="unit1620_8c.html#a27dfc2de90f4d6b8857bb6f991318463">protocol_connect</a> = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  <span class="keywordtype">bool</span> dophase_done = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  <span class="keywordtype">bool</span> done = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>;</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_single_request.html">SingleRequest</a> *k;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;  time_t timeout_ms;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  time_t recv_timeout_ms;</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;  <a class="code" href="timeval_8h.html#aeb19832fd3e7f11c8d047d6824300e87">timediff_t</a> send_timeout_ms;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  <span class="keywordtype">int</span> control;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="urldata_8h.html#a1107f8f3c79ed6d630958c8363ee37da">GOOD_EASY_HANDLE</a>(<a class="code" href="structdata.html">data</a>))</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3af6c791401114f6d764dbb8209838ba31">CURLM_BAD_EASY_HANDLE</a>;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <span class="comment">/* A &quot;stream&quot; here is a logical stream if the protocol can handle that</span></div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<span class="comment">       (HTTP/2), or the full connection for older protocols */</span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <span class="keywordtype">bool</span> stream_error = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a>;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="structdata.html">data</a>-&gt;easy_conn &amp;&amp;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;       <a class="code" href="structdata.html">data</a>-&gt;mstate &gt; <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a690ed7a251acfdba578c219baf9942ec">CURLM_STATE_CONNECT</a> &amp;&amp;</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;       <a class="code" href="structdata.html">data</a>-&gt;mstate &lt; <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a2ee595f45796a08c5f15a53e1a19a249">CURLM_STATE_DONE</a>) {</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;      <span class="comment">/* In all these states, the code will blindly access &#39;data-&gt;easy_conn&#39;</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;<span class="comment">         so this is precaution that it isn&#39;t NULL. And it silences static</span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;<span class="comment">         analyzers. */</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;      <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;In state %d with no easy_conn, bail out!\n&quot;</span>, <a class="code" href="structdata.html">data</a>-&gt;mstate);</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a53d037bdcf6900341e9f83efbf14b1d1">CURLM_INTERNAL_ERROR</a>;</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    }</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    <span class="keywordflow">if</span>(multi_ischanged(multi, <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>)) {</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;      <a class="code" href="curl__setup__once_8h.html#a805079d1643f348afa725659b45b6f87">DEBUGF</a>(<a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;multi changed, check CONNECT_PEND queue!\n&quot;</span>));</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;      process_pending_handles(multi); <span class="comment">/* pipelined/multiplexed */</span></div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    }</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn &amp;&amp; <a class="code" href="structdata.html">data</a>-&gt;mstate &gt; <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a690ed7a251acfdba578c219baf9942ec">CURLM_STATE_CONNECT</a> &amp;&amp;</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;       <a class="code" href="structdata.html">data</a>-&gt;mstate &lt; <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a9c82cd8d2874a9b075dcac72b9e50800">CURLM_STATE_COMPLETED</a>) {</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;      <span class="comment">/* Make sure we set the connection&#39;s current owner */</span></div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;      <a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;data = <a class="code" href="get_8d.html#a38b0ef81b65f2aee282c8c217a123176">data</a>;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    }</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn &amp;&amp;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;       (<a class="code" href="structdata.html">data</a>-&gt;mstate &gt;= <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a690ed7a251acfdba578c219baf9942ec">CURLM_STATE_CONNECT</a>) &amp;&amp;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;       (<a class="code" href="structdata.html">data</a>-&gt;mstate &lt; <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a9c82cd8d2874a9b075dcac72b9e50800">CURLM_STATE_COMPLETED</a>)) {</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;      <span class="comment">/* we need to wait for the connect state as only then is the start time</span></div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;<span class="comment">         stored, but we must not check already completed handles */</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;      timeout_ms = <a class="code" href="connect_8c.html#aed32c0fb99c80a40c097c98a3eb03c74">Curl_timeleft</a>(<a class="code" href="structdata.html">data</a>, &amp;<a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>,</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;                                 (<a class="code" href="structdata.html">data</a>-&gt;mstate &lt;= <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a6b795acff4967731f9a7b74e07f8b90e">CURLM_STATE_WAITDO</a>)?</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;                                 <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>:<a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;      <span class="keywordflow">if</span>(timeout_ms &lt; 0) {</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;        <span class="comment">/* Handle timed out */</span></div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;mstate == <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a7c2aa7448cf01c0e395ec38a4afe9569">CURLM_STATE_WAITRESOLVE</a>)</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;          <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Resolving timed out after %ld milliseconds&quot;</span>,</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;                <a class="code" href="timeval_8c.html#a93ce3158c8838916ed817489c98e37c4">Curl_timediff</a>(<a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>, <a class="code" href="structdata.html">data</a>-&gt;progress.t_startsingle));</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;mstate == <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383ae8e8f67293766e2144d816f52fe9e29c">CURLM_STATE_WAITCONNECT</a>)</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;          <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Connection timed out after %ld milliseconds&quot;</span>,</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;                <a class="code" href="timeval_8c.html#a93ce3158c8838916ed817489c98e37c4">Curl_timediff</a>(<a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>, <a class="code" href="structdata.html">data</a>-&gt;progress.t_startsingle));</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;          k = &amp;<a class="code" href="structdata.html">data</a>-&gt;req;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;          <span class="keywordflow">if</span>(k-&gt;<a class="code" href="struct_single_request.html#a7b830d1607062193706245f7f4512ac9">size</a> != -1) {</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;            <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Operation timed out after %ld milliseconds with %&quot;</span></div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;                  <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a3dca40ce1e998420175eabe37246e05b">CURL_FORMAT_CURL_OFF_T</a> <span class="stringliteral">&quot; out of %&quot;</span></div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;                  <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a3dca40ce1e998420175eabe37246e05b">CURL_FORMAT_CURL_OFF_T</a> <span class="stringliteral">&quot; bytes received&quot;</span>,</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;                  <a class="code" href="timeval_8c.html#a93ce3158c8838916ed817489c98e37c4">Curl_timediff</a>(<a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>, <a class="code" href="structdata.html">data</a>-&gt;progress.t_startsingle),</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;                  k-&gt;<a class="code" href="struct_single_request.html#a7bd7f9afc35050a31e496a08c5baaeb8">bytecount</a>, k-&gt;<a class="code" href="struct_single_request.html#a7b830d1607062193706245f7f4512ac9">size</a>);</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;          }</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;          <span class="keywordflow">else</span> {</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;            <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Operation timed out after %ld milliseconds with %&quot;</span></div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;                  <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a3dca40ce1e998420175eabe37246e05b">CURL_FORMAT_CURL_OFF_T</a> <span class="stringliteral">&quot; bytes received&quot;</span>,</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;                  <a class="code" href="timeval_8c.html#a93ce3158c8838916ed817489c98e37c4">Curl_timediff</a>(<a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>, <a class="code" href="structdata.html">data</a>-&gt;progress.t_startsingle),</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                  k-&gt;<a class="code" href="struct_single_request.html#a7bd7f9afc35050a31e496a08c5baaeb8">bytecount</a>);</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;          }</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;        }</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        <span class="comment">/* Force connection closed if the connection has indeed been used */</span></div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;mstate &gt; <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383ad2cd9b2df724837e4d4b56a816c07d63">CURLM_STATE_DO</a>) {</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;          <a class="code" href="connect_8h.html#a39c490691a02b6643d80882c12b189ed">streamclose</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn, <span class="stringliteral">&quot;Disconnected with pending data&quot;</span>);</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;          stream_error = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;        }</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951aaa7a948caaac0addf8754794663f48b1">CURLE_OPERATION_TIMEDOUT</a>;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;        (void)multi_done(&amp;<a class="code" href="structdata.html">data</a>-&gt;easy_conn, <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>, <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;        <span class="comment">/* Skip the statemachine and go directly to error handling section. */</span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;        <span class="keywordflow">goto</span> statemachine_end;</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;      }</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    }</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <span class="keywordflow">switch</span>(<a class="code" href="structdata.html">data</a>-&gt;mstate) {</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383abc1cafd6933c18c5d876af92a46942cb">CURLM_STATE_INIT</a>:</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;      <span class="comment">/* init this transfer. */</span></div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="transfer_8c.html#a0dae98156f3b0dc5f703d4d19d15c137">Curl_pretransfer</a>(<a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;      <span class="keywordflow">if</span>(!<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        <span class="comment">/* after init, go CONNECT */</span></div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a690ed7a251acfdba578c219baf9942ec">CURLM_STATE_CONNECT</a>);</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        <a class="code" href="progress_8c.html#a1344967836d86ae13b5739ed0a6e6916">Curl_pgrsTime</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="progress_8h.html#abc090d144fb55d31dff488d24c46fb2aa13b6bf8a9d4e4202e74d244e61bd6b8b">TIMER_STARTOP</a>);</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a>;</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;      }</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383acd3890b70496f93a1fa8179ccde1e235">CURLM_STATE_CONNECT_PEND</a>:</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;      <span class="comment">/* We will stay here until there is a connection available. Then</span></div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;<span class="comment">         we try again in the CURLM_STATE_CONNECT state. */</span></div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a690ed7a251acfdba578c219baf9942ec">CURLM_STATE_CONNECT</a>:</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;      <span class="comment">/* Connect. We want to get a connection identifier filled in. */</span></div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;      <a class="code" href="progress_8c.html#a1344967836d86ae13b5739ed0a6e6916">Curl_pgrsTime</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="progress_8h.html#abc090d144fb55d31dff488d24c46fb2aab81949995b4f4e4a021f6c79c29f5829">TIMER_STARTSINGLE</a>);</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="url_8c.html#aed7fbd02067820a27a7c58162e3b7812">Curl_connect</a>(<a class="code" href="structdata.html">data</a>, &amp;<a class="code" href="structdata.html">data</a>-&gt;easy_conn,</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;                            &amp;<a class="code" href="unit1620_8c.html#a3a33462ee2a725f19a5b920fff903e3f">async</a>, &amp;<a class="code" href="unit1620_8c.html#a27dfc2de90f4d6b8857bb6f991318463">protocol_connect</a>);</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951aeaaa9c51dc850e9dd9b052c4aa32b782">CURLE_NO_CONNECTION_AVAILABLE</a> == <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;        <span class="comment">/* There was no connection available. We will go to the pending</span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;<span class="comment">           state and wait for an available connection. */</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;        <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383acd3890b70496f93a1fa8179ccde1e235">CURLM_STATE_CONNECT_PEND</a>);</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;        <span class="comment">/* add this handle to the list of connect-pending handles */</span></div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;        <a class="code" href="llist_8c.html#a9fb691307db5bfd5d29315b96b56ad2b">Curl_llist_insert_next</a>(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#a27e434e78227c62c5107dc06754d2585">pending</a>, multi-&gt;<a class="code" href="struct_curl__multi.html#a27e434e78227c62c5107dc06754d2585">pending</a>.<a class="code" href="structcurl__llist.html#a04c1d20c09bc187d0eb71fbaf463a4b7">tail</a>, <a class="code" href="structdata.html">data</a>,</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;                               &amp;<a class="code" href="structdata.html">data</a>-&gt;connect_queue);</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;      }</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;      <span class="keywordflow">if</span>(!<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;        <span class="comment">/* Add this handle to the send or pend pipeline */</span></div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="pipeline_8c.html#ab23909b29ad0155f43bcf875f130ae8b">Curl_add_handle_to_pipeline</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="structdata.html">data</a>-&gt;easy_conn);</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;          stream_error = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;          <span class="keywordflow">if</span>(<a class="code" href="unit1620_8c.html#a3a33462ee2a725f19a5b920fff903e3f">async</a>)</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;            <span class="comment">/* We&#39;re now waiting for an asynchronous name lookup */</span></div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;            <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a7c2aa7448cf01c0e395ec38a4afe9569">CURLM_STATE_WAITRESOLVE</a>);</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;          <span class="keywordflow">else</span> {</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;            <span class="comment">/* after the connect has been sent off, go WAITCONNECT unless the</span></div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;<span class="comment">               protocol connect is already done and we can go directly to</span></div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;<span class="comment">               WAITDO or DO! */</span></div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;            <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a>;</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="unit1620_8c.html#a27dfc2de90f4d6b8857bb6f991318463">protocol_connect</a>)</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;              <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multi_8c.html#aa21e52a95b57b1ce52a02736bb0ca68c">Curl_pipeline_wanted</a>(multi, <a class="code" href="multi_8h.html#a19006903930bc7552c4e74ed6b32990f">CURLPIPE_HTTP1</a>)?</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;                         <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a6b795acff4967731f9a7b74e07f8b90e">CURLM_STATE_WAITDO</a>:<a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383ad2cd9b2df724837e4d4b56a816c07d63">CURLM_STATE_DO</a>);</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;<span class="preprocessor">#ifndef CURL_DISABLE_HTTP</span></div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;              <span class="keywordflow">if</span>(<a class="code" href="http__proxy_8c.html#a64cc706da81f4e2a504fc457b79542e2">Curl_connect_ongoing</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn))</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;                <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a976dd1b43102af21a6df65c22fad7880">CURLM_STATE_WAITPROXYCONNECT</a>);</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;              <span class="keywordflow">else</span></div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;                <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383ae8e8f67293766e2144d816f52fe9e29c">CURLM_STATE_WAITCONNECT</a>);</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;            }</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;          }</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;        }</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;      }</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a7c2aa7448cf01c0e395ec38a4afe9569">CURLM_STATE_WAITRESOLVE</a>:</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;      <span class="comment">/* awaiting an asynch name resolve to complete */</span></div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    {</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;      <span class="keyword">struct </span><a class="code" href="struct_curl__dns__entry.html">Curl_dns_entry</a> *dns = NULL;</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;      <span class="keyword">struct </span><a class="code" href="structconnectdata.html">connectdata</a> *conn = <a class="code" href="structdata.html">data</a>-&gt;easy_conn;</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="noproxy_8d.html#a76bbcca5c6576b1086f83570943ed989">hostname</a>;</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;      <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#a9312f162d29fe7f59bc2b5dbeda85d9d">bits</a>.<a class="code" href="struct_connect_bits.html#a7a7b20d08be448324d83ed41df90adfb">httpproxy</a>)</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;        <a class="code" href="structhostname.html">hostname</a> = conn-&gt;<a class="code" href="structconnectdata.html#a4df63a4042ad767671bb3bfd74aa68fc">http_proxy</a>.<a class="code" href="structproxy__info.html#ae2cc9c2eb5c4ea0c4b92bf067e391bdc">host</a>.<a class="code" href="structhostname.html#a9c9ce90bfcab1734f9376c6539d92cdd">name</a>;</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#a9312f162d29fe7f59bc2b5dbeda85d9d">bits</a>.<a class="code" href="struct_connect_bits.html#ae55bdf35c39d2f5556e9ea5576b9b92e">conn_to_host</a>)</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;        <a class="code" href="structhostname.html">hostname</a> = conn-&gt;<a class="code" href="structconnectdata.html#aaf06c7a3f4e682976ea7c3fc86273aa6">conn_to_host</a>.<a class="code" href="structhostname.html#a9c9ce90bfcab1734f9376c6539d92cdd">name</a>;</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;        <a class="code" href="structhostname.html">hostname</a> = conn-&gt;<a class="code" href="structconnectdata.html#a91d94af5dfef86510940d658476b61cf">host</a>.<a class="code" href="structhostname.html#a9c9ce90bfcab1734f9376c6539d92cdd">name</a>;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;      <span class="comment">/* check if we have the name resolved by now */</span></div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;      dns = <a class="code" href="hostip_8c.html#a34d32d704f4d0ac5b0eed2ced2c88fba">Curl_fetch_addr</a>(conn, <a class="code" href="structhostname.html">hostname</a>, (<span class="keywordtype">int</span>)conn-&gt;<a class="code" href="structconnectdata.html#ac9d24fcd15a4c660fa7b6fbf55f6451d">port</a>);</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;      <span class="keywordflow">if</span>(dns) {</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;<span class="preprocessor">#ifdef CURLRES_ASYNCH</span></div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;        conn-&gt;<a class="code" href="structconnectdata.html#a81b59f48e7176a865c7459ce844c45dd">async</a>.<a class="code" href="struct_curl__async.html#ad332b101ad0d9229113ca378e7909f29">dns</a> = dns;</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;        conn-&gt;<a class="code" href="structconnectdata.html#a81b59f48e7176a865c7459ce844c45dd">async</a>.<a class="code" href="struct_curl__async.html#a8e945db1e4a4c9cc6d47d8952e1fa23b">done</a> = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;        <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Hostname &#39;%s&#39; was found in DNS cache\n&quot;</span>, <a class="code" href="structhostname.html">hostname</a>);</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;      }</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;      <span class="keywordflow">if</span>(!dns)</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="hostip_8c.html#ae1886f5ce5b1a160f27efdddb130d33e">Curl_resolv_check</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn, &amp;dns);</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;      <span class="comment">/* Update sockets here, because the socket(s) may have been</span></div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;<span class="comment">         closed and the application thus needs to be told, even if it</span></div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;<span class="comment">         is likely that the same socket(s) will again be used further</span></div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;<span class="comment">         down.  If the name has not yet been resolved, it is likely</span></div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;<span class="comment">         that new sockets have been opened in an attempt to contact</span></div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;<span class="comment">         another resolver. */</span></div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;      singlesocket(multi, <a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;      <span class="keywordflow">if</span>(dns) {</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        <span class="comment">/* Perform the next step in the connection phase, and then move on</span></div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;<span class="comment">           to the WAITCONNECT state */</span></div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="hostip_8c.html#a9114f6a0239d0c123cc523c1e37b9c20">Curl_once_resolved</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn, &amp;<a class="code" href="unit1620_8c.html#a27dfc2de90f4d6b8857bb6f991318463">protocol_connect</a>);</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;          <span class="comment">/* if Curl_once_resolved() returns failure, the connection struct</span></div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;<span class="comment">             is already freed and gone */</span></div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;          <a class="code" href="structdata.html">data</a>-&gt;easy_conn = NULL;           <span class="comment">/* no more connection */</span></div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;          <span class="comment">/* call again please so that we get the next socket setup */</span></div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;          <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a>;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;          <span class="keywordflow">if</span>(<a class="code" href="unit1620_8c.html#a27dfc2de90f4d6b8857bb6f991318463">protocol_connect</a>)</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;            <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multi_8c.html#aa21e52a95b57b1ce52a02736bb0ca68c">Curl_pipeline_wanted</a>(multi, <a class="code" href="multi_8h.html#a19006903930bc7552c4e74ed6b32990f">CURLPIPE_HTTP1</a>)?</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;                       <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a6b795acff4967731f9a7b74e07f8b90e">CURLM_STATE_WAITDO</a>:<a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383ad2cd9b2df724837e4d4b56a816c07d63">CURLM_STATE_DO</a>);</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;          <span class="keywordflow">else</span> {</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;<span class="preprocessor">#ifndef CURL_DISABLE_HTTP</span></div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="http__proxy_8c.html#a64cc706da81f4e2a504fc457b79542e2">Curl_connect_ongoing</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn))</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;              <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a976dd1b43102af21a6df65c22fad7880">CURLM_STATE_WAITPROXYCONNECT</a>);</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;              <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383ae8e8f67293766e2144d816f52fe9e29c">CURLM_STATE_WAITCONNECT</a>);</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;          }</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;        }</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;      }</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;        <span class="comment">/* failure detected */</span></div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        stream_error = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;      }</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    }</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;<span class="preprocessor">#ifndef CURL_DISABLE_HTTP</span></div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a976dd1b43102af21a6df65c22fad7880">CURLM_STATE_WAITPROXYCONNECT</a>:</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;      <span class="comment">/* this is HTTP-specific, but sending CONNECT to a proxy is HTTP... */</span></div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="http_8c.html#aa380bd70f94bb31fc19b879223427e44">Curl_http_connect</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn, &amp;<a class="code" href="unit1620_8c.html#a27dfc2de90f4d6b8857bb6f991318463">protocol_connect</a>);</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;bits.proxy_connect_closed) {</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a>;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;        <span class="comment">/* connect back to proxy again */</span></div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        multi_done(&amp;<a class="code" href="structdata.html">data</a>-&gt;easy_conn, <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>, <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a690ed7a251acfdba578c219baf9942ec">CURLM_STATE_CONNECT</a>);</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;      }</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;        <span class="keywordflow">if</span>((<a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;http_proxy.proxytype != <a class="code" href="curl_8h.html#a8ebcd4e614f222aca6352ad5052634f8ae118261fbb43ab332f00f65574d08ec9">CURLPROXY_HTTPS</a> ||</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;           <a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;bits.proxy_ssl_connected[<a class="code" href="urldata_8h.html#a56b23efdd8d04b0179b52224a251bcb7">FIRSTSOCKET</a>]) &amp;&amp;</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;           <a class="code" href="http__proxy_8c.html#aefbaf7cf98e512186d12b98156355df7">Curl_connect_complete</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn)) {</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;          <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a>;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;          <span class="comment">/* initiate protocol connect phase */</span></div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;          <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a03e0f2a793bcf8e8fc57c441002fa193">CURLM_STATE_SENDPROTOCONNECT</a>);</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        }</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;      }</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        stream_error = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383ae8e8f67293766e2144d816f52fe9e29c">CURLM_STATE_WAITCONNECT</a>:</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;      <span class="comment">/* awaiting a completion of an asynch TCP connect */</span></div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="connect_8c.html#a347cba516188d3bc3c6efc14dc3780d7">Curl_is_connected</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn, <a class="code" href="urldata_8h.html#a56b23efdd8d04b0179b52224a251bcb7">FIRSTSOCKET</a>, &amp;connected);</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;      <span class="keywordflow">if</span>(connected &amp;&amp; !<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;<span class="preprocessor">#ifndef CURL_DISABLE_HTTP</span></div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;        <span class="keywordflow">if</span>((<a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;http_proxy.proxytype == <a class="code" href="curl_8h.html#a8ebcd4e614f222aca6352ad5052634f8ae118261fbb43ab332f00f65574d08ec9">CURLPROXY_HTTPS</a> &amp;&amp;</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;            !<a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;bits.proxy_ssl_connected[<a class="code" href="urldata_8h.html#a56b23efdd8d04b0179b52224a251bcb7">FIRSTSOCKET</a>]) ||</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;           <a class="code" href="http__proxy_8c.html#a64cc706da81f4e2a504fc457b79542e2">Curl_connect_ongoing</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn)) {</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;          <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a976dd1b43102af21a6df65c22fad7880">CURLM_STATE_WAITPROXYCONNECT</a>);</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        }</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a>;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;bits.tunnel_proxy?</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;                   <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a976dd1b43102af21a6df65c22fad7880">CURLM_STATE_WAITPROXYCONNECT</a>:</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;                   <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a03e0f2a793bcf8e8fc57c441002fa193">CURLM_STATE_SENDPROTOCONNECT</a>);</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;      }</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        <span class="comment">/* failure detected */</span></div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        <span class="comment">/* Just break, the cleaning up is handled all in one place */</span></div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        stream_error = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;      }</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a03e0f2a793bcf8e8fc57c441002fa193">CURLM_STATE_SENDPROTOCONNECT</a>:</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="url_8c.html#a3201ad08770f97349774c201c3c624cd">Curl_protocol_connect</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn, &amp;<a class="code" href="unit1620_8c.html#a27dfc2de90f4d6b8857bb6f991318463">protocol_connect</a>);</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;      <span class="keywordflow">if</span>(!<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> &amp;&amp; !<a class="code" href="unit1620_8c.html#a27dfc2de90f4d6b8857bb6f991318463">protocol_connect</a>)</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        <span class="comment">/* switch to waiting state */</span></div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383aaf4414c8ecb8141d248267f79ef02801">CURLM_STATE_PROTOCONNECT</a>);</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;        <span class="comment">/* protocol connect has completed, go WAITDO or DO */</span></div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;        <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multi_8c.html#aa21e52a95b57b1ce52a02736bb0ca68c">Curl_pipeline_wanted</a>(multi, <a class="code" href="multi_8h.html#a19006903930bc7552c4e74ed6b32990f">CURLPIPE_HTTP1</a>)?</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;                   <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a6b795acff4967731f9a7b74e07f8b90e">CURLM_STATE_WAITDO</a>:<a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383ad2cd9b2df724837e4d4b56a816c07d63">CURLM_STATE_DO</a>);</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a>;</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;      }</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;        <span class="comment">/* failure detected */</span></div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;        <a class="code" href="transfer_8c.html#a6afc3b6e11b658604fb00a32646c2f15">Curl_posttransfer</a>(<a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        multi_done(&amp;<a class="code" href="structdata.html">data</a>-&gt;easy_conn, <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>, <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;        stream_error = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;      }</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383aaf4414c8ecb8141d248267f79ef02801">CURLM_STATE_PROTOCONNECT</a>:</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;      <span class="comment">/* protocol-specific connect phase */</span></div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="url_8c.html#ab33224c0b40950d8ca21b816b234db3e">Curl_protocol_connecting</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn, &amp;<a class="code" href="unit1620_8c.html#a27dfc2de90f4d6b8857bb6f991318463">protocol_connect</a>);</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;      <span class="keywordflow">if</span>(!<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> &amp;&amp; <a class="code" href="unit1620_8c.html#a27dfc2de90f4d6b8857bb6f991318463">protocol_connect</a>) {</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;        <span class="comment">/* after the connect has completed, go WAITDO or DO */</span></div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;        <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multi_8c.html#aa21e52a95b57b1ce52a02736bb0ca68c">Curl_pipeline_wanted</a>(multi, <a class="code" href="multi_8h.html#a19006903930bc7552c4e74ed6b32990f">CURLPIPE_HTTP1</a>)?</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;                   <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a6b795acff4967731f9a7b74e07f8b90e">CURLM_STATE_WAITDO</a>:<a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383ad2cd9b2df724837e4d4b56a816c07d63">CURLM_STATE_DO</a>);</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a>;</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;      }</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;        <span class="comment">/* failure detected */</span></div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;        <a class="code" href="transfer_8c.html#a6afc3b6e11b658604fb00a32646c2f15">Curl_posttransfer</a>(<a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;        multi_done(&amp;<a class="code" href="structdata.html">data</a>-&gt;easy_conn, <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>, <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;        stream_error = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;      }</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a6b795acff4967731f9a7b74e07f8b90e">CURLM_STATE_WAITDO</a>:</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;      <span class="comment">/* Wait for our turn to DO when we&#39;re pipelining requests */</span></div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="pipeline_8c.html#a13a501076e959eb34bd46c9ce7db91f3">Curl_pipeline_checkget_write</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="structdata.html">data</a>-&gt;easy_conn)) {</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;        <span class="comment">/* Grabbed the channel */</span></div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;        <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383ad2cd9b2df724837e4d4b56a816c07d63">CURLM_STATE_DO</a>);</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a>;</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;      }</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383ad2cd9b2df724837e4d4b56a816c07d63">CURLM_STATE_DO</a>:</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;set.connect_only) {</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;        <span class="comment">/* keep connection open for application to use the socket */</span></div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;        <a class="code" href="connect_8h.html#acdca2a91749c4f2ca1805e482bad0f90">connkeep</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn, <span class="stringliteral">&quot;CONNECT_ONLY&quot;</span>);</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;        <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a2ee595f45796a08c5f15a53e1a19a249">CURLM_STATE_DONE</a>);</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a>;</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;      }</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;        <span class="comment">/* Perform the protocol&#39;s DO action */</span></div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = multi_do(&amp;<a class="code" href="structdata.html">data</a>-&gt;easy_conn, &amp;dophase_done);</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;        <span class="comment">/* When multi_do() returns failure, data-&gt;easy_conn might be NULL! */</span></div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;          <span class="keywordflow">if</span>(!dophase_done) {</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;            <span class="comment">/* some steps needed for wildcard matching */</span></div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;state.wildcardmatch) {</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;              <span class="keyword">struct </span><a class="code" href="struct_wildcard_data.html">WildcardData</a> *wc = &amp;<a class="code" href="structdata.html">data</a>-&gt;wildcard;</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;              <span class="keywordflow">if</span>(wc-&gt;<a class="code" href="struct_wildcard_data.html#aa312ae53f66b4fe3f10c3701c67abecf">state</a> == <a class="code" href="wildcard_8h.html#ab4724474e988ca4793d666e449cd2b0aaf7b19e6541139da47849ca1761694d28">CURLWC_DONE</a> || wc-&gt;<a class="code" href="struct_wildcard_data.html#aa312ae53f66b4fe3f10c3701c67abecf">state</a> == <a class="code" href="wildcard_8h.html#ab4724474e988ca4793d666e449cd2b0aa3b20ef4cea470a653b7d611a040b1354">CURLWC_SKIP</a>) {</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;                <span class="comment">/* skip some states if it is important */</span></div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;                multi_done(&amp;<a class="code" href="structdata.html">data</a>-&gt;easy_conn, <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>, <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;                <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a2ee595f45796a08c5f15a53e1a19a249">CURLM_STATE_DONE</a>);</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;                <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a>;</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;              }</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;            }</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;            <span class="comment">/* DO was not completed in one function call, we must continue</span></div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;<span class="comment">               DOING... */</span></div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;            <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383af18e5b0f6ff92007187a5ac6f2494d40">CURLM_STATE_DOING</a>);</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;            <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a>;</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;          }</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;          <span class="comment">/* after DO, go DO_DONE... or DO_MORE */</span></div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;bits.do_more) {</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;            <span class="comment">/* we&#39;re supposed to do more, but we need to sit down, relax</span></div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;<span class="comment">               and wait a little while first */</span></div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;            <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a38e0891b78ed6418ac3509e87c7b02f4">CURLM_STATE_DO_MORE</a>);</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;            <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a>;</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;          }</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;          <span class="keywordflow">else</span> {</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;            <span class="comment">/* we&#39;re done with the DO, now DO_DONE */</span></div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;            <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a6cf481b8c9d796a9d0e1587fe6c2f24b">CURLM_STATE_DO_DONE</a>);</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;            <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a>;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;          }</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;        }</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a9e0c77963cb42831dba8d5ee1840e80b">CURLE_SEND_ERROR</a> == <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) &amp;&amp;</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;                <a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;bits.reuse) {</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;          <span class="comment">/*</span></div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;<span class="comment">           * In this situation, a connection that we were trying to use</span></div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;<span class="comment">           * may have unexpectedly died.  If possible, send the connection</span></div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;<span class="comment">           * back to the CONNECT phase so we can try again.</span></div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;<span class="comment">           */</span></div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;          <span class="keywordtype">char</span> *newurl = NULL;</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;          <a class="code" href="transfer_8h.html#a5d8d8c391641700d5c2f715193e27963">followtype</a> follow = <a class="code" href="transfer_8h.html#a5d8d8c391641700d5c2f715193e27963ab387c536c13d6435a4696a19fc865c5c">FOLLOW_NONE</a>;</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;          <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> drc;</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;          drc = <a class="code" href="transfer_8c.html#a6315105ff113a2067916488c9cce4905">Curl_retry_request</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn, &amp;newurl);</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;          <span class="keywordflow">if</span>(drc) {</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;            <span class="comment">/* a failure here pretty much implies an out of memory */</span></div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;            <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = drc;</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;            stream_error = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;          }</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;          <a class="code" href="transfer_8c.html#a6afc3b6e11b658604fb00a32646c2f15">Curl_posttransfer</a>(<a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;          drc = multi_done(&amp;<a class="code" href="structdata.html">data</a>-&gt;easy_conn, <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>, <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;          <span class="comment">/* When set to retry the connection, we must to go back to</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;<span class="comment">           * the CONNECT state */</span></div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;          <span class="keywordflow">if</span>(newurl) {</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;            <span class="keywordflow">if</span>(!drc || (drc == <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a9e0c77963cb42831dba8d5ee1840e80b">CURLE_SEND_ERROR</a>)) {</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;              follow = <a class="code" href="transfer_8h.html#a5d8d8c391641700d5c2f715193e27963ad2816ee7aaf9704289116c93e1d694a8">FOLLOW_RETRY</a>;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;              drc = <a class="code" href="transfer_8c.html#a96a72bb80c85af1210d7fc49244920e9">Curl_follow</a>(<a class="code" href="structdata.html">data</a>, newurl, follow);</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;              <span class="keywordflow">if</span>(!drc) {</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;                <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a690ed7a251acfdba578c219baf9942ec">CURLM_STATE_CONNECT</a>);</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;                <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a>;</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;                <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;              }</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;              <span class="keywordflow">else</span> {</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;                <span class="comment">/* Follow failed */</span></div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;                <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = drc;</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;              }</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;            }</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;            <span class="keywordflow">else</span> {</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;              <span class="comment">/* done didn&#39;t return OK or SEND_ERROR */</span></div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;              <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = drc;</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;            }</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;          }</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;          <span class="keywordflow">else</span> {</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;            <span class="comment">/* Have error handler disconnect conn if we can&#39;t retry */</span></div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;            stream_error = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;          }</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;          <a class="code" href="curl__memory_8h.html#a9cc854374299a1dd933bf62029761768">free</a>(newurl);</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;        }</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;          <span class="comment">/* failure detected */</span></div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;          <a class="code" href="transfer_8c.html#a6afc3b6e11b658604fb00a32646c2f15">Curl_posttransfer</a>(<a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;          <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn)</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;            multi_done(&amp;<a class="code" href="structdata.html">data</a>-&gt;easy_conn, <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>, <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;          stream_error = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;        }</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;      }</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383af18e5b0f6ff92007187a5ac6f2494d40">CURLM_STATE_DOING</a>:</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;      <span class="comment">/* we continue DOING until the DO phase is complete */</span></div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="url_8c.html#a1e380c49a2d40ac41909687588a5738b">Curl_protocol_doing</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn,</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;                                   &amp;dophase_done);</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;      <span class="keywordflow">if</span>(!<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;        <span class="keywordflow">if</span>(dophase_done) {</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;          <span class="comment">/* after DO, go DO_DONE or DO_MORE */</span></div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;          <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;bits.do_more?</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;                     <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a38e0891b78ed6418ac3509e87c7b02f4">CURLM_STATE_DO_MORE</a>:</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;                     <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a6cf481b8c9d796a9d0e1587fe6c2f24b">CURLM_STATE_DO_DONE</a>);</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;          <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a>;</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        } <span class="comment">/* dophase_done */</span></div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;      }</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        <span class="comment">/* failure detected */</span></div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;        <a class="code" href="transfer_8c.html#a6afc3b6e11b658604fb00a32646c2f15">Curl_posttransfer</a>(<a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;        multi_done(&amp;<a class="code" href="structdata.html">data</a>-&gt;easy_conn, <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>, <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;        stream_error = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;      }</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a38e0891b78ed6418ac3509e87c7b02f4">CURLM_STATE_DO_MORE</a>:</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;<span class="comment">       * When we are connected, DO MORE and then go DO_DONE</span></div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = multi_do_more(<a class="code" href="structdata.html">data</a>-&gt;easy_conn, &amp;control);</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;      <span class="comment">/* No need to remove this handle from the send pipeline here since that</span></div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;<span class="comment">         is done in multi_done() */</span></div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;      <span class="keywordflow">if</span>(!<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;        <span class="keywordflow">if</span>(control) {</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;          <span class="comment">/* if positive, advance to DO_DONE</span></div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;<span class="comment">             if negative, go back to DOING */</span></div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;          <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, control == 1?</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;                     <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a6cf481b8c9d796a9d0e1587fe6c2f24b">CURLM_STATE_DO_DONE</a>:</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;                     <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383af18e5b0f6ff92007187a5ac6f2494d40">CURLM_STATE_DOING</a>);</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;          <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a>;</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;        }</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;          <span class="comment">/* stay in DO_MORE */</span></div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;          <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a>;</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;      }</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;        <span class="comment">/* failure detected */</span></div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;        <a class="code" href="transfer_8c.html#a6afc3b6e11b658604fb00a32646c2f15">Curl_posttransfer</a>(<a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;        multi_done(&amp;<a class="code" href="structdata.html">data</a>-&gt;easy_conn, <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>, <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;        stream_error = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;      }</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a6cf481b8c9d796a9d0e1587fe6c2f24b">CURLM_STATE_DO_DONE</a>:</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;      <span class="comment">/* Move ourselves from the send to recv pipeline */</span></div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;      <a class="code" href="pipeline_8c.html#aabb5729d6ec2031085441fab48097e71">Curl_move_handle_from_send_to_recv_pipe</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="structdata.html">data</a>-&gt;easy_conn);</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;bits.multiplex || <a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;send_pipe.size)</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        <span class="comment">/* Check if we can move pending requests to send pipe */</span></div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;        process_pending_handles(multi); <span class="comment">/*  pipelined/multiplexed */</span></div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;      <span class="comment">/* Only perform the transfer if there&#39;s a good socket to work with.</span></div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;<span class="comment">         Having both BAD is a signal to skip immediately to DONE */</span></div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;      <span class="keywordflow">if</span>((<a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;sockfd != <a class="code" href="curl_8h.html#ada0bbe252b7b370ef4e135b93b2fe71e">CURL_SOCKET_BAD</a>) ||</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;         (<a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;writesockfd != <a class="code" href="curl_8h.html#ada0bbe252b7b370ef4e135b93b2fe71e">CURL_SOCKET_BAD</a>))</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a0dd68b573d04e40a97d73ec43ffe6a47">CURLM_STATE_WAITPERFORM</a>);</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;state.wildcardmatch &amp;&amp;</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;           ((<a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;handler-&gt;flags &amp; <a class="code" href="urldata_8h.html#a766105b6448011146b33df92f55d2261">PROTOPT_WILDCARD</a>) == 0)) {</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;           <a class="code" href="structdata.html">data</a>-&gt;wildcard.state = <a class="code" href="wildcard_8h.html#ab4724474e988ca4793d666e449cd2b0aaf7b19e6541139da47849ca1761694d28">CURLWC_DONE</a>;</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;        }</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;        <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a2ee595f45796a08c5f15a53e1a19a249">CURLM_STATE_DONE</a>);</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;      }</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;      <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a>;</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a0dd68b573d04e40a97d73ec43ffe6a47">CURLM_STATE_WAITPERFORM</a>:</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;      <span class="comment">/* Wait for our turn to PERFORM */</span></div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="pipeline_8c.html#a9d8c64ba40d549fd26ec51a21b8a613a">Curl_pipeline_checkget_read</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="structdata.html">data</a>-&gt;easy_conn)) {</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        <span class="comment">/* Grabbed the channel */</span></div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;        <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383af9985742d6247a55f106eb2ae03f50a2">CURLM_STATE_PERFORM</a>);</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a>;</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;      }</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383ad02f91c2d7df2d24690b43e095193787">CURLM_STATE_TOOFAST</a>: <span class="comment">/* limit-rate exceeded in either direction */</span></div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;      <span class="comment">/* if both rates are within spec, resume transfer */</span></div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="progress_8c.html#a40686d443707afea0c0e47cee805df01">Curl_pgrsUpdate</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn))</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a309ade641c94c3e710ae887405dba78b">CURLE_ABORTED_BY_CALLBACK</a>;</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="speedcheck_8c.html#a9bb3788a8c28461af0215fc47308d36c">Curl_speedcheck</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>);</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;      <span class="keywordflow">if</span>(!<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;        send_timeout_ms = 0;</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;set.max_send_speed &gt; 0)</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;          send_timeout_ms =</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;            <a class="code" href="progress_8c.html#a00a3a19b8aa449c308923825c7380f13">Curl_pgrsLimitWaitTime</a>(<a class="code" href="structdata.html">data</a>-&gt;progress.uploaded,</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;                                   <a class="code" href="structdata.html">data</a>-&gt;progress.ul_limit_size,</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;                                   <a class="code" href="structdata.html">data</a>-&gt;set.max_send_speed,</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;                                   <a class="code" href="structdata.html">data</a>-&gt;progress.ul_limit_start,</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;                                   <a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>);</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;        recv_timeout_ms = 0;</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;set.max_recv_speed &gt; 0)</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;          recv_timeout_ms =</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;            <a class="code" href="progress_8c.html#a00a3a19b8aa449c308923825c7380f13">Curl_pgrsLimitWaitTime</a>(<a class="code" href="structdata.html">data</a>-&gt;progress.downloaded,</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;                                   <a class="code" href="structdata.html">data</a>-&gt;progress.dl_limit_size,</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;                                   <a class="code" href="structdata.html">data</a>-&gt;set.max_recv_speed,</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;                                   <a class="code" href="structdata.html">data</a>-&gt;progress.dl_limit_start,</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;                                   <a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>);</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;        <span class="keywordflow">if</span>(!send_timeout_ms &amp;&amp; !recv_timeout_ms) {</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;          <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383af9985742d6247a55f106eb2ae03f50a2">CURLM_STATE_PERFORM</a>);</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;          <a class="code" href="progress_8c.html#a9003c983a024c16cf5893a62b8b34b9d">Curl_ratelimit</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>);</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;        }</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(send_timeout_ms &gt;= recv_timeout_ms)</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;          <a class="code" href="multi_8c.html#a759a3f675165554a5f5d6e784afa7fe0">Curl_expire</a>(<a class="code" href="structdata.html">data</a>, send_timeout_ms, <a class="code" href="urldata_8h.html#aabb7db968656c3ee0555ea3d8784310dad4a31effbc92f6cf950c46a756257d3e">EXPIRE_TOOFAST</a>);</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;          <a class="code" href="multi_8c.html#a759a3f675165554a5f5d6e784afa7fe0">Curl_expire</a>(<a class="code" href="structdata.html">data</a>, recv_timeout_ms, <a class="code" href="urldata_8h.html#aabb7db968656c3ee0555ea3d8784310dad4a31effbc92f6cf950c46a756257d3e">EXPIRE_TOOFAST</a>);</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;      }</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383af9985742d6247a55f106eb2ae03f50a2">CURLM_STATE_PERFORM</a>:</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    {</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;      <span class="keywordtype">char</span> *newurl = NULL;</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;      <span class="keywordtype">bool</span> retry = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;      <span class="keywordtype">bool</span> comeback = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;      <span class="comment">/* check if over send speed */</span></div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;      send_timeout_ms = 0;</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;set.max_send_speed &gt; 0)</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;        send_timeout_ms = <a class="code" href="progress_8c.html#a00a3a19b8aa449c308923825c7380f13">Curl_pgrsLimitWaitTime</a>(<a class="code" href="structdata.html">data</a>-&gt;progress.uploaded,</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;                                                 <a class="code" href="structdata.html">data</a>-&gt;progress.ul_limit_size,</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;                                                 <a class="code" href="structdata.html">data</a>-&gt;set.max_send_speed,</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;                                                 <a class="code" href="structdata.html">data</a>-&gt;progress.ul_limit_start,</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;                                                 <a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>);</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;      <span class="comment">/* check if over recv speed */</span></div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;      recv_timeout_ms = 0;</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;set.max_recv_speed &gt; 0)</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;        recv_timeout_ms = <a class="code" href="progress_8c.html#a00a3a19b8aa449c308923825c7380f13">Curl_pgrsLimitWaitTime</a>(<a class="code" href="structdata.html">data</a>-&gt;progress.downloaded,</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;                                                 <a class="code" href="structdata.html">data</a>-&gt;progress.dl_limit_size,</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;                                                 <a class="code" href="structdata.html">data</a>-&gt;set.max_recv_speed,</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;                                                 <a class="code" href="structdata.html">data</a>-&gt;progress.dl_limit_start,</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;                                                 <a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>);</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;      <span class="keywordflow">if</span>(send_timeout_ms || recv_timeout_ms) {</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;        <a class="code" href="progress_8c.html#a9003c983a024c16cf5893a62b8b34b9d">Curl_ratelimit</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>);</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;        <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383ad02f91c2d7df2d24690b43e095193787">CURLM_STATE_TOOFAST</a>);</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;        <span class="keywordflow">if</span>(send_timeout_ms &gt;= recv_timeout_ms)</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;          <a class="code" href="multi_8c.html#a759a3f675165554a5f5d6e784afa7fe0">Curl_expire</a>(<a class="code" href="structdata.html">data</a>, send_timeout_ms, <a class="code" href="urldata_8h.html#aabb7db968656c3ee0555ea3d8784310dad4a31effbc92f6cf950c46a756257d3e">EXPIRE_TOOFAST</a>);</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;          <a class="code" href="multi_8c.html#a759a3f675165554a5f5d6e784afa7fe0">Curl_expire</a>(<a class="code" href="structdata.html">data</a>, recv_timeout_ms, <a class="code" href="urldata_8h.html#aabb7db968656c3ee0555ea3d8784310dad4a31effbc92f6cf950c46a756257d3e">EXPIRE_TOOFAST</a>);</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;      }</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;      <span class="comment">/* read/write data if it is ready to do so */</span></div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="transfer_8c.html#ac06679494870ed2a702de92759b06c7d">Curl_readwrite</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn, <a class="code" href="structdata.html">data</a>, &amp;done, &amp;comeback);</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;      k = &amp;<a class="code" href="structdata.html">data</a>-&gt;req;</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;      <span class="keywordflow">if</span>(!(k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a> &amp; <a class="code" href="urldata_8h.html#ab141b3290dad267f76cd77a91c641146">KEEP_RECV</a>))</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;        <span class="comment">/* We&#39;re done receiving */</span></div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;        <a class="code" href="pipeline_8c.html#aae772b189eab516240a6727d5b75db7b">Curl_pipeline_leave_read</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn);</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;      <span class="keywordflow">if</span>(!(k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a> &amp; <a class="code" href="urldata_8h.html#a93237a6ee2f27182bb966487a03bce44">KEEP_SEND</a>))</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;        <span class="comment">/* We&#39;re done sending */</span></div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;        <a class="code" href="pipeline_8c.html#a2f59dc911931337300b0b3db60936f12">Curl_pipeline_leave_write</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn);</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;      <span class="keywordflow">if</span>(done || (<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> == <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951ae6d701fdcc9728db65dadb0ec7d1eec1">CURLE_RECV_ERROR</a>)) {</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;        <span class="comment">/* If CURLE_RECV_ERROR happens early enough, we assume it was a race</span></div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;<span class="comment">         * condition and the server closed the re-used connection exactly when</span></div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;<span class="comment">         * we wanted to use it, so figure out if that is indeed the case.</span></div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;        <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> ret = <a class="code" href="transfer_8c.html#a6315105ff113a2067916488c9cce4905">Curl_retry_request</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn, &amp;newurl);</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;        <span class="keywordflow">if</span>(!ret)</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;          retry = (newurl)?<a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>:<a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;          <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = ret;</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;        <span class="keywordflow">if</span>(retry) {</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;          <span class="comment">/* if we are to retry, set the result to OK and consider the</span></div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;<span class="comment">             request as done */</span></div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;          <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;          done = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;        }</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;      }</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>((<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a3fc9cf5326ee71f9c205ebfd42f221f9">CURLE_HTTP2_STREAM</a> == <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) &amp;&amp;</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;                <a class="code" href="http2_8h.html#a5bc470e00220b08aad997d4f56a15948">Curl_h2_http_1_1_error</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn)) {</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;        <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> ret = <a class="code" href="transfer_8c.html#a6315105ff113a2067916488c9cce4905">Curl_retry_request</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn, &amp;newurl);</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;        <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Forcing HTTP/1.1 for NTLM&quot;</span>);</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;        <a class="code" href="structdata.html">data</a>-&gt;set.httpversion = <a class="code" href="curl_8h.html#abc5c98fcc1211af2b80116dd6e0a035da2bdca7ce6479378784212fee3a068c74">CURL_HTTP_VERSION_1_1</a>;</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;        <span class="keywordflow">if</span>(!ret)</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;          retry = (newurl)?<a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>:<a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;          <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = ret;</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;        <span class="keywordflow">if</span>(retry) {</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;          <span class="comment">/* if we are to retry, set the result to OK and consider the</span></div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;<span class="comment">             request as done */</span></div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;          <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;          done = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;        }</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;      }</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;<span class="comment">         * The transfer phase returned error, we mark the connection to get</span></div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;<span class="comment">         * closed to prevent being re-used. This is because we can&#39;t possibly</span></div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;<span class="comment">         * know if the connection is in a good shape or not now.  Unless it is</span></div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;<span class="comment">         * a protocol which uses two &quot;channels&quot; like FTP, as then the error</span></div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;<span class="comment">         * happened in the data connection.</span></div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;        <span class="keywordflow">if</span>(!(<a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;handler-&gt;flags &amp; <a class="code" href="urldata_8h.html#a703cdbe3f849aab3b41d2122f0d126f1">PROTOPT_DUAL</a>) &amp;&amp;</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;           <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> != <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a3fc9cf5326ee71f9c205ebfd42f221f9">CURLE_HTTP2_STREAM</a>)</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;          <a class="code" href="connect_8h.html#a39c490691a02b6643d80882c12b189ed">streamclose</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn, <span class="stringliteral">&quot;Transfer returned error&quot;</span>);</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;        <a class="code" href="transfer_8c.html#a6afc3b6e11b658604fb00a32646c2f15">Curl_posttransfer</a>(<a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;        multi_done(&amp;<a class="code" href="structdata.html">data</a>-&gt;easy_conn, <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>, <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;      }</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(done) {</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;        <a class="code" href="transfer_8h.html#a5d8d8c391641700d5c2f715193e27963">followtype</a> follow = <a class="code" href="transfer_8h.html#a5d8d8c391641700d5c2f715193e27963ab387c536c13d6435a4696a19fc865c5c">FOLLOW_NONE</a>;</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;        <span class="comment">/* call this even if the readwrite function returned error */</span></div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;        <a class="code" href="transfer_8c.html#a6afc3b6e11b658604fb00a32646c2f15">Curl_posttransfer</a>(<a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;        <span class="comment">/* we&#39;re no longer receiving */</span></div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;        <a class="code" href="url_8c.html#ab7f9231aaae49536ceb7c7ea5431f6de">Curl_removeHandleFromPipeline</a>(<a class="code" href="structdata.html">data</a>, &amp;<a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;recv_pipe);</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;        <span class="comment">/* expire the new receiving pipeline head */</span></div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;recv_pipe.head)</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;          <a class="code" href="multi_8c.html#a759a3f675165554a5f5d6e784afa7fe0">Curl_expire</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;recv_pipe.head-&gt;ptr, 0, <a class="code" href="urldata_8h.html#aabb7db968656c3ee0555ea3d8784310da325bcbe2ebf7e3de886d9af307372ca4">EXPIRE_RUN_NOW</a>);</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;        <span class="comment">/* When we follow redirects or is set to retry the connection, we must</span></div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;<span class="comment">           to go back to the CONNECT state */</span></div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;req.newurl || retry) {</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;          <span class="keywordflow">if</span>(!retry) {</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;            <span class="comment">/* if the URL is a follow-location and not just a retried request</span></div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;<span class="comment">               then figure out the URL here */</span></div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;            <a class="code" href="curl__memory_8h.html#a9cc854374299a1dd933bf62029761768">free</a>(newurl);</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;            newurl = <a class="code" href="structdata.html">data</a>-&gt;req.newurl;</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;            <a class="code" href="structdata.html">data</a>-&gt;req.newurl = NULL;</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;            follow = <a class="code" href="transfer_8h.html#a5d8d8c391641700d5c2f715193e27963a88a3c59ee1a6490b85dc50d0568e2603">FOLLOW_REDIR</a>;</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;          }</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;            follow = <a class="code" href="transfer_8h.html#a5d8d8c391641700d5c2f715193e27963ad2816ee7aaf9704289116c93e1d694a8">FOLLOW_RETRY</a>;</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;          <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = multi_done(&amp;<a class="code" href="structdata.html">data</a>-&gt;easy_conn, <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>, <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;          <span class="keywordflow">if</span>(!<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;            <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="transfer_8c.html#a96a72bb80c85af1210d7fc49244920e9">Curl_follow</a>(<a class="code" href="structdata.html">data</a>, newurl, follow);</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;            <span class="keywordflow">if</span>(!<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;              <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a690ed7a251acfdba578c219baf9942ec">CURLM_STATE_CONNECT</a>);</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;              <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a>;</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;            }</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;          }</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;          <a class="code" href="curl__memory_8h.html#a9cc854374299a1dd933bf62029761768">free</a>(newurl);</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;        }</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;        <span class="keywordflow">else</span> {</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;          <span class="comment">/* after the transfer is done, go DONE */</span></div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;          <span class="comment">/* but first check to see if we got a location info even though we&#39;re</span></div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;<span class="comment">             not following redirects */</span></div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;          <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;req.location) {</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;            <a class="code" href="curl__memory_8h.html#a9cc854374299a1dd933bf62029761768">free</a>(newurl);</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;            newurl = <a class="code" href="structdata.html">data</a>-&gt;req.location;</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;            <a class="code" href="structdata.html">data</a>-&gt;req.location = NULL;</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;            <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="transfer_8c.html#a96a72bb80c85af1210d7fc49244920e9">Curl_follow</a>(<a class="code" href="structdata.html">data</a>, newurl, <a class="code" href="transfer_8h.html#a5d8d8c391641700d5c2f715193e27963a0d049e79236e49899f5aff3e0b46bed6">FOLLOW_FAKE</a>);</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;            <a class="code" href="curl__memory_8h.html#a9cc854374299a1dd933bf62029761768">free</a>(newurl);</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;              stream_error = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;              <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = multi_done(&amp;<a class="code" href="structdata.html">data</a>-&gt;easy_conn, <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>, <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;            }</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;          }</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;          <span class="keywordflow">if</span>(!<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;            <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a2ee595f45796a08c5f15a53e1a19a249">CURLM_STATE_DONE</a>);</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;            <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a>;</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;          }</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;        }</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;      }</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(comeback)</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a>;</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;    }</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a2ee595f45796a08c5f15a53e1a19a249">CURLM_STATE_DONE</a>:</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;      <span class="comment">/* this state is highly transient, so run another loop after this */</span></div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;      <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a>;</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn) {</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;        <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> res;</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;        <span class="comment">/* Remove ourselves from the receive pipeline, if we are there. */</span></div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;        <a class="code" href="url_8c.html#ab7f9231aaae49536ceb7c7ea5431f6de">Curl_removeHandleFromPipeline</a>(<a class="code" href="structdata.html">data</a>, &amp;<a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;recv_pipe);</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;bits.multiplex || <a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;send_pipe.size)</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;          <span class="comment">/* Check if we can move pending requests to connection */</span></div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;          process_pending_handles(multi); <span class="comment">/* pipelined/multiplexing */</span></div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;        <span class="comment">/* post-transfer command */</span></div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;        res = multi_done(&amp;<a class="code" href="structdata.html">data</a>-&gt;easy_conn, <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>, <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;        <span class="comment">/* allow a previously set error code take precedence */</span></div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;          <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = res;</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;<span class="comment">         * If there are other handles on the pipeline, multi_done won&#39;t set</span></div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;<span class="comment">         * easy_conn to NULL.  In such a case, curl_multi_remove_handle() can</span></div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;<span class="comment">         * access free&#39;d data, if the connection is free&#39;d and the handle</span></div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;<span class="comment">         * removed before we perform the processing in CURLM_STATE_COMPLETED</span></div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn)</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;          <a class="code" href="structdata.html">data</a>-&gt;easy_conn = NULL;</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;      }</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;state.wildcardmatch) {</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;wildcard.state != <a class="code" href="wildcard_8h.html#ab4724474e988ca4793d666e449cd2b0aaf7b19e6541139da47849ca1761694d28">CURLWC_DONE</a>) {</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;          <span class="comment">/* if a wildcard is set and we are not ending -&gt; lets start again</span></div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;<span class="comment">             with CURLM_STATE_INIT */</span></div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;          <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383abc1cafd6933c18c5d876af92a46942cb">CURLM_STATE_INIT</a>);</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;        }</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;      }</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;      <span class="comment">/* after we have DONE what we&#39;re supposed to do, go COMPLETED, and</span></div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;<span class="comment">         it doesn&#39;t matter what the multi_done() returned! */</span></div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;      <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a9c82cd8d2874a9b075dcac72b9e50800">CURLM_STATE_COMPLETED</a>);</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a9c82cd8d2874a9b075dcac72b9e50800">CURLM_STATE_COMPLETED</a>:</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a5e6dec1bb80d819e0697aea452174cc4">CURLM_STATE_MSGSENT</a>:</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;      <a class="code" href="structdata.html">data</a>-&gt;result = <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a>; <span class="comment">/* do nothing */</span></div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a53d037bdcf6900341e9f83efbf14b1d1">CURLM_INTERNAL_ERROR</a>;</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    }</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    statemachine_end:</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;mstate &lt; <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a9c82cd8d2874a9b075dcac72b9e50800">CURLM_STATE_COMPLETED</a>) {</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;<span class="comment">         * If an error was returned, and we aren&#39;t in completed state now,</span></div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;<span class="comment">         * then we go to completed and consider this transfer aborted.</span></div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;        <span class="comment">/* NOTE: no attempt to disconnect connections must be made</span></div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;<span class="comment">           in the case blocks above - cleanup happens only here */</span></div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;        <span class="comment">/* Check if we can move pending requests to send pipe */</span></div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;        process_pending_handles(multi); <span class="comment">/* connection */</span></div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn) {</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;          <span class="comment">/* if this has a connection, unsubscribe from the pipelines */</span></div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;          <a class="code" href="pipeline_8c.html#a2f59dc911931337300b0b3db60936f12">Curl_pipeline_leave_write</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn);</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;          <a class="code" href="pipeline_8c.html#aae772b189eab516240a6727d5b75db7b">Curl_pipeline_leave_read</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn);</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;          <a class="code" href="url_8c.html#ab7f9231aaae49536ceb7c7ea5431f6de">Curl_removeHandleFromPipeline</a>(<a class="code" href="structdata.html">data</a>, &amp;<a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;send_pipe);</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;          <a class="code" href="url_8c.html#ab7f9231aaae49536ceb7c7ea5431f6de">Curl_removeHandleFromPipeline</a>(<a class="code" href="structdata.html">data</a>, &amp;<a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;recv_pipe);</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;          <span class="keywordflow">if</span>(stream_error) {</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;            <span class="comment">/* Don&#39;t attempt to send data over a connection that timed out */</span></div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;            <span class="keywordtype">bool</span> dead_connection = <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> == <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951aaa7a948caaac0addf8754794663f48b1">CURLE_OPERATION_TIMEDOUT</a>;</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;            <span class="comment">/* disconnect properly */</span></div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;            <a class="code" href="url_8c.html#a3cd816b52d9e4d2393ce905dd98e57a9">Curl_disconnect</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="structdata.html">data</a>-&gt;easy_conn, dead_connection);</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;            <span class="comment">/* This is where we make sure that the easy_conn pointer is reset.</span></div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;<span class="comment">               We don&#39;t have to do this in every case block above where a</span></div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;<span class="comment">               failure is detected */</span></div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;            <a class="code" href="structdata.html">data</a>-&gt;easy_conn = NULL;</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;          }</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;        }</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;mstate == <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a690ed7a251acfdba578c219baf9942ec">CURLM_STATE_CONNECT</a>) {</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;          <span class="comment">/* Curl_connect() failed */</span></div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;          (void)<a class="code" href="transfer_8c.html#a6afc3b6e11b658604fb00a32646c2f15">Curl_posttransfer</a>(<a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;        }</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;        <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a9c82cd8d2874a9b075dcac72b9e50800">CURLM_STATE_COMPLETED</a>);</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a>;</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;      }</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;      <span class="comment">/* if there&#39;s still a connection to use, call the progress function */</span></div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn &amp;&amp; <a class="code" href="progress_8c.html#a40686d443707afea0c0e47cee805df01">Curl_pgrsUpdate</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn)) {</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;        <span class="comment">/* aborted due to progress callback return code must close the</span></div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;<span class="comment">           connection */</span></div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a309ade641c94c3e710ae887405dba78b">CURLE_ABORTED_BY_CALLBACK</a>;</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;        <a class="code" href="connect_8h.html#a39c490691a02b6643d80882c12b189ed">streamclose</a>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn, <span class="stringliteral">&quot;Aborted by callback&quot;</span>);</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;        <span class="comment">/* if not yet in DONE state, go there, otherwise COMPLETED */</span></div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;        <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, (<a class="code" href="structdata.html">data</a>-&gt;mstate &lt; <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a2ee595f45796a08c5f15a53e1a19a249">CURLM_STATE_DONE</a>)?</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;                   <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a2ee595f45796a08c5f15a53e1a19a249">CURLM_STATE_DONE</a>: <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a9c82cd8d2874a9b075dcac72b9e50800">CURLM_STATE_COMPLETED</a>);</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a>;</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;      }</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;    }</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a9c82cd8d2874a9b075dcac72b9e50800">CURLM_STATE_COMPLETED</a> == <a class="code" href="structdata.html">data</a>-&gt;mstate) {</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;set.fmultidone) {</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;        <span class="comment">/* signal via callback instead */</span></div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;        <a class="code" href="structdata.html">data</a>-&gt;set.fmultidone(<a class="code" href="structdata.html">data</a>, <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>);</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;      }</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;        <span class="comment">/* now fill in the Curl_message with this info */</span></div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;        msg = &amp;<a class="code" href="structdata.html">data</a>-&gt;msg;</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;        msg-&gt;<a class="code" href="struct_curl__message.html#a52f673a70ea547a989dff62b35ba6e40">extmsg</a>.<a class="code" href="struct_c_u_r_l_msg.html#a805019ce36cd301163b184308220c601">msg</a> = <a class="code" href="multi_8h.html#a7f87d375fc82f79b121ef4adaeedc154a374efd706ae91c3321d6360be3c398b7">CURLMSG_DONE</a>;</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;        msg-&gt;<a class="code" href="struct_curl__message.html#a52f673a70ea547a989dff62b35ba6e40">extmsg</a>.<a class="code" href="struct_c_u_r_l_msg.html#a236add50fa3dc85360e4aa7a85a9dfd1">easy_handle</a> = <a class="code" href="get_8d.html#a38b0ef81b65f2aee282c8c217a123176">data</a>;</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;        msg-&gt;<a class="code" href="struct_curl__message.html#a52f673a70ea547a989dff62b35ba6e40">extmsg</a>.<a class="code" href="struct_c_u_r_l_msg.html#ac1c4637f4d8f8eecad5f8cf2e89c528e">data</a>.<a class="code" href="struct_c_u_r_l_msg.html#ac00f26a84ebe0c2c5cb420a47d15ffec">result</a> = <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = multi_addmsg(multi, msg);</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;        <a class="code" href="curl__setup__once_8h.html#a23d7b88872d6ead46c978b567908d587">DEBUGASSERT</a>(!<a class="code" href="structdata.html">data</a>-&gt;easy_conn);</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;      }</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;      <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a5e6dec1bb80d819e0697aea452174cc4">CURLM_STATE_MSGSENT</a>);</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    }</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;  } <span class="keywordflow">while</span>((<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> == <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a>) || multi_ischanged(multi, <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>));</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;result = <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>;</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;}</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;</div><div class="line"><a name="l02195"></a><span class="lineno"><a class="line" href="multi_8c.html#a6983cf765144e4b40860aa1baad0e149"> 2195</a></span>&#160;<a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> <a class="code" href="multi_8c.html#a6983cf765144e4b40860aa1baad0e149">curl_multi_perform</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi, <span class="keywordtype">int</span> *running_handles)</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;{</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="get_8d.html#a38b0ef81b65f2aee282c8c217a123176">data</a>;</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;  <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> returncode = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a>;</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__tree.html">Curl_tree</a> *<a class="code" href="config_8d.html#adcde1b7c7daa51633da6a8a48ef59bec">t</a>;</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;  <span class="keyword">struct </span><a class="code" href="structcurltime.html">curltime</a> <a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a> = <a class="code" href="timeval_8c.html#ae736e803680e1b7fa2b2868317b4b91f">Curl_now</a>();</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="multi_8c.html#ab6e53cbf757b0790ad040a27772544c4">GOOD_MULTI_HANDLE</a>(multi))</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a8876b8ad10b9b2e9ee4cfb22034803ed">CURLM_BAD_HANDLE</a>;</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;  <span class="keywordflow">if</span>(multi-&gt;<a class="code" href="struct_curl__multi.html#a598ce59e5d016aee984ab282d66ed2bf">in_callback</a>)</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a02622c2fbef0b11a76595bbfd8353c6a">CURLM_RECURSIVE_API_CALL</a>;</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;  <a class="code" href="structdata.html">data</a> = multi-&gt;<a class="code" href="struct_curl__multi.html#af45f45ebf8c94b7510d0571349786e75">easyp</a>;</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;  <span class="keywordflow">while</span>(<a class="code" href="structdata.html">data</a>) {</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;    <a class="code" href="sigpipe_8h.html#a1acde57689fe654fd296d12f66160618">SIGPIPE_VARIABLE</a>(pipe_st);</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;    <a class="code" href="sigpipe_8h.html#a5748ed27a059e06d2d1e530d76fd2d49">sigpipe_ignore</a>(<a class="code" href="structdata.html">data</a>, &amp;pipe_st);</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;    <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = multi_runsingle(multi, <a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>, <a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;    <a class="code" href="sigpipe_8h.html#a4e82346dd2794d3e58da69078f1c4ab4">sigpipe_restore</a>(&amp;pipe_st);</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;      returncode = <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    <a class="code" href="structdata.html">data</a> = <a class="code" href="structdata.html">data</a>-&gt;next; <span class="comment">/* operate on next handle */</span></div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;  }</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;<span class="comment">   * Simply remove all expired timers from the splay since handles are dealt</span></div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;<span class="comment">   * with unconditionally by this function and curl_multi_timeout() requires</span></div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;<span class="comment">   * that already passed/handled expire times are removed from the splay.</span></div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;<span class="comment">   * It is important that the &#39;now&#39; value is set at the entry of this function</span></div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;<span class="comment">   * and not for the current time as it may have ticked a little while since</span></div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;<span class="comment">   * then and then we risk this loop to remove timers that actually have not</span></div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;<span class="comment">   * been handled!</span></div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;    multi-&gt;<a class="code" href="struct_curl__multi.html#aed77ecd40ec6ec6830f8842dbcb51c19">timetree</a> = <a class="code" href="splay_8c.html#adacf40f6d35d94c27425a306898a6da2">Curl_splaygetbest</a>(<a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>, multi-&gt;<a class="code" href="struct_curl__multi.html#aed77ecd40ec6ec6830f8842dbcb51c19">timetree</a>, &amp;<a class="code" href="config_8d.html#adcde1b7c7daa51633da6a8a48ef59bec">t</a>);</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="config_8d.html#adcde1b7c7daa51633da6a8a48ef59bec">t</a>)</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;      <span class="comment">/* the removed may have another timeout in queue */</span></div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;      (void)add_next_timeout(<a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>, multi, <a class="code" href="config_8d.html#adcde1b7c7daa51633da6a8a48ef59bec">t</a>-&gt;payload);</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;  } <span class="keywordflow">while</span>(<a class="code" href="config_8d.html#adcde1b7c7daa51633da6a8a48ef59bec">t</a>);</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;  *running_handles = multi-&gt;<a class="code" href="struct_curl__multi.html#aa9e3ad6466ada3035eecca089efc513b">num_alive</a>;</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a> &gt;= returncode)</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    update_timer(multi);</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;  <span class="keywordflow">return</span> returncode;</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;}</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;</div><div class="line"><a name="l02249"></a><span class="lineno"><a class="line" href="multi_8c.html#aa99806145cef2e25fd2b49ad5c65683d"> 2249</a></span>&#160;<a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> <a class="code" href="multi_8c.html#aa99806145cef2e25fd2b49ad5c65683d">curl_multi_cleanup</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi)</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;{</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="get_8d.html#a38b0ef81b65f2aee282c8c217a123176">data</a>;</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__easy.html">Curl_easy</a> *nextdata;</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="multi_8c.html#ab6e53cbf757b0790ad040a27772544c4">GOOD_MULTI_HANDLE</a>(<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>)) {</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#a598ce59e5d016aee984ab282d66ed2bf">in_callback</a>)</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a02622c2fbef0b11a76595bbfd8353c6a">CURLM_RECURSIVE_API_CALL</a>;</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    <a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#ae9f56b8b25625e24b8de0dfb9b0e0272">type</a> = 0; <span class="comment">/* not good anymore */</span></div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <span class="comment">/* Firsrt remove all remaining easy handles */</span></div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    <a class="code" href="structdata.html">data</a> = <a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#af45f45ebf8c94b7510d0571349786e75">easyp</a>;</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    <span class="keywordflow">while</span>(<a class="code" href="structdata.html">data</a>) {</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;      nextdata = <a class="code" href="structdata.html">data</a>-&gt;next;</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;      <span class="keywordflow">if</span>(!<a class="code" href="structdata.html">data</a>-&gt;state.done &amp;&amp; <a class="code" href="structdata.html">data</a>-&gt;easy_conn)</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;        <span class="comment">/* if DONE was never called for this handle */</span></div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;        (void)multi_done(&amp;<a class="code" href="structdata.html">data</a>-&gt;easy_conn, <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>, <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;dns.hostcachetype == HCACHE_MULTI) {</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;        <span class="comment">/* clear out the usage of the shared DNS cache */</span></div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;        <a class="code" href="hostip_8c.html#a546aa63aadecc9d74c4cdb7a5e530d40">Curl_hostcache_clean</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="structdata.html">data</a>-&gt;dns.hostcache);</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;        <a class="code" href="structdata.html">data</a>-&gt;dns.hostcache = NULL;</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;        <a class="code" href="structdata.html">data</a>-&gt;dns.hostcachetype = HCACHE_NONE;</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;      }</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;      <span class="comment">/* Clear the pointer to the connection cache */</span></div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;      <a class="code" href="structdata.html">data</a>-&gt;state.conn_cache = NULL;</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;      <a class="code" href="structdata.html">data</a>-&gt;multi = NULL; <span class="comment">/* clear the association */</span></div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;<span class="preprocessor">#ifdef USE_LIBPSL</span></div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;psl == &amp;<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;psl)</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;        <a class="code" href="structdata.html">data</a>-&gt;psl = NULL;</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;      <a class="code" href="structdata.html">data</a> = nextdata;</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;    }</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;    <span class="comment">/* Close all the connections in the connection cache */</span></div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;    <a class="code" href="conncache_8c.html#a97f883ab6dbffc5418ca83a001dd0a90">Curl_conncache_close_all_connections</a>(&amp;<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#a4b99b75205eb20c5958edb9b343becf1">conn_cache</a>);</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    <a class="code" href="hash_8c.html#a7e58db026000cd72601150793facbbdc">Curl_hash_destroy</a>(&amp;<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#abab21812b094af393ac6e639bf4d3ee5">sockhash</a>);</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;    <a class="code" href="conncache_8c.html#a4b099b50e4232c69faa023dd25e96176">Curl_conncache_destroy</a>(&amp;<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#a4b99b75205eb20c5958edb9b343becf1">conn_cache</a>);</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;    <a class="code" href="llist_8c.html#a8ea7dbefac355279ad19f3dfe345a45a">Curl_llist_destroy</a>(&amp;<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#a16a9f16f5b7cdbf738009ab20483d610">msglist</a>, NULL);</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;    <a class="code" href="llist_8c.html#a8ea7dbefac355279ad19f3dfe345a45a">Curl_llist_destroy</a>(&amp;<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#a27e434e78227c62c5107dc06754d2585">pending</a>, NULL);</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;    <a class="code" href="hash_8c.html#a7e58db026000cd72601150793facbbdc">Curl_hash_destroy</a>(&amp;<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#addd2be231a1ea833776cf7f39e4353a7">hostcache</a>);</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;    <a class="code" href="psl_8h.html#ab188f302b40b6db9599e4d551581862d">Curl_psl_destroy</a>(&amp;<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;psl);</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;    <span class="comment">/* Free the blacklists by setting them to NULL */</span></div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;    <a class="code" href="pipeline_8c.html#a6f401e68b71214127eff15c9f1626f15">Curl_pipeline_set_site_blacklist</a>(NULL, &amp;<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#a0badc572b3d02c4ac183a71dd59f0784">pipelining_site_bl</a>);</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    <a class="code" href="pipeline_8c.html#a4f8afb2e5c3f765f93c7f3a6d0c87e51">Curl_pipeline_set_server_blacklist</a>(NULL, &amp;<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#a08f57b6e1e94689d0be7963ed552d4ac">pipelining_server_bl</a>);</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    <a class="code" href="curl__memory_8h.html#a9cc854374299a1dd933bf62029761768">free</a>(<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>);</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a>;</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;  }</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a8876b8ad10b9b2e9ee4cfb22034803ed">CURLM_BAD_HANDLE</a>;</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;}</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;<span class="comment"> * curl_multi_info_read()</span></div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;<span class="comment"> * This function is the primary way for a multi/multi_socket application to</span></div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;<span class="comment"> * figure out if a transfer has ended. We MUST make this function as fast as</span></div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;<span class="comment"> * possible as it will be polled frequently and we MUST NOT scan any lists in</span></div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;<span class="comment"> * here to figure out things. We must scale fine to thousands of handles and</span></div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;<span class="comment"> * beyond. The current design is fully O(1).</span></div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;</div><div class="line"><a name="l02318"></a><span class="lineno"><a class="line" href="multi_8c.html#aff238f181f772d261bdfe727944710cd"> 2318</a></span>&#160;<a class="code" href="struct_c_u_r_l_msg.html">CURLMsg</a> *<a class="code" href="multi_8c.html#aff238f181f772d261bdfe727944710cd">curl_multi_info_read</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>, <span class="keywordtype">int</span> *msgs_in_queue)</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;{</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__message.html">Curl_message</a> *msg;</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;  *msgs_in_queue = 0; <span class="comment">/* default to none */</span></div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="multi_8c.html#ab6e53cbf757b0790ad040a27772544c4">GOOD_MULTI_HANDLE</a>(multi) &amp;&amp;</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;     !multi-&gt;<a class="code" href="struct_curl__multi.html#a598ce59e5d016aee984ab282d66ed2bf">in_callback</a> &amp;&amp;</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;     <a class="code" href="llist_8c.html#a5695da52e80519cc2aae14bb325671d0">Curl_llist_count</a>(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#a16a9f16f5b7cdbf738009ab20483d610">msglist</a>)) {</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;    <span class="comment">/* there is one or more messages in the list */</span></div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    <span class="keyword">struct </span><a class="code" href="structcurl__llist__element.html">curl_llist_element</a> *e;</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    <span class="comment">/* extract the head of the list to return */</span></div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    e = multi-&gt;<a class="code" href="struct_curl__multi.html#a16a9f16f5b7cdbf738009ab20483d610">msglist</a>.<a class="code" href="structcurl__llist.html#a3f6e07aacbee78561127b0166cc28fe7">head</a>;</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;    msg = e-&gt;<a class="code" href="structcurl__llist__element.html#aa3c3cb90fae86e24d88eea4437bc61ab">ptr</a>;</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;    <span class="comment">/* remove the extracted entry */</span></div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;    <a class="code" href="llist_8c.html#a36b09b21eb5d63095a325575113df4f0">Curl_llist_remove</a>(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#a16a9f16f5b7cdbf738009ab20483d610">msglist</a>, e, NULL);</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    *msgs_in_queue = <a class="code" href="warnless_8c.html#a02468fae1f563370c5e18045d5bc2ecb">curlx_uztosi</a>(<a class="code" href="llist_8c.html#a5695da52e80519cc2aae14bb325671d0">Curl_llist_count</a>(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#a16a9f16f5b7cdbf738009ab20483d610">msglist</a>));</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    <span class="keywordflow">return</span> &amp;msg-&gt;<a class="code" href="struct_curl__message.html#a52f673a70ea547a989dff62b35ba6e40">extmsg</a>;</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;  }</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;  <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;}</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;<span class="comment"> * singlesocket() checks what sockets we deal with and their &quot;action state&quot;</span></div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;<span class="comment"> * and if we have a different state in any of those sockets from last time we</span></div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;<span class="comment"> * call the callback accordingly.</span></div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;<span class="keyword">static</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> singlesocket(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi,</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;                              <span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>)</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;{</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;  <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> socks[<a class="code" href="multihandle_8h.html#a472aff39aba6058f1e7372319df882c0">MAX_SOCKSPEREASYHANDLE</a>];</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__sh__entry.html">Curl_sh_entry</a> *entry;</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;  <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> s;</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;  <span class="keywordtype">int</span> num;</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> curraction;</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;  <span class="keywordflow">for</span>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>&lt; <a class="code" href="multihandle_8h.html#a472aff39aba6058f1e7372319df882c0">MAX_SOCKSPEREASYHANDLE</a>; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++)</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;    socks[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>] = <a class="code" href="curl_8h.html#ada0bbe252b7b370ef4e135b93b2fe71e">CURL_SOCKET_BAD</a>;</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;  <span class="comment">/* Fill in the &#39;current&#39; struct with the state as it is now: what sockets to</span></div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;<span class="comment">     supervise and for what actions */</span></div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;  curraction = multi_getsock(<a class="code" href="structdata.html">data</a>, socks, <a class="code" href="multihandle_8h.html#a472aff39aba6058f1e7372319df882c0">MAX_SOCKSPEREASYHANDLE</a>);</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;  <span class="comment">/* We have 0 .. N sockets already and we get to know about the 0 .. M</span></div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;<span class="comment">     sockets we should have from now on. Detect the differences, remove no</span></div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;<span class="comment">     longer supervised ones and add new ones */</span></div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;  <span class="comment">/* walk over the sockets we got right now */</span></div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;  <span class="keywordflow">for</span>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0; (<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>&lt; <a class="code" href="multihandle_8h.html#a472aff39aba6058f1e7372319df882c0">MAX_SOCKSPEREASYHANDLE</a>) &amp;&amp;</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;        (curraction &amp; (<a class="code" href="multiif_8h.html#a4ae1fb64a27264765b6a2fe5aca78830">GETSOCK_READSOCK</a>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>) | <a class="code" href="multiif_8h.html#a9aabda59f0ff87c1db3a2d306a410713">GETSOCK_WRITESOCK</a>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>)));</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;      <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++) {</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_curl__sh__entry.html#ae5d8bcf6fe986e6c2b315b0b4fcddcc2">action</a> = <a class="code" href="multi_8h.html#a6e92732986b0f84850cb41ce08f3deb6">CURL_POLL_NONE</a>;</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;    s = socks[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>];</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    <span class="comment">/* get it from the hash */</span></div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;    entry = sh_getentry(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#abab21812b094af393ac6e639bf4d3ee5">sockhash</a>, s);</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    <span class="keywordflow">if</span>(curraction &amp; <a class="code" href="multiif_8h.html#a4ae1fb64a27264765b6a2fe5aca78830">GETSOCK_READSOCK</a>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>))</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;      <a class="code" href="struct_curl__sh__entry.html#ae5d8bcf6fe986e6c2b315b0b4fcddcc2">action</a> |= <a class="code" href="multi_8h.html#ae6c11d08c009204cdad567e762fa1716">CURL_POLL_IN</a>;</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;    <span class="keywordflow">if</span>(curraction &amp; <a class="code" href="multiif_8h.html#a9aabda59f0ff87c1db3a2d306a410713">GETSOCK_WRITESOCK</a>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>))</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;      <a class="code" href="struct_curl__sh__entry.html#ae5d8bcf6fe986e6c2b315b0b4fcddcc2">action</a> |= <a class="code" href="multi_8h.html#a062838fbdac95bf37a1c6b3b415f49a9">CURL_POLL_OUT</a>;</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    <span class="keywordflow">if</span>(entry) {</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;      <span class="comment">/* yeps, already present so check if it has the same action set */</span></div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;      <span class="keywordflow">if</span>(entry-&gt;<a class="code" href="struct_curl__sh__entry.html#ae5d8bcf6fe986e6c2b315b0b4fcddcc2">action</a> == <a class="code" href="struct_curl__sh__entry.html#ae5d8bcf6fe986e6c2b315b0b4fcddcc2">action</a>)</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;        <span class="comment">/* same, continue */</span></div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    }</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;      <span class="comment">/* this is a socket we didn&#39;t have before, add it! */</span></div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;      entry = sh_addentry(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#abab21812b094af393ac6e639bf4d3ee5">sockhash</a>, s, <a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;      <span class="keywordflow">if</span>(!entry)</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;        <span class="comment">/* fatal */</span></div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a323be072bc47b2a7ff1d3fc4533e8f70">CURLM_OUT_OF_MEMORY</a>;</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;    }</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;    <span class="comment">/* we know (entry != NULL) at this point, see the logic above */</span></div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;    <span class="keywordflow">if</span>(multi-&gt;<a class="code" href="struct_curl__multi.html#a133cf392cece67e9e02c6ea509db84a2">socket_cb</a>)</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;      multi-&gt;<a class="code" href="struct_curl__multi.html#a133cf392cece67e9e02c6ea509db84a2">socket_cb</a>(<a class="code" href="structdata.html">data</a>,</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;                       s,</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;                       <a class="code" href="struct_curl__sh__entry.html#ae5d8bcf6fe986e6c2b315b0b4fcddcc2">action</a>,</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;                       multi-&gt;<a class="code" href="struct_curl__multi.html#ae4b9e466d46ba43c33f6380de74d762e">socket_userp</a>,</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;                       entry-&gt;<a class="code" href="struct_curl__sh__entry.html#a7d846f0b4d94827cbcae2d9734ef3d26">socketp</a>);</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    entry-&gt;<a class="code" href="struct_curl__sh__entry.html#ae5d8bcf6fe986e6c2b315b0b4fcddcc2">action</a> = <a class="code" href="struct_curl__sh__entry.html#ae5d8bcf6fe986e6c2b315b0b4fcddcc2">action</a>; <span class="comment">/* store the current action state */</span></div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;  }</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;  num = <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>; <span class="comment">/* number of sockets */</span></div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;  <span class="comment">/* when we&#39;ve walked over all the sockets we should have right now, we must</span></div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;<span class="comment">     make sure to detect sockets that are removed */</span></div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;  <span class="keywordflow">for</span>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>&lt; <a class="code" href="structdata.html">data</a>-&gt;numsocks; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++) {</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="smooth-gtk-thread_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>;</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;    s = <a class="code" href="structdata.html">data</a>-&gt;sockets[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>];</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="smooth-gtk-thread_8c.html#a37d972ae0b47b9099e30983131d31916">j</a> = 0; <a class="code" href="smooth-gtk-thread_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>&lt;num; <a class="code" href="smooth-gtk-thread_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>++) {</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;      <span class="keywordflow">if</span>(s == socks[<a class="code" href="smooth-gtk-thread_8c.html#a37d972ae0b47b9099e30983131d31916">j</a>]) {</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;        <span class="comment">/* this is still supervised */</span></div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;        s = <a class="code" href="curl_8h.html#ada0bbe252b7b370ef4e135b93b2fe71e">CURL_SOCKET_BAD</a>;</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;      }</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    }</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    entry = sh_getentry(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#abab21812b094af393ac6e639bf4d3ee5">sockhash</a>, s);</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;    <span class="keywordflow">if</span>(entry) {</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;      <span class="comment">/* this socket has been removed. Tell the app to remove it */</span></div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;      <span class="keywordtype">bool</span> remove_sock_from_hash = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;      <span class="comment">/* check if the socket to be removed serves a connection which has</span></div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;<span class="comment">         other easy-s in a pipeline. In this case the socket should not be</span></div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;<span class="comment">         removed. */</span></div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;      <span class="keyword">struct </span><a class="code" href="structconnectdata.html">connectdata</a> *easy_conn = <a class="code" href="structdata.html">data</a>-&gt;easy_conn;</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;      <span class="keywordflow">if</span>(easy_conn) {</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;        <span class="keywordflow">if</span>(easy_conn-&gt;<a class="code" href="structconnectdata.html#a6f14f579b08c62c8114a72b487e9cedf">recv_pipe</a>.<a class="code" href="structcurl__llist.html#abca9151666b85a2a95d44bbbe1dcf8b2">size</a> &gt; 1) {</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;          <span class="comment">/* the handle should not be removed from the pipe yet */</span></div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;          remove_sock_from_hash = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;          <span class="comment">/* Update the sockhash entry to instead point to the next in line</span></div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;<span class="comment">             for the recv_pipe, or the first (in case this particular easy</span></div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;<span class="comment">             isn&#39;t already) */</span></div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;          <span class="keywordflow">if</span>(entry-&gt;<a class="code" href="struct_curl__sh__entry.html#a2b27894ee7605e464ac288ebca47d0f9">easy</a> == <a class="code" href="structdata.html">data</a>) {</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="pipeline_8c.html#ac0e1ff41ac23ab04563a7817f7e838fc">Curl_recvpipe_head</a>(<a class="code" href="structdata.html">data</a>, easy_conn))</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;              entry-&gt;<a class="code" href="struct_curl__sh__entry.html#a2b27894ee7605e464ac288ebca47d0f9">easy</a> = easy_conn-&gt;<a class="code" href="structconnectdata.html#a6f14f579b08c62c8114a72b487e9cedf">recv_pipe</a>.<a class="code" href="structcurl__llist.html#a3f6e07aacbee78561127b0166cc28fe7">head</a>-&gt;<a class="code" href="structcurl__llist__element.html#a75de5ec93f47535d096929a045f46467">next</a>-&gt;<a class="code" href="structcurl__llist__element.html#aa3c3cb90fae86e24d88eea4437bc61ab">ptr</a>;</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;              entry-&gt;<a class="code" href="struct_curl__sh__entry.html#a2b27894ee7605e464ac288ebca47d0f9">easy</a> = easy_conn-&gt;<a class="code" href="structconnectdata.html#a6f14f579b08c62c8114a72b487e9cedf">recv_pipe</a>.<a class="code" href="structcurl__llist.html#a3f6e07aacbee78561127b0166cc28fe7">head</a>-&gt;<a class="code" href="structcurl__llist__element.html#aa3c3cb90fae86e24d88eea4437bc61ab">ptr</a>;</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;          }</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;        }</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;        <span class="keywordflow">if</span>(easy_conn-&gt;<a class="code" href="structconnectdata.html#a7ab37820430680c72aa59e5ce65167e2">send_pipe</a>.<a class="code" href="structcurl__llist.html#abca9151666b85a2a95d44bbbe1dcf8b2">size</a> &gt; 1) {</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;          <span class="comment">/* the handle should not be removed from the pipe yet */</span></div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;          remove_sock_from_hash = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;          <span class="comment">/* Update the sockhash entry to instead point to the next in line</span></div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;<span class="comment">             for the send_pipe, or the first (in case this particular easy</span></div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;<span class="comment">             isn&#39;t already) */</span></div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;          <span class="keywordflow">if</span>(entry-&gt;<a class="code" href="struct_curl__sh__entry.html#a2b27894ee7605e464ac288ebca47d0f9">easy</a> == <a class="code" href="structdata.html">data</a>) {</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="pipeline_8c.html#a0ebfe30eee0b789fed3635439e8f0b4b">Curl_sendpipe_head</a>(<a class="code" href="structdata.html">data</a>, easy_conn))</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;              entry-&gt;<a class="code" href="struct_curl__sh__entry.html#a2b27894ee7605e464ac288ebca47d0f9">easy</a> = easy_conn-&gt;<a class="code" href="structconnectdata.html#a7ab37820430680c72aa59e5ce65167e2">send_pipe</a>.<a class="code" href="structcurl__llist.html#a3f6e07aacbee78561127b0166cc28fe7">head</a>-&gt;<a class="code" href="structcurl__llist__element.html#a75de5ec93f47535d096929a045f46467">next</a>-&gt;<a class="code" href="structcurl__llist__element.html#aa3c3cb90fae86e24d88eea4437bc61ab">ptr</a>;</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;              entry-&gt;<a class="code" href="struct_curl__sh__entry.html#a2b27894ee7605e464ac288ebca47d0f9">easy</a> = easy_conn-&gt;<a class="code" href="structconnectdata.html#a7ab37820430680c72aa59e5ce65167e2">send_pipe</a>.<a class="code" href="structcurl__llist.html#a3f6e07aacbee78561127b0166cc28fe7">head</a>-&gt;<a class="code" href="structcurl__llist__element.html#aa3c3cb90fae86e24d88eea4437bc61ab">ptr</a>;</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;          }</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;        }</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;        <span class="comment">/* Don&#39;t worry about overwriting recv_pipe head with send_pipe_head,</span></div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;<span class="comment">           when action will be asked on the socket (see multi_socket()), the</span></div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;<span class="comment">           head of the correct pipe will be taken according to the</span></div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;<span class="comment">           action. */</span></div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;      }</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;      <span class="keywordflow">if</span>(remove_sock_from_hash) {</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;        <span class="comment">/* in this case &#39;entry&#39; is always non-NULL */</span></div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;        <span class="keywordflow">if</span>(multi-&gt;<a class="code" href="struct_curl__multi.html#a133cf392cece67e9e02c6ea509db84a2">socket_cb</a>)</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;          multi-&gt;<a class="code" href="struct_curl__multi.html#a133cf392cece67e9e02c6ea509db84a2">socket_cb</a>(<a class="code" href="structdata.html">data</a>,</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;                           s,</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;                           <a class="code" href="multi_8h.html#a88902618f461310d6654409444b53e86">CURL_POLL_REMOVE</a>,</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;                           multi-&gt;<a class="code" href="struct_curl__multi.html#ae4b9e466d46ba43c33f6380de74d762e">socket_userp</a>,</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;                           entry-&gt;<a class="code" href="struct_curl__sh__entry.html#a7d846f0b4d94827cbcae2d9734ef3d26">socketp</a>);</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;        sh_delentry(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#abab21812b094af393ac6e639bf4d3ee5">sockhash</a>, s);</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;      }</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;    } <span class="comment">/* if sockhash entry existed */</span></div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;  } <span class="comment">/* for loop over numsocks */</span></div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;  <a class="code" href="unit1304_8c.html#a82a69fcfe92d9db6dd585ccc532a2ab7">memcpy</a>(<a class="code" href="structdata.html">data</a>-&gt;sockets, socks, num*<span class="keyword">sizeof</span>(<a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a>));</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;numsocks = num;</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a>;</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;}</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;</div><div class="line"><a name="l02489"></a><span class="lineno"><a class="line" href="multiif_8h.html#a0b4dcd71644147f8a30b8b52f3d929ce"> 2489</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="multi_8c.html#a0b4dcd71644147f8a30b8b52f3d929ce">Curl_updatesocket</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>)</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;{</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;  singlesocket(<a class="code" href="structdata.html">data</a>-&gt;multi, <a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;}</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;<span class="comment"> * Curl_multi_closed()</span></div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;<span class="comment"> * Used by the connect code to tell the multi_socket code that one of the</span></div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;<span class="comment"> * sockets we were using is about to be closed.  This function will then</span></div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;<span class="comment"> * remove it from the sockethash for this handle to make the multi_socket API</span></div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;<span class="comment"> * behave properly, especially for the case when libcurl will create another</span></div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;<span class="comment"> * socket again and it gets the same file descriptor number.</span></div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;</div><div class="line"><a name="l02505"></a><span class="lineno"><a class="line" href="multiif_8h.html#afbc31d9271626832fb21b413ec57c268"> 2505</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="multi_8c.html#afbc31d9271626832fb21b413ec57c268">Curl_multi_closed</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>, <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> s)</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;{</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>) {</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    <span class="comment">/* if there&#39;s still an easy handle associated with this connection */</span></div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi = <a class="code" href="structdata.html">data</a>-&gt;multi;</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;    <span class="keywordflow">if</span>(multi) {</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;      <span class="comment">/* this is set if this connection is part of a handle that is added to</span></div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;<span class="comment">         a multi handle, and only then this is necessary */</span></div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;      <span class="keyword">struct </span><a class="code" href="struct_curl__sh__entry.html">Curl_sh_entry</a> *entry = sh_getentry(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#abab21812b094af393ac6e639bf4d3ee5">sockhash</a>, s);</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;      <span class="keywordflow">if</span>(entry) {</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;        <span class="keywordflow">if</span>(multi-&gt;<a class="code" href="struct_curl__multi.html#a133cf392cece67e9e02c6ea509db84a2">socket_cb</a>)</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;          multi-&gt;<a class="code" href="struct_curl__multi.html#a133cf392cece67e9e02c6ea509db84a2">socket_cb</a>(<a class="code" href="structdata.html">data</a>, s, <a class="code" href="multi_8h.html#a88902618f461310d6654409444b53e86">CURL_POLL_REMOVE</a>,</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;                           multi-&gt;<a class="code" href="struct_curl__multi.html#ae4b9e466d46ba43c33f6380de74d762e">socket_userp</a>,</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;                           entry-&gt;<a class="code" href="struct_curl__sh__entry.html#a7d846f0b4d94827cbcae2d9734ef3d26">socketp</a>);</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;        <span class="comment">/* now remove it from the socket hash */</span></div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;        sh_delentry(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#abab21812b094af393ac6e639bf4d3ee5">sockhash</a>, s);</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;      }</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;    }</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;  }</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;}</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;<span class="comment"> * add_next_timeout()</span></div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;<span class="comment"> * Each Curl_easy has a list of timeouts. The add_next_timeout() is called</span></div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;<span class="comment"> * when it has just been removed from the splay tree because the timeout has</span></div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;<span class="comment"> * expired. This function is then to advance in the list to pick the next</span></div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;<span class="comment"> * timeout to use (skip the already expired ones) and add this node back to</span></div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;<span class="comment"> * the splay tree again.</span></div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;<span class="comment"> * The splay tree only has each sessionhandle as a single node and the nearest</span></div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;<span class="comment"> * timeout is used to sort it on.</span></div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;<span class="keyword">static</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> add_next_timeout(<span class="keyword">struct</span> <a class="code" href="structcurltime.html">curltime</a> <a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>,</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;                                  <span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi,</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;                                  <span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *d)</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;{</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;  <span class="keyword">struct </span><a class="code" href="structcurltime.html">curltime</a> *tv = &amp;d-&gt;<a class="code" href="struct_curl__easy.html#a15aced4a015c44ff454787debee23520">state</a>.<a class="code" href="struct_url_state.html#a09be8d23a5f358dc412d0da96957b52e">expiretime</a>;</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;  <span class="keyword">struct </span><a class="code" href="structcurl__llist.html">curl_llist</a> *list = &amp;d-&gt;<a class="code" href="struct_curl__easy.html#a15aced4a015c44ff454787debee23520">state</a>.<a class="code" href="struct_url_state.html#a531a034bab8a4c3d977938970508bff6">timeoutlist</a>;</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;  <span class="keyword">struct </span><a class="code" href="structcurl__llist__element.html">curl_llist_element</a> *e;</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;  <span class="keyword">struct </span><a class="code" href="structtime__node.html">time_node</a> *node = NULL;</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;  <span class="comment">/* move over the timeout list for this specific handle and remove all</span></div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;<span class="comment">     timeouts that are now passed tense and store the next pending</span></div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;<span class="comment">     timeout in *tv */</span></div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;  <span class="keywordflow">for</span>(e = <a class="code" href="structtime__node.html#aef50545dded0581dcdc6b60a08ef2246">list</a>-&gt;head; e;) {</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;    <span class="keyword">struct </span><a class="code" href="structcurl__llist__element.html">curl_llist_element</a> *<a class="code" href="config_8d.html#a9fb4830d0cbef7d3cf48425ce59f580a">n</a> = e-&gt;<a class="code" href="structcurl__llist__element.html#a75de5ec93f47535d096929a045f46467">next</a>;</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;    <a class="code" href="timeval_8h.html#aeb19832fd3e7f11c8d047d6824300e87">timediff_t</a> diff;</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;    node = (<span class="keyword">struct </span><a class="code" href="structtime__node.html">time_node</a> *)e-&gt;<a class="code" href="structcurl__llist__element.html#aa3c3cb90fae86e24d88eea4437bc61ab">ptr</a>;</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;    diff = <a class="code" href="timeval_8c.html#a93ce3158c8838916ed817489c98e37c4">Curl_timediff</a>(node-&gt;<a class="code" href="structtime__node.html#a9e686a2b7b5b979d88b5ccb1bfcff1a7">time</a>, <a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>);</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;    <span class="keywordflow">if</span>(diff &lt;= 0)</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;      <span class="comment">/* remove outdated entry */</span></div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;      <a class="code" href="llist_8c.html#a36b09b21eb5d63095a325575113df4f0">Curl_llist_remove</a>(<a class="code" href="structtime__node.html#aef50545dded0581dcdc6b60a08ef2246">list</a>, e, NULL);</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;      <span class="comment">/* the list is sorted so get out on the first mismatch */</span></div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;    e = <a class="code" href="config_8d.html#a9fb4830d0cbef7d3cf48425ce59f580a">n</a>;</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;  }</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;  e = <a class="code" href="structtime__node.html#aef50545dded0581dcdc6b60a08ef2246">list</a>-&gt;head;</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;  <span class="keywordflow">if</span>(!e) {</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;    <span class="comment">/* clear the expire times within the handles that we remove from the</span></div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;<span class="comment">       splay tree */</span></div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;    tv-&gt;<a class="code" href="structcurltime.html#aa037ee31cbd9bc40e07ebade62e7ad5d">tv_sec</a> = 0;</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;    tv-&gt;<a class="code" href="structcurltime.html#a2bb2442cdc8b9e4d2287805ce8febb17">tv_usec</a> = 0;</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;  }</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;    <span class="comment">/* copy the first entry to &#39;tv&#39; */</span></div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;    <a class="code" href="unit1304_8c.html#a82a69fcfe92d9db6dd585ccc532a2ab7">memcpy</a>(tv, &amp;node-&gt;<a class="code" href="structtime__node.html#a9e686a2b7b5b979d88b5ccb1bfcff1a7">time</a>, <span class="keyword">sizeof</span>(*tv));</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;    <span class="comment">/* Insert this node again into the splay.  Keep the timer in the list in</span></div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;<span class="comment">       case we need to recompute future timers. */</span></div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;    multi-&gt;<a class="code" href="struct_curl__multi.html#aed77ecd40ec6ec6830f8842dbcb51c19">timetree</a> = <a class="code" href="splay_8c.html#a60d524a540c7f6e3eaf9f2b912444f81">Curl_splayinsert</a>(*tv, multi-&gt;<a class="code" href="struct_curl__multi.html#aed77ecd40ec6ec6830f8842dbcb51c19">timetree</a>,</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;                                       &amp;d-&gt;<a class="code" href="struct_curl__easy.html#a15aced4a015c44ff454787debee23520">state</a>.<a class="code" href="struct_url_state.html#a21758a9ac2ab74227ce00f3f847da6ed">timenode</a>);</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;  }</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a>;</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;}</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;<span class="keyword">static</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> multi_socket(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi,</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;                              <span class="keywordtype">bool</span> checkall,</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;                              <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> s,</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;                              <span class="keywordtype">int</span> ev_bitmask,</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;                              <span class="keywordtype">int</span> *running_handles)</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;{</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;  <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a>;</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a> = NULL;</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__tree.html">Curl_tree</a> *<a class="code" href="config_8d.html#adcde1b7c7daa51633da6a8a48ef59bec">t</a>;</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;  <span class="keyword">struct </span><a class="code" href="structcurltime.html">curltime</a> <a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a> = <a class="code" href="timeval_8c.html#ae736e803680e1b7fa2b2868317b4b91f">Curl_now</a>();</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;  <span class="keywordflow">if</span>(checkall) {</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;    <span class="comment">/* *perform() deals with running_handles on its own */</span></div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;    <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="multi_8c.html#a6983cf765144e4b40860aa1baad0e149">curl_multi_perform</a>(multi, running_handles);</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;    <span class="comment">/* walk through each easy handle and do the socket state change magic</span></div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;<span class="comment">       and callbacks */</span></div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> != <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a8876b8ad10b9b2e9ee4cfb22034803ed">CURLM_BAD_HANDLE</a>) {</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;      <a class="code" href="structdata.html">data</a> = multi-&gt;<a class="code" href="struct_curl__multi.html#af45f45ebf8c94b7510d0571349786e75">easyp</a>;</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;      <span class="keywordflow">while</span>(<a class="code" href="structdata.html">data</a> &amp;&amp; !<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = singlesocket(multi, <a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;        <a class="code" href="structdata.html">data</a> = <a class="code" href="structdata.html">data</a>-&gt;next;</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;      }</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;    }</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;    <span class="comment">/* or should we fall-through and do the timer-based stuff? */</span></div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;  }</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;  <span class="keywordflow">if</span>(s != <a class="code" href="multi_8h.html#afea9c23cde7dbbc5aae300dcef4a1523">CURL_SOCKET_TIMEOUT</a>) {</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_curl__sh__entry.html">Curl_sh_entry</a> *entry = sh_getentry(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#abab21812b094af393ac6e639bf4d3ee5">sockhash</a>, s);</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;    <span class="keywordflow">if</span>(!entry)</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;      <span class="comment">/* Unmatched socket, we can&#39;t act on it but we ignore this fact.  In</span></div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;<span class="comment">         real-world tests it has been proved that libevent can in fact give</span></div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;<span class="comment">         the application actions even though the socket was just previously</span></div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;<span class="comment">         asked to get removed, so thus we better survive stray socket actions</span></div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;<span class="comment">         and just move on. */</span></div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;      ;</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;      <a class="code" href="sigpipe_8h.html#a1acde57689fe654fd296d12f66160618">SIGPIPE_VARIABLE</a>(pipe_st);</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;      <a class="code" href="structdata.html">data</a> = entry-&gt;<a class="code" href="struct_curl__sh__entry.html#a2b27894ee7605e464ac288ebca47d0f9">easy</a>;</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;magic != <a class="code" href="urldata_8h.html#a3974aaba0c9077dda7aa9ed8e2325d55">CURLEASY_MAGIC_NUMBER</a>)</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;        <span class="comment">/* bad bad bad bad bad bad bad */</span></div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a53d037bdcf6900341e9f83efbf14b1d1">CURLM_INTERNAL_ERROR</a>;</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;      <span class="comment">/* If the pipeline is enabled, take the handle which is in the head of</span></div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;<span class="comment">         the pipeline. If we should write into the socket, take the send_pipe</span></div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;<span class="comment">         head.  If we should read from the socket, take the recv_pipe head. */</span></div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn) {</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;        <span class="keywordflow">if</span>((ev_bitmask &amp; <a class="code" href="multi_8h.html#a062838fbdac95bf37a1c6b3b415f49a9">CURL_POLL_OUT</a>) &amp;&amp;</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;           <a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;send_pipe.head)</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;          <a class="code" href="structdata.html">data</a> = <a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;send_pipe.head-&gt;ptr;</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span>((ev_bitmask &amp; <a class="code" href="multi_8h.html#ae6c11d08c009204cdad567e762fa1716">CURL_POLL_IN</a>) &amp;&amp;</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;                <a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;recv_pipe.head)</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;          <a class="code" href="structdata.html">data</a> = <a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;recv_pipe.head-&gt;ptr;</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;      }</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn &amp;&amp;</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;         !(<a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;handler-&gt;flags &amp; <a class="code" href="urldata_8h.html#a805d6a88e5f44ae1676bf5ef62b20b26">PROTOPT_DIRLOCK</a>))</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;        <span class="comment">/* set socket event bitmask if they&#39;re not locked */</span></div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;        <a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;cselect_bits = ev_bitmask;</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;      <a class="code" href="sigpipe_8h.html#a5748ed27a059e06d2d1e530d76fd2d49">sigpipe_ignore</a>(<a class="code" href="structdata.html">data</a>, &amp;pipe_st);</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = multi_runsingle(multi, <a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>, <a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;      <a class="code" href="sigpipe_8h.html#a4e82346dd2794d3e58da69078f1c4ab4">sigpipe_restore</a>(&amp;pipe_st);</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;easy_conn &amp;&amp;</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;         !(<a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;handler-&gt;flags &amp; <a class="code" href="urldata_8h.html#a805d6a88e5f44ae1676bf5ef62b20b26">PROTOPT_DIRLOCK</a>))</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;        <span class="comment">/* clear the bitmask only if not locked */</span></div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;        <a class="code" href="structdata.html">data</a>-&gt;easy_conn-&gt;cselect_bits = 0;</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a> &gt;= <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;        <span class="comment">/* get the socket(s) and check if the state has been changed since</span></div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;<span class="comment">           last */</span></div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = singlesocket(multi, <a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;      }</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;      <span class="comment">/* Now we fall-through and do the timer-based stuff, since we don&#39;t want</span></div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;<span class="comment">         to force the user to have to deal with timeouts as long as at least</span></div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;<span class="comment">         one connection in fact has traffic. */</span></div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;      <a class="code" href="structdata.html">data</a> = NULL; <span class="comment">/* set data to NULL again to avoid calling</span></div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;<span class="comment">                      multi_runsingle() in case there&#39;s no need to */</span></div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;      <a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a> = <a class="code" href="timeval_8c.html#ae736e803680e1b7fa2b2868317b4b91f">Curl_now</a>(); <span class="comment">/* get a newer time since the multi_runsingle() loop</span></div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;<span class="comment">                           may have taken some time */</span></div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;    }</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;  }</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    <span class="comment">/* Asked to run due to time-out. Clear the &#39;lastcall&#39; variable to force</span></div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;<span class="comment">       update_timer() to trigger a callback to the app again even if the same</span></div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;<span class="comment">       timeout is still the one to run after this call. That handles the case</span></div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;<span class="comment">       when the application asks libcurl to run the timeout prematurely. */</span></div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;    <a class="code" href="unit1652_8c.html#a1d19b0eef3b3acd31be88886a0277c2e">memset</a>(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#a2e319cdf49b37a3035f7e2d1012d374e">timer_lastcall</a>, 0, <span class="keyword">sizeof</span>(multi-&gt;<a class="code" href="struct_curl__multi.html#a2e319cdf49b37a3035f7e2d1012d374e">timer_lastcall</a>));</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;  }</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;<span class="comment">   * The loop following here will go on as long as there are expire-times left</span></div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;<span class="comment">   * to process in the splay and &#39;data&#39; will be re-assigned for every expired</span></div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;<span class="comment">   * handle we deal with.</span></div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;    <span class="comment">/* the first loop lap &#39;data&#39; can be NULL */</span></div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>) {</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;      <a class="code" href="sigpipe_8h.html#a1acde57689fe654fd296d12f66160618">SIGPIPE_VARIABLE</a>(pipe_st);</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;      <a class="code" href="sigpipe_8h.html#a5748ed27a059e06d2d1e530d76fd2d49">sigpipe_ignore</a>(<a class="code" href="structdata.html">data</a>, &amp;pipe_st);</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = multi_runsingle(multi, <a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>, <a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;      <a class="code" href="sigpipe_8h.html#a4e82346dd2794d3e58da69078f1c4ab4">sigpipe_restore</a>(&amp;pipe_st);</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a> &gt;= <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;        <span class="comment">/* get the socket(s) and check if the state has been changed since</span></div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;<span class="comment">           last */</span></div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = singlesocket(multi, <a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;      }</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;    }</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;    <span class="comment">/* Check if there&#39;s one (more) expired timer to deal with! This function</span></div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;<span class="comment">       extracts a matching node if there is one */</span></div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;    multi-&gt;<a class="code" href="struct_curl__multi.html#aed77ecd40ec6ec6830f8842dbcb51c19">timetree</a> = <a class="code" href="splay_8c.html#adacf40f6d35d94c27425a306898a6da2">Curl_splaygetbest</a>(<a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>, multi-&gt;<a class="code" href="struct_curl__multi.html#aed77ecd40ec6ec6830f8842dbcb51c19">timetree</a>, &amp;<a class="code" href="config_8d.html#adcde1b7c7daa51633da6a8a48ef59bec">t</a>);</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="config_8d.html#adcde1b7c7daa51633da6a8a48ef59bec">t</a>) {</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;      <a class="code" href="structdata.html">data</a> = <a class="code" href="config_8d.html#adcde1b7c7daa51633da6a8a48ef59bec">t</a>-&gt;payload; <span class="comment">/* assign this for next loop */</span></div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;      (void)add_next_timeout(<a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>, multi, <a class="code" href="config_8d.html#adcde1b7c7daa51633da6a8a48ef59bec">t</a>-&gt;payload);</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;    }</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;  } <span class="keywordflow">while</span>(<a class="code" href="config_8d.html#adcde1b7c7daa51633da6a8a48ef59bec">t</a>);</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;  *running_handles = multi-&gt;<a class="code" href="struct_curl__multi.html#aa9e3ad6466ada3035eecca089efc513b">num_alive</a>;</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;}</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;<span class="preprocessor">#undef curl_multi_setopt</span></div><div class="line"><a name="l02723"></a><span class="lineno"><a class="line" href="multi_8c.html#a451ac80294f46155861c4eb5eed3fa7b"> 2723</a></span>&#160;<a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> <a class="code" href="multi_8c.html#a451ac80294f46155861c4eb5eed3fa7b">curl_multi_setopt</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi,</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;                            <a class="code" href="multi_8h.html#a63d84039b5e6092edec1f44c87dd1fe5">CURLMoption</a> <a class="code" href="create-dirs_8d.html#a80cfb6b82f50850fe3824288a2e3a40c">option</a>, ...)</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;{</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;  <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> res = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a>;</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;  va_list param;</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="multi_8c.html#ab6e53cbf757b0790ad040a27772544c4">GOOD_MULTI_HANDLE</a>(multi))</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a8876b8ad10b9b2e9ee4cfb22034803ed">CURLM_BAD_HANDLE</a>;</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;  <span class="keywordflow">if</span>(multi-&gt;<a class="code" href="struct_curl__multi.html#a598ce59e5d016aee984ab282d66ed2bf">in_callback</a>)</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a02622c2fbef0b11a76595bbfd8353c6a">CURLM_RECURSIVE_API_CALL</a>;</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;  va_start(param, <a class="code" href="create-dirs_8d.html#a80cfb6b82f50850fe3824288a2e3a40c">option</a>);</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;  <span class="keywordflow">switch</span>(<a class="code" href="create-dirs_8d.html#a80cfb6b82f50850fe3824288a2e3a40c">option</a>) {</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;  <span class="keywordflow">case</span> CURLMOPT_SOCKETFUNCTION:</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;    multi-&gt;<a class="code" href="struct_curl__multi.html#a133cf392cece67e9e02c6ea509db84a2">socket_cb</a> = va_arg(param, <a class="code" href="multi_8h.html#a65ca5de50d101fb96d6f58a5fea6241d">curl_socket_callback</a>);</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;  <span class="keywordflow">case</span> CURLMOPT_SOCKETDATA:</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;    multi-&gt;<a class="code" href="struct_curl__multi.html#ae4b9e466d46ba43c33f6380de74d762e">socket_userp</a> = va_arg(param, <span class="keywordtype">void</span> *);</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;  <span class="keywordflow">case</span> CURLMOPT_PUSHFUNCTION:</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;    multi-&gt;<a class="code" href="struct_curl__multi.html#a131a1103a9be433eaad9733f9944eedc">push_cb</a> = va_arg(param, <a class="code" href="multi_8h.html#a8407d7bead25caca133cf51544b96406">curl_push_callback</a>);</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;  <span class="keywordflow">case</span> CURLMOPT_PUSHDATA:</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;    multi-&gt;<a class="code" href="struct_curl__multi.html#a384ffb77229da87366c61bd4ad48d0f4">push_userp</a> = va_arg(param, <span class="keywordtype">void</span> *);</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;  <span class="keywordflow">case</span> CURLMOPT_PIPELINING:</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;    multi-&gt;<a class="code" href="struct_curl__multi.html#a91630f04dcc2513676ee2f3f0879feed">pipelining</a> = va_arg(param, <span class="keywordtype">long</span>) &amp; <a class="code" href="http2-download_8c.html#af29d172b038fadd90daf541df3b945c6">CURLPIPE_MULTIPLEX</a>;</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;  <span class="keywordflow">case</span> CURLMOPT_TIMERFUNCTION:</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;    multi-&gt;<a class="code" href="struct_curl__multi.html#a58b3bb3d36a7db5a6542c7586f1ced87">timer_cb</a> = va_arg(param, <a class="code" href="multi_8h.html#a18a7e76c1666503b960dfdfa3cf9843f">curl_multi_timer_callback</a>);</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;  <span class="keywordflow">case</span> CURLMOPT_TIMERDATA:</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;    multi-&gt;<a class="code" href="struct_curl__multi.html#ac2edaddd7a320cc2b6bf7157300c7526">timer_userp</a> = va_arg(param, <span class="keywordtype">void</span> *);</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;  <span class="keywordflow">case</span> CURLMOPT_MAXCONNECTS:</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;    multi-&gt;<a class="code" href="struct_curl__multi.html#a08af434edc6a2950fd3c03df808c2b9f">maxconnects</a> = va_arg(param, <span class="keywordtype">long</span>);</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;  <span class="keywordflow">case</span> CURLMOPT_MAX_HOST_CONNECTIONS:</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;    multi-&gt;<a class="code" href="struct_curl__multi.html#a3bf5d8d42ca6dc800333e7f830f805b5">max_host_connections</a> = va_arg(param, <span class="keywordtype">long</span>);</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;  <span class="keywordflow">case</span> CURLMOPT_MAX_PIPELINE_LENGTH:</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;    multi-&gt;<a class="code" href="struct_curl__multi.html#a0b29ca948d79c169c92f28239fbdd6ea">max_pipeline_length</a> = va_arg(param, <span class="keywordtype">long</span>);</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;  <span class="keywordflow">case</span> CURLMOPT_CONTENT_LENGTH_PENALTY_SIZE:</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;    multi-&gt;<a class="code" href="struct_curl__multi.html#a160d98e6efb8334223d225ad4967a18f">content_length_penalty_size</a> = va_arg(param, <span class="keywordtype">long</span>);</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;  <span class="keywordflow">case</span> CURLMOPT_CHUNK_LENGTH_PENALTY_SIZE:</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;    multi-&gt;<a class="code" href="struct_curl__multi.html#a78c345b89537184d941eb2ced0a2e20e">chunk_length_penalty_size</a> = va_arg(param, <span class="keywordtype">long</span>);</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;  <span class="keywordflow">case</span> CURLMOPT_PIPELINING_SITE_BL:</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;    res = <a class="code" href="pipeline_8c.html#a6f401e68b71214127eff15c9f1626f15">Curl_pipeline_set_site_blacklist</a>(va_arg(param, <span class="keywordtype">char</span> **),</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;                                           &amp;multi-&gt;<a class="code" href="struct_curl__multi.html#a0badc572b3d02c4ac183a71dd59f0784">pipelining_site_bl</a>);</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;  <span class="keywordflow">case</span> CURLMOPT_PIPELINING_SERVER_BL:</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;    res = <a class="code" href="pipeline_8c.html#a4f8afb2e5c3f765f93c7f3a6d0c87e51">Curl_pipeline_set_server_blacklist</a>(va_arg(param, <span class="keywordtype">char</span> **),</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;                                             &amp;multi-&gt;<a class="code" href="struct_curl__multi.html#a08f57b6e1e94689d0be7963ed552d4ac">pipelining_server_bl</a>);</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;  <span class="keywordflow">case</span> CURLMOPT_MAX_TOTAL_CONNECTIONS:</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;    multi-&gt;<a class="code" href="struct_curl__multi.html#a3cc9d119c1f8eb1bb0eff5b7cbd2795a">max_total_connections</a> = va_arg(param, <span class="keywordtype">long</span>);</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;  <span class="keywordflow">default</span>:</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;    res = <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3afeaa68ddf000332d41ce915f8658cf4c">CURLM_UNKNOWN_OPTION</a>;</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;  }</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;  va_end(param);</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;  <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;}</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;<span class="comment">/* we define curl_multi_socket() in the public multi.h header */</span></div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;<span class="preprocessor">#undef curl_multi_socket</span></div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;</div><div class="line"><a name="l02796"></a><span class="lineno"><a class="line" href="multi_8c.html#ab0c732e91052fb624136ff8498f65b80"> 2796</a></span>&#160;<a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> <a class="code" href="multi_8c.html#ab0c732e91052fb624136ff8498f65b80">curl_multi_socket</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi, <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> s,</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;                            <span class="keywordtype">int</span> *running_handles)</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;{</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;  <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;  <span class="keywordflow">if</span>(multi-&gt;<a class="code" href="struct_curl__multi.html#a598ce59e5d016aee984ab282d66ed2bf">in_callback</a>)</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a02622c2fbef0b11a76595bbfd8353c6a">CURLM_RECURSIVE_API_CALL</a>;</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;  <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = multi_socket(multi, <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, s, 0, running_handles);</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a> &gt;= <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;    update_timer(multi);</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;}</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;</div><div class="line"><a name="l02808"></a><span class="lineno"><a class="line" href="multi_8c.html#a8b821fec78950af28d095dc7d6ab8435"> 2808</a></span>&#160;<a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> <a class="code" href="multi_8c.html#a8b821fec78950af28d095dc7d6ab8435">curl_multi_socket_action</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi, <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> s,</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;                                   <span class="keywordtype">int</span> ev_bitmask, <span class="keywordtype">int</span> *running_handles)</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;{</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;  <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;  <span class="keywordflow">if</span>(multi-&gt;<a class="code" href="struct_curl__multi.html#a598ce59e5d016aee984ab282d66ed2bf">in_callback</a>)</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a02622c2fbef0b11a76595bbfd8353c6a">CURLM_RECURSIVE_API_CALL</a>;</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;  <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = multi_socket(multi, <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>, s, ev_bitmask, running_handles);</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a> &gt;= <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;    update_timer(multi);</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;}</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;</div><div class="line"><a name="l02820"></a><span class="lineno"><a class="line" href="multi_8c.html#af94ff77a88620e06ac3e358b48f3199a"> 2820</a></span>&#160;<a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> <a class="code" href="multi_8c.html#af94ff77a88620e06ac3e358b48f3199a">curl_multi_socket_all</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi, <span class="keywordtype">int</span> *running_handles)</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;{</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;  <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;  <span class="keywordflow">if</span>(multi-&gt;<a class="code" href="struct_curl__multi.html#a598ce59e5d016aee984ab282d66ed2bf">in_callback</a>)</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a02622c2fbef0b11a76595bbfd8353c6a">CURLM_RECURSIVE_API_CALL</a>;</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;  <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = multi_socket(multi, <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>, <a class="code" href="curl_8h.html#ada0bbe252b7b370ef4e135b93b2fe71e">CURL_SOCKET_BAD</a>, 0, running_handles);</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a> &gt;= <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;    update_timer(multi);</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;}</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;<span class="keyword">static</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> <a class="code" href="test_8h.html#a5a82db8b40f056c5cf54cd44691f7dce">multi_timeout</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi,</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;                               <span class="keywordtype">long</span> *timeout_ms)</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;{</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;  <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structcurltime.html">curltime</a> tv_zero = {0, 0};</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;  <span class="keywordflow">if</span>(multi-&gt;<a class="code" href="struct_curl__multi.html#aed77ecd40ec6ec6830f8842dbcb51c19">timetree</a>) {</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;    <span class="comment">/* we have a tree of expire times */</span></div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;    <span class="keyword">struct </span><a class="code" href="structcurltime.html">curltime</a> <a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a> = <a class="code" href="timeval_8c.html#ae736e803680e1b7fa2b2868317b4b91f">Curl_now</a>();</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;    <span class="comment">/* splay the lowest to the bottom */</span></div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    multi-&gt;<a class="code" href="struct_curl__multi.html#aed77ecd40ec6ec6830f8842dbcb51c19">timetree</a> = <a class="code" href="splay_8c.html#a6ccb70532e79b4f1a427b08d4354b17b">Curl_splay</a>(tv_zero, multi-&gt;<a class="code" href="struct_curl__multi.html#aed77ecd40ec6ec6830f8842dbcb51c19">timetree</a>);</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="splay_8h.html#a843bf69fbb4d16b1487f45ad85916244">Curl_splaycomparekeys</a>(multi-&gt;<a class="code" href="struct_curl__multi.html#aed77ecd40ec6ec6830f8842dbcb51c19">timetree</a>-&gt;<a class="code" href="struct_curl__tree.html#a018a8b07590bb0b3ae03d877d25270e1">key</a>, <a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>) &gt; 0) {</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;      <span class="comment">/* some time left before expiration */</span></div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;      <a class="code" href="timeval_8h.html#aeb19832fd3e7f11c8d047d6824300e87">timediff_t</a> diff = <a class="code" href="timeval_8c.html#a93ce3158c8838916ed817489c98e37c4">Curl_timediff</a>(multi-&gt;<a class="code" href="struct_curl__multi.html#aed77ecd40ec6ec6830f8842dbcb51c19">timetree</a>-&gt;<a class="code" href="struct_curl__tree.html#a018a8b07590bb0b3ae03d877d25270e1">key</a>, <a class="code" href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a>);</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;      <span class="keywordflow">if</span>(diff &lt;= 0)</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;<span class="comment">         * Since we only provide millisecond resolution on the returned value</span></div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;<span class="comment">         * and the diff might be less than one millisecond here, we don&#39;t</span></div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;<span class="comment">         * return zero as that may cause short bursts of busyloops on fast</span></div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;<span class="comment">         * processors while the diff is still present but less than one</span></div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;<span class="comment">         * millisecond! instead we return 1 until the time is ripe.</span></div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;        *timeout_ms = 1;</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;        <span class="comment">/* this should be safe even on 64 bit archs, as we don&#39;t use that</span></div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;<span class="comment">           overly long timeouts */</span></div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;        *timeout_ms = (long)diff;</div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;    }</div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;      <span class="comment">/* 0 means immediately */</span></div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;      *timeout_ms = 0;</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;  }</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;    *timeout_ms = -1;</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a>;</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;}</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;</div><div class="line"><a name="l02871"></a><span class="lineno"><a class="line" href="multi_8c.html#a41cd181215332587c8de5aac65da3af1"> 2871</a></span>&#160;<a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> <a class="code" href="multi_8c.html#a41cd181215332587c8de5aac65da3af1">curl_multi_timeout</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi,</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;                             <span class="keywordtype">long</span> *timeout_ms)</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;{</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;  <span class="comment">/* First, make some basic checks that the CURLM handle is a good handle */</span></div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="multi_8c.html#ab6e53cbf757b0790ad040a27772544c4">GOOD_MULTI_HANDLE</a>(multi))</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a8876b8ad10b9b2e9ee4cfb22034803ed">CURLM_BAD_HANDLE</a>;</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;  <span class="keywordflow">if</span>(multi-&gt;<a class="code" href="struct_curl__multi.html#a598ce59e5d016aee984ab282d66ed2bf">in_callback</a>)</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a02622c2fbef0b11a76595bbfd8353c6a">CURLM_RECURSIVE_API_CALL</a>;</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="test_8h.html#a5a82db8b40f056c5cf54cd44691f7dce">multi_timeout</a>(multi, timeout_ms);</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;}</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;<span class="comment"> * Tell the application it should update its timers, if it subscribes to the</span></div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;<span class="comment"> * update timer callback.</span></div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> update_timer(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi)</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;{</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;  <span class="keywordtype">long</span> timeout_ms;</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;  <span class="keywordflow">if</span>(!multi-&gt;<a class="code" href="struct_curl__multi.html#a58b3bb3d36a7db5a6542c7586f1ced87">timer_cb</a>)</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="test_8h.html#a5a82db8b40f056c5cf54cd44691f7dce">multi_timeout</a>(multi, &amp;timeout_ms)) {</div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;  }</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;  <span class="keywordflow">if</span>(timeout_ms &lt; 0) {</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structcurltime.html">curltime</a> none = {0, 0};</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="splay_8h.html#a843bf69fbb4d16b1487f45ad85916244">Curl_splaycomparekeys</a>(none, multi-&gt;<a class="code" href="struct_curl__multi.html#a2e319cdf49b37a3035f7e2d1012d374e">timer_lastcall</a>)) {</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;      multi-&gt;<a class="code" href="struct_curl__multi.html#a2e319cdf49b37a3035f7e2d1012d374e">timer_lastcall</a> = none;</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;      <span class="comment">/* there&#39;s no timeout now but there was one previously, tell the app to</span></div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;<span class="comment">         disable it */</span></div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;      <span class="keywordflow">return</span> multi-&gt;<a class="code" href="struct_curl__multi.html#a58b3bb3d36a7db5a6542c7586f1ced87">timer_cb</a>(multi, -1, multi-&gt;<a class="code" href="struct_curl__multi.html#ac2edaddd7a320cc2b6bf7157300c7526">timer_userp</a>);</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;    }</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;  }</div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;  <span class="comment">/* When multi_timeout() is done, multi-&gt;timetree points to the node with the</span></div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;<span class="comment">   * timeout we got the (relative) time-out time for. We can thus easily check</span></div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;<span class="comment">   * if this is the same (fixed) time as we got in a previous call and then</span></div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;<span class="comment">   * avoid calling the callback again. */</span></div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="splay_8h.html#a843bf69fbb4d16b1487f45ad85916244">Curl_splaycomparekeys</a>(multi-&gt;<a class="code" href="struct_curl__multi.html#aed77ecd40ec6ec6830f8842dbcb51c19">timetree</a>-&gt;<a class="code" href="struct_curl__tree.html#a018a8b07590bb0b3ae03d877d25270e1">key</a>, multi-&gt;<a class="code" href="struct_curl__multi.html#a2e319cdf49b37a3035f7e2d1012d374e">timer_lastcall</a>) == 0)</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;  multi-&gt;<a class="code" href="struct_curl__multi.html#a2e319cdf49b37a3035f7e2d1012d374e">timer_lastcall</a> = multi-&gt;<a class="code" href="struct_curl__multi.html#aed77ecd40ec6ec6830f8842dbcb51c19">timetree</a>-&gt;<a class="code" href="struct_curl__tree.html#a018a8b07590bb0b3ae03d877d25270e1">key</a>;</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;  <span class="keywordflow">return</span> multi-&gt;<a class="code" href="struct_curl__multi.html#a58b3bb3d36a7db5a6542c7586f1ced87">timer_cb</a>(multi, timeout_ms, multi-&gt;<a class="code" href="struct_curl__multi.html#ac2edaddd7a320cc2b6bf7157300c7526">timer_userp</a>);</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;}</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;</div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;<span class="comment"> * multi_deltimeout()</span></div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;<span class="comment"> * Remove a given timestamp from the list of timeouts.</span></div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;multi_deltimeout(<span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>, <a class="code" href="urldata_8h.html#aabb7db968656c3ee0555ea3d8784310d">expire_id</a> eid)</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;{</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;  <span class="keyword">struct </span><a class="code" href="structcurl__llist__element.html">curl_llist_element</a> *e;</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;  <span class="keyword">struct </span><a class="code" href="structcurl__llist.html">curl_llist</a> *timeoutlist = &amp;<a class="code" href="structdata.html">data</a>-&gt;state.timeoutlist;</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;  <span class="comment">/* find and remove the specific node from the list */</span></div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;  <span class="keywordflow">for</span>(e = timeoutlist-&gt;<a class="code" href="structcurl__llist.html#a3f6e07aacbee78561127b0166cc28fe7">head</a>; e; e = e-&gt;<a class="code" href="structcurl__llist__element.html#a75de5ec93f47535d096929a045f46467">next</a>) {</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtime__node.html">time_node</a> *<a class="code" href="config_8d.html#a9fb4830d0cbef7d3cf48425ce59f580a">n</a> = (<span class="keyword">struct </span><a class="code" href="structtime__node.html">time_node</a> *)e-&gt;<a class="code" href="structcurl__llist__element.html#aa3c3cb90fae86e24d88eea4437bc61ab">ptr</a>;</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="config_8d.html#a9fb4830d0cbef7d3cf48425ce59f580a">n</a>-&gt;eid == <a class="code" href="structtime__node.html#a5ae77a54cda77d44f616d2234887ca8d">eid</a>) {</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;      <a class="code" href="llist_8c.html#a36b09b21eb5d63095a325575113df4f0">Curl_llist_remove</a>(timeoutlist, e, NULL);</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;    }</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;  }</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;}</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;<span class="comment"> * multi_addtimeout()</span></div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;<span class="comment"> * Add a timestamp to the list of timeouts. Keep the list sorted so that head</span></div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;<span class="comment"> * of list is always the timeout nearest in time.</span></div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;<span class="keyword">static</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a></div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;multi_addtimeout(<span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>,</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;                 <span class="keyword">struct</span> <a class="code" href="structcurltime.html">curltime</a> *stamp,</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;                 <a class="code" href="urldata_8h.html#aabb7db968656c3ee0555ea3d8784310d">expire_id</a> <a class="code" href="structtime__node.html#a5ae77a54cda77d44f616d2234887ca8d">eid</a>)</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;{</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;  <span class="keyword">struct </span><a class="code" href="structcurl__llist__element.html">curl_llist_element</a> *e;</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;  <span class="keyword">struct </span><a class="code" href="structtime__node.html">time_node</a> *node;</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;  <span class="keyword">struct </span><a class="code" href="structcurl__llist__element.html">curl_llist_element</a> *<a class="code" href="structcurl__llist__element.html#ab1cc9056ce530ed9893aa4b5b95dd257">prev</a> = NULL;</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="config_8d.html#a9fb4830d0cbef7d3cf48425ce59f580a">n</a>;</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;  <span class="keyword">struct </span><a class="code" href="structcurl__llist.html">curl_llist</a> *timeoutlist = &amp;<a class="code" href="structdata.html">data</a>-&gt;state.timeoutlist;</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;  node = &amp;<a class="code" href="structdata.html">data</a>-&gt;state.expires[eid];</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;</div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;  <span class="comment">/* copy the timestamp and id */</span></div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;  <a class="code" href="unit1304_8c.html#a82a69fcfe92d9db6dd585ccc532a2ab7">memcpy</a>(&amp;node-&gt;<a class="code" href="structtime__node.html#a9e686a2b7b5b979d88b5ccb1bfcff1a7">time</a>, stamp, <span class="keyword">sizeof</span>(*stamp));</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;  node-&gt;<a class="code" href="structtime__node.html#a5ae77a54cda77d44f616d2234887ca8d">eid</a> = eid; <span class="comment">/* also marks it as in use */</span></div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;  <a class="code" href="config_8d.html#a9fb4830d0cbef7d3cf48425ce59f580a">n</a> = <a class="code" href="llist_8c.html#a5695da52e80519cc2aae14bb325671d0">Curl_llist_count</a>(timeoutlist);</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="config_8d.html#a9fb4830d0cbef7d3cf48425ce59f580a">n</a>) {</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;    <span class="comment">/* find the correct spot in the list */</span></div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;    <span class="keywordflow">for</span>(e = timeoutlist-&gt;<a class="code" href="structcurl__llist.html#a3f6e07aacbee78561127b0166cc28fe7">head</a>; e; e = e-&gt;<a class="code" href="structcurl__llist__element.html#a75de5ec93f47535d096929a045f46467">next</a>) {</div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;      <span class="keyword">struct </span><a class="code" href="structtime__node.html">time_node</a> *check = (<span class="keyword">struct </span><a class="code" href="structtime__node.html">time_node</a> *)e-&gt;<a class="code" href="structcurl__llist__element.html#aa3c3cb90fae86e24d88eea4437bc61ab">ptr</a>;</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;      <a class="code" href="timeval_8h.html#aeb19832fd3e7f11c8d047d6824300e87">timediff_t</a> diff = <a class="code" href="timeval_8c.html#a93ce3158c8838916ed817489c98e37c4">Curl_timediff</a>(check-&gt;<a class="code" href="structtime__node.html#a9e686a2b7b5b979d88b5ccb1bfcff1a7">time</a>, node-&gt;<a class="code" href="structtime__node.html#a9e686a2b7b5b979d88b5ccb1bfcff1a7">time</a>);</div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;      <span class="keywordflow">if</span>(diff &gt; 0)</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;      prev = e;</div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;    }</div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;  }</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;  <span class="comment">/* else</span></div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;<span class="comment">     this is the first timeout on the list */</span></div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;</div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;  <a class="code" href="llist_8c.html#a9fb691307db5bfd5d29315b96b56ad2b">Curl_llist_insert_next</a>(timeoutlist, prev, node, &amp;node-&gt;<a class="code" href="structtime__node.html#aef50545dded0581dcdc6b60a08ef2246">list</a>);</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a>;</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;}</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;<span class="comment"> * Curl_expire()</span></div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;<span class="comment"> * given a number of milliseconds from now to use to set the &#39;act before</span></div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;<span class="comment"> * this&#39;-time for the transfer, to be extracted by curl_multi_timeout()</span></div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;<span class="comment"> * The timeout will be added to a queue of timeouts if it defines a moment in</span></div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;<span class="comment"> * time that is later than the current head of queue.</span></div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;<span class="comment"> * Expire replaces a former timeout using the same id if already set.</span></div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02994"></a><span class="lineno"><a class="line" href="multiif_8h.html#a82a4655a0b1568d2e9a2cfefc8942be1"> 2994</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="multi_8c.html#a759a3f675165554a5f5d6e784afa7fe0">Curl_expire</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>, time_t milli, <a class="code" href="urldata_8h.html#aabb7db968656c3ee0555ea3d8784310d">expire_id</a> <span class="keywordtype">id</span>)</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;{</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi = <a class="code" href="structdata.html">data</a>-&gt;multi;</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;  <span class="keyword">struct </span><a class="code" href="structcurltime.html">curltime</a> *nowp = &amp;<a class="code" href="structdata.html">data</a>-&gt;state.expiretime;</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;  <span class="keyword">struct </span><a class="code" href="structcurltime.html">curltime</a> <a class="code" href="cacert_8d.html#a858975e5da2b16954a88f19566bff526">set</a>;</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;  <span class="comment">/* this is only interesting while there is still an associated multi struct</span></div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;<span class="comment">     remaining! */</span></div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;  <span class="keywordflow">if</span>(!multi)</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;  <a class="code" href="curl__setup__once_8h.html#a23d7b88872d6ead46c978b567908d587">DEBUGASSERT</a>(<span class="keywordtype">id</span> &lt; <a class="code" href="urldata_8h.html#aabb7db968656c3ee0555ea3d8784310daeda48bfc68ac8006de41e3d6a8e932e0">EXPIRE_LAST</a>);</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;  <span class="keyword">set</span> = <a class="code" href="timeval_8c.html#ae736e803680e1b7fa2b2868317b4b91f">Curl_now</a>();</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;  <span class="keyword">set</span>.tv_sec += milli/1000;</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;  <span class="keyword">set</span>.tv_usec += (<span class="keywordtype">unsigned</span> int)(milli%1000)*1000;</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;  <span class="keywordflow">if</span>(<span class="keyword">set</span>.<a class="code" href="unit1303_8c.html#a2af6a518c72aaef1705aad4844572398">tv_usec</a> &gt;= 1000000) {</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;    <span class="keyword">set</span>.tv_sec++;</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;    <span class="keyword">set</span>.tv_usec -= 1000000;</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;  }</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;  <span class="comment">/* Remove any timer with the same id just in case. */</span></div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;  multi_deltimeout(<a class="code" href="structdata.html">data</a>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;  <span class="comment">/* Add it to the timer list.  It must stay in the list until it has expired</span></div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;<span class="comment">     in case we need to recompute the minimum timer later. */</span></div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;  multi_addtimeout(<a class="code" href="structdata.html">data</a>, &amp;<span class="keyword">set</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;</div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;  <span class="keywordflow">if</span>(nowp-&gt;<a class="code" href="structcurltime.html#aa037ee31cbd9bc40e07ebade62e7ad5d">tv_sec</a> || nowp-&gt;<a class="code" href="structcurltime.html#a2bb2442cdc8b9e4d2287805ce8febb17">tv_usec</a>) {</div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;    <span class="comment">/* This means that the struct is added as a node in the splay tree.</span></div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;<span class="comment">       Compare if the new time is earlier, and only remove-old/add-new if it</span></div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;<span class="comment">       is. */</span></div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;    <a class="code" href="timeval_8h.html#aeb19832fd3e7f11c8d047d6824300e87">timediff_t</a> diff = <a class="code" href="timeval_8c.html#a93ce3158c8838916ed817489c98e37c4">Curl_timediff</a>(<span class="keyword">set</span>, *nowp);</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>;</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;    <span class="keywordflow">if</span>(diff &gt; 0) {</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;      <span class="comment">/* The current splay tree entry is sooner than this new expiry time.</span></div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;<span class="comment">         We don&#39;t need to update our splay tree entry. */</span></div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;    }</div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;    <span class="comment">/* Since this is an updated time, we must remove the previous entry from</span></div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;<span class="comment">       the splay tree first and then re-add the new value */</span></div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;    <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="splay_8c.html#a72fa1f264be21b58928ad61c366cd234">Curl_splayremovebyaddr</a>(multi-&gt;<a class="code" href="struct_curl__multi.html#aed77ecd40ec6ec6830f8842dbcb51c19">timetree</a>,</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;                                &amp;<a class="code" href="structdata.html">data</a>-&gt;state.timenode,</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;                                &amp;multi-&gt;<a class="code" href="struct_curl__multi.html#aed77ecd40ec6ec6830f8842dbcb51c19">timetree</a>);</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>)</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;      <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Internal error removing splay node = %d\n&quot;</span>, <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>);</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;  }</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;  <span class="comment">/* Indicate that we are in the splay tree and insert the new timer expiry</span></div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;<span class="comment">     value since it is our local minimum. */</span></div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;  *nowp = <span class="keyword">set</span>;</div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;state.timenode.payload = <a class="code" href="get_8d.html#a38b0ef81b65f2aee282c8c217a123176">data</a>;</div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;  multi-&gt;<a class="code" href="struct_curl__multi.html#aed77ecd40ec6ec6830f8842dbcb51c19">timetree</a> = <a class="code" href="splay_8c.html#a60d524a540c7f6e3eaf9f2b912444f81">Curl_splayinsert</a>(*nowp, multi-&gt;<a class="code" href="struct_curl__multi.html#aed77ecd40ec6ec6830f8842dbcb51c19">timetree</a>,</div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;                                     &amp;<a class="code" href="structdata.html">data</a>-&gt;state.timenode);</div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;}</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;<span class="comment"> * Curl_expire_done()</span></div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;<span class="comment"> * Removes the expire timer. Marks it as done.</span></div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03059"></a><span class="lineno"><a class="line" href="multiif_8h.html#ab12ca318b29f9bd535afc9bea98b82bb"> 3059</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="multi_8c.html#ab12ca318b29f9bd535afc9bea98b82bb">Curl_expire_done</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>, <a class="code" href="urldata_8h.html#aabb7db968656c3ee0555ea3d8784310d">expire_id</a> <span class="keywordtype">id</span>)</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;{</div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;  <span class="comment">/* remove the timer, if there */</span></div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;  multi_deltimeout(<a class="code" href="structdata.html">data</a>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;}</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;<span class="comment"> * Curl_expire_clear()</span></div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;<span class="comment"> * Clear ALL timeout values for this handle.</span></div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03070"></a><span class="lineno"><a class="line" href="multiif_8h.html#a7a9f018ccced30e7c65ea89e2c85382f"> 3070</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="multi_8c.html#a7a9f018ccced30e7c65ea89e2c85382f">Curl_expire_clear</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>)</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;{</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi = <a class="code" href="structdata.html">data</a>-&gt;multi;</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;  <span class="keyword">struct </span><a class="code" href="structcurltime.html">curltime</a> *nowp = &amp;<a class="code" href="structdata.html">data</a>-&gt;state.expiretime;</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;  <span class="comment">/* this is only interesting while there is still an associated multi struct</span></div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;<span class="comment">     remaining! */</span></div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;  <span class="keywordflow">if</span>(!multi)</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;  <span class="keywordflow">if</span>(nowp-&gt;<a class="code" href="structcurltime.html#aa037ee31cbd9bc40e07ebade62e7ad5d">tv_sec</a> || nowp-&gt;<a class="code" href="structcurltime.html#a2bb2442cdc8b9e4d2287805ce8febb17">tv_usec</a>) {</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;    <span class="comment">/* Since this is an cleared time, we must remove the previous entry from</span></div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;<span class="comment">       the splay tree */</span></div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;    <span class="keyword">struct </span><a class="code" href="structcurl__llist.html">curl_llist</a> *list = &amp;<a class="code" href="structdata.html">data</a>-&gt;state.timeoutlist;</div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>;</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;    <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = <a class="code" href="splay_8c.html#a72fa1f264be21b58928ad61c366cd234">Curl_splayremovebyaddr</a>(multi-&gt;<a class="code" href="struct_curl__multi.html#aed77ecd40ec6ec6830f8842dbcb51c19">timetree</a>,</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;                                &amp;<a class="code" href="structdata.html">data</a>-&gt;state.timenode,</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;                                &amp;multi-&gt;<a class="code" href="struct_curl__multi.html#aed77ecd40ec6ec6830f8842dbcb51c19">timetree</a>);</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>)</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;      <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Internal error clearing splay node = %d\n&quot;</span>, <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>);</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;    <span class="comment">/* flush the timeout list too */</span></div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;    <span class="keywordflow">while</span>(list-&gt;<a class="code" href="structcurl__llist.html#abca9151666b85a2a95d44bbbe1dcf8b2">size</a> &gt; 0) {</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;      <a class="code" href="llist_8c.html#a36b09b21eb5d63095a325575113df4f0">Curl_llist_remove</a>(list, list-&gt;<a class="code" href="structcurl__llist.html#a04c1d20c09bc187d0eb71fbaf463a4b7">tail</a>, NULL);</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;    }</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;<span class="preprocessor">#ifdef DEBUGBUILD</span></div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;    <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Expire cleared\n&quot;</span>);</div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;    nowp-&gt;<a class="code" href="structcurltime.html#aa037ee31cbd9bc40e07ebade62e7ad5d">tv_sec</a> = 0;</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;    nowp-&gt;<a class="code" href="structcurltime.html#a2bb2442cdc8b9e4d2287805ce8febb17">tv_usec</a> = 0;</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;  }</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;}</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;</div><div class="line"><a name="l03108"></a><span class="lineno"><a class="line" href="multi_8c.html#aad205d4dbd91dccb8b440984d61daa40"> 3108</a></span>&#160;<a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a> <a class="code" href="multi_8c.html#aad205d4dbd91dccb8b440984d61daa40">curl_multi_assign</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi, <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> s,</div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;                            <span class="keywordtype">void</span> *hashp)</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;{</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__sh__entry.html">Curl_sh_entry</a> *there = NULL;</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;</div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;  <span class="keywordflow">if</span>(multi-&gt;<a class="code" href="struct_curl__multi.html#a598ce59e5d016aee984ab282d66ed2bf">in_callback</a>)</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a02622c2fbef0b11a76595bbfd8353c6a">CURLM_RECURSIVE_API_CALL</a>;</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;  there = sh_getentry(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#abab21812b094af393ac6e639bf4d3ee5">sockhash</a>, s);</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;  <span class="keywordflow">if</span>(!there)</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a13188cf491bdb9a8f77a5bed6365c34c">CURLM_BAD_SOCKET</a>;</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;</div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;  there-&gt;<a class="code" href="struct_curl__sh__entry.html#a7d846f0b4d94827cbcae2d9734ef3d26">socketp</a> = hashp;</div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;</div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a>;</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;}</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;</div><div class="line"><a name="l03126"></a><span class="lineno"><a class="line" href="multiif_8h.html#ab129de4f342cdcec38532d0bb93ccb1f"> 3126</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="multi_8c.html#ab129de4f342cdcec38532d0bb93ccb1f">Curl_multi_max_host_connections</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi)</div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;{</div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;  <span class="keywordflow">return</span> multi ? multi-&gt;<a class="code" href="struct_curl__multi.html#a3bf5d8d42ca6dc800333e7f830f805b5">max_host_connections</a> : 0;</div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;}</div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;</div><div class="line"><a name="l03131"></a><span class="lineno"><a class="line" href="multiif_8h.html#a71cd4fe5fdefeb0903cd832df16db9db"> 3131</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="multi_8c.html#a71cd4fe5fdefeb0903cd832df16db9db">Curl_multi_max_total_connections</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi)</div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;{</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;  <span class="keywordflow">return</span> multi ? multi-&gt;<a class="code" href="struct_curl__multi.html#a3cc9d119c1f8eb1bb0eff5b7cbd2795a">max_total_connections</a> : 0;</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;}</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;</div><div class="line"><a name="l03136"></a><span class="lineno"><a class="line" href="multiif_8h.html#a63f40c3d8a7a3ea3caf5820def647be3"> 3136</a></span>&#160;<a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> <a class="code" href="multi_8c.html#a63f40c3d8a7a3ea3caf5820def647be3">Curl_multi_content_length_penalty_size</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi)</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;{</div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;  <span class="keywordflow">return</span> multi ? multi-&gt;<a class="code" href="struct_curl__multi.html#a160d98e6efb8334223d225ad4967a18f">content_length_penalty_size</a> : 0;</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;}</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;</div><div class="line"><a name="l03141"></a><span class="lineno"><a class="line" href="multiif_8h.html#a91895f8ba819512924d4968161904b8c"> 3141</a></span>&#160;<a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> <a class="code" href="multi_8c.html#a91895f8ba819512924d4968161904b8c">Curl_multi_chunk_length_penalty_size</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi)</div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;{</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;  <span class="keywordflow">return</span> multi ? multi-&gt;<a class="code" href="struct_curl__multi.html#a78c345b89537184d941eb2ced0a2e20e">chunk_length_penalty_size</a> : 0;</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;}</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;</div><div class="line"><a name="l03146"></a><span class="lineno"><a class="line" href="multiif_8h.html#a89f33160c901e73e12eba2029168b967"> 3146</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structcurl__llist.html">curl_llist</a> *<a class="code" href="multi_8c.html#a89f33160c901e73e12eba2029168b967">Curl_multi_pipelining_site_bl</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi)</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;{</div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;  <span class="keywordflow">return</span> &amp;multi-&gt;<a class="code" href="struct_curl__multi.html#a0badc572b3d02c4ac183a71dd59f0784">pipelining_site_bl</a>;</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;}</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;</div><div class="line"><a name="l03151"></a><span class="lineno"><a class="line" href="multiif_8h.html#a21d084ab0c525928e9b6295de101ef63"> 3151</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structcurl__llist.html">curl_llist</a> *<a class="code" href="multi_8c.html#a21d084ab0c525928e9b6295de101ef63">Curl_multi_pipelining_server_bl</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi)</div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;{</div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;  <span class="keywordflow">return</span> &amp;multi-&gt;<a class="code" href="struct_curl__multi.html#a08f57b6e1e94689d0be7963ed552d4ac">pipelining_server_bl</a>;</div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;}</div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> process_pending_handles(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *multi)</div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;{</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;  <span class="keyword">struct </span><a class="code" href="structcurl__llist__element.html">curl_llist_element</a> *e = multi-&gt;<a class="code" href="struct_curl__multi.html#a27e434e78227c62c5107dc06754d2585">pending</a>.<a class="code" href="structcurl__llist.html#a3f6e07aacbee78561127b0166cc28fe7">head</a>;</div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;  <span class="keywordflow">if</span>(e) {</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a> = e-&gt;<a class="code" href="structcurl__llist__element.html#aa3c3cb90fae86e24d88eea4437bc61ab">ptr</a>;</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;    <a class="code" href="curl__setup__once_8h.html#a23d7b88872d6ead46c978b567908d587">DEBUGASSERT</a>(<a class="code" href="structdata.html">data</a>-&gt;mstate == <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383acd3890b70496f93a1fa8179ccde1e235">CURLM_STATE_CONNECT_PEND</a>);</div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;</div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;    <a class="code" href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a690ed7a251acfdba578c219baf9942ec">CURLM_STATE_CONNECT</a>);</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;    <span class="comment">/* Remove this node from the list */</span></div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;    <a class="code" href="llist_8c.html#a36b09b21eb5d63095a325575113df4f0">Curl_llist_remove</a>(&amp;<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#a27e434e78227c62c5107dc06754d2585">pending</a>, e, NULL);</div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;</div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;    <span class="comment">/* Make sure that the handle will be processed soonish. */</span></div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;    <a class="code" href="multi_8c.html#a759a3f675165554a5f5d6e784afa7fe0">Curl_expire</a>(<a class="code" href="structdata.html">data</a>, 0, <a class="code" href="urldata_8h.html#aabb7db968656c3ee0555ea3d8784310da325bcbe2ebf7e3de886d9af307372ca4">EXPIRE_RUN_NOW</a>);</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;  }</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;}</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;</div><div class="line"><a name="l03174"></a><span class="lineno"><a class="line" href="multiif_8h.html#af60eeb6175f9a25baeee40253c56330e"> 3174</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="multi_8c.html#af60eeb6175f9a25baeee40253c56330e">Curl_set_in_callback</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>, <span class="keywordtype">bool</span> <a class="code" href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a>)</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;{</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;  <span class="comment">/* might get called when there is no data pointer! */</span></div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>) {</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;multi_easy)</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;      <a class="code" href="structdata.html">data</a>-&gt;multi_easy-&gt;in_callback = <a class="code" href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a>;</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;multi)</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;      <a class="code" href="structdata.html">data</a>-&gt;multi-&gt;in_callback = <a class="code" href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a>;</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;  }</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;}</div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;</div><div class="line"><a name="l03185"></a><span class="lineno"><a class="line" href="multiif_8h.html#a65dd28329b4d8619fcebab1faaa12ee1"> 3185</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="multi_8c.html#a65dd28329b4d8619fcebab1faaa12ee1">Curl_is_in_callback</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="unit1608_8c.html#a8e67ff5c12b8bbb5baf741515fa674bb">easy</a>)</div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;{</div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;  <span class="keywordflow">return</span> ((<a class="code" href="unit1608_8c.html#a8e67ff5c12b8bbb5baf741515fa674bb">easy</a>-&gt;<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a> &amp;&amp; <a class="code" href="unit1608_8c.html#a8e67ff5c12b8bbb5baf741515fa674bb">easy</a>-&gt;<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#a598ce59e5d016aee984ab282d66ed2bf">in_callback</a>) ||</div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;          (<a class="code" href="unit1608_8c.html#a8e67ff5c12b8bbb5baf741515fa674bb">easy</a>-&gt;<a class="code" href="struct_curl__easy.html#a0cf0e1b6e7bde28287c58f4453453d73">multi_easy</a> &amp;&amp; <a class="code" href="unit1608_8c.html#a8e67ff5c12b8bbb5baf741515fa674bb">easy</a>-&gt;<a class="code" href="struct_curl__easy.html#a0cf0e1b6e7bde28287c58f4453453d73">multi_easy</a>-&gt;<a class="code" href="struct_curl__multi.html#a598ce59e5d016aee984ab282d66ed2bf">in_callback</a>));</div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;}</div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;</div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;<span class="preprocessor">#ifdef DEBUGBUILD</span></div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;<span class="keywordtype">void</span> Curl_multi_dump(<span class="keyword">struct</span> <a class="code" href="struct_curl__multi.html">Curl_multi</a> *<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>)</div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;{</div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="get_8d.html#a38b0ef81b65f2aee282c8c217a123176">data</a>;</div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;</div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;  <a class="code" href="curl__printf_8h.html#aab6e63106cf29e5160e5c2d63db86d27">fprintf</a>(stderr, <span class="stringliteral">&quot;* Multi status: %d handles, %d alive\n&quot;</span>,</div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;          <a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#a0f511dbae6387301f9d6623987609b25">num_easy</a>, <a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#aa9e3ad6466ada3035eecca089efc513b">num_alive</a>);</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;  <span class="keywordflow">for</span>(<a class="code" href="structdata.html">data</a> = <a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>-&gt;<a class="code" href="struct_curl__multi.html#af45f45ebf8c94b7510d0571349786e75">easyp</a>; <a class="code" href="structdata.html">data</a>; <a class="code" href="structdata.html">data</a> = <a class="code" href="structdata.html">data</a>-&gt;next) {</div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;mstate &lt; <a class="code" href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a9c82cd8d2874a9b075dcac72b9e50800">CURLM_STATE_COMPLETED</a>) {</div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;      <span class="comment">/* only display handles that are not completed */</span></div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;      <a class="code" href="curl__printf_8h.html#aab6e63106cf29e5160e5c2d63db86d27">fprintf</a>(stderr, <span class="stringliteral">&quot;handle %p, state %s, %d sockets\n&quot;</span>,</div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;              (<span class="keywordtype">void</span> *)<a class="code" href="structdata.html">data</a>,</div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;              statename[<a class="code" href="structdata.html">data</a>-&gt;mstate], <a class="code" href="structdata.html">data</a>-&gt;numsocks);</div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;      <span class="keywordflow">for</span>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &lt; <a class="code" href="structdata.html">data</a>-&gt;numsocks; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++) {</div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;        <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> s = <a class="code" href="structdata.html">data</a>-&gt;sockets[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>];</div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;        <span class="keyword">struct </span><a class="code" href="struct_curl__sh__entry.html">Curl_sh_entry</a> *entry = sh_getentry(&amp;multi-&gt;<a class="code" href="struct_curl__multi.html#abab21812b094af393ac6e639bf4d3ee5">sockhash</a>, s);</div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;        <a class="code" href="curl__printf_8h.html#aab6e63106cf29e5160e5c2d63db86d27">fprintf</a>(stderr, <span class="stringliteral">&quot;%d &quot;</span>, (<span class="keywordtype">int</span>)s);</div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;        <span class="keywordflow">if</span>(!entry) {</div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;          <a class="code" href="curl__printf_8h.html#aab6e63106cf29e5160e5c2d63db86d27">fprintf</a>(stderr, <span class="stringliteral">&quot;INTERNAL CONFUSION\n&quot;</span>);</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;          <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;        }</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;        <a class="code" href="curl__printf_8h.html#aab6e63106cf29e5160e5c2d63db86d27">fprintf</a>(stderr, <span class="stringliteral">&quot;[%s %s] &quot;</span>,</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;                entry-&gt;<a class="code" href="struct_curl__sh__entry.html#ae5d8bcf6fe986e6c2b315b0b4fcddcc2">action</a>&amp;<a class="code" href="multi_8h.html#ae6c11d08c009204cdad567e762fa1716">CURL_POLL_IN</a>?<span class="stringliteral">&quot;RECVING&quot;</span>:<span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;                entry-&gt;<a class="code" href="struct_curl__sh__entry.html#ae5d8bcf6fe986e6c2b315b0b4fcddcc2">action</a>&amp;<a class="code" href="multi_8h.html#a062838fbdac95bf37a1c6b3b415f49a9">CURL_POLL_OUT</a>?<span class="stringliteral">&quot;SENDING&quot;</span>:<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;      }</div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;numsocks)</div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;        <a class="code" href="curl__printf_8h.html#aab6e63106cf29e5160e5c2d63db86d27">fprintf</a>(stderr, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;    }</div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;  }</div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;}</div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="multi_8c_html_ab6e53cbf757b0790ad040a27772544c4"><div class="ttname"><a href="multi_8c.html#ab6e53cbf757b0790ad040a27772544c4">GOOD_MULTI_HANDLE</a></div><div class="ttdeci">#define GOOD_MULTI_HANDLE(x)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00070">multi.c:70</a></div></div>
<div class="ttc" id="curl__memory_8h_html_a9cc854374299a1dd933bf62029761768"><div class="ttname"><a href="curl__memory_8h.html#a9cc854374299a1dd933bf62029761768">free</a></div><div class="ttdeci">#define free(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="curl__memory_8h_source.html#l00130">curl_memory.h:130</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951aaa7a948caaac0addf8754794663f48b1"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951aaa7a948caaac0addf8754794663f48b1">CURLE_OPERATION_TIMEDOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00498">curl.h:498</a></div></div>
<div class="ttc" id="multi_8c_html_ac7cec4f440d3f46154fc1d0220d2f1dc"><div class="ttname"><a href="multi_8c.html#ac7cec4f440d3f46154fc1d0220d2f1dc">Curl_multi_handle</a></div><div class="ttdeci">struct Curl_multi * Curl_multi_handle(int hashsize, int chashsize)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00328">multi.c:328</a></div></div>
<div class="ttc" id="url_8c_html_aed7fbd02067820a27a7c58162e3b7812"><div class="ttname"><a href="url_8c.html#aed7fbd02067820a27a7c58162e3b7812">Curl_connect</a></div><div class="ttdeci">CURLcode Curl_connect(struct Curl_easy *data, struct connectdata **in_connect, bool *asyncp, bool *protocol_done)</div><div class="ttdef"><b>Definition:</b> <a href="url_8c_source.html#l04137">url.c:4137</a></div></div>
<div class="ttc" id="structtime__node_html"><div class="ttname"><a href="structtime__node.html">time_node</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01222">urldata.h:1222</a></div></div>
<div class="ttc" id="multihandle_8h_html_aef4270d2c08f187bc6a2d434c782b383a976dd1b43102af21a6df65c22fad7880"><div class="ttname"><a href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a976dd1b43102af21a6df65c22fad7880">CURLM_STATE_WAITPROXYCONNECT</a></div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00043">multihandle.h:43</a></div></div>
<div class="ttc" id="struct_curl__easy_html_a15aced4a015c44ff454787debee23520"><div class="ttname"><a href="struct_curl__easy.html#a15aced4a015c44ff454787debee23520">Curl_easy::state</a></div><div class="ttdeci">struct UrlState state</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01795">urldata.h:1795</a></div></div>
<div class="ttc" id="structconnectdata_html_a6f14f579b08c62c8114a72b487e9cedf"><div class="ttname"><a href="structconnectdata.html#a6f14f579b08c62c8114a72b487e9cedf">connectdata::recv_pipe</a></div><div class="ttdeci">struct curl_llist recv_pipe</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00965">urldata.h:965</a></div></div>
<div class="ttc" id="url_8h_html_a5eef24a1090105370832043771d44f1e"><div class="ttname"><a href="url_8h.html#a5eef24a1090105370832043771d44f1e">CONNECT_FIRSTSOCKET_PROXY_SSL</a></div><div class="ttdeci">#define CONNECT_FIRSTSOCKET_PROXY_SSL()</div><div class="ttdef"><b>Definition:</b> <a href="url_8h_source.html#l00103">url.h:103</a></div></div>
<div class="ttc" id="struct_curl__sh__entry_html_aaacf664dc2b48441883d762e3a938014"><div class="ttname"><a href="struct_curl__sh__entry.html#aaacf664dc2b48441883d762e3a938014">Curl_sh_entry::socket</a></div><div class="ttdeci">curl_socket_t socket</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00198">multi.c:198</a></div></div>
<div class="ttc" id="structcurl__hash_html"><div class="ttname"><a href="structcurl__hash.html">curl_hash</a></div><div class="ttdef"><b>Definition:</b> <a href="hash_8h_source.html#l00046">hash.h:46</a></div></div>
<div class="ttc" id="splay_8h_html_a843bf69fbb4d16b1487f45ad85916244"><div class="ttname"><a href="splay_8h.html#a843bf69fbb4d16b1487f45ad85916244">Curl_splaycomparekeys</a></div><div class="ttdeci">#define Curl_splaycomparekeys(i, j)</div><div class="ttdef"><b>Definition:</b> <a href="splay_8h_source.html#l00057">splay.h:57</a></div></div>
<div class="ttc" id="ftp_8c_html_a77812d4945cd21094debbd06962f0f01"><div class="ttname"><a href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a></div><div class="ttdeci">#define state(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="ftp_8c_source.html#l00101">ftp.c:101</a></div></div>
<div class="ttc" id="struct_connect_bits_html_a7a7b20d08be448324d83ed41df90adfb"><div class="ttname"><a href="struct_connect_bits.html#a7a7b20d08be448324d83ed41df90adfb">ConnectBits::httpproxy</a></div><div class="ttdeci">bool httpproxy</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00388">urldata.h:388</a></div></div>
<div class="ttc" id="share_8h_html"><div class="ttname"><a href="share_8h.html">share.h</a></div></div>
<div class="ttc" id="struct_curl__async_html_ad332b101ad0d9229113ca378e7909f29"><div class="ttname"><a href="struct_curl__async.html#ad332b101ad0d9229113ca378e7909f29">Curl_async::dns</a></div><div class="ttdeci">struct Curl_dns_entry * dns</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00474">urldata.h:474</a></div></div>
<div class="ttc" id="structconnectdata_html_a9312f162d29fe7f59bc2b5dbeda85d9d"><div class="ttname"><a href="structconnectdata.html#a9312f162d29fe7f59bc2b5dbeda85d9d">connectdata::bits</a></div><div class="ttdeci">struct ConnectBits bits</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00894">urldata.h:894</a></div></div>
<div class="ttc" id="struct_connect_bits_html_ae55bdf35c39d2f5556e9ea5576b9b92e"><div class="ttname"><a href="struct_connect_bits.html#ae55bdf35c39d2f5556e9ea5576b9b92e">ConnectBits::conn_to_host</a></div><div class="ttdeci">bool conn_to_host</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00383">urldata.h:383</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951ae6d701fdcc9728db65dadb0ec7d1eec1"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951ae6d701fdcc9728db65dadb0ec7d1eec1">CURLE_RECV_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00527">curl.h:527</a></div></div>
<div class="ttc" id="url_8c_html_ab7f9231aaae49536ceb7c7ea5431f6de"><div class="ttname"><a href="url_8c.html#ab7f9231aaae49536ceb7c7ea5431f6de">Curl_removeHandleFromPipeline</a></div><div class="ttdeci">int Curl_removeHandleFromPipeline(struct Curl_easy *handle, struct curl_llist *pipeline)</div><div class="ttdef"><b>Definition:</b> <a href="url_8c_source.html#l00855">url.c:855</a></div></div>
<div class="ttc" id="hostip_8c_html_a9114f6a0239d0c123cc523c1e37b9c20"><div class="ttname"><a href="hostip_8c.html#a9114f6a0239d0c123cc523c1e37b9c20">Curl_once_resolved</a></div><div class="ttdeci">CURLcode Curl_once_resolved(struct connectdata *conn, bool *protocol_done)</div><div class="ttdef"><b>Definition:</b> <a href="hostip_8c_source.html#l01093">hostip.c:1093</a></div></div>
<div class="ttc" id="transfer_8c_html_a96a72bb80c85af1210d7fc49244920e9"><div class="ttname"><a href="transfer_8c.html#a96a72bb80c85af1210d7fc49244920e9">Curl_follow</a></div><div class="ttdeci">CURLcode Curl_follow(struct Curl_easy *data, char *newurl, followtype type)</div><div class="ttdef"><b>Definition:</b> <a href="transfer_8c_source.html#l01482">transfer.c:1482</a></div></div>
<div class="ttc" id="multi_8h_html_a65ca5de50d101fb96d6f58a5fea6241d"><div class="ttname"><a href="multi_8h.html#a65ca5de50d101fb96d6f58a5fea6241d">curl_socket_callback</a></div><div class="ttdeci">int(* curl_socket_callback)(CURL *easy, curl_socket_t s, int what, void *userp, void *socketp)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00270">multi.h:270</a></div></div>
<div class="ttc" id="multi_8c_html_ae84f9596ab8955a07e25580f1828a975"><div class="ttname"><a href="multi_8c.html#ae84f9596ab8955a07e25580f1828a975">Curl_multi_handlePipeBreak</a></div><div class="ttdeci">void Curl_multi_handlePipeBreak(struct Curl_easy *data)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00816">multi.c:816</a></div></div>
<div class="ttc" id="struct_curl__easy_html"><div class="ttname"><a href="struct_curl__easy.html">Curl_easy</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01755">urldata.h:1755</a></div></div>
<div class="ttc" id="multi_8h_html_a92acc8d3a23eaae72955b8a8b22c83e3afeaa68ddf000332d41ce915f8658cf4c"><div class="ttname"><a href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3afeaa68ddf000332d41ce915f8658cf4c">CURLM_UNKNOWN_OPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00070">multi.h:70</a></div></div>
<div class="ttc" id="multi_8c_html_a5ebcf65dc21312fc068b95865b214538"><div class="ttname"><a href="multi_8c.html#a5ebcf65dc21312fc068b95865b214538">curl_multi_fdset</a></div><div class="ttdeci">CURLMcode curl_multi_fdset(struct Curl_multi *multi, fd_set *read_fd_set, fd_set *write_fd_set, fd_set *exc_fd_set, int *max_fd)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00938">multi.c:938</a></div></div>
<div class="ttc" id="conncache_8h_html"><div class="ttname"><a href="conncache_8h.html">conncache.h</a></div></div>
<div class="ttc" id="hash_8c_html_ad6fcf4d87ffe2648f214142d0288c8ee"><div class="ttname"><a href="hash_8c.html#ad6fcf4d87ffe2648f214142d0288c8ee">Curl_hash_init</a></div><div class="ttdeci">int Curl_hash_init(struct curl_hash *h, int slots, hash_function hfunc, comp_function comparator, curl_hash_dtor dtor)</div><div class="ttdef"><b>Definition:</b> <a href="hash_8c_source.html#l00057">hash.c:57</a></div></div>
<div class="ttc" id="multihandle_8h_html_aef4270d2c08f187bc6a2d434c782b383ad02f91c2d7df2d24690b43e095193787"><div class="ttname"><a href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383ad02f91c2d7df2d24690b43e095193787">CURLM_STATE_TOOFAST</a></div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00056">multihandle.h:56</a></div></div>
<div class="ttc" id="struct_curl__multi_html_a58b3bb3d36a7db5a6542c7586f1ced87"><div class="ttname"><a href="struct_curl__multi.html#a58b3bb3d36a7db5a6542c7586f1ced87">Curl_multi::timer_cb</a></div><div class="ttdeci">curl_multi_timer_callback timer_cb</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00151">multihandle.h:151</a></div></div>
<div class="ttc" id="connect_8h_html_a0f98be540dd5a5f56c9ec98dc2489661"><div class="ttname"><a href="connect_8h.html#a0f98be540dd5a5f56c9ec98dc2489661">connclose</a></div><div class="ttdeci">#define connclose(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="connect_8h_source.html#l00145">connect.h:145</a></div></div>
<div class="ttc" id="multihandle_8h_html_aef4270d2c08f187bc6a2d434c782b383a38e0891b78ed6418ac3509e87c7b02f4"><div class="ttname"><a href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a38e0891b78ed6418ac3509e87c7b02f4">CURLM_STATE_DO_MORE</a></div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00052">multihandle.h:52</a></div></div>
<div class="ttc" id="structcurl__waitfd_html_ae4712fac510d50249e1a430a3d160a17"><div class="ttname"><a href="structcurl__waitfd.html#ae4712fac510d50249e1a430a3d160a17">curl_waitfd::fd</a></div><div class="ttdeci">curl_socket_t fd</div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00113">multi.h:113</a></div></div>
<div class="ttc" id="struct_curl__multi_html_a91630f04dcc2513676ee2f3f0879feed"><div class="ttname"><a href="struct_curl__multi.html#a91630f04dcc2513676ee2f3f0879feed">Curl_multi::pipelining</a></div><div class="ttdeci">long pipelining</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00116">multihandle.h:116</a></div></div>
<div class="ttc" id="hostip_8c_html_a77525441d6420606360f8430fa9c15ea"><div class="ttname"><a href="hostip_8c.html#a77525441d6420606360f8430fa9c15ea">Curl_hostcache_prune</a></div><div class="ttdeci">void Curl_hostcache_prune(struct Curl_easy *data)</div><div class="ttdef"><b>Definition:</b> <a href="hostip_8c_source.html#l00263">hostip.c:263</a></div></div>
<div class="ttc" id="urldata_8h_html_aabb7db968656c3ee0555ea3d8784310da325bcbe2ebf7e3de886d9af307372ca4"><div class="ttname"><a href="urldata_8h.html#aabb7db968656c3ee0555ea3d8784310da325bcbe2ebf7e3de886d9af307372ca4">EXPIRE_RUN_NOW</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01212">urldata.h:1212</a></div></div>
<div class="ttc" id="multi_8c_html_ab12ca318b29f9bd535afc9bea98b82bb"><div class="ttname"><a href="multi_8c.html#ab12ca318b29f9bd535afc9bea98b82bb">Curl_expire_done</a></div><div class="ttdeci">void Curl_expire_done(struct Curl_easy *data, expire_id id)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l03059">multi.c:3059</a></div></div>
<div class="ttc" id="multi_8h_html_ab807e242cd069d4496105fda9be157e6"><div class="ttname"><a href="multi_8h.html#ab807e242cd069d4496105fda9be157e6">CURL_WAIT_POLLOUT</a></div><div class="ttdeci">#define CURL_WAIT_POLLOUT</div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00110">multi.h:110</a></div></div>
<div class="ttc" id="splay_8c_html_adacf40f6d35d94c27425a306898a6da2"><div class="ttname"><a href="splay_8c.html#adacf40f6d35d94c27425a306898a6da2">Curl_splaygetbest</a></div><div class="ttdeci">struct Curl_tree * Curl_splaygetbest(struct curltime i, struct Curl_tree *t, struct Curl_tree **removed)</div><div class="ttdef"><b>Definition:</b> <a href="splay_8c_source.html#l00153">splay.c:153</a></div></div>
<div class="ttc" id="structcurl__waitfd_html_a14e87b528f4a052ec65edbc14b6ab080"><div class="ttname"><a href="structcurl__waitfd.html#a14e87b528f4a052ec65edbc14b6ab080">curl_waitfd::revents</a></div><div class="ttdeci">short revents</div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00115">multi.h:115</a></div></div>
<div class="ttc" id="wildcard_8c_html_a32768c48565988ec546842a3c4c9c433"><div class="ttname"><a href="wildcard_8c.html#a32768c48565988ec546842a3c4c9c433">Curl_wildcard_dtor</a></div><div class="ttdeci">void Curl_wildcard_dtor(struct WildcardData *wc)</div><div class="ttdef"><b>Definition:</b> <a href="wildcard_8c_source.html#l00047">wildcard.c:47</a></div></div>
<div class="ttc" id="transfer_8c_html_ac06679494870ed2a702de92759b06c7d"><div class="ttname"><a href="transfer_8c.html#ac06679494870ed2a702de92759b06c7d">Curl_readwrite</a></div><div class="ttdeci">CURLcode Curl_readwrite(struct connectdata *conn, struct Curl_easy *data, bool *done, bool *comeback)</div><div class="ttdef"><b>Definition:</b> <a href="transfer_8c_source.html#l01120">transfer.c:1120</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951a3fc9cf5326ee71f9c205ebfd42f221f9"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951a3fc9cf5326ee71f9c205ebfd42f221f9">CURLE_HTTP2_STREAM</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00581">curl.h:581</a></div></div>
<div class="ttc" id="multi_8c_html_ad00e77448df8f1b5da892c126e7721fc"><div class="ttname"><a href="multi_8c.html#ad00e77448df8f1b5da892c126e7721fc">init_multistate_func</a></div><div class="ttdeci">void(* init_multistate_func)(struct Curl_easy *data)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00109">multi.c:109</a></div></div>
<div class="ttc" id="structproxy__info_html_ae2cc9c2eb5c4ea0c4b92bf067e391bdc"><div class="ttname"><a href="structproxy__info.html#ae2cc9c2eb5c4ea0c4b92bf067e391bdc">proxy_info::host</a></div><div class="ttdeci">struct hostname host</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00752">urldata.h:752</a></div></div>
<div class="ttc" id="progress_8c_html_a1344967836d86ae13b5739ed0a6e6916"><div class="ttname"><a href="progress_8c.html#a1344967836d86ae13b5739ed0a6e6916">Curl_pgrsTime</a></div><div class="ttdeci">void Curl_pgrsTime(struct Curl_easy *data, timerid timer)</div><div class="ttdef"><b>Definition:</b> <a href="progress_8c_source.html#l00166">progress.c:166</a></div></div>
<div class="ttc" id="urldata_8h_html_a56b23efdd8d04b0179b52224a251bcb7"><div class="ttname"><a href="urldata_8h.html#a56b23efdd8d04b0179b52224a251bcb7">FIRSTSOCKET</a></div><div class="ttdeci">#define FIRSTSOCKET</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00480">urldata.h:480</a></div></div>
<div class="ttc" id="structconnectdata_html_a7ab37820430680c72aa59e5ce65167e2"><div class="ttname"><a href="structconnectdata.html#a7ab37820430680c72aa59e5ce65167e2">connectdata::send_pipe</a></div><div class="ttdeci">struct curl_llist send_pipe</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00963">urldata.h:963</a></div></div>
<div class="ttc" id="structcurltime_html_aa037ee31cbd9bc40e07ebade62e7ad5d"><div class="ttname"><a href="structcurltime.html#aa037ee31cbd9bc40e07ebade62e7ad5d">curltime::tv_sec</a></div><div class="ttdeci">time_t tv_sec</div><div class="ttdef"><b>Definition:</b> <a href="timeval_8h_source.html#l00034">timeval.h:34</a></div></div>
<div class="ttc" id="multihandle_8h_html_aef4270d2c08f187bc6a2d434c782b383a5e6dec1bb80d819e0697aea452174cc4"><div class="ttname"><a href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a5e6dec1bb80d819e0697aea452174cc4">CURLM_STATE_MSGSENT</a></div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00059">multihandle.h:59</a></div></div>
<div class="ttc" id="struct_curl__async_html_a8e945db1e4a4c9cc6d47d8952e1fa23b"><div class="ttname"><a href="struct_curl__async.html#a8e945db1e4a4c9cc6d47d8952e1fa23b">Curl_async::done</a></div><div class="ttdeci">bool done</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00475">urldata.h:475</a></div></div>
<div class="ttc" id="multihandle_8h_html_aef4270d2c08f187bc6a2d434c782b383a03e0f2a793bcf8e8fc57c441002fa193"><div class="ttname"><a href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a03e0f2a793bcf8e8fc57c441002fa193">CURLM_STATE_SENDPROTOCONNECT</a></div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00046">multihandle.h:46</a></div></div>
<div class="ttc" id="multi_8c_html_af94ff77a88620e06ac3e358b48f3199a"><div class="ttname"><a href="multi_8c.html#af94ff77a88620e06ac3e358b48f3199a">curl_multi_socket_all</a></div><div class="ttdeci">CURLMcode curl_multi_socket_all(struct Curl_multi *multi, int *running_handles)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l02820">multi.c:2820</a></div></div>
<div class="ttc" id="pipeline_8c_html_ab23909b29ad0155f43bcf875f130ae8b"><div class="ttname"><a href="pipeline_8c.html#ab23909b29ad0155f43bcf875f130ae8b">Curl_add_handle_to_pipeline</a></div><div class="ttdeci">CURLcode Curl_add_handle_to_pipeline(struct Curl_easy *handle, struct connectdata *conn)</div><div class="ttdef"><b>Definition:</b> <a href="pipeline_8c_source.html#l00103">pipeline.c:103</a></div></div>
<div class="ttc" id="multi_8c_html_a20ed1fa1c4fc98dd0a9dbf5b84e020dc"><div class="ttname"><a href="multi_8c.html#a20ed1fa1c4fc98dd0a9dbf5b84e020dc">Curl_multi_add_perform</a></div><div class="ttdeci">CURLMcode Curl_multi_add_perform(struct Curl_multi *multi, struct Curl_easy *data, struct connectdata *conn)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l01186">multi.c:1186</a></div></div>
<div class="ttc" id="http__proxy_8c_html_a23d5abbb021d10ac416259cad0495c61"><div class="ttname"><a href="http__proxy_8c.html#a23d5abbb021d10ac416259cad0495c61">Curl_connect_free</a></div><div class="ttdeci">void Curl_connect_free(struct Curl_easy *data)</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy_8c_source.html#l00644">http_proxy.c:644</a></div></div>
<div class="ttc" id="connect_8h_html_a39c490691a02b6643d80882c12b189ed"><div class="ttname"><a href="connect_8h.html#a39c490691a02b6643d80882c12b189ed">streamclose</a></div><div class="ttdeci">#define streamclose(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="connect_8h_source.html#l00144">connect.h:144</a></div></div>
<div class="ttc" id="struct_curl__tree_html"><div class="ttname"><a href="struct_curl__tree.html">Curl_tree</a></div><div class="ttdef"><b>Definition:</b> <a href="splay_8h_source.html#l00027">splay.h:27</a></div></div>
<div class="ttc" id="transfer_8c_html_a6afc3b6e11b658604fb00a32646c2f15"><div class="ttname"><a href="transfer_8c.html#a6afc3b6e11b658604fb00a32646c2f15">Curl_posttransfer</a></div><div class="ttdeci">CURLcode Curl_posttransfer(struct Curl_easy *data)</div><div class="ttdef"><b>Definition:</b> <a href="transfer_8c_source.html#l01463">transfer.c:1463</a></div></div>
<div class="ttc" id="wildcard_8h_html_ab4724474e988ca4793d666e449cd2b0aa3b20ef4cea470a653b7d611a040b1354"><div class="ttname"><a href="wildcard_8h.html#ab4724474e988ca4793d666e449cd2b0aa3b20ef4cea470a653b7d611a040b1354">CURLWC_SKIP</a></div><div class="ttdef"><b>Definition:</b> <a href="wildcard_8h_source.html#l00037">wildcard.h:37</a></div></div>
<div class="ttc" id="curl_8h_html_ada0bbe252b7b370ef4e135b93b2fe71e"><div class="ttname"><a href="curl_8h.html#ada0bbe252b7b370ef4e135b93b2fe71e">CURL_SOCKET_BAD</a></div><div class="ttdeci">#define CURL_SOCKET_BAD</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00131">curl.h:131</a></div></div>
<div class="ttc" id="http__proxy_8h_html"><div class="ttname"><a href="http__proxy_8h.html">http_proxy.h</a></div></div>
<div class="ttc" id="sigpipe_8h_html_a5748ed27a059e06d2d1e530d76fd2d49"><div class="ttname"><a href="sigpipe_8h.html#a5748ed27a059e06d2d1e530d76fd2d49">sigpipe_ignore</a></div><div class="ttdeci">#define sigpipe_ignore(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="sigpipe_8h_source.html#l00073">sigpipe.h:73</a></div></div>
<div class="ttc" id="url_8c_html_a3cd816b52d9e4d2393ce905dd98e57a9"><div class="ttname"><a href="url_8c.html#a3cd816b52d9e4d2393ce905dd98e57a9">Curl_disconnect</a></div><div class="ttdeci">CURLcode Curl_disconnect(struct Curl_easy *data, struct connectdata *conn, bool dead_connection)</div><div class="ttdef"><b>Definition:</b> <a href="url_8c_source.html#l00751">url.c:751</a></div></div>
<div class="ttc" id="multi_8h_html_a92acc8d3a23eaae72955b8a8b22c83e3a0f2a032f9bfe05ff2f3b5fc74d01f7eb"><div class="ttname"><a href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a0f2a032f9bfe05ff2f3b5fc74d01f7eb">CURLM_ADDED_ALREADY</a></div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00071">multi.h:71</a></div></div>
<div class="ttc" id="struct_url_state_html_a531a034bab8a4c3d977938970508bff6"><div class="ttname"><a href="struct_url_state.html#a531a034bab8a4c3d977938970508bff6">UrlState::timeoutlist</a></div><div class="ttdeci">struct curl_llist timeoutlist</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01308">urldata.h:1308</a></div></div>
<div class="ttc" id="connect_8h_html"><div class="ttname"><a href="connect_8h.html">connect.h</a></div></div>
<div class="ttc" id="struct_curl__sh__entry_html"><div class="ttname"><a href="struct_curl__sh__entry.html">Curl_sh_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00195">multi.c:195</a></div></div>
<div class="ttc" id="sendf_8h_html_ae8e06000059e436c9c404603126718d6"><div class="ttname"><a href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a></div><div class="ttdeci">#define failf</div><div class="ttdef"><b>Definition:</b> <a href="sendf_8h_source.html#l00048">sendf.h:48</a></div></div>
<div class="ttc" id="pipeline_8c_html_a6f401e68b71214127eff15c9f1626f15"><div class="ttname"><a href="pipeline_8c.html#a6f401e68b71214127eff15c9f1626f15">Curl_pipeline_set_site_blacklist</a></div><div class="ttdeci">CURLMcode Curl_pipeline_set_site_blacklist(char **sites, struct curl_llist *list)</div><div class="ttdef"><b>Definition:</b> <a href="pipeline_8c_source.html#l00193">pipeline.c:193</a></div></div>
<div class="ttc" id="urldata_8h_html_ad606881f90e46a7ccaa95859a6fdef54afabd35bacd3e2bdb1f3bba2bb4432ddf"><div class="ttname"><a href="urldata_8h.html#ad606881f90e46a7ccaa95859a6fdef54afabd35bacd3e2bdb1f3bba2bb4432ddf">NTLMSTATE_TYPE2</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00299">urldata.h:299</a></div></div>
<div class="ttc" id="struct_single_request_html_a6ca30fe8e465c2b5be16ee98769120b8"><div class="ttname"><a href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">SingleRequest::keepon</a></div><div class="ttdeci">int keepon</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00586">urldata.h:586</a></div></div>
<div class="ttc" id="sendf_8h_html"><div class="ttname"><a href="sendf_8h.html">sendf.h</a></div></div>
<div class="ttc" id="multi_8c_html_a73a33e645c54c94315ffa9232f98ead1"><div class="ttname"><a href="multi_8c.html#a73a33e645c54c94315ffa9232f98ead1">CURL_MULTI_HANDLE</a></div><div class="ttdeci">#define CURL_MULTI_HANDLE</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00068">multi.c:68</a></div></div>
<div class="ttc" id="multihandle_8h_html_aef4270d2c08f187bc6a2d434c782b383ad2cd9b2df724837e4d4b56a816c07d63"><div class="ttname"><a href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383ad2cd9b2df724837e4d4b56a816c07d63">CURLM_STATE_DO</a></div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00050">multihandle.h:50</a></div></div>
<div class="ttc" id="easyif_8h_html"><div class="ttname"><a href="easyif_8h.html">easyif.h</a></div></div>
<div class="ttc" id="multihandle_8h_html_a472aff39aba6058f1e7372319df882c0"><div class="ttname"><a href="multihandle_8h.html#a472aff39aba6058f1e7372319df882c0">MAX_SOCKSPEREASYHANDLE</a></div><div class="ttdeci">#define MAX_SOCKSPEREASYHANDLE</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00065">multihandle.h:65</a></div></div>
<div class="ttc" id="pipeline_8h_html"><div class="ttname"><a href="pipeline_8h.html">pipeline.h</a></div></div>
<div class="ttc" id="hash_8c_html_a1b249bccd7f3b079b31a4254444538d5"><div class="ttname"><a href="hash_8c.html#a1b249bccd7f3b079b31a4254444538d5">Curl_hash_delete</a></div><div class="ttdeci">int Curl_hash_delete(struct curl_hash *h, void *key, size_t key_len)</div><div class="ttdef"><b>Definition:</b> <a href="hash_8c_source.html#l00139">hash.c:139</a></div></div>
<div class="ttc" id="http2_8h_html_a5bc470e00220b08aad997d4f56a15948"><div class="ttname"><a href="http2_8h.html#a5bc470e00220b08aad997d4f56a15948">Curl_h2_http_1_1_error</a></div><div class="ttdeci">#define Curl_h2_http_1_1_error(x)</div><div class="ttdef"><b>Definition:</b> <a href="http2_8h_source.html#l00080">http2.h:80</a></div></div>
<div class="ttc" id="structconnectdata_html_ae7924587f916593e1fb682086f298ce8"><div class="ttname"><a href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">connectdata::handler</a></div><div class="ttdeci">const struct Curl_handler * handler</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00905">urldata.h:905</a></div></div>
<div class="ttc" id="progress_8h_html_abc090d144fb55d31dff488d24c46fb2aa13b6bf8a9d4e4202e74d244e61bd6b8b"><div class="ttname"><a href="progress_8h.html#abc090d144fb55d31dff488d24c46fb2aa13b6bf8a9d4e4202e74d244e61bd6b8b">TIMER_STARTOP</a></div><div class="ttdef"><b>Definition:</b> <a href="progress_8h_source.html#l00030">progress.h:30</a></div></div>
<div class="ttc" id="structconnectdata_html_adbc9021ab6a2581b41035b181d27a1ea"><div class="ttname"><a href="structconnectdata.html#adbc9021ab6a2581b41035b181d27a1ea">connectdata::sockfd</a></div><div class="ttdeci">curl_socket_t sockfd</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00919">urldata.h:919</a></div></div>
<div class="ttc" id="struct_url_state_html_a21758a9ac2ab74227ce00f3f847da6ed"><div class="ttname"><a href="struct_url_state.html#a21758a9ac2ab74227ce00f3f847da6ed">UrlState::timenode</a></div><div class="ttdeci">struct Curl_tree timenode</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01307">urldata.h:1307</a></div></div>
<div class="ttc" id="progress_8c_html_a0447e1786dfc3d3d2a2ecace04d63375"><div class="ttname"><a href="progress_8c.html#a0447e1786dfc3d3d2a2ecace04d63375">Curl_pgrsDone</a></div><div class="ttdeci">int Curl_pgrsDone(struct connectdata *conn)</div><div class="ttdef"><b>Definition:</b> <a href="progress_8c_source.html#l00137">progress.c:137</a></div></div>
<div class="ttc" id="curl__setup__once_8h_html_a23d7b88872d6ead46c978b567908d587"><div class="ttname"><a href="curl__setup__once_8h.html#a23d7b88872d6ead46c978b567908d587">DEBUGASSERT</a></div><div class="ttdeci">#define DEBUGASSERT(x)</div><div class="ttdef"><b>Definition:</b> <a href="curl__setup__once_8h_source.html#l00401">curl_setup_once.h:401</a></div></div>
<div class="ttc" id="structcurl__llist_html_a04c1d20c09bc187d0eb71fbaf463a4b7"><div class="ttname"><a href="structcurl__llist.html#a04c1d20c09bc187d0eb71fbaf463a4b7">curl_llist::tail</a></div><div class="ttdeci">struct curl_llist_element * tail</div><div class="ttdef"><b>Definition:</b> <a href="llist_8h_source.html#l00038">llist.h:38</a></div></div>
<div class="ttc" id="pipeline_8c_html_a9d8c64ba40d549fd26ec51a21b8a613a"><div class="ttname"><a href="pipeline_8c.html#a9d8c64ba40d549fd26ec51a21b8a613a">Curl_pipeline_checkget_read</a></div><div class="ttdeci">bool Curl_pipeline_checkget_read(struct Curl_easy *data, struct connectdata *conn)</div><div class="ttdef"><b>Definition:</b> <a href="pipeline_8c_source.html#l00349">pipeline.c:349</a></div></div>
<div class="ttc" id="struct_curl__multi_html_ae9f56b8b25625e24b8de0dfb9b0e0272"><div class="ttname"><a href="struct_curl__multi.html#ae9f56b8b25625e24b8de0dfb9b0e0272">Curl_multi::type</a></div><div class="ttdeci">long type</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00075">multihandle.h:75</a></div></div>
<div class="ttc" id="struct_curl__multi_html_a131a1103a9be433eaad9733f9944eedc"><div class="ttname"><a href="struct_curl__multi.html#a131a1103a9be433eaad9733f9944eedc">Curl_multi::push_cb</a></div><div class="ttdeci">curl_push_callback push_cb</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00095">multihandle.h:95</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a></div><div class="ttdeci">CURLcode</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00457">curl.h:457</a></div></div>
<div class="ttc" id="multiif_8h_html_a4ae1fb64a27264765b6a2fe5aca78830"><div class="ttname"><a href="multiif_8h.html#a4ae1fb64a27264765b6a2fe5aca78830">GETSOCK_READSOCK</a></div><div class="ttdeci">#define GETSOCK_READSOCK(x)</div><div class="ttdef"><b>Definition:</b> <a href="multiif_8h_source.html#l00051">multiif.h:51</a></div></div>
<div class="ttc" id="transfer_8h_html_a5d8d8c391641700d5c2f715193e27963ad2816ee7aaf9704289116c93e1d694a8"><div class="ttname"><a href="transfer_8h.html#a5d8d8c391641700d5c2f715193e27963ad2816ee7aaf9704289116c93e1d694a8">FOLLOW_RETRY</a></div><div class="ttdef"><b>Definition:</b> <a href="transfer_8h_source.html#l00039">transfer.h:39</a></div></div>
<div class="ttc" id="pipeline_8c_html_a13a501076e959eb34bd46c9ce7db91f3"><div class="ttname"><a href="pipeline_8c.html#a13a501076e959eb34bd46c9ce7db91f3">Curl_pipeline_checkget_write</a></div><div class="ttdeci">bool Curl_pipeline_checkget_write(struct Curl_easy *data, struct connectdata *conn)</div><div class="ttdef"><b>Definition:</b> <a href="pipeline_8c_source.html#l00326">pipeline.c:326</a></div></div>
<div class="ttc" id="transfer_8c_html_a055b20e035ac986f69148eaa4a44eaaa"><div class="ttname"><a href="transfer_8c.html#a055b20e035ac986f69148eaa4a44eaaa">Curl_init_CONNECT</a></div><div class="ttdeci">void Curl_init_CONNECT(struct Curl_easy *data)</div><div class="ttdef"><b>Definition:</b> <a href="transfer_8c_source.html#l01342">transfer.c:1342</a></div></div>
<div class="ttc" id="struct_curl__multi_html_a0f511dbae6387301f9d6623987609b25"><div class="ttname"><a href="struct_curl__multi.html#a0f511dbae6387301f9d6623987609b25">Curl_multi::num_easy</a></div><div class="ttdeci">int num_easy</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00081">multihandle.h:81</a></div></div>
<div class="ttc" id="structconnectdata_html_a5bc9b1d04e8c04b6d32f31e3415d0810"><div class="ttname"><a href="structconnectdata.html#a5bc9b1d04e8c04b6d32f31e3415d0810">connectdata::dns_entry</a></div><div class="ttdeci">struct Curl_dns_entry * dns_entry</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00813">urldata.h:813</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951a9e0c77963cb42831dba8d5ee1840e80b"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951a9e0c77963cb42831dba8d5ee1840e80b">CURLE_SEND_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00526">curl.h:526</a></div></div>
<div class="ttc" id="struct_c_u_r_l_msg_html_ac00f26a84ebe0c2c5cb420a47d15ffec"><div class="ttname"><a href="struct_c_u_r_l_msg.html#ac00f26a84ebe0c2c5cb420a47d15ffec">CURLMsg::result</a></div><div class="ttdeci">CURLcode result</div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00100">multi.h:100</a></div></div>
<div class="ttc" id="url_8c_html_aa24dd517192957e12b59c39fc45f0851"><div class="ttname"><a href="url_8c.html#aa24dd517192957e12b59c39fc45f0851">Curl_protocol_getsock</a></div><div class="ttdeci">int Curl_protocol_getsock(struct connectdata *conn, curl_socket_t *socks, int numsocks)</div><div class="ttdef"><b>Definition:</b> <a href="url_8c_source.html#l01547">url.c:1547</a></div></div>
<div class="ttc" id="llist_8c_html_adf86d38f256b25809632d659a545c75d"><div class="ttname"><a href="llist_8c.html#adf86d38f256b25809632d659a545c75d">Curl_llist_init</a></div><div class="ttdeci">void Curl_llist_init(struct curl_llist *l, curl_llist_dtor dtor)</div><div class="ttdef"><b>Definition:</b> <a href="llist_8c_source.html#l00037">llist.c:37</a></div></div>
<div class="ttc" id="namespacedictserver_html_aeb700c49a1a229869c3b36509a6c6c32"><div class="ttname"><a href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">dictserver.rc</a></div><div class="ttdeci">def rc</div><div class="ttdef"><b>Definition:</b> <a href="dictserver_8py_source.html#l00153">dictserver.py:153</a></div></div>
<div class="ttc" id="unit1399_8c_html_acf1e931ffa73126ce876102dc2186895"><div class="ttname"><a href="unit1399_8c.html#acf1e931ffa73126ce876102dc2186895">now</a></div><div class="ttdeci">struct curltime now</div><div class="ttdef"><b>Definition:</b> <a href="unit1399_8c_source.html#l00083">unit1399.c:83</a></div></div>
<div class="ttc" id="urldata_8h_html_a3974aaba0c9077dda7aa9ed8e2325d55"><div class="ttname"><a href="urldata_8h.html#a3974aaba0c9077dda7aa9ed8e2325d55">CURLEASY_MAGIC_NUMBER</a></div><div class="ttdeci">#define CURLEASY_MAGIC_NUMBER</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00153">urldata.h:153</a></div></div>
<div class="ttc" id="multihandle_8h_html_aef4270d2c08f187bc6a2d434c782b383a690ed7a251acfdba578c219baf9942ec"><div class="ttname"><a href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a690ed7a251acfdba578c219baf9942ec">CURLM_STATE_CONNECT</a></div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00040">multihandle.h:40</a></div></div>
<div class="ttc" id="multihandle_8h_html_aef4270d2c08f187bc6a2d434c782b383acd3890b70496f93a1fa8179ccde1e235"><div class="ttname"><a href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383acd3890b70496f93a1fa8179ccde1e235">CURLM_STATE_CONNECT_PEND</a></div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00039">multihandle.h:39</a></div></div>
<div class="ttc" id="urldata_8h_html_ab141b3290dad267f76cd77a91c641146"><div class="ttname"><a href="urldata_8h.html#ab141b3290dad267f76cd77a91c641146">KEEP_RECV</a></div><div class="ttdeci">#define KEEP_RECV</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00458">urldata.h:458</a></div></div>
<div class="ttc" id="multihandle_8h_html_aef4270d2c08f187bc6a2d434c782b383af18e5b0f6ff92007187a5ac6f2494d40"><div class="ttname"><a href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383af18e5b0f6ff92007187a5ac6f2494d40">CURLM_STATE_DOING</a></div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00051">multihandle.h:51</a></div></div>
<div class="ttc" id="struct_curl__multi_html_a598ce59e5d016aee984ab282d66ed2bf"><div class="ttname"><a href="struct_curl__multi.html#a598ce59e5d016aee984ab282d66ed2bf">Curl_multi::in_callback</a></div><div class="ttdeci">bool in_callback</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00155">multihandle.h:155</a></div></div>
<div class="ttc" id="struct_curl__multi_html_a3cc9d119c1f8eb1bb0eff5b7cbd2795a"><div class="ttname"><a href="struct_curl__multi.html#a3cc9d119c1f8eb1bb0eff5b7cbd2795a">Curl_multi::max_total_connections</a></div><div class="ttdeci">long max_total_connections</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00129">multihandle.h:129</a></div></div>
<div class="ttc" id="multi_8c_html_adad279999b00d12aa4240bd26280ab40"><div class="ttname"><a href="multi_8c.html#adad279999b00d12aa4240bd26280ab40">CURL_CONNECTION_HASH_SIZE</a></div><div class="ttdeci">#define CURL_CONNECTION_HASH_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00065">multi.c:65</a></div></div>
<div class="ttc" id="select_8h_html_a91b3c67129ac7675062f316b840a0d58"><div class="ttname"><a href="select_8h.html#a91b3c67129ac7675062f316b840a0d58">POLLOUT</a></div><div class="ttdeci">#define POLLOUT</div><div class="ttdef"><b>Definition:</b> <a href="select_8h_source.html#l00044">select.h:44</a></div></div>
<div class="ttc" id="progress_8h_html_abc090d144fb55d31dff488d24c46fb2aab81949995b4f4e4a021f6c79c29f5829"><div class="ttname"><a href="progress_8h.html#abc090d144fb55d31dff488d24c46fb2aab81949995b4f4e4a021f6c79c29f5829">TIMER_STARTSINGLE</a></div><div class="ttdef"><b>Definition:</b> <a href="progress_8h_source.html#l00031">progress.h:31</a></div></div>
<div class="ttc" id="multi_8c_html_a7b85e4aa84035e36ffe7c1f51fdbd2b3"><div class="ttname"><a href="multi_8c.html#a7b85e4aa84035e36ffe7c1f51fdbd2b3">curl_multi_add_handle</a></div><div class="ttdeci">CURLMcode curl_multi_add_handle(struct Curl_multi *multi, struct Curl_easy *data)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00375">multi.c:375</a></div></div>
<div class="ttc" id="multi_8c_html_af60eeb6175f9a25baeee40253c56330e"><div class="ttname"><a href="multi_8c.html#af60eeb6175f9a25baeee40253c56330e">Curl_set_in_callback</a></div><div class="ttdeci">void Curl_set_in_callback(struct Curl_easy *data, bool value)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l03174">multi.c:3174</a></div></div>
<div class="ttc" id="multi_8c_html_aa21e52a95b57b1ce52a02736bb0ca68c"><div class="ttname"><a href="multi_8c.html#aa21e52a95b57b1ce52a02736bb0ca68c">Curl_pipeline_wanted</a></div><div class="ttdeci">bool Curl_pipeline_wanted(const struct Curl_multi *multi, int bits)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00811">multi.c:811</a></div></div>
<div class="ttc" id="pipeline_8c_html_a4f8afb2e5c3f765f93c7f3a6d0c87e51"><div class="ttname"><a href="pipeline_8c.html#a4f8afb2e5c3f765f93c7f3a6d0c87e51">Curl_pipeline_set_server_blacklist</a></div><div class="ttdeci">CURLMcode Curl_pipeline_set_server_blacklist(char **servers, struct curl_llist *list)</div><div class="ttdef"><b>Definition:</b> <a href="pipeline_8c_source.html#l00262">pipeline.c:262</a></div></div>
<div class="ttc" id="hash_8c_html_a7e58db026000cd72601150793facbbdc"><div class="ttname"><a href="hash_8c.html#a7e58db026000cd72601150793facbbdc">Curl_hash_destroy</a></div><div class="ttdeci">void Curl_hash_destroy(struct curl_hash *h)</div><div class="ttdef"><b>Definition:</b> <a href="hash_8c_source.html#l00205">hash.c:205</a></div></div>
<div class="ttc" id="structconnectdata_html_a2e6cc8a072c4712d1a113c56ef37dd13"><div class="ttname"><a href="structconnectdata.html#a2e6cc8a072c4712d1a113c56ef37dd13">connectdata::tempsock</a></div><div class="ttdeci">curl_socket_t tempsock[2]</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00876">urldata.h:876</a></div></div>
<div class="ttc" id="multi_8h_html_a19006903930bc7552c4e74ed6b32990f"><div class="ttname"><a href="multi_8h.html#a19006903930bc7552c4e74ed6b32990f">CURLPIPE_HTTP1</a></div><div class="ttdeci">#define CURLPIPE_HTTP1</div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00085">multi.h:85</a></div></div>
<div class="ttc" id="unit1608_8c_html_a8e67ff5c12b8bbb5baf741515fa674bb"><div class="ttname"><a href="unit1608_8c.html#a8e67ff5c12b8bbb5baf741515fa674bb">easy</a></div><div class="ttdeci">struct Curl_easy * easy</div><div class="ttdef"><b>Definition:</b> <a href="unit1608_8c_source.html#l00050">unit1608.c:50</a></div></div>
<div class="ttc" id="structconnectdata_html_a91d94af5dfef86510940d658476b61cf"><div class="ttname"><a href="structconnectdata.html#a91d94af5dfef86510940d658476b61cf">connectdata::host</a></div><div class="ttdeci">struct hostname host</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00830">urldata.h:830</a></div></div>
<div class="ttc" id="curl_8h_html"><div class="ttname"><a href="curl_8h.html">curl.h</a></div></div>
<div class="ttc" id="multi_8c_html_a91895f8ba819512924d4968161904b8c"><div class="ttname"><a href="multi_8c.html#a91895f8ba819512924d4968161904b8c">Curl_multi_chunk_length_penalty_size</a></div><div class="ttdeci">curl_off_t Curl_multi_chunk_length_penalty_size(struct Curl_multi *multi)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l03141">multi.c:3141</a></div></div>
<div class="ttc" id="warnless_8c_html_a02468fae1f563370c5e18045d5bc2ecb"><div class="ttname"><a href="warnless_8c.html#a02468fae1f563370c5e18045d5bc2ecb">curlx_uztosi</a></div><div class="ttdeci">int curlx_uztosi(size_t uznum)</div><div class="ttdef"><b>Definition:</b> <a href="warnless_8c_source.html#l00203">warnless.c:203</a></div></div>
<div class="ttc" id="hostip_8c_html_aaa189624c85f30d5cb0eafe088c2ccd9"><div class="ttname"><a href="hostip_8c.html#aaa189624c85f30d5cb0eafe088c2ccd9">Curl_resolv_getsock</a></div><div class="ttdeci">int Curl_resolv_getsock(struct connectdata *conn, curl_socket_t *socks, int numsocks)</div><div class="ttdef"><b>Definition:</b> <a href="hostip_8c_source.html#l01070">hostip.c:1070</a></div></div>
<div class="ttc" id="struct_curl__sh__entry_html_a2b27894ee7605e464ac288ebca47d0f9"><div class="ttname"><a href="struct_curl__sh__entry.html#a2b27894ee7605e464ac288ebca47d0f9">Curl_sh_entry::easy</a></div><div class="ttdeci">struct Curl_easy * easy</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00196">multi.c:196</a></div></div>
<div class="ttc" id="curl__memory_8h_html_a2eb0b03d1a9de9615a291b1205969069"><div class="ttname"><a href="curl__memory_8h.html#a2eb0b03d1a9de9615a291b1205969069">malloc</a></div><div class="ttdeci">#define malloc(size)</div><div class="ttdef"><b>Definition:</b> <a href="curl__memory_8h_source.html#l00124">curl_memory.h:124</a></div></div>
<div class="ttc" id="curl_8h_html_af898dd6eb71573ccb1668c3d2380549caf5548465b13390b94e68b1b3d3b730ef"><div class="ttname"><a href="curl_8h.html#af898dd6eb71573ccb1668c3d2380549caf5548465b13390b94e68b1b3d3b730ef">CURL_LOCK_DATA_PSL</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l02611">curl.h:2611</a></div></div>
<div class="ttc" id="structhostname_html"><div class="ttname"><a href="structhostname.html">hostname</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00446">urldata.h:446</a></div></div>
<div class="ttc" id="http_8c_html_aa380bd70f94bb31fc19b879223427e44"><div class="ttname"><a href="http_8c.html#aa380bd70f94bb31fc19b879223427e44">Curl_http_connect</a></div><div class="ttdeci">CURLcode Curl_http_connect(struct connectdata *conn, bool *done)</div><div class="ttdef"><b>Definition:</b> <a href="http_8c_source.html#l01416">http.c:1416</a></div></div>
<div class="ttc" id="components_2curl_2include_2curl_2_system_8h_html_a3dca40ce1e998420175eabe37246e05b"><div class="ttname"><a href="components_2curl_2include_2curl_2_system_8h.html#a3dca40ce1e998420175eabe37246e05b">CURL_FORMAT_CURL_OFF_T</a></div><div class="ttdeci">#define CURL_FORMAT_CURL_OFF_T</div><div class="ttdef"><b>Definition:</b> <a href="components_2curl_2include_2curl_2_system_8h_source.html#l00395">system.h:395</a></div></div>
<div class="ttc" id="multi_8h_html_a8060cb4533f16bcc994a9d432925d94e"><div class="ttname"><a href="multi_8h.html#a8060cb4533f16bcc994a9d432925d94e">CURL_WAIT_POLLIN</a></div><div class="ttdeci">#define CURL_WAIT_POLLIN</div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00108">multi.h:108</a></div></div>
<div class="ttc" id="multi_8h_html_a062838fbdac95bf37a1c6b3b415f49a9"><div class="ttname"><a href="multi_8h.html#a062838fbdac95bf37a1c6b3b415f49a9">CURL_POLL_OUT</a></div><div class="ttdeci">#define CURL_POLL_OUT</div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00260">multi.h:260</a></div></div>
<div class="ttc" id="struct_curl__multi_html_a4b99b75205eb20c5958edb9b343becf1"><div class="ttname"><a href="struct_curl__multi.html#a4b99b75205eb20c5958edb9b343becf1">Curl_multi::conn_cache</a></div><div class="ttdeci">struct conncache conn_cache</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00121">multihandle.h:121</a></div></div>
<div class="ttc" id="structpollfd_html_ac9b2f2c5b1f9a7487eb57e67cd4960ef"><div class="ttname"><a href="structpollfd.html#ac9b2f2c5b1f9a7487eb57e67cd4960ef">pollfd::events</a></div><div class="ttdeci">short events</div><div class="ttdef"><b>Definition:</b> <a href="select_8h_source.html#l00052">select.h:52</a></div></div>
<div class="ttc" id="conncache_8c_html_adb8f4815ab8920bda869c304c90857d9"><div class="ttname"><a href="conncache_8c.html#adb8f4815ab8920bda869c304c90857d9">Curl_conncache_return_conn</a></div><div class="ttdeci">bool Curl_conncache_return_conn(struct connectdata *conn)</div><div class="ttdef"><b>Definition:</b> <a href="conncache_8c_source.html#l00420">conncache.c:420</a></div></div>
<div class="ttc" id="structhostname_html_a9c9ce90bfcab1734f9376c6539d92cdd"><div class="ttname"><a href="structhostname.html#a9c9ce90bfcab1734f9376c6539d92cdd">hostname::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00449">urldata.h:449</a></div></div>
<div class="ttc" id="multi_8c_html_a71cd4fe5fdefeb0903cd832df16db9db"><div class="ttname"><a href="multi_8c.html#a71cd4fe5fdefeb0903cd832df16db9db">Curl_multi_max_total_connections</a></div><div class="ttdeci">size_t Curl_multi_max_total_connections(struct Curl_multi *multi)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l03131">multi.c:3131</a></div></div>
<div class="ttc" id="unit1304_8c_html_a937d4dd628a8858b443a399410d2600b"><div class="ttname"><a href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a></div><div class="ttdeci">UNITTEST_START int result</div><div class="ttdef"><b>Definition:</b> <a href="unit1304_8c_source.html#l00049">unit1304.c:49</a></div></div>
<div class="ttc" id="unit1394_8c_html_a0fb9c3165f64b5b79f3928b404818be9"><div class="ttname"><a href="unit1394_8c.html#a0fb9c3165f64b5b79f3928b404818be9">p</a></div><div class="ttdeci">const char ** p</div><div class="ttdef"><b>Definition:</b> <a href="unit1394_8c_source.html#l00079">unit1394.c:79</a></div></div>
<div class="ttc" id="struct_connect_bits_html_a40c9341dbcd23241fd1b75054cf050a2"><div class="ttname"><a href="struct_connect_bits.html#a40c9341dbcd23241fd1b75054cf050a2">ConnectBits::reuse</a></div><div class="ttdeci">bool reuse</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00382">urldata.h:382</a></div></div>
<div class="ttc" id="speedcheck_8h_html"><div class="ttname"><a href="speedcheck_8h.html">speedcheck.h</a></div></div>
<div class="ttc" id="multihandle_8h_html_aef4270d2c08f187bc6a2d434c782b383a9c82cd8d2874a9b075dcac72b9e50800"><div class="ttname"><a href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a9c82cd8d2874a9b075dcac72b9e50800">CURLM_STATE_COMPLETED</a></div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00058">multihandle.h:58</a></div></div>
<div class="ttc" id="smooth-gtk-thread_8c_html_a37d972ae0b47b9099e30983131d31916"><div class="ttname"><a href="smooth-gtk-thread_8c.html#a37d972ae0b47b9099e30983131d31916">j</a></div><div class="ttdeci">int j</div><div class="ttdef"><b>Definition:</b> <a href="smooth-gtk-thread_8c_source.html#l00047">smooth-gtk-thread.c:47</a></div></div>
<div class="ttc" id="multi_8c_html_a6983cf765144e4b40860aa1baad0e149"><div class="ttname"><a href="multi_8c.html#a6983cf765144e4b40860aa1baad0e149">curl_multi_perform</a></div><div class="ttdeci">CURLMcode curl_multi_perform(struct Curl_multi *multi, int *running_handles)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l02195">multi.c:2195</a></div></div>
<div class="ttc" id="struct_curl__multi_html_addd2be231a1ea833776cf7f39e4353a7"><div class="ttname"><a href="struct_curl__multi.html#addd2be231a1ea833776cf7f39e4353a7">Curl_multi::hostcache</a></div><div class="ttdeci">struct curl_hash hostcache</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00099">multihandle.h:99</a></div></div>
<div class="ttc" id="struct_curl__multi_html_ac2edaddd7a320cc2b6bf7157300c7526"><div class="ttname"><a href="struct_curl__multi.html#ac2edaddd7a320cc2b6bf7157300c7526">Curl_multi::timer_userp</a></div><div class="ttdeci">void * timer_userp</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00152">multihandle.h:152</a></div></div>
<div class="ttc" id="unit1308_8c_html_a70a830d3039f37216dde9bcf2460aec2"><div class="ttname"><a href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a></div><div class="ttdeci">char buffer[]</div><div class="ttdef"><b>Definition:</b> <a href="unit1308_8c_source.html#l00048">unit1308.c:48</a></div></div>
<div class="ttc" id="structcurl__waitfd_html"><div class="ttname"><a href="structcurl__waitfd.html">curl_waitfd</a></div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00112">multi.h:112</a></div></div>
<div class="ttc" id="components_2curl_2include_2curl_2_system_8h_html_a494e2b4279dc064f7ed1d0abd602b28d"><div class="ttname"><a href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a></div><div class="ttdeci">CURL_TYPEOF_CURL_OFF_T curl_off_t</div><div class="ttdef"><b>Definition:</b> <a href="components_2curl_2include_2curl_2_system_8h_source.html#l00442">system.h:442</a></div></div>
<div class="ttc" id="struct_curl__easy_html_ae50ee3c1668aaed84ae0338046f4f737"><div class="ttname"><a href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">Curl_easy::multi</a></div><div class="ttdeci">struct Curl_multi * multi</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01777">urldata.h:1777</a></div></div>
<div class="ttc" id="select_8h_html_a9bb60ecc6306dd3ddbf4d188f8ac22fc"><div class="ttname"><a href="select_8h.html#a9bb60ecc6306dd3ddbf4d188f8ac22fc">VALID_SOCK</a></div><div class="ttdeci">#define VALID_SOCK(s)</div><div class="ttdef"><b>Definition:</b> <a href="select_8h_source.html#l00106">select.h:106</a></div></div>
<div class="ttc" id="struct_curl__multi_html_a550e88d3c8e68fd0b4885dd764d63b2f"><div class="ttname"><a href="struct_curl__multi.html#a550e88d3c8e68fd0b4885dd764d63b2f">Curl_multi::easylp</a></div><div class="ttdeci">struct Curl_easy * easylp</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00079">multihandle.h:79</a></div></div>
<div class="ttc" id="unit1303_8c_html_ac8936188af0c1d2f8b9d0cd25fde43b2"><div class="ttname"><a href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a></div><div class="ttdeci">unsigned int i</div><div class="ttdef"><b>Definition:</b> <a href="unit1303_8c_source.html#l00078">unit1303.c:78</a></div></div>
<div class="ttc" id="multi_8h_html_a062174f5299cafe7e77cff172fbe38c1"><div class="ttname"><a href="multi_8h.html#a062174f5299cafe7e77cff172fbe38c1">CURL_WAIT_POLLPRI</a></div><div class="ttdeci">#define CURL_WAIT_POLLPRI</div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00109">multi.h:109</a></div></div>
<div class="ttc" id="asyn_8h_html_a0184861709315e8de5f48ce59f672bdb"><div class="ttname"><a href="asyn_8h.html#a0184861709315e8de5f48ce59f672bdb">Curl_resolver_cancel</a></div><div class="ttdeci">void Curl_resolver_cancel(struct connectdata *conn)</div></div>
<div class="ttc" id="multihandle_8h_html_aef4270d2c08f187bc6a2d434c782b383a2ee595f45796a08c5f15a53e1a19a249"><div class="ttname"><a href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a2ee595f45796a08c5f15a53e1a19a249">CURLM_STATE_DONE</a></div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00057">multihandle.h:57</a></div></div>
<div class="ttc" id="struct_curl__multi_html_af45f45ebf8c94b7510d0571349786e75"><div class="ttname"><a href="struct_curl__multi.html#af45f45ebf8c94b7510d0571349786e75">Curl_multi::easyp</a></div><div class="ttdeci">struct Curl_easy * easyp</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00078">multihandle.h:78</a></div></div>
<div class="ttc" id="structpollfd_html_aafd0192880c9fdbcdc559b47c9fbb9b4"><div class="ttname"><a href="structpollfd.html#aafd0192880c9fdbcdc559b47c9fbb9b4">pollfd::fd</a></div><div class="ttdeci">curl_socket_t fd</div><div class="ttdef"><b>Definition:</b> <a href="select_8h_source.html#l00051">select.h:51</a></div></div>
<div class="ttc" id="multi_8c_html_aa99806145cef2e25fd2b49ad5c65683d"><div class="ttname"><a href="multi_8c.html#aa99806145cef2e25fd2b49ad5c65683d">curl_multi_cleanup</a></div><div class="ttdeci">CURLMcode curl_multi_cleanup(struct Curl_multi *multi)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l02249">multi.c:2249</a></div></div>
<div class="ttc" id="urldata_8h_html_aabb7db968656c3ee0555ea3d8784310dad4a31effbc92f6cf950c46a756257d3e"><div class="ttname"><a href="urldata_8h.html#aabb7db968656c3ee0555ea3d8784310dad4a31effbc92f6cf950c46a756257d3e">EXPIRE_TOOFAST</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01215">urldata.h:1215</a></div></div>
<div class="ttc" id="wildcard_8h_html_ab4724474e988ca4793d666e449cd2b0aaf7b19e6541139da47849ca1761694d28"><div class="ttname"><a href="wildcard_8h.html#ab4724474e988ca4793d666e449cd2b0aaf7b19e6541139da47849ca1761694d28">CURLWC_DONE</a></div><div class="ttdef"><b>Definition:</b> <a href="wildcard_8h_source.html#l00039">wildcard.h:39</a></div></div>
<div class="ttc" id="curl_8h_html_abc5c98fcc1211af2b80116dd6e0a035da2bdca7ce6479378784212fee3a068c74"><div class="ttname"><a href="curl_8h.html#abc5c98fcc1211af2b80116dd6e0a035da2bdca7ce6479378784212fee3a068c74">CURL_HTTP_VERSION_1_1</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l01926">curl.h:1926</a></div></div>
<div class="ttc" id="pipeline_8c_html_ac0e1ff41ac23ab04563a7817f7e838fc"><div class="ttname"><a href="pipeline_8c.html#ac0e1ff41ac23ab04563a7817f7e838fc">Curl_recvpipe_head</a></div><div class="ttdeci">bool Curl_recvpipe_head(struct Curl_easy *data, struct connectdata *conn)</div><div class="ttdef"><b>Definition:</b> <a href="pipeline_8c_source.html#l00305">pipeline.c:305</a></div></div>
<div class="ttc" id="struct_curl__message_html_a52f673a70ea547a989dff62b35ba6e40"><div class="ttname"><a href="struct_curl__message.html#a52f673a70ea547a989dff62b35ba6e40">Curl_message::extmsg</a></div><div class="ttdeci">struct CURLMsg extmsg</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00031">multihandle.h:31</a></div></div>
<div class="ttc" id="hostip_8c_html_ab2142b86e9e89284e1e8aa9c35488f24"><div class="ttname"><a href="hostip_8c.html#ab2142b86e9e89284e1e8aa9c35488f24">Curl_global_host_cache_init</a></div><div class="ttdeci">struct curl_hash * Curl_global_host_cache_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="hostip_8c_source.html#l00128">hostip.c:128</a></div></div>
<div class="ttc" id="structconnectdata_html_a4df63a4042ad767671bb3bfd74aa68fc"><div class="ttname"><a href="structconnectdata.html#a4df63a4042ad767671bb3bfd74aa68fc">connectdata::http_proxy</a></div><div class="ttdeci">struct proxy_info http_proxy</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00837">urldata.h:837</a></div></div>
<div class="ttc" id="structtime__node_html_a5ae77a54cda77d44f616d2234887ca8d"><div class="ttname"><a href="structtime__node.html#a5ae77a54cda77d44f616d2234887ca8d">time_node::eid</a></div><div class="ttdeci">expire_id eid</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01225">urldata.h:1225</a></div></div>
<div class="ttc" id="structtime__node_html_a9e686a2b7b5b979d88b5ccb1bfcff1a7"><div class="ttname"><a href="structtime__node.html#a9e686a2b7b5b979d88b5ccb1bfcff1a7">time_node::time</a></div><div class="ttdeci">struct curltime time</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01224">urldata.h:1224</a></div></div>
<div class="ttc" id="http_8h_html"><div class="ttname"><a href="http_8h.html">http.h</a></div></div>
<div class="ttc" id="timeval_8c_html_ae736e803680e1b7fa2b2868317b4b91f"><div class="ttname"><a href="timeval_8c.html#ae736e803680e1b7fa2b2868317b4b91f">Curl_now</a></div><div class="ttdeci">struct curltime Curl_now(void)</div><div class="ttdef"><b>Definition:</b> <a href="timeval_8c_source.html#l00154">timeval.c:154</a></div></div>
<div class="ttc" id="urldata_8h_html_aabb7db968656c3ee0555ea3d8784310daeda48bfc68ac8006de41e3d6a8e932e0"><div class="ttname"><a href="urldata_8h.html#aabb7db968656c3ee0555ea3d8784310daeda48bfc68ac8006de41e3d6a8e932e0">EXPIRE_LAST</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01216">urldata.h:1216</a></div></div>
<div class="ttc" id="multi_8c_html_a8b821fec78950af28d095dc7d6ab8435"><div class="ttname"><a href="multi_8c.html#a8b821fec78950af28d095dc7d6ab8435">curl_multi_socket_action</a></div><div class="ttdeci">CURLMcode curl_multi_socket_action(struct Curl_multi *multi, curl_socket_t s, int ev_bitmask, int *running_handles)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l02808">multi.c:2808</a></div></div>
<div class="ttc" id="curl__printf_8h_html"><div class="ttname"><a href="curl__printf_8h.html">curl_printf.h</a></div></div>
<div class="ttc" id="multi_8c_html_a53ffedc463320ee92ec76226962563cd"><div class="ttname"><a href="multi_8c.html#a53ffedc463320ee92ec76226962563cd">curl_multi_wait</a></div><div class="ttdeci">CURLMcode curl_multi_wait(struct Curl_multi *multi, struct curl_waitfd extra_fds[], unsigned int extra_nfds, int timeout_ms, int *ret)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l01150">multi.c:1150</a></div></div>
<div class="ttc" id="multi_8c_html_afbc31d9271626832fb21b413ec57c268"><div class="ttname"><a href="multi_8c.html#afbc31d9271626832fb21b413ec57c268">Curl_multi_closed</a></div><div class="ttdeci">void Curl_multi_closed(struct Curl_easy *data, curl_socket_t s)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l02505">multi.c:2505</a></div></div>
<div class="ttc" id="multi_8h_html_a92acc8d3a23eaae72955b8a8b22c83e3a53d037bdcf6900341e9f83efbf14b1d1"><div class="ttname"><a href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a53d037bdcf6900341e9f83efbf14b1d1">CURLM_INTERNAL_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00068">multi.h:68</a></div></div>
<div class="ttc" id="progress_8c_html_a40686d443707afea0c0e47cee805df01"><div class="ttname"><a href="progress_8c.html#a40686d443707afea0c0e47cee805df01">Curl_pgrsUpdate</a></div><div class="ttdeci">int Curl_pgrsUpdate(struct connectdata *conn)</div><div class="ttdef"><b>Definition:</b> <a href="progress_8c_source.html#l00369">progress.c:369</a></div></div>
<div class="ttc" id="struct_single_request_html_a7b830d1607062193706245f7f4512ac9"><div class="ttname"><a href="struct_single_request.html#a7b830d1607062193706245f7f4512ac9">SingleRequest::size</a></div><div class="ttdeci">curl_off_t size</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00534">urldata.h:534</a></div></div>
<div class="ttc" id="url_8c_html_a1e380c49a2d40ac41909687588a5738b"><div class="ttname"><a href="url_8c.html#a1e380c49a2d40ac41909687588a5738b">Curl_protocol_doing</a></div><div class="ttdeci">CURLcode Curl_protocol_doing(struct connectdata *conn, bool *done)</div><div class="ttdef"><b>Definition:</b> <a href="url_8c_source.html#l01595">url.c:1595</a></div></div>
<div class="ttc" id="multi_8c_html_aad205d4dbd91dccb8b440984d61daa40"><div class="ttname"><a href="multi_8c.html#aad205d4dbd91dccb8b440984d61daa40">curl_multi_assign</a></div><div class="ttdeci">CURLMcode curl_multi_assign(struct Curl_multi *multi, curl_socket_t s, void *hashp)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l03108">multi.c:3108</a></div></div>
<div class="ttc" id="url_8c_html_a7b6ce3a9f85e357966f8897b3352bca6"><div class="ttname"><a href="url_8c.html#a7b6ce3a9f85e357966f8897b3352bca6">Curl_doing_getsock</a></div><div class="ttdeci">int Curl_doing_getsock(struct connectdata *conn, curl_socket_t *socks, int numsocks)</div><div class="ttdef"><b>Definition:</b> <a href="url_8c_source.html#l01560">url.c:1560</a></div></div>
<div class="ttc" id="pipeline_8c_html_a0ebfe30eee0b789fed3635439e8f0b4b"><div class="ttname"><a href="pipeline_8c.html#a0ebfe30eee0b789fed3635439e8f0b4b">Curl_sendpipe_head</a></div><div class="ttdeci">bool Curl_sendpipe_head(struct Curl_easy *data, struct connectdata *conn)</div><div class="ttdef"><b>Definition:</b> <a href="pipeline_8c_source.html#l00312">pipeline.c:312</a></div></div>
<div class="ttc" id="timeval_8h_html"><div class="ttname"><a href="timeval_8h.html">timeval.h</a></div></div>
<div class="ttc" id="vtls_8h_html"><div class="ttname"><a href="vtls_8h.html">vtls.h</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951adaff0cec927d10c0ec5059ee0104ef62"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951adaff0cec927d10c0ec5059ee0104ef62">CURLE_READ_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00492">curl.h:492</a></div></div>
<div class="ttc" id="unit1304_8c_html_a82a69fcfe92d9db6dd585ccc532a2ab7"><div class="ttname"><a href="unit1304_8c.html#a82a69fcfe92d9db6dd585ccc532a2ab7">memcpy</a></div><div class="ttdeci">memcpy(filename, filename1, strlen(filename1))</div></div>
<div class="ttc" id="pipeline_8c_html_aabb5729d6ec2031085441fab48097e71"><div class="ttname"><a href="pipeline_8c.html#aabb5729d6ec2031085441fab48097e71">Curl_move_handle_from_send_to_recv_pipe</a></div><div class="ttdeci">void Curl_move_handle_from_send_to_recv_pipe(struct Curl_easy *handle, struct connectdata *conn)</div><div class="ttdef"><b>Definition:</b> <a href="pipeline_8c_source.html#l00133">pipeline.c:133</a></div></div>
<div class="ttc" id="multihandle_8h_html_aef4270d2c08f187bc6a2d434c782b383aaf4414c8ecb8141d248267f79ef02801"><div class="ttname"><a href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383aaf4414c8ecb8141d248267f79ef02801">CURLM_STATE_PROTOCONNECT</a></div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00047">multihandle.h:47</a></div></div>
<div class="ttc" id="unit1308_8c_html_a2f29226077aaea62db6864d9b291eadc"><div class="ttname"><a href="unit1308_8c.html#a2f29226077aaea62db6864d9b291eadc">last</a></div><div class="ttdeci">struct curl_httppost * last</div><div class="ttdef"><b>Definition:</b> <a href="unit1308_8c_source.html#l00046">unit1308.c:46</a></div></div>
<div class="ttc" id="struct_curl__handler_html_ac77e1b77c701181a1ba5e58922504524"><div class="ttname"><a href="struct_curl__handler.html#ac77e1b77c701181a1ba5e58922504524">Curl_handler::done</a></div><div class="ttdeci">Curl_done_func done</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00636">urldata.h:636</a></div></div>
<div class="ttc" id="hostip_8c_html_ae84cb7831090ead4c353b412893a259a"><div class="ttname"><a href="hostip_8c.html#ae84cb7831090ead4c353b412893a259a">Curl_mk_dnscache</a></div><div class="ttdeci">int Curl_mk_dnscache(struct curl_hash *hash)</div><div class="ttdef"><b>Definition:</b> <a href="hostip_8c_source.html#l00843">hostip.c:843</a></div></div>
<div class="ttc" id="sigpipe_8h_html_a4e82346dd2794d3e58da69078f1c4ab4"><div class="ttname"><a href="sigpipe_8h.html#a4e82346dd2794d3e58da69078f1c4ab4">sigpipe_restore</a></div><div class="ttdeci">#define sigpipe_restore(x)</div><div class="ttdef"><b>Definition:</b> <a href="sigpipe_8h_source.html#l00074">sigpipe.h:74</a></div></div>
<div class="ttc" id="urldata_8h_html_aabb7db968656c3ee0555ea3d8784310d"><div class="ttname"><a href="urldata_8h.html#aabb7db968656c3ee0555ea3d8784310d">expire_id</a></div><div class="ttdeci">expire_id</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01205">urldata.h:1205</a></div></div>
<div class="ttc" id="struct_curl__easy_html_a48af5568e2e5d690750ebfea66c3891d"><div class="ttname"><a href="struct_curl__easy.html#a48af5568e2e5d690750ebfea66c3891d">Curl_easy::mstate</a></div><div class="ttdeci">CURLMstate mstate</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01764">urldata.h:1764</a></div></div>
<div class="ttc" id="struct_curl__easy_html_a8a13221afd448ab0b91f021b4f5ec7c7"><div class="ttname"><a href="struct_curl__easy.html#a8a13221afd448ab0b91f021b4f5ec7c7">Curl_easy::req</a></div><div class="ttdeci">struct SingleRequest req</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01787">urldata.h:1787</a></div></div>
<div class="ttc" id="progress_8h_html"><div class="ttname"><a href="progress_8h.html">progress.h</a></div></div>
<div class="ttc" id="struct_curl__multi_html_a74e1561d41e7aaa283f2248b581d3716"><div class="ttname"><a href="struct_curl__multi.html#a74e1561d41e7aaa283f2248b581d3716">Curl_multi::recheckstate</a></div><div class="ttdeci">bool recheckstate</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00118">multihandle.h:118</a></div></div>
<div class="ttc" id="curl__setup__once_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> <a href="curl__setup__once_8h_source.html#l00327">curl_setup_once.h:327</a></div></div>
<div class="ttc" id="struct_curl__handler_html_af93eecce6f47a96ce7712169a77da247"><div class="ttname"><a href="struct_curl__handler.html#af93eecce6f47a96ce7712169a77da247">Curl_handler::do_more</a></div><div class="ttdeci">Curl_do_more_func do_more</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00642">urldata.h:642</a></div></div>
<div class="ttc" id="multi_8c_html_a41cd181215332587c8de5aac65da3af1"><div class="ttname"><a href="multi_8c.html#a41cd181215332587c8de5aac65da3af1">curl_multi_timeout</a></div><div class="ttdeci">CURLMcode curl_multi_timeout(struct Curl_multi *multi, long *timeout_ms)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l02871">multi.c:2871</a></div></div>
<div class="ttc" id="struct_curl__multi_html_aa9e3ad6466ada3035eecca089efc513b"><div class="ttname"><a href="struct_curl__multi.html#aa9e3ad6466ada3035eecca089efc513b">Curl_multi::num_alive</a></div><div class="ttdeci">int num_alive</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00082">multihandle.h:82</a></div></div>
<div class="ttc" id="structcurl__llist_html_abca9151666b85a2a95d44bbbe1dcf8b2"><div class="ttname"><a href="structcurl__llist.html#abca9151666b85a2a95d44bbbe1dcf8b2">curl_llist::size</a></div><div class="ttdeci">size_t size</div><div class="ttdef"><b>Definition:</b> <a href="llist_8h_source.html#l00040">llist.h:40</a></div></div>
<div class="ttc" id="struct_curl__multi_html_a16a9f16f5b7cdbf738009ab20483d610"><div class="ttname"><a href="struct_curl__multi.html#a16a9f16f5b7cdbf738009ab20483d610">Curl_multi::msglist</a></div><div class="ttdeci">struct curl_llist msglist</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00085">multihandle.h:85</a></div></div>
<div class="ttc" id="multihandle_8h_html_aef4270d2c08f187bc6a2d434c782b383abc1cafd6933c18c5d876af92a46942cb"><div class="ttname"><a href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383abc1cafd6933c18c5d876af92a46942cb">CURLM_STATE_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00038">multihandle.h:38</a></div></div>
<div class="ttc" id="multi_8h_html_a88902618f461310d6654409444b53e86"><div class="ttname"><a href="multi_8h.html#a88902618f461310d6654409444b53e86">CURL_POLL_REMOVE</a></div><div class="ttdeci">#define CURL_POLL_REMOVE</div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00262">multi.h:262</a></div></div>
<div class="ttc" id="struct_curl__dns__entry_html"><div class="ttname"><a href="struct_curl__dns__entry.html">Curl_dns_entry</a></div><div class="ttdef"><b>Definition:</b> <a href="hostip_8h_source.html#l00066">hostip.h:66</a></div></div>
<div class="ttc" id="struct_wildcard_data_html"><div class="ttname"><a href="struct_wildcard_data.html">WildcardData</a></div><div class="ttdef"><b>Definition:</b> <a href="wildcard_8h_source.html#l00046">wildcard.h:46</a></div></div>
<div class="ttc" id="multi_8c_html_a421a331ce21de35d2fc05743a5061301"><div class="ttname"><a href="multi_8c.html#a421a331ce21de35d2fc05743a5061301">Curl_multi_wait</a></div><div class="ttdeci">CURLMcode Curl_multi_wait(struct Curl_multi *multi, struct curl_waitfd extra_fds[], unsigned int extra_nfds, int timeout_ms, int *ret, bool *gotsocket)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00989">multi.c:989</a></div></div>
<div class="ttc" id="config_8d_html_a9fb4830d0cbef7d3cf48425ce59f580a"><div class="ttname"><a href="config_8d.html#a9fb4830d0cbef7d3cf48425ce59f580a">n</a></div><div class="ttdeci">Long separated by or the equals sign.Long option names can optionally be given in the config file without the initial double dashes and if the colon or equals characters can be used as separators.If the option is specified with one or two there can be no colon or equals character between the option and its parameter.If the parameter is to contain the parameter must be enclosed within quotes.Within double the following escape sequences are n</div><div class="ttdef"><b>Definition:</b> <a href="config_8d_source.html#l00011">config.d:11</a></div></div>
<div class="ttc" id="multi_8h_html_a63d84039b5e6092edec1f44c87dd1fe5"><div class="ttname"><a href="multi_8h.html#a63d84039b5e6092edec1f44c87dd1fe5">CURLMoption</a></div><div class="ttdeci">CURLMoption</div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00335">multi.h:335</a></div></div>
<div class="ttc" id="create-dirs_8d_html_a80cfb6b82f50850fe3824288a2e3a40c"><div class="ttname"><a href="create-dirs_8d.html#a80cfb6b82f50850fe3824288a2e3a40c">option</a></div><div class="ttdeci">Long curl will create the necessary local directory hierarchy as needed.This option creates the dirs mentioned with the output option</div><div class="ttdef"><b>Definition:</b> <a href="create-dirs_8d_source.html#l00004">create-dirs.d:4</a></div></div>
<div class="ttc" id="llist_8c_html_a5695da52e80519cc2aae14bb325671d0"><div class="ttname"><a href="llist_8c.html#a5695da52e80519cc2aae14bb325671d0">Curl_llist_count</a></div><div class="ttdeci">size_t Curl_llist_count(struct curl_llist *list)</div><div class="ttdef"><b>Definition:</b> <a href="llist_8c_source.html#l00143">llist.c:143</a></div></div>
<div class="ttc" id="struct_curl__multi_html_a3bf5d8d42ca6dc800333e7f830f805b5"><div class="ttname"><a href="struct_curl__multi.html#a3bf5d8d42ca6dc800333e7f830f805b5">Curl_multi::max_host_connections</a></div><div class="ttdeci">long max_host_connections</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00126">multihandle.h:126</a></div></div>
<div class="ttc" id="connect_8c_html_aed32c0fb99c80a40c097c98a3eb03c74"><div class="ttname"><a href="connect_8c.html#aed32c0fb99c80a40c097c98a3eb03c74">Curl_timeleft</a></div><div class="ttdeci">timediff_t Curl_timeleft(struct Curl_easy *data, struct curltime *nowp, bool duringconnect)</div><div class="ttdef"><b>Definition:</b> <a href="connect_8c_source.html#l00184">connect.c:184</a></div></div>
<div class="ttc" id="sigpipe_8h_html"><div class="ttname"><a href="sigpipe_8h.html">sigpipe.h</a></div></div>
<div class="ttc" id="structcurl__llist__element_html_aa3c3cb90fae86e24d88eea4437bc61ab"><div class="ttname"><a href="structcurl__llist__element.html#aa3c3cb90fae86e24d88eea4437bc61ab">curl_llist_element::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="llist_8h_source.html#l00031">llist.h:31</a></div></div>
<div class="ttc" id="progress_8c_html_a9003c983a024c16cf5893a62b8b34b9d"><div class="ttname"><a href="progress_8c.html#a9003c983a024c16cf5893a62b8b34b9d">Curl_ratelimit</a></div><div class="ttdeci">void Curl_ratelimit(struct Curl_easy *data, struct curltime now)</div><div class="ttdef"><b>Definition:</b> <a href="progress_8c_source.html#l00314">progress.c:314</a></div></div>
<div class="ttc" id="multi_8c_html_a65dd28329b4d8619fcebab1faaa12ee1"><div class="ttname"><a href="multi_8c.html#a65dd28329b4d8619fcebab1faaa12ee1">Curl_is_in_callback</a></div><div class="ttdeci">bool Curl_is_in_callback(struct Curl_easy *easy)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l03185">multi.c:3185</a></div></div>
<div class="ttc" id="struct_curl__tree_html_a018a8b07590bb0b3ae03d877d25270e1"><div class="ttname"><a href="struct_curl__tree.html#a018a8b07590bb0b3ae03d877d25270e1">Curl_tree::key</a></div><div class="ttdeci">struct curltime key</div><div class="ttdef"><b>Definition:</b> <a href="splay_8h_source.html#l00032">splay.h:32</a></div></div>
<div class="ttc" id="struct_c_u_r_l_msg_html_ac1c4637f4d8f8eecad5f8cf2e89c528e"><div class="ttname"><a href="struct_c_u_r_l_msg.html#ac1c4637f4d8f8eecad5f8cf2e89c528e">CURLMsg::data</a></div><div class="ttdeci">union CURLMsg::@16 data</div></div>
<div class="ttc" id="structa_html"><div class="ttname"><a href="structa.html">a</a></div><div class="ttdef"><b>Definition:</b> <a href="unit1323_8c_source.html#l00036">unit1323.c:36</a></div></div>
<div class="ttc" id="select_8h_html_ab6f53b89c7a4cc5e8349f7c778d85168"><div class="ttname"><a href="select_8h.html#ab6f53b89c7a4cc5e8349f7c778d85168">POLLPRI</a></div><div class="ttdeci">#define POLLPRI</div><div class="ttdef"><b>Definition:</b> <a href="select_8h_source.html#l00043">select.h:43</a></div></div>
<div class="ttc" id="multi_8h_html_ae6c11d08c009204cdad567e762fa1716"><div class="ttname"><a href="multi_8h.html#ae6c11d08c009204cdad567e762fa1716">CURL_POLL_IN</a></div><div class="ttdeci">#define CURL_POLL_IN</div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00259">multi.h:259</a></div></div>
<div class="ttc" id="multi_8h_html_a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6"><div class="ttname"><a href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ada965a9b89eeb3b2f3a012edaa3acdd6">CURLM_CALL_MULTI_PERFORM</a></div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00062">multi.h:62</a></div></div>
<div class="ttc" id="curl_8h_html_af898dd6eb71573ccb1668c3d2380549ca7a7c4e67b6d5acb22de6b3623d3c7ace"><div class="ttname"><a href="curl_8h.html#af898dd6eb71573ccb1668c3d2380549ca7a7c4e67b6d5acb22de6b3623d3c7ace">CURL_LOCK_DATA_CONNECT</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l02610">curl.h:2610</a></div></div>
<div class="ttc" id="select_8h_html"><div class="ttname"><a href="select_8h.html">select.h</a></div></div>
<div class="ttc" id="connect_8c_html_a347cba516188d3bc3c6efc14dc3780d7"><div class="ttname"><a href="connect_8c.html#a347cba516188d3bc3c6efc14dc3780d7">Curl_is_connected</a></div><div class="ttdeci">CURLcode Curl_is_connected(struct connectdata *conn, int sockindex, bool *connected)</div><div class="ttdef"><b>Definition:</b> <a href="connect_8c_source.html#l00728">connect.c:728</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951a309ade641c94c3e710ae887405dba78b"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951a309ade641c94c3e710ae887405dba78b">CURLE_ABORTED_BY_CALLBACK</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00512">curl.h:512</a></div></div>
<div class="ttc" id="struct_curl__multi_html_aed77ecd40ec6ec6830f8842dbcb51c19"><div class="ttname"><a href="struct_curl__multi.html#aed77ecd40ec6ec6830f8842dbcb51c19">Curl_multi::timetree</a></div><div class="ttdeci">struct Curl_tree * timetree</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00108">multihandle.h:108</a></div></div>
<div class="ttc" id="multi_8h_html_a7f87d375fc82f79b121ef4adaeedc154a374efd706ae91c3321d6360be3c398b7"><div class="ttname"><a href="multi_8h.html#a7f87d375fc82f79b121ef4adaeedc154a374efd706ae91c3321d6360be3c398b7">CURLMSG_DONE</a></div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00090">multi.h:90</a></div></div>
<div class="ttc" id="structconnectdata_html_afe920189a64c99b8dc93679569406138"><div class="ttname"><a href="structconnectdata.html#afe920189a64c99b8dc93679569406138">connectdata::connect_state</a></div><div class="ttdeci">struct http_connect_state * connect_state</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01030">urldata.h:1030</a></div></div>
<div class="ttc" id="pipeline_8c_html_aae772b189eab516240a6727d5b75db7b"><div class="ttname"><a href="pipeline_8c.html#aae772b189eab516240a6727d5b75db7b">Curl_pipeline_leave_read</a></div><div class="ttdeci">void Curl_pipeline_leave_read(struct connectdata *conn)</div><div class="ttdef"><b>Definition:</b> <a href="pipeline_8c_source.html#l00375">pipeline.c:375</a></div></div>
<div class="ttc" id="multi_8c_html_a26c37ccc9da4d05fc29eac32f9129896"><div class="ttname"><a href="multi_8c.html#a26c37ccc9da4d05fc29eac32f9129896">curl_multi_remove_handle</a></div><div class="ttdeci">CURLMcode curl_multi_remove_handle(struct Curl_multi *multi, struct Curl_easy *data)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00664">multi.c:664</a></div></div>
<div class="ttc" id="structconnectdata_html_a23709f8003b50c28fb59cd977ee23632"><div class="ttname"><a href="structconnectdata.html#a23709f8003b50c28fb59cd977ee23632">connectdata::connection_id</a></div><div class="ttdeci">long connection_id</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00806">urldata.h:806</a></div></div>
<div class="ttc" id="multi_8c_html_a72515384372577e4134d210261290c09"><div class="ttname"><a href="multi_8c.html#a72515384372577e4134d210261290c09">Curl_multi_connchanged</a></div><div class="ttdeci">void Curl_multi_connchanged(struct Curl_multi *multi)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l01165">multi.c:1165</a></div></div>
<div class="ttc" id="transfer_8h_html_a5d8d8c391641700d5c2f715193e27963ab387c536c13d6435a4696a19fc865c5c"><div class="ttname"><a href="transfer_8h.html#a5d8d8c391641700d5c2f715193e27963ab387c536c13d6435a4696a19fc865c5c">FOLLOW_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="transfer_8h_source.html#l00036">transfer.h:36</a></div></div>
<div class="ttc" id="hostip_8c_html_ae1886f5ce5b1a160f27efdddb130d33e"><div class="ttname"><a href="hostip_8c.html#ae1886f5ce5b1a160f27efdddb130d33e">Curl_resolv_check</a></div><div class="ttdeci">CURLcode Curl_resolv_check(struct connectdata *conn, struct Curl_dns_entry **dns)</div><div class="ttdef"><b>Definition:</b> <a href="hostip_8c_source.html#l01062">hostip.c:1062</a></div></div>
<div class="ttc" id="splay_8c_html_a60d524a540c7f6e3eaf9f2b912444f81"><div class="ttname"><a href="splay_8c.html#a60d524a540c7f6e3eaf9f2b912444f81">Curl_splayinsert</a></div><div class="ttdeci">struct Curl_tree * Curl_splayinsert(struct curltime i, struct Curl_tree *t, struct Curl_tree *node)</div><div class="ttdef"><b>Definition:</b> <a href="splay_8c_source.html#l00099">splay.c:99</a></div></div>
<div class="ttc" id="multi_8h_html_a6e92732986b0f84850cb41ce08f3deb6"><div class="ttname"><a href="multi_8h.html#a6e92732986b0f84850cb41ce08f3deb6">CURL_POLL_NONE</a></div><div class="ttdeci">#define CURL_POLL_NONE</div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00258">multi.h:258</a></div></div>
<div class="ttc" id="struct_curl__multi_html"><div class="ttname"><a href="struct_curl__multi.html">Curl_multi</a></div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00072">multihandle.h:72</a></div></div>
<div class="ttc" id="structpollfd_html"><div class="ttname"><a href="structpollfd.html">pollfd</a></div><div class="ttdef"><b>Definition:</b> <a href="select_8h_source.html#l00049">select.h:49</a></div></div>
<div class="ttc" id="struct_curl__multi_html_a78c345b89537184d941eb2ced0a2e20e"><div class="ttname"><a href="struct_curl__multi.html#a78c345b89537184d941eb2ced0a2e20e">Curl_multi::chunk_length_penalty_size</a></div><div class="ttdeci">long chunk_length_penalty_size</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00140">multihandle.h:140</a></div></div>
<div class="ttc" id="sigpipe_8h_html_a1acde57689fe654fd296d12f66160618"><div class="ttname"><a href="sigpipe_8h.html#a1acde57689fe654fd296d12f66160618">SIGPIPE_VARIABLE</a></div><div class="ttdeci">#define SIGPIPE_VARIABLE(x)</div><div class="ttdef"><b>Definition:</b> <a href="sigpipe_8h_source.html#l00075">sigpipe.h:75</a></div></div>
<div class="ttc" id="multiif_8h_html_ad755633cd6d4e90c3df49fefd1052bad"><div class="ttname"><a href="multiif_8h.html#ad755633cd6d4e90c3df49fefd1052bad">GETSOCK_BLANK</a></div><div class="ttdeci">#define GETSOCK_BLANK</div><div class="ttdef"><b>Definition:</b> <a href="multiif_8h_source.html#l00045">multiif.h:45</a></div></div>
<div class="ttc" id="struct_c_u_r_l_msg_html_a236add50fa3dc85360e4aa7a85a9dfd1"><div class="ttname"><a href="struct_c_u_r_l_msg.html#a236add50fa3dc85360e4aa7a85a9dfd1">CURLMsg::easy_handle</a></div><div class="ttdeci">CURL * easy_handle</div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00097">multi.h:97</a></div></div>
<div class="ttc" id="hostip_8c_html_a47fa53659ab4a0c796ea2fd58629674c"><div class="ttname"><a href="hostip_8c.html#a47fa53659ab4a0c796ea2fd58629674c">Curl_resolv_unlock</a></div><div class="ttdeci">void Curl_resolv_unlock(struct Curl_easy *data, struct Curl_dns_entry *dns)</div><div class="ttdef"><b>Definition:</b> <a href="hostip_8c_source.html#l00814">hostip.c:814</a></div></div>
<div class="ttc" id="multi_8c_html_a0b4dcd71644147f8a30b8b52f3d929ce"><div class="ttname"><a href="multi_8c.html#a0b4dcd71644147f8a30b8b52f3d929ce">Curl_updatesocket</a></div><div class="ttdeci">void Curl_updatesocket(struct Curl_easy *data)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l02489">multi.c:2489</a></div></div>
<div class="ttc" id="urldata_8h_html_a93237a6ee2f27182bb966487a03bce44"><div class="ttname"><a href="urldata_8h.html#a93237a6ee2f27182bb966487a03bce44">KEEP_SEND</a></div><div class="ttdeci">#define KEEP_SEND</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00459">urldata.h:459</a></div></div>
<div class="ttc" id="unit1620_8c_html_a27dfc2de90f4d6b8857bb6f991318463"><div class="ttname"><a href="unit1620_8c.html#a27dfc2de90f4d6b8857bb6f991318463">protocol_connect</a></div><div class="ttdeci">bool protocol_connect</div><div class="ttdef"><b>Definition:</b> <a href="unit1620_8c_source.html#l00046">unit1620.c:46</a></div></div>
<div class="ttc" id="transfer_8h_html_a5d8d8c391641700d5c2f715193e27963"><div class="ttname"><a href="transfer_8h.html#a5d8d8c391641700d5c2f715193e27963">followtype</a></div><div class="ttdeci">followtype</div><div class="ttdef"><b>Definition:</b> <a href="transfer_8h_source.html#l00035">transfer.h:35</a></div></div>
<div class="ttc" id="url_8c_html_a49088dfd99853f4981161b43f512c096"><div class="ttname"><a href="url_8c.html#a49088dfd99853f4981161b43f512c096">Curl_getoff_all_pipelines</a></div><div class="ttdeci">void Curl_getoff_all_pipelines(struct Curl_easy *data, struct connectdata *conn)</div><div class="ttdef"><b>Definition:</b> <a href="url_8c_source.html#l00910">url.c:910</a></div></div>
<div class="ttc" id="multi_8c_html_ae6edd0dbd516c21141b4a92adf20c33e"><div class="ttname"><a href="multi_8c.html#ae6edd0dbd516c21141b4a92adf20c33e">curl_multi_init</a></div><div class="ttdeci">struct Curl_multi * curl_multi_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00369">multi.c:369</a></div></div>
<div class="ttc" id="transfer_8h_html_a5d8d8c391641700d5c2f715193e27963a0d049e79236e49899f5aff3e0b46bed6"><div class="ttname"><a href="transfer_8h.html#a5d8d8c391641700d5c2f715193e27963a0d049e79236e49899f5aff3e0b46bed6">FOLLOW_FAKE</a></div><div class="ttdef"><b>Definition:</b> <a href="transfer_8h_source.html#l00038">transfer.h:38</a></div></div>
<div class="ttc" id="http2-download_8c_html_af29d172b038fadd90daf541df3b945c6"><div class="ttname"><a href="http2-download_8c.html#af29d172b038fadd90daf541df3b945c6">CURLPIPE_MULTIPLEX</a></div><div class="ttdeci">#define CURLPIPE_MULTIPLEX</div><div class="ttdef"><b>Definition:</b> <a href="http2-download_8c_source.html#l00041">http2-download.c:41</a></div></div>
<div class="ttc" id="multiif_8h_html_a9aabda59f0ff87c1db3a2d306a410713"><div class="ttname"><a href="multiif_8h.html#a9aabda59f0ff87c1db3a2d306a410713">GETSOCK_WRITESOCK</a></div><div class="ttdeci">#define GETSOCK_WRITESOCK(x)</div><div class="ttdef"><b>Definition:</b> <a href="multiif_8h_source.html#l00048">multiif.h:48</a></div></div>
<div class="ttc" id="structcurltime_html"><div class="ttname"><a href="structcurltime.html">curltime</a></div><div class="ttdef"><b>Definition:</b> <a href="timeval_8h_source.html#l00033">timeval.h:33</a></div></div>
<div class="ttc" id="curl__memory_8h_html"><div class="ttname"><a href="curl__memory_8h.html">curl_memory.h</a></div></div>
<div class="ttc" id="url_8c_html_a84d25069eedf327bfd18e9960e8976c5"><div class="ttname"><a href="url_8c.html#a84d25069eedf327bfd18e9960e8976c5">Curl_init_do</a></div><div class="ttdeci">CURLcode Curl_init_do(struct Curl_easy *data, struct connectdata *conn)</div><div class="ttdef"><b>Definition:</b> <a href="url_8c_source.html#l04190">url.c:4190</a></div></div>
<div class="ttc" id="multi_8c_html_ab129de4f342cdcec38532d0bb93ccb1f"><div class="ttname"><a href="multi_8c.html#ab129de4f342cdcec38532d0bb93ccb1f">Curl_multi_max_host_connections</a></div><div class="ttdeci">size_t Curl_multi_max_host_connections(struct Curl_multi *multi)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l03126">multi.c:3126</a></div></div>
<div class="ttc" id="multi_8c_html_aff238f181f772d261bdfe727944710cd"><div class="ttname"><a href="multi_8c.html#aff238f181f772d261bdfe727944710cd">curl_multi_info_read</a></div><div class="ttdeci">CURLMsg * curl_multi_info_read(struct Curl_multi *multi, int *msgs_in_queue)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l02318">multi.c:2318</a></div></div>
<div class="ttc" id="multi_8h_html_a92acc8d3a23eaae72955b8a8b22c83e3a323be072bc47b2a7ff1d3fc4533e8f70"><div class="ttname"><a href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a323be072bc47b2a7ff1d3fc4533e8f70">CURLM_OUT_OF_MEMORY</a></div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00067">multi.h:67</a></div></div>
<div class="ttc" id="pipeline_8c_html_a2f59dc911931337300b0b3db60936f12"><div class="ttname"><a href="pipeline_8c.html#a2f59dc911931337300b0b3db60936f12">Curl_pipeline_leave_write</a></div><div class="ttdeci">void Curl_pipeline_leave_write(struct connectdata *conn)</div><div class="ttdef"><b>Definition:</b> <a href="pipeline_8c_source.html#l00367">pipeline.c:367</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00458">curl.h:458</a></div></div>
<div class="ttc" id="structconnectdata_html_a44ea1ec223e43a877daac8a34167096a"><div class="ttname"><a href="structconnectdata.html#a44ea1ec223e43a877daac8a34167096a">connectdata::socks_proxy</a></div><div class="ttdeci">struct proxy_info socks_proxy</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00836">urldata.h:836</a></div></div>
<div class="ttc" id="speedcheck_8c_html_a9bb3788a8c28461af0215fc47308d36c"><div class="ttname"><a href="speedcheck_8c.html#a9bb3788a8c28461af0215fc47308d36c">Curl_speedcheck</a></div><div class="ttdeci">CURLcode Curl_speedcheck(struct Curl_easy *data, struct curltime now)</div><div class="ttdef"><b>Definition:</b> <a href="speedcheck_8c_source.html#l00039">speedcheck.c:39</a></div></div>
<div class="ttc" id="multihandle_8h_html"><div class="ttname"><a href="multihandle_8h.html">multihandle.h</a></div></div>
<div class="ttc" id="structcurl__llist_html_a3f6e07aacbee78561127b0166cc28fe7"><div class="ttname"><a href="structcurl__llist.html#a3f6e07aacbee78561127b0166cc28fe7">curl_llist::head</a></div><div class="ttdeci">struct curl_llist_element * head</div><div class="ttdef"><b>Definition:</b> <a href="llist_8h_source.html#l00037">llist.h:37</a></div></div>
<div class="ttc" id="splay_8c_html_a6ccb70532e79b4f1a427b08d4354b17b"><div class="ttname"><a href="splay_8c.html#a6ccb70532e79b4f1a427b08d4354b17b">Curl_splay</a></div><div class="ttdeci">struct Curl_tree * Curl_splay(struct curltime i, struct Curl_tree *t)</div><div class="ttdef"><b>Definition:</b> <a href="splay_8c_source.html#l00040">splay.c:40</a></div></div>
<div class="ttc" id="multi_8c_html_a8b3a193abc8b11e84a153dd32ef768ba"><div class="ttname"><a href="multi_8c.html#a8b3a193abc8b11e84a153dd32ef768ba">NUM_POLLS_ON_STACK</a></div><div class="ttdeci">#define NUM_POLLS_ON_STACK</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00987">multi.c:987</a></div></div>
<div class="ttc" id="multiif_8h_html"><div class="ttname"><a href="multiif_8h.html">multiif.h</a></div></div>
<div class="ttc" id="http__proxy_8c_html_a64cc706da81f4e2a504fc457b79542e2"><div class="ttname"><a href="http__proxy_8c.html#a64cc706da81f4e2a504fc457b79542e2">Curl_connect_ongoing</a></div><div class="ttdeci">bool Curl_connect_ongoing(struct connectdata *conn)</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy_8c_source.html#l00144">http_proxy.c:144</a></div></div>
<div class="ttc" id="timeval_8c_html_a93ce3158c8838916ed817489c98e37c4"><div class="ttname"><a href="timeval_8c.html#a93ce3158c8838916ed817489c98e37c4">Curl_timediff</a></div><div class="ttdeci">timediff_t Curl_timediff(struct curltime newer, struct curltime older)</div><div class="ttdef"><b>Definition:</b> <a href="timeval_8c_source.html#l00181">timeval.c:181</a></div></div>
<div class="ttc" id="struct_connect_bits_html_aaf15319fba965e2d87ac0ac839ae8351"><div class="ttname"><a href="struct_connect_bits.html#aaf15319fba965e2d87ac0ac839ae8351">ConnectBits::close</a></div><div class="ttdeci">bool close</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00381">urldata.h:381</a></div></div>
<div class="ttc" id="url_8c_html_a3201ad08770f97349774c201c3c624cd"><div class="ttname"><a href="url_8c.html#a3201ad08770f97349774c201c3c624cd">Curl_protocol_connect</a></div><div class="ttdeci">CURLcode Curl_protocol_connect(struct connectdata *conn, bool *protocol_done)</div><div class="ttdef"><b>Definition:</b> <a href="url_8c_source.html#l01614">url.c:1614</a></div></div>
<div class="ttc" id="memdebug_8h_html_a795660f73c902cc80ac0fe6cda0dbd1c"><div class="ttname"><a href="memdebug_8h.html#a795660f73c902cc80ac0fe6cda0dbd1c">Curl_safefree</a></div><div class="ttdeci">#define Curl_safefree(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="memdebug_8h_source.html#l00176">memdebug.h:176</a></div></div>
<div class="ttc" id="structconnectdata_html_a73d6d39e7554e4d764099ab3f1181a40"><div class="ttname"><a href="structconnectdata.html#a73d6d39e7554e4d764099ab3f1181a40">connectdata::writesockfd</a></div><div class="ttdeci">curl_socket_t writesockfd</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00920">urldata.h:920</a></div></div>
<div class="ttc" id="curl__setup_8h_html"><div class="ttname"><a href="curl__setup_8h.html">curl_setup.h</a></div></div>
<div class="ttc" id="multi_8h_html_a92acc8d3a23eaae72955b8a8b22c83e3a02622c2fbef0b11a76595bbfd8353c6a"><div class="ttname"><a href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a02622c2fbef0b11a76595bbfd8353c6a">CURLM_RECURSIVE_API_CALL</a></div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00073">multi.h:73</a></div></div>
<div class="ttc" id="multi_8h_html_a92acc8d3a23eaae72955b8a8b22c83e3a8876b8ad10b9b2e9ee4cfb22034803ed"><div class="ttname"><a href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a8876b8ad10b9b2e9ee4cfb22034803ed">CURLM_BAD_HANDLE</a></div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00065">multi.h:65</a></div></div>
<div class="ttc" id="multihandle_8h_html_aef4270d2c08f187bc6a2d434c782b383a47cf8c3465f67852269eec4321cc531d"><div class="ttname"><a href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a47cf8c3465f67852269eec4321cc531d">CURLM_STATE_LAST</a></div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00060">multihandle.h:60</a></div></div>
<div class="ttc" id="unit1652_8c_html_a1d19b0eef3b3acd31be88886a0277c2e"><div class="ttname"><a href="unit1652_8c.html#a1d19b0eef3b3acd31be88886a0277c2e">memset</a></div><div class="ttdeci">memset(input, '\0', sizeof(input))</div></div>
<div class="ttc" id="psl_8h_html"><div class="ttname"><a href="psl_8h.html">psl.h</a></div></div>
<div class="ttc" id="struct_connect_bits_html_a91829a03c2fae88d0de9c895e9df8cca"><div class="ttname"><a href="struct_connect_bits.html#a91829a03c2fae88d0de9c895e9df8cca">ConnectBits::socksproxy</a></div><div class="ttdeci">bool socksproxy</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00389">urldata.h:389</a></div></div>
<div class="ttc" id="llist_8c_html_a36b09b21eb5d63095a325575113df4f0"><div class="ttname"><a href="llist_8c.html#a36b09b21eb5d63095a325575113df4f0">Curl_llist_remove</a></div><div class="ttdeci">void Curl_llist_remove(struct curl_llist *list, struct curl_llist_element *e, void *user)</div><div class="ttdef"><b>Definition:</b> <a href="llist_8c_source.html#l00093">llist.c:93</a></div></div>
<div class="ttc" id="progress_8c_html_a00a3a19b8aa449c308923825c7380f13"><div class="ttname"><a href="progress_8c.html#a00a3a19b8aa449c308923825c7380f13">Curl_pgrsLimitWaitTime</a></div><div class="ttdeci">timediff_t Curl_pgrsLimitWaitTime(curl_off_t cursize, curl_off_t startsize, curl_off_t limit, struct curltime start, struct curltime now)</div><div class="ttdef"><b>Definition:</b> <a href="progress_8c_source.html#l00262">progress.c:262</a></div></div>
<div class="ttc" id="struct_curl__multi_html_a0badc572b3d02c4ac183a71dd59f0784"><div class="ttname"><a href="struct_curl__multi.html#a0badc572b3d02c4ac183a71dd59f0784">Curl_multi::pipelining_site_bl</a></div><div class="ttdeci">struct curl_llist pipelining_site_bl</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00144">multihandle.h:144</a></div></div>
<div class="ttc" id="struct_curl__multi_html_abab21812b094af393ac6e639bf4d3ee5"><div class="ttname"><a href="struct_curl__multi.html#abab21812b094af393ac6e639bf4d3ee5">Curl_multi::sockhash</a></div><div class="ttdeci">struct curl_hash sockhash</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00113">multihandle.h:113</a></div></div>
<div class="ttc" id="struct_curl__multi_html_a08af434edc6a2950fd3c03df808c2b9f"><div class="ttname"><a href="struct_curl__multi.html#a08af434edc6a2950fd3c03df808c2b9f">Curl_multi::maxconnects</a></div><div class="ttdeci">long maxconnects</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00123">multihandle.h:123</a></div></div>
<div class="ttc" id="unit1620_8c_html_a3a33462ee2a725f19a5b920fff903e3f"><div class="ttname"><a href="unit1620_8c.html#a3a33462ee2a725f19a5b920fff903e3f">async</a></div><div class="ttdeci">bool async</div><div class="ttdef"><b>Definition:</b> <a href="unit1620_8c_source.html#l00045">unit1620.c:45</a></div></div>
<div class="ttc" id="structcurl__llist__element_html"><div class="ttname"><a href="structcurl__llist__element.html">curl_llist_element</a></div><div class="ttdef"><b>Definition:</b> <a href="llist_8h_source.html#l00030">llist.h:30</a></div></div>
<div class="ttc" id="vtls_8h_html_a665432b41da505b40f72af4161b011aa"><div class="ttname"><a href="vtls_8h.html#a665432b41da505b40f72af4161b011aa">Curl_ssl_getsock</a></div><div class="ttdeci">int Curl_ssl_getsock(struct connectdata *conn, curl_socket_t *socks, int numsocks)</div></div>
<div class="ttc" id="hostip_8c_html_a546aa63aadecc9d74c4cdb7a5e530d40"><div class="ttname"><a href="hostip_8c.html#a546aa63aadecc9d74c4cdb7a5e530d40">Curl_hostcache_clean</a></div><div class="ttdeci">void Curl_hostcache_clean(struct Curl_easy *data, struct curl_hash *hash)</div><div class="ttdef"><b>Definition:</b> <a href="hostip_8c_source.html#l00856">hostip.c:856</a></div></div>
<div class="ttc" id="multi_8h_html_a92acc8d3a23eaae72955b8a8b22c83e3"><div class="ttname"><a href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3">CURLMcode</a></div><div class="ttdeci">CURLMcode</div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00061">multi.h:61</a></div></div>
<div class="ttc" id="struct_curl__sh__entry_html_a7d846f0b4d94827cbcae2d9734ef3d26"><div class="ttname"><a href="struct_curl__sh__entry.html#a7d846f0b4d94827cbcae2d9734ef3d26">Curl_sh_entry::socketp</a></div><div class="ttdeci">void * socketp</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00199">multi.c:199</a></div></div>
<div class="ttc" id="struct_curl__multi_html_a384ffb77229da87366c61bd4ad48d0f4"><div class="ttname"><a href="struct_curl__multi.html#a384ffb77229da87366c61bd4ad48d0f4">Curl_multi::push_userp</a></div><div class="ttdeci">void * push_userp</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00096">multihandle.h:96</a></div></div>
<div class="ttc" id="unit1303_8c_html_a2af6a518c72aaef1705aad4844572398"><div class="ttname"><a href="unit1303_8c.html#a2af6a518c72aaef1705aad4844572398">tv_usec</a></div><div class="ttdeci">data progress t_startsingle tv_usec</div><div class="ttdef"><b>Definition:</b> <a href="unit1303_8c_source.html#l00136">unit1303.c:136</a></div></div>
<div class="ttc" id="multi_8h_html_a92acc8d3a23eaae72955b8a8b22c83e3af6c791401114f6d764dbb8209838ba31"><div class="ttname"><a href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3af6c791401114f6d764dbb8209838ba31">CURLM_BAD_EASY_HANDLE</a></div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00066">multi.h:66</a></div></div>
<div class="ttc" id="multi_8h_html_afea9c23cde7dbbc5aae300dcef4a1523"><div class="ttname"><a href="multi_8h.html#afea9c23cde7dbbc5aae300dcef4a1523">CURL_SOCKET_TIMEOUT</a></div><div class="ttdeci">#define CURL_SOCKET_TIMEOUT</div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00264">multi.h:264</a></div></div>
<div class="ttc" id="struct_c_u_r_l_msg_html_a805019ce36cd301163b184308220c601"><div class="ttname"><a href="struct_c_u_r_l_msg.html#a805019ce36cd301163b184308220c601">CURLMsg::msg</a></div><div class="ttdeci">CURLMSG msg</div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00096">multi.h:96</a></div></div>
<div class="ttc" id="transfer_8c_html_a672d018ece26cc8a8f2da835cc68122f"><div class="ttname"><a href="transfer_8c.html#a672d018ece26cc8a8f2da835cc68122f">Curl_single_getsock</a></div><div class="ttdeci">int Curl_single_getsock(const struct connectdata *conn, curl_socket_t *sock, int numsocks)</div><div class="ttdef"><b>Definition:</b> <a href="transfer_8c_source.html#l01294">transfer.c:1294</a></div></div>
<div class="ttc" id="http2_8h_html"><div class="ttname"><a href="http2_8h.html">http2.h</a></div></div>
<div class="ttc" id="curl_8h_html_a8ebcd4e614f222aca6352ad5052634f8ae118261fbb43ab332f00f65574d08ec9"><div class="ttname"><a href="curl_8h.html#a8ebcd4e614f222aca6352ad5052634f8ae118261fbb43ab332f00f65574d08ec9">CURLPROXY_HTTPS</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00677">curl.h:677</a></div></div>
<div class="ttc" id="transfer_8c_html_a0dae98156f3b0dc5f703d4d19d15c137"><div class="ttname"><a href="transfer_8c.html#a0dae98156f3b0dc5f703d4d19d15c137">Curl_pretransfer</a></div><div class="ttdeci">CURLcode Curl_pretransfer(struct Curl_easy *data)</div><div class="ttdef"><b>Definition:</b> <a href="transfer_8c_source.html#l01353">transfer.c:1353</a></div></div>
<div class="ttc" id="struct_curl__handler_html_a89ffb2a3dbd9c5b06dbbad69b7ef9697"><div class="ttname"><a href="struct_curl__handler.html#a89ffb2a3dbd9c5b06dbbad69b7ef9697">Curl_handler::do_it</a></div><div class="ttdeci">CURLcode(* do_it)(struct connectdata *, bool *done)</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00635">urldata.h:635</a></div></div>
<div class="ttc" id="struct_curl__handler_html_a15e82157dae2fc24151d219318030d7b"><div class="ttname"><a href="struct_curl__handler.html#a15e82157dae2fc24151d219318030d7b">Curl_handler::domore_getsock</a></div><div class="ttdeci">int(* domore_getsock)(struct connectdata *conn, curl_socket_t *socks, int numsocks)</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00670">urldata.h:670</a></div></div>
<div class="ttc" id="multi_8c_html_a451ac80294f46155861c4eb5eed3fa7b"><div class="ttname"><a href="multi_8c.html#a451ac80294f46155861c4eb5eed3fa7b">curl_multi_setopt</a></div><div class="ttdeci">CURLMcode curl_multi_setopt(struct Curl_multi *multi, CURLMoption option,...)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l02723">multi.c:2723</a></div></div>
<div class="ttc" id="struct_curl__easy_html_a0cf0e1b6e7bde28287c58f4453453d73"><div class="ttname"><a href="struct_curl__easy.html#a0cf0e1b6e7bde28287c58f4453453d73">Curl_easy::multi_easy</a></div><div class="ttdeci">struct Curl_multi * multi_easy</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01780">urldata.h:1780</a></div></div>
<div class="ttc" id="multi_8c_html_a63f378a86e9c517942abfef69508a3c8"><div class="ttname"><a href="multi_8c.html#a63f378a86e9c517942abfef69508a3c8">multistate</a></div><div class="ttdeci">#define multistate(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00186">multi.c:186</a></div></div>
<div class="ttc" id="structcurltime_html_a2bb2442cdc8b9e4d2287805ce8febb17"><div class="ttname"><a href="structcurltime.html#a2bb2442cdc8b9e4d2287805ce8febb17">curltime::tv_usec</a></div><div class="ttdeci">int tv_usec</div><div class="ttdef"><b>Definition:</b> <a href="timeval_8h_source.html#l00035">timeval.h:35</a></div></div>
<div class="ttc" id="url_8c_html_a6ba815ed78d02e76c51dc646ffded7dc"><div class="ttname"><a href="url_8c.html#a6ba815ed78d02e76c51dc646ffded7dc">Curl_free_request_state</a></div><div class="ttdeci">void Curl_free_request_state(struct Curl_easy *data)</div><div class="ttdef"><b>Definition:</b> <a href="url_8c_source.html#l02284">url.c:2284</a></div></div>
<div class="ttc" id="structconnectdata_html_a13cc2123ad38902e8ad44e67f10ed7aa"><div class="ttname"><a href="structconnectdata.html#a13cc2123ad38902e8ad44e67f10ed7aa">connectdata::sock</a></div><div class="ttdeci">curl_socket_t sock[2]</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00874">urldata.h:874</a></div></div>
<div class="ttc" id="multihandle_8h_html_aef4270d2c08f187bc6a2d434c782b383a6b795acff4967731f9a7b74e07f8b90e"><div class="ttname"><a href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a6b795acff4967731f9a7b74e07f8b90e">CURLM_STATE_WAITDO</a></div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00049">multihandle.h:49</a></div></div>
<div class="ttc" id="connect_8h_html_acdca2a91749c4f2ca1805e482bad0f90"><div class="ttname"><a href="connect_8h.html#acdca2a91749c4f2ca1805e482bad0f90">connkeep</a></div><div class="ttdeci">#define connkeep(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="connect_8h_source.html#l00146">connect.h:146</a></div></div>
<div class="ttc" id="struct_curl__multi_html_a160d98e6efb8334223d225ad4967a18f"><div class="ttname"><a href="struct_curl__multi.html#a160d98e6efb8334223d225ad4967a18f">Curl_multi::content_length_penalty_size</a></div><div class="ttdeci">long content_length_penalty_size</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00135">multihandle.h:135</a></div></div>
<div class="ttc" id="multi_8h_html_a92acc8d3a23eaae72955b8a8b22c83e3a13188cf491bdb9a8f77a5bed6365c34c"><div class="ttname"><a href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3a13188cf491bdb9a8f77a5bed6365c34c">CURLM_BAD_SOCKET</a></div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00069">multi.h:69</a></div></div>
<div class="ttc" id="struct_curl__message_html"><div class="ttname"><a href="struct_curl__message.html">Curl_message</a></div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00028">multihandle.h:28</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951acaaed2faf20c957350e90a68282ae314"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951acaaed2faf20c957350e90a68282ae314">CURLE_WRITE_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00489">curl.h:489</a></div></div>
<div class="ttc" id="structconnectdata_html_aaf06c7a3f4e682976ea7c3fc86273aa6"><div class="ttname"><a href="structconnectdata.html#aaf06c7a3f4e682976ea7c3fc86273aa6">connectdata::conn_to_host</a></div><div class="ttdeci">struct hostname conn_to_host</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00833">urldata.h:833</a></div></div>
<div class="ttc" id="struct_url_state_html_a09be8d23a5f358dc412d0da96957b52e"><div class="ttname"><a href="struct_url_state.html#a09be8d23a5f358dc412d0da96957b52e">UrlState::expiretime</a></div><div class="ttdeci">struct curltime expiretime</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01306">urldata.h:1306</a></div></div>
<div class="ttc" id="urldata_8h_html_a703cdbe3f849aab3b41d2122f0d126f1"><div class="ttname"><a href="urldata_8h.html#a703cdbe3f849aab3b41d2122f0d126f1">PROTOPT_DUAL</a></div><div class="ttdeci">#define PROTOPT_DUAL</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00707">urldata.h:707</a></div></div>
<div class="ttc" id="select_8h_html_a52ac479a805051f59643588b096024ff"><div class="ttname"><a href="select_8h.html#a52ac479a805051f59643588b096024ff">POLLIN</a></div><div class="ttdeci">#define POLLIN</div><div class="ttdef"><b>Definition:</b> <a href="select_8h_source.html#l00042">select.h:42</a></div></div>
<div class="ttc" id="structconnectdata_html_a81b59f48e7176a865c7459ce844c45dd"><div class="ttname"><a href="structconnectdata.html#a81b59f48e7176a865c7459ce844c45dd">connectdata::async</a></div><div class="ttdeci">struct Curl_async async</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00995">urldata.h:995</a></div></div>
<div class="ttc" id="struct_curl__multi_html_a133cf392cece67e9e02c6ea509db84a2"><div class="ttname"><a href="struct_curl__multi.html#a133cf392cece67e9e02c6ea509db84a2">Curl_multi::socket_cb</a></div><div class="ttdeci">curl_socket_callback socket_cb</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00091">multihandle.h:91</a></div></div>
<div class="ttc" id="unit1652_8c_html_a348cae967f89c4bad8fb37e45a469d1a"><div class="ttname"><a href="unit1652_8c.html#a348cae967f89c4bad8fb37e45a469d1a">msnprintf</a></div><div class="ttdeci">UNITTEST_START msnprintf(input, sizeof(input), &quot;Simple Test&quot;)</div></div>
<div class="ttc" id="llist_8c_html_a8ea7dbefac355279ad19f3dfe345a45a"><div class="ttname"><a href="llist_8c.html#a8ea7dbefac355279ad19f3dfe345a45a">Curl_llist_destroy</a></div><div class="ttdeci">void Curl_llist_destroy(struct curl_llist *list, void *user)</div><div class="ttdef"><b>Definition:</b> <a href="llist_8c_source.html#l00134">llist.c:134</a></div></div>
<div class="ttc" id="struct_single_request_html_a7bd7f9afc35050a31e496a08c5baaeb8"><div class="ttname"><a href="struct_single_request.html#a7bd7f9afc35050a31e496a08c5baaeb8">SingleRequest::bytecount</a></div><div class="ttdeci">curl_off_t bytecount</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00541">urldata.h:541</a></div></div>
<div class="ttc" id="struct_curl__multi_html_a08f57b6e1e94689d0be7963ed552d4ac"><div class="ttname"><a href="struct_curl__multi.html#a08f57b6e1e94689d0be7963ed552d4ac">Curl_multi::pipelining_server_bl</a></div><div class="ttdeci">struct curl_llist pipelining_server_bl</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00147">multihandle.h:147</a></div></div>
<div class="ttc" id="config_8d_html_adcde1b7c7daa51633da6a8a48ef59bec"><div class="ttname"><a href="config_8d.html#adcde1b7c7daa51633da6a8a48ef59bec">t</a></div><div class="ttdeci">Long separated by or the equals sign.Long option names can optionally be given in the config file without the initial double dashes and if the colon or equals characters can be used as separators.If the option is specified with one or two there can be no colon or equals character between the option and its parameter.If the parameter is to contain the parameter must be enclosed within quotes.Within double the following escape sequences are t</div><div class="ttdef"><b>Definition:</b> <a href="config_8d_source.html#l00011">config.d:11</a></div></div>
<div class="ttc" id="struct_single_request_html_a52752c225d845162b5426ce3d49d57c5"><div class="ttname"><a href="struct_single_request.html#a52752c225d845162b5426ce3d49d57c5">SingleRequest::maxfd</a></div><div class="ttdeci">curl_socket_t maxfd</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00584">urldata.h:584</a></div></div>
<div class="ttc" id="struct_curl__multi_html_a2e319cdf49b37a3035f7e2d1012d374e"><div class="ttname"><a href="struct_curl__multi.html#a2e319cdf49b37a3035f7e2d1012d374e">Curl_multi::timer_lastcall</a></div><div class="ttdeci">struct curltime timer_lastcall</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00153">multihandle.h:153</a></div></div>
<div class="ttc" id="multi_8c_html_a21d084ab0c525928e9b6295de101ef63"><div class="ttname"><a href="multi_8c.html#a21d084ab0c525928e9b6295de101ef63">Curl_multi_pipelining_server_bl</a></div><div class="ttdeci">struct curl_llist * Curl_multi_pipelining_server_bl(struct Curl_multi *multi)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l03151">multi.c:3151</a></div></div>
<div class="ttc" id="struct_curl__handler_html_a2fc887b2697c63980406a19108b82a24"><div class="ttname"><a href="struct_curl__handler.html#a2fc887b2697c63980406a19108b82a24">Curl_handler::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00702">urldata.h:702</a></div></div>
<div class="ttc" id="transfer_8h_html"><div class="ttname"><a href="transfer_8h.html">transfer.h</a></div></div>
<div class="ttc" id="sendf_8h_html_a0056494e05c065643a400059b9318270"><div class="ttname"><a href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a></div><div class="ttdeci">#define infof</div><div class="ttdef"><b>Definition:</b> <a href="sendf_8h_source.html#l00044">sendf.h:44</a></div></div>
<div class="ttc" id="structcurl__httppost_html_a09be6ec2bb379d4580f5022be3fa65d7"><div class="ttname"><a href="structcurl__httppost.html#a09be6ec2bb379d4580f5022be3fa65d7">curl_httppost::next</a></div><div class="ttdeci">struct curl_httppost * next</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00159">curl.h:159</a></div></div>
<div class="ttc" id="unit1602_8c_html_a1f81d06f9ccd5ec47176a7fc466b6030"><div class="ttname"><a href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a></div><div class="ttdeci">UNITTEST_START int * value</div><div class="ttdef"><b>Definition:</b> <a href="unit1602_8c_source.html#l00051">unit1602.c:51</a></div></div>
<div class="ttc" id="structpollfd_html_aafb457d11cac415faf0e1e2b825118c2"><div class="ttname"><a href="structpollfd.html#aafb457d11cac415faf0e1e2b825118c2">pollfd::revents</a></div><div class="ttdeci">short revents</div><div class="ttdef"><b>Definition:</b> <a href="select_8h_source.html#l00053">select.h:53</a></div></div>
<div class="ttc" id="multi_8c_html_a63f40c3d8a7a3ea3caf5820def647be3"><div class="ttname"><a href="multi_8c.html#a63f40c3d8a7a3ea3caf5820def647be3">Curl_multi_content_length_penalty_size</a></div><div class="ttdeci">curl_off_t Curl_multi_content_length_penalty_size(struct Curl_multi *multi)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l03136">multi.c:3136</a></div></div>
<div class="ttc" id="conncache_8c_html_a97f883ab6dbffc5418ca83a001dd0a90"><div class="ttname"><a href="conncache_8c.html#a97f883ab6dbffc5418ca83a001dd0a90">Curl_conncache_close_all_connections</a></div><div class="ttdeci">void Curl_conncache_close_all_connections(struct conncache *connc)</div><div class="ttdef"><b>Definition:</b> <a href="conncache_8c_source.html#l00559">conncache.c:559</a></div></div>
<div class="ttc" id="multihandle_8h_html_aef4270d2c08f187bc6a2d434c782b383a6cf481b8c9d796a9d0e1587fe6c2f24b"><div class="ttname"><a href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a6cf481b8c9d796a9d0e1587fe6c2f24b">CURLM_STATE_DO_DONE</a></div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00053">multihandle.h:53</a></div></div>
<div class="ttc" id="multi_8h_html_a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6"><div class="ttname"><a href="multi_8h.html#a92acc8d3a23eaae72955b8a8b22c83e3ae3b5d27fd8dc9cff7a60772cf90cf9d6">CURLM_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00064">multi.h:64</a></div></div>
<div class="ttc" id="hash_8c_html_a79767eb92ddbebaedaee7c568b8bf4bd"><div class="ttname"><a href="hash_8c.html#a79767eb92ddbebaedaee7c568b8bf4bd">Curl_hash_add</a></div><div class="ttdeci">void * Curl_hash_add(struct curl_hash *h, void *key, size_t key_len, void *p)</div><div class="ttdef"><b>Definition:</b> <a href="hash_8c_source.html#l00109">hash.c:109</a></div></div>
<div class="ttc" id="structconnectdata_html_ac9d24fcd15a4c660fa7b6fbf55f6451d"><div class="ttname"><a href="structconnectdata.html#ac9d24fcd15a4c660fa7b6fbf55f6451d">connectdata::port</a></div><div class="ttdeci">long port</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00839">urldata.h:839</a></div></div>
<div class="ttc" id="struct_curl__message_html_aef9ba06f06ae40f5d50ed1b1047005fd"><div class="ttname"><a href="struct_curl__message.html#aef9ba06f06ae40f5d50ed1b1047005fd">Curl_message::list</a></div><div class="ttdeci">struct curl_llist_element list</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00029">multihandle.h:29</a></div></div>
<div class="ttc" id="struct_curl__multi_html_ae4b9e466d46ba43c33f6380de74d762e"><div class="ttname"><a href="struct_curl__multi.html#ae4b9e466d46ba43c33f6380de74d762e">Curl_multi::socket_userp</a></div><div class="ttdeci">void * socket_userp</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00092">multihandle.h:92</a></div></div>
<div class="ttc" id="multi_8c_html_ac47b69b8ab21f9d231e3780ed9999a67"><div class="ttname"><a href="multi_8c.html#ac47b69b8ab21f9d231e3780ed9999a67">CURL_SOCKET_HASH_TABLE_SIZE</a></div><div class="ttdeci">#define CURL_SOCKET_HASH_TABLE_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00061">multi.c:61</a></div></div>
<div class="ttc" id="llist_8c_html_a9fb691307db5bfd5d29315b96b56ad2b"><div class="ttname"><a href="llist_8c.html#a9fb691307db5bfd5d29315b96b56ad2b">Curl_llist_insert_next</a></div><div class="ttdeci">void Curl_llist_insert_next(struct curl_llist *list, struct curl_llist_element *e, const void *p, struct curl_llist_element *ne)</div><div class="ttdef"><b>Definition:</b> <a href="llist_8c_source.html#l00057">llist.c:57</a></div></div>
<div class="ttc" id="select_8c_html_ae71a741eee93be102e4bf9083953a8b2"><div class="ttname"><a href="select_8c.html#ae71a741eee93be102e4bf9083953a8b2">Curl_poll</a></div><div class="ttdeci">int Curl_poll(struct pollfd ufds[], unsigned int nfds, int timeout_ms)</div><div class="ttdef"><b>Definition:</b> <a href="select_8c_source.html#l00392">select.c:392</a></div></div>
<div class="ttc" id="urldata_8h_html_a766105b6448011146b33df92f55d2261"><div class="ttname"><a href="urldata_8h.html#a766105b6448011146b33df92f55d2261">PROTOPT_WILDCARD</a></div><div class="ttdeci">#define PROTOPT_WILDCARD</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00728">urldata.h:728</a></div></div>
<div class="ttc" id="warnless_8h_html"><div class="ttname"><a href="warnless_8h.html">warnless.h</a></div></div>
<div class="ttc" id="curl__printf_8h_html_aab6e63106cf29e5160e5c2d63db86d27"><div class="ttname"><a href="curl__printf_8h.html#aab6e63106cf29e5160e5c2d63db86d27">fprintf</a></div><div class="ttdeci">#define fprintf</div><div class="ttdef"><b>Definition:</b> <a href="curl__printf_8h_source.html#l00041">curl_printf.h:41</a></div></div>
<div class="ttc" id="conncache_8c_html_ae8c2e055a5c5a9e187ebedfd95166ee2"><div class="ttname"><a href="conncache_8c.html#ae8c2e055a5c5a9e187ebedfd95166ee2">Curl_conncache_init</a></div><div class="ttdeci">int Curl_conncache_init(struct conncache *connc, int size)</div><div class="ttdef"><b>Definition:</b> <a href="conncache_8c_source.html#l00133">conncache.c:133</a></div></div>
<div class="ttc" id="structcurl__llist__element_html_ab1cc9056ce530ed9893aa4b5b95dd257"><div class="ttname"><a href="structcurl__llist__element.html#ab1cc9056ce530ed9893aa4b5b95dd257">curl_llist_element::prev</a></div><div class="ttdeci">struct curl_llist_element * prev</div><div class="ttdef"><b>Definition:</b> <a href="llist_8h_source.html#l00032">llist.h:32</a></div></div>
<div class="ttc" id="asyn_8h_html_ad14e13eb0e765d0d2b825ae8d0ad7c00"><div class="ttname"><a href="asyn_8h.html#ad14e13eb0e765d0d2b825ae8d0ad7c00">Curl_resolver_wait_resolv</a></div><div class="ttdeci">CURLcode Curl_resolver_wait_resolv(struct connectdata *conn, struct Curl_dns_entry **dnsentry)</div></div>
<div class="ttc" id="struct_curl__sh__entry_html_ae5d8bcf6fe986e6c2b315b0b4fcddcc2"><div class="ttname"><a href="struct_curl__sh__entry.html#ae5d8bcf6fe986e6c2b315b0b4fcddcc2">Curl_sh_entry::action</a></div><div class="ttdeci">int action</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00197">multi.c:197</a></div></div>
<div class="ttc" id="multi_8c_html_a759a3f675165554a5f5d6e784afa7fe0"><div class="ttname"><a href="multi_8c.html#a759a3f675165554a5f5d6e784afa7fe0">Curl_expire</a></div><div class="ttdeci">void Curl_expire(struct Curl_easy *data, time_t milli, expire_id id)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l02994">multi.c:2994</a></div></div>
<div class="ttc" id="urldata_8h_html"><div class="ttname"><a href="urldata_8h.html">urldata.h</a></div></div>
<div class="ttc" id="multi-debugcallback_8c_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition:</b> <a href="multi-debugcallback_8c_source.html#l00038">multi-debugcallback.c:38</a></div></div>
<div class="ttc" id="structcurl__llist_html"><div class="ttname"><a href="structcurl__llist.html">curl_llist</a></div><div class="ttdef"><b>Definition:</b> <a href="llist_8h_source.html#l00036">llist.h:36</a></div></div>
<div class="ttc" id="conncache_8c_html_a4b099b50e4232c69faa023dd25e96176"><div class="ttname"><a href="conncache_8c.html#a4b099b50e4232c69faa023dd25e96176">Curl_conncache_destroy</a></div><div class="ttdeci">void Curl_conncache_destroy(struct conncache *connc)</div><div class="ttdef"><b>Definition:</b> <a href="conncache_8c_source.html#l00154">conncache.c:154</a></div></div>
<div class="ttc" id="struct_curl__multi_html_a0b29ca948d79c169c92f28239fbdd6ea"><div class="ttname"><a href="struct_curl__multi.html#a0b29ca948d79c169c92f28239fbdd6ea">Curl_multi::max_pipeline_length</a></div><div class="ttdeci">long max_pipeline_length</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00132">multihandle.h:132</a></div></div>
<div class="ttc" id="urldata_8h_html_a1107f8f3c79ed6d630958c8363ee37da"><div class="ttname"><a href="urldata_8h.html#a1107f8f3c79ed6d630958c8363ee37da">GOOD_EASY_HANDLE</a></div><div class="ttdeci">#define GOOD_EASY_HANDLE(x)</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00154">urldata.h:154</a></div></div>
<div class="ttc" id="struct_c_u_r_l_msg_html"><div class="ttname"><a href="struct_c_u_r_l_msg.html">CURLMsg</a></div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00095">multi.h:95</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951aeaaa9c51dc850e9dd9b052c4aa32b782"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951aeaaa9c51dc850e9dd9b052c4aa32b782">CURLE_NO_CONNECTION_AVAILABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00576">curl.h:576</a></div></div>
<div class="ttc" id="urldata_8h_html_a81a92a35e60e84d80aa4d2b5a6959722"><div class="ttname"><a href="urldata_8h.html#a81a92a35e60e84d80aa4d2b5a6959722">PROTOPT_STREAM</a></div><div class="ttdeci">#define PROTOPT_STREAM</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00722">urldata.h:722</a></div></div>
<div class="ttc" id="http__proxy_8c_html_aefbaf7cf98e512186d12b98156355df7"><div class="ttname"><a href="http__proxy_8c.html#aefbaf7cf98e512186d12b98156355df7">Curl_connect_complete</a></div><div class="ttdeci">bool Curl_connect_complete(struct connectdata *conn)</div><div class="ttdef"><b>Definition:</b> <a href="http__proxy_8c_source.html#l00138">http_proxy.c:138</a></div></div>
<div class="ttc" id="hostip_8c_html_a34d32d704f4d0ac5b0eed2ced2c88fba"><div class="ttname"><a href="hostip_8c.html#a34d32d704f4d0ac5b0eed2ced2c88fba">Curl_fetch_addr</a></div><div class="ttdeci">struct Curl_dns_entry * Curl_fetch_addr(struct connectdata *conn, const char *hostname, int port)</div><div class="ttdef"><b>Definition:</b> <a href="hostip_8c_source.html#l00350">hostip.c:350</a></div></div>
<div class="ttc" id="memdebug_8h_html"><div class="ttname"><a href="memdebug_8h.html">memdebug.h</a></div></div>
<div class="ttc" id="multihandle_8h_html_aef4270d2c08f187bc6a2d434c782b383a0dd68b573d04e40a97d73ec43ffe6a47"><div class="ttname"><a href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a0dd68b573d04e40a97d73ec43ffe6a47">CURLM_STATE_WAITPERFORM</a></div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00054">multihandle.h:54</a></div></div>
<div class="ttc" id="multihandle_8h_html_aef4270d2c08f187bc6a2d434c782b383af9985742d6247a55f106eb2ae03f50a2"><div class="ttname"><a href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383af9985742d6247a55f106eb2ae03f50a2">CURLM_STATE_PERFORM</a></div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00055">multihandle.h:55</a></div></div>
<div class="ttc" id="curl_8h_html_adb5a46d02359d2379dc7e0904c987828"><div class="ttname"><a href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a></div><div class="ttdeci">int curl_socket_t</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00130">curl.h:130</a></div></div>
<div class="ttc" id="url_8c_html_ab33224c0b40950d8ca21b816b234db3e"><div class="ttname"><a href="url_8c.html#ab33224c0b40950d8ca21b816b234db3e">Curl_protocol_connecting</a></div><div class="ttdeci">CURLcode Curl_protocol_connecting(struct connectdata *conn, bool *done)</div><div class="ttdef"><b>Definition:</b> <a href="url_8c_source.html#l01575">url.c:1575</a></div></div>
<div class="ttc" id="multi_8h_html_a8407d7bead25caca133cf51544b96406"><div class="ttname"><a href="multi_8h.html#a8407d7bead25caca133cf51544b96406">curl_push_callback</a></div><div class="ttdeci">int(* curl_push_callback)(CURL *parent, CURL *easy, size_t num_headers, struct curl_pushheaders *headers, void *userp)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00431">multi.h:431</a></div></div>
<div class="ttc" id="struct_wildcard_data_html_aa312ae53f66b4fe3f10c3701c67abecf"><div class="ttname"><a href="struct_wildcard_data.html#aa312ae53f66b4fe3f10c3701c67abecf">WildcardData::state</a></div><div class="ttdeci">curl_wildcard_states state</div><div class="ttdef"><b>Definition:</b> <a href="wildcard_8h_source.html#l00047">wildcard.h:47</a></div></div>
<div class="ttc" id="url_8h_html"><div class="ttname"><a href="url_8h.html">url.h</a></div></div>
<div class="ttc" id="splay_8c_html_a72fa1f264be21b58928ad61c366cd234"><div class="ttname"><a href="splay_8c.html#a72fa1f264be21b58928ad61c366cd234">Curl_splayremovebyaddr</a></div><div class="ttdeci">int Curl_splayremovebyaddr(struct Curl_tree *t, struct Curl_tree *removenode, struct Curl_tree **newroot)</div><div class="ttdef"><b>Definition:</b> <a href="splay_8c_source.html#l00209">splay.c:209</a></div></div>
<div class="ttc" id="transfer_8h_html_a5d8d8c391641700d5c2f715193e27963a88a3c59ee1a6490b85dc50d0568e2603"><div class="ttname"><a href="transfer_8h.html#a5d8d8c391641700d5c2f715193e27963a88a3c59ee1a6490b85dc50d0568e2603">FOLLOW_REDIR</a></div><div class="ttdef"><b>Definition:</b> <a href="transfer_8h_source.html#l00041">transfer.h:41</a></div></div>
<div class="ttc" id="get_8d_html_a38b0ef81b65f2aee282c8c217a123176"><div class="ttname"><a href="get_8d.html#a38b0ef81b65f2aee282c8c217a123176">data</a></div><div class="ttdeci">Long this option will make all data specified with data</div><div class="ttdef"><b>Definition:</b> <a href="get_8d_source.html#l00005">get.d:5</a></div></div>
<div class="ttc" id="structconnectdata_html"><div class="ttname"><a href="structconnectdata.html">connectdata</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00782">urldata.h:782</a></div></div>
<div class="ttc" id="struct_single_request_html"><div class="ttname"><a href="struct_single_request.html">SingleRequest</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00533">urldata.h:533</a></div></div>
<div class="ttc" id="multihandle_8h_html_aef4270d2c08f187bc6a2d434c782b383"><div class="ttname"><a href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383">CURLMstate</a></div><div class="ttdeci">CURLMstate</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00037">multihandle.h:37</a></div></div>
<div class="ttc" id="structhostname_html_aee7d0ff8210c25b87d6fdeacf8ea7939"><div class="ttname"><a href="structhostname.html#aee7d0ff8210c25b87d6fdeacf8ea7939">hostname::dispname</a></div><div class="ttdeci">const char * dispname</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00450">urldata.h:450</a></div></div>
<div class="ttc" id="noproxy_8d_html_a76bbcca5c6576b1086f83570943ed989"><div class="ttname"><a href="noproxy_8d.html#a76bbcca5c6576b1086f83570943ed989">hostname</a></div><div class="ttdeci">Long if one is specified.The only wildcard is a single which matches all and effectively disables the proxy.Each name in this list is matched as either a domain which contains the hostname</div><div class="ttdef"><b>Definition:</b> <a href="noproxy_8d_source.html#l00006">noproxy.d:6</a></div></div>
<div class="ttc" id="multi_8h_html_a18a7e76c1666503b960dfdfa3cf9843f"><div class="ttname"><a href="multi_8h.html#a18a7e76c1666503b960dfdfa3cf9843f">curl_multi_timer_callback</a></div><div class="ttdeci">int(* curl_multi_timer_callback)(CURLM *multi, long timeout_ms, void *userp)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00287">multi.h:287</a></div></div>
<div class="ttc" id="unit1602_8c_html_a35af0be900467fedbb610bd6ea65ed78"><div class="ttname"><a href="unit1602_8c.html#a35af0be900467fedbb610bd6ea65ed78">key</a></div><div class="ttdeci">int key</div><div class="ttdef"><b>Definition:</b> <a href="unit1602_8c_source.html#l00056">unit1602.c:56</a></div></div>
<div class="ttc" id="struct_single_request_html_a3018293fe5f120a8a4c77d16207ab5da"><div class="ttname"><a href="struct_single_request.html#a3018293fe5f120a8a4c77d16207ab5da">SingleRequest::chunk</a></div><div class="ttdeci">bool chunk</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00610">urldata.h:610</a></div></div>
<div class="ttc" id="struct_curl__multi_html_a27e434e78227c62c5107dc06754d2585"><div class="ttname"><a href="struct_curl__multi.html#a27e434e78227c62c5107dc06754d2585">Curl_multi::pending</a></div><div class="ttdeci">struct curl_llist pending</div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00087">multihandle.h:87</a></div></div>
<div class="ttc" id="multi_8c_html_a89f33160c901e73e12eba2029168b967"><div class="ttname"><a href="multi_8c.html#a89f33160c901e73e12eba2029168b967">Curl_multi_pipelining_site_bl</a></div><div class="ttdeci">struct curl_llist * Curl_multi_pipelining_site_bl(struct Curl_multi *multi)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l03146">multi.c:3146</a></div></div>
<div class="ttc" id="multi_8c_html_ab0c732e91052fb624136ff8498f65b80"><div class="ttname"><a href="multi_8c.html#ab0c732e91052fb624136ff8498f65b80">curl_multi_socket</a></div><div class="ttdeci">CURLMcode curl_multi_socket(struct Curl_multi *multi, curl_socket_t s, int *running_handles)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l02796">multi.c:2796</a></div></div>
<div class="ttc" id="structdata_html"><div class="ttname"><a href="structdata.html">data</a></div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00029">debug.c:29</a></div></div>
<div class="ttc" id="psl_8h_html_ab188f302b40b6db9599e4d551581862d"><div class="ttname"><a href="psl_8h.html#ab188f302b40b6db9599e4d551581862d">Curl_psl_destroy</a></div><div class="ttdeci">#define Curl_psl_destroy(pslcache)</div><div class="ttdef"><b>Definition:</b> <a href="psl_8h_source.html#l00044">psl.h:44</a></div></div>
<div class="ttc" id="progress_8h_html_abc090d144fb55d31dff488d24c46fb2aaab6241ac2eec69ddfb082bb472ca56a7"><div class="ttname"><a href="progress_8h.html#abc090d144fb55d31dff488d24c46fb2aaab6241ac2eec69ddfb082bb472ca56a7">TIMER_PRETRANSFER</a></div><div class="ttdef"><b>Definition:</b> <a href="progress_8h_source.html#l00035">progress.h:35</a></div></div>
<div class="ttc" id="multi_8c_html_a7a9f018ccced30e7c65ea89e2c85382f"><div class="ttname"><a href="multi_8c.html#a7a9f018ccced30e7c65ea89e2c85382f">Curl_expire_clear</a></div><div class="ttdeci">void Curl_expire_clear(struct Curl_easy *data)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l03070">multi.c:3070</a></div></div>
<div class="ttc" id="hash_8c_html_a36789eb2833288dbbdd77d0317132131"><div class="ttname"><a href="hash_8c.html#a36789eb2833288dbbdd77d0317132131">Curl_hash_pick</a></div><div class="ttdeci">void * Curl_hash_pick(struct curl_hash *h, void *key, size_t key_len)</div><div class="ttdef"><b>Definition:</b> <a href="hash_8c_source.html#l00160">hash.c:160</a></div></div>
<div class="ttc" id="curl__memory_8h_html_abc013d1a27cb591a5316801c509c781f"><div class="ttname"><a href="curl__memory_8h.html#abc013d1a27cb591a5316801c509c781f">calloc</a></div><div class="ttdeci">#define calloc(nbelem, size)</div><div class="ttdef"><b>Definition:</b> <a href="curl__memory_8h_source.html#l00126">curl_memory.h:126</a></div></div>
<div class="ttc" id="multihandle_8h_html_aef4270d2c08f187bc6a2d434c782b383a7c2aa7448cf01c0e395ec38a4afe9569"><div class="ttname"><a href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383a7c2aa7448cf01c0e395ec38a4afe9569">CURLM_STATE_WAITRESOLVE</a></div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00041">multihandle.h:41</a></div></div>
<div class="ttc" id="transfer_8c_html_a6315105ff113a2067916488c9cce4905"><div class="ttname"><a href="transfer_8c.html#a6315105ff113a2067916488c9cce4905">Curl_retry_request</a></div><div class="ttdeci">CURLcode Curl_retry_request(struct connectdata *conn, char **url)</div><div class="ttdef"><b>Definition:</b> <a href="transfer_8c_source.html#l01673">transfer.c:1673</a></div></div>
<div class="ttc" id="cacert_8d_html_a858975e5da2b16954a88f19566bff526"><div class="ttname"><a href="cacert_8d.html#a858975e5da2b16954a88f19566bff526">set</a></div><div class="ttdeci">Long so this option is typically used to alter that default file.curl recognizes the environment variable named CURL_CA_BUNDLE if it is set</div><div class="ttdef"><b>Definition:</b> <a href="cacert_8d_source.html#l00008">cacert.d:8</a></div></div>
<div class="ttc" id="urldata_8h_html_a805d6a88e5f44ae1676bf5ef62b20b26"><div class="ttname"><a href="urldata_8h.html#a805d6a88e5f44ae1676bf5ef62b20b26">PROTOPT_DIRLOCK</a></div><div class="ttdeci">#define PROTOPT_DIRLOCK</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00713">urldata.h:713</a></div></div>
<div class="ttc" id="test_8h_html_a5a82db8b40f056c5cf54cd44691f7dce"><div class="ttname"><a href="test_8h.html#a5a82db8b40f056c5cf54cd44691f7dce">multi_timeout</a></div><div class="ttdeci">#define multi_timeout(A, B)</div><div class="ttdef"><b>Definition:</b> <a href="test_8h_source.html#l00353">test.h:353</a></div></div>
<div class="ttc" id="multihandle_8h_html_aef4270d2c08f187bc6a2d434c782b383ae8e8f67293766e2144d816f52fe9e29c"><div class="ttname"><a href="multihandle_8h.html#aef4270d2c08f187bc6a2d434c782b383ae8e8f67293766e2144d816f52fe9e29c">CURLM_STATE_WAITCONNECT</a></div><div class="ttdef"><b>Definition:</b> <a href="multihandle_8h_source.html#l00042">multihandle.h:42</a></div></div>
<div class="ttc" id="timeval_8h_html_aeb19832fd3e7f11c8d047d6824300e87"><div class="ttname"><a href="timeval_8h.html#aeb19832fd3e7f11c8d047d6824300e87">timediff_t</a></div><div class="ttdeci">int timediff_t</div><div class="ttdef"><b>Definition:</b> <a href="timeval_8h_source.html#l00028">timeval.h:28</a></div></div>
<div class="ttc" id="structcurl__llist__element_html_a75de5ec93f47535d096929a045f46467"><div class="ttname"><a href="structcurl__llist__element.html#a75de5ec93f47535d096929a045f46467">curl_llist_element::next</a></div><div class="ttdeci">struct curl_llist_element * next</div><div class="ttdef"><b>Definition:</b> <a href="llist_8h_source.html#l00033">llist.h:33</a></div></div>
<div class="ttc" id="curl__setup__once_8h_html_a805079d1643f348afa725659b45b6f87"><div class="ttname"><a href="curl__setup__once_8h.html#a805079d1643f348afa725659b45b6f87">DEBUGF</a></div><div class="ttdeci">#define DEBUGF(x)</div><div class="ttdef"><b>Definition:</b> <a href="curl__setup__once_8h_source.html#l00390">curl_setup_once.h:390</a></div></div>
<div class="ttc" id="structconnectdata_html_a3df7eee97914936f17a228eb2cf84eed"><div class="ttname"><a href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">connectdata::data</a></div><div class="ttdeci">struct Curl_easy * data</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00786">urldata.h:786</a></div></div>
<div class="ttc" id="structtime__node_html_aef50545dded0581dcdc6b60a08ef2246"><div class="ttname"><a href="structtime__node.html#aef50545dded0581dcdc6b60a08ef2246">time_node::list</a></div><div class="ttdeci">struct curl_llist_element list</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01223">urldata.h:1223</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_409f97388efe006bc3438b95e9edef48.html">components</a></li><li class="navelem"><a class="el" href="dir_e9014474357f0c50c4c87dd9066e36b7.html">curl</a></li><li class="navelem"><a class="el" href="dir_efb6013f246e7f8b3181c5014844a411.html">lib</a></li><li class="navelem"><a class="el" href="multi_8c.html">multi.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
