<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Plante: esp32-snippets/networking/bootwifi/BootWiFi.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Plante
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_boot_wi_fi_8cpp_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">BootWiFi.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_boot_wi_fi_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;freertos/FreeRTOS.h&gt;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;freertos/task.h&gt;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;esp_log.h&gt;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;esp_err.h&gt;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;nvs_flash.h&gt;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="_c_p_p_n_v_s_8h.html">CPPNVS.h</a>&gt;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;driver/gpio.h&gt;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//#include &lt;tcpip_adapter.h&gt;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//#include &lt;lwip/sockets.h&gt;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="_wi_fi_8h.html">WiFi.h</a>&gt;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="_http_server_8h.html">HttpServer.h</a>&gt;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;System.h&gt;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="_general_utils_8h.html">GeneralUtils.h</a>&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_boot_wi_fi_8h.html">BootWiFi.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;sdkconfig.h&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="select_a_p_8h.html">selectAP.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// If the structure of a record saved for a subsequent reboot changes</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">// then consider using semver to change the version number or else</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">// we may try and boot with the wrong data.</span></div><div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="_boot_wi_fi_8cpp.html#abcd911594f90afdd5b340c431c149e72">   31</a></span>&#160;<span class="preprocessor">#define KEY_VERSION &quot;version&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="_boot_wi_fi_8cpp.html#a7ab1f77ed0eeb7cca99cbe175fc91f6f">   32</a></span>&#160;uint32_t <a class="code" href="_boot_wi_fi_8cpp.html#a7ab1f77ed0eeb7cca99cbe175fc91f6f">g_version</a>=0x0100;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="_boot_wi_fi_8cpp.html#a6dd1fbdc2e55963d42b252357899b190">   34</a></span>&#160;<span class="preprocessor">#define KEY_CONNECTION_INFO &quot;connectionInfo&quot;   // Key used in NVS for connection info</span></div><div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="_boot_wi_fi_8cpp.html#a85eee221d2e2055c9a2fc7b0934e7154">   35</a></span>&#160;<span class="preprocessor">#define BOOTWIFI_NAMESPACE  &quot;bootwifi&quot;         // Namespace in NVS for bootwifi</span></div><div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="_boot_wi_fi_8cpp.html#afdc7ff61b82a89ab09751e5d6dbfde88">   36</a></span>&#160;<span class="preprocessor">#define SSID_SIZE           (32)               // Maximum SSID size</span></div><div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="_boot_wi_fi_8cpp.html#a4beb8dccd4fdbe871c5ffe78ac63b0cb">   37</a></span>&#160;<span class="preprocessor">#define PASSWORD_SIZE       (64)               // Maximum password size</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="structconnection__info__t.html">   43</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="structconnection__info__t.html#a0d5e9764a9da1df9929fd76d14120ca0">   44</a></span>&#160;    <span class="keywordtype">char</span> ssid[<a class="code" href="_boot_wi_fi_8cpp.html#afdc7ff61b82a89ab09751e5d6dbfde88">SSID_SIZE</a>];</div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="structconnection__info__t.html#acd3f51d14b680a182d9bdae742af87dd">   45</a></span>&#160;    <span class="keywordtype">char</span> password[<a class="code" href="_boot_wi_fi_8cpp.html#a4beb8dccd4fdbe871c5ffe78ac63b0cb">PASSWORD_SIZE</a>];</div><div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="structconnection__info__t.html#a912575fe32a4b37c941e06e241fc53ed">   46</a></span>&#160;    tcpip_adapter_ip_info_t <a class="code" href="structconnection__info__t.html#a912575fe32a4b37c941e06e241fc53ed">ipInfo</a>; <span class="comment">// Optional static IP information</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;} <a class="code" href="structconnection__info__t.html">connection_info_t</a>;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">//static bootwifi_callback_t g_callback = NULL; // Callback function to be invoked when we have finished.</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">// Forward declarations</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> saveConnectionInfo(<a class="code" href="structconnection__info__t.html">connection_info_t</a> *pConnectionInfo);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> LOG_TAG[] = <span class="stringliteral">&quot;bootwifi&quot;</span>;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> dumpConnectionInfo(<a class="code" href="structconnection__info__t.html">connection_info_t</a> *pConnectionInfo) {</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;connection_info.ssid = %.*s&quot;</span>,     <a class="code" href="_boot_wi_fi_8cpp.html#afdc7ff61b82a89ab09751e5d6dbfde88">SSID_SIZE</a>,     pConnectionInfo-&gt;<a class="code" href="structconnection__info__t.html#a0d5e9764a9da1df9929fd76d14120ca0">ssid</a>);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;connection_info.password = %.*s&quot;</span>, <a class="code" href="_boot_wi_fi_8cpp.html#a4beb8dccd4fdbe871c5ffe78ac63b0cb">PASSWORD_SIZE</a>, pConnectionInfo-&gt;<a class="code" href="structconnection__info__t.html#acd3f51d14b680a182d9bdae742af87dd">password</a>);</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;ip: %s, gw: %s, netmask: %s&quot;</span>,</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <a class="code" href="class_general_utils.html#a6060e23d9a79cad1d9684282b1b8eec3">GeneralUtils::ipToString</a>((uint8_t*)&amp;pConnectionInfo-&gt;<a class="code" href="structconnection__info__t.html#a912575fe32a4b37c941e06e241fc53ed">ipInfo</a>.ip).c_str(),</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <a class="code" href="class_general_utils.html#a6060e23d9a79cad1d9684282b1b8eec3">GeneralUtils::ipToString</a>((uint8_t*)&amp;pConnectionInfo-&gt;<a class="code" href="structconnection__info__t.html#a912575fe32a4b37c941e06e241fc53ed">ipInfo</a>.gw).c_str(),</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <a class="code" href="class_general_utils.html#a6060e23d9a79cad1d9684282b1b8eec3">GeneralUtils::ipToString</a>((uint8_t*)&amp;pConnectionInfo-&gt;<a class="code" href="structconnection__info__t.html#a912575fe32a4b37c941e06e241fc53ed">ipInfo</a>.netmask).c_str());</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;}</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> getConnectionInfo(<a class="code" href="structconnection__info__t.html">connection_info_t</a> *pConnectionInfo) {</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;&gt;&gt; getConnectionInfo&quot;</span>);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordtype">size_t</span>     <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    uint32_t   <a class="code" href="_b_l_e_eddystone_t_l_m_8h.html#ab22abc2906422da61885ac6c8e6a1a59">version</a>;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="class_n_v_s.html">NVS</a> myNamespace(<a class="code" href="_boot_wi_fi_8cpp.html#a85eee221d2e2055c9a2fc7b0934e7154">BOOTWIFI_NAMESPACE</a>);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    myNamespace.get(<a class="code" href="_boot_wi_fi_8cpp.html#abcd911594f90afdd5b340c431c149e72">KEY_VERSION</a>, <a class="code" href="_b_l_e_eddystone_t_l_m_8h.html#ab22abc2906422da61885ac6c8e6a1a59">version</a>);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">// Check the versions match</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="_b_l_e_eddystone_t_l_m_8h.html#ab22abc2906422da61885ac6c8e6a1a59">version</a> &amp; 0xff00) != (<a class="code" href="_boot_wi_fi_8cpp.html#a7ab1f77ed0eeb7cca99cbe175fc91f6f">g_version</a> &amp; 0xff00)) {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;Incompatible versions ... current is %x, found is %x&quot;</span>, <a class="code" href="_b_l_e_eddystone_t_l_m_8h.html#ab22abc2906422da61885ac6c8e6a1a59">version</a>, <a class="code" href="_boot_wi_fi_8cpp.html#a7ab1f77ed0eeb7cca99cbe175fc91f6f">g_version</a>);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    }</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> = <span class="keyword">sizeof</span>(<a class="code" href="structconnection__info__t.html">connection_info_t</a>);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    myNamespace.get(<a class="code" href="_boot_wi_fi_8cpp.html#a6dd1fbdc2e55963d42b252357899b190">KEY_CONNECTION_INFO</a>, (uint8_t*)pConnectionInfo, <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment">// Do a sanity check on the SSID</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">if</span> (strlen(pConnectionInfo-&gt;ssid) == 0) {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;NULL ssid detected&quot;</span>);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    }</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    dumpConnectionInfo(pConnectionInfo);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;&lt;&lt; getConnectionInfo&quot;</span>);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;} <span class="comment">// getConnectionInfo</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> saveConnectionInfo(<a class="code" href="structconnection__info__t.html">connection_info_t</a> *pConnectionInfo) {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    dumpConnectionInfo(pConnectionInfo);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="class_n_v_s.html">NVS</a> myNamespace(<a class="code" href="_boot_wi_fi_8cpp.html#a85eee221d2e2055c9a2fc7b0934e7154">BOOTWIFI_NAMESPACE</a>);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    myNamespace.set(<a class="code" href="_boot_wi_fi_8cpp.html#a6dd1fbdc2e55963d42b252357899b190">KEY_CONNECTION_INFO</a>, (uint8_t*)pConnectionInfo, <span class="keyword">sizeof</span>(<a class="code" href="structconnection__info__t.html">connection_info_t</a>));</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    myNamespace.set(<a class="code" href="_boot_wi_fi_8cpp.html#abcd911594f90afdd5b340c431c149e72">KEY_VERSION</a>, <a class="code" href="_boot_wi_fi_8cpp.html#a7ab1f77ed0eeb7cca99cbe175fc91f6f">g_version</a>);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    myNamespace.commit();</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;} <span class="comment">// setConnectionInfo</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> checkOverrideGpio() {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="preprocessor">#ifdef BOOTWIFI_OVERRIDE_GPIO</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    gpio_pad_select_gpio(BOOTWIFI_OVERRIDE_GPIO);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    gpio_set_direction(BOOTWIFI_OVERRIDE_GPIO, GPIO_MODE_INPUT);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    gpio_set_pull_mode(BOOTWIFI_OVERRIDE_GPIO, GPIO_PULLDOWN_ONLY);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">return</span> gpio_get_level(BOOTWIFI_OVERRIDE_GPIO);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">return</span> 0; <span class="comment">// If no boot override, return false</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;} <span class="comment">// checkOverrideGpio</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> sendForm(<a class="code" href="class_http_request.html">HttpRequest</a>* pRequest, <a class="code" href="class_http_response.html">HttpResponse</a>* pResponse) {</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  pResponse-&gt;<a class="code" href="class_http_response.html#af13a61ae987f15599232fa30d2cfdeab">setStatus</a>(<a class="code" href="class_http_response.html#acbede84921ca67c8b69bc8d34eaca9df">HttpResponse::HTTP_STATUS_OK</a>, <span class="stringliteral">&quot;OK&quot;</span>);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  pResponse-&gt;<a class="code" href="class_http_response.html#a6a83c668bb537a24f3e62255501fb25e">addHeader</a>(<a class="code" href="class_http_request.html#acd9cc6de0d1b29e34ed9a29b7825726e">HttpRequest::HTTP_HEADER_CONTENT_TYPE</a>, <span class="stringliteral">&quot;text/html&quot;</span>);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    pResponse-&gt;<a class="code" href="class_http_response.html#a68bc032812a96326d9fe4fde668a372b">sendData</a>(<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>((<span class="keywordtype">char</span>*)<a class="code" href="select_a_p_8h.html#ac8d9ac0dadd4b7d1789c3337585ec36e">selectAP_html</a>, <a class="code" href="select_a_p_8h.html#a671d338d987a8cc8945f1ded17a04cd5">selectAP_html_len</a>));</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    pResponse-&gt;<a class="code" href="class_http_response.html#a9fa95070f1861a24558f4a63f6d87818">close</a>();</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;} <span class="comment">// sendForm</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> copyData(uint8_t* pTarget, <span class="keywordtype">size_t</span> targetLength, <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> source) {</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="unit1652_8c.html#a1d19b0eef3b3acd31be88886a0277c2e">memset</a>(pTarget, 0, targetLength);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordtype">size_t</span> copySize = (source.length() &gt; targetLength)? targetLength:source.length();</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="unit1304_8c.html#a82a69fcfe92d9db6dd585ccc532a2ab7">memcpy</a>(pTarget, source.data(), copySize);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span> (copySize &lt; targetLength) {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        pTarget[copySize] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    }</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;} <span class="comment">// copyData</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> processForm(<a class="code" href="class_http_request.html">HttpRequest</a>* pRequest, <a class="code" href="class_http_response.html">HttpResponse</a>* pResponse) {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;&gt;&gt; processForm&quot;</span>);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    std::map&lt;std::string, std::string&gt; formMap = pRequest-&gt;<a class="code" href="class_http_request.html#a53f09999b5f93920c79eed1423a490cf">parseForm</a>();</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="structconnection__info__t.html">connection_info_t</a> connectionInfo;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    copyData((uint8_t*)connectionInfo.<a class="code" href="structconnection__info__t.html#a0d5e9764a9da1df9929fd76d14120ca0">ssid</a>, <a class="code" href="_boot_wi_fi_8cpp.html#afdc7ff61b82a89ab09751e5d6dbfde88">SSID_SIZE</a>, formMap[<span class="stringliteral">&quot;ssid&quot;</span>]);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    copyData((uint8_t*)connectionInfo.<a class="code" href="structconnection__info__t.html#acd3f51d14b680a182d9bdae742af87dd">password</a>, <a class="code" href="_boot_wi_fi_8cpp.html#a4beb8dccd4fdbe871c5ffe78ac63b0cb">PASSWORD_SIZE</a>, formMap[<span class="stringliteral">&quot;password&quot;</span>]);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> ipStr = formMap.at(<span class="stringliteral">&quot;ip&quot;</span>);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">if</span> (ipStr.empty()) {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;No IP address using default 0.0.0.0&quot;</span>);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            connectionInfo.<a class="code" href="structconnection__info__t.html#a912575fe32a4b37c941e06e241fc53ed">ipInfo</a>.ip.addr = 0;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <a class="code" href="connect__with__static__ip_8c.html#a4a705192be3844fa0fe58f6337391983">inet_pton</a>(AF_INET, ipStr.c_str(), &amp;connectionInfo.<a class="code" href="structconnection__info__t.html#a912575fe32a4b37c941e06e241fc53ed">ipInfo</a>.ip);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    } <span class="keywordflow">catch</span>(std::out_of_range&amp; e) {</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;No IP address using default 0.0.0.0&quot;</span>);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        connectionInfo.<a class="code" href="structconnection__info__t.html#a912575fe32a4b37c941e06e241fc53ed">ipInfo</a>.ip.addr = 0;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> gwStr = formMap.at(<span class="stringliteral">&quot;gw&quot;</span>);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">if</span> (gwStr.empty()) {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;No GW address using default 0.0.0.0&quot;</span>);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            connectionInfo.<a class="code" href="structconnection__info__t.html#a912575fe32a4b37c941e06e241fc53ed">ipInfo</a>.gw.addr = 0;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <a class="code" href="connect__with__static__ip_8c.html#a4a705192be3844fa0fe58f6337391983">inet_pton</a>(AF_INET, gwStr.c_str(), &amp;connectionInfo.<a class="code" href="structconnection__info__t.html#a912575fe32a4b37c941e06e241fc53ed">ipInfo</a>.gw);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        }</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    } <span class="keywordflow">catch</span>(std::out_of_range&amp; e) {</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;No GW address using default 0.0.0.0&quot;</span>);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        connectionInfo.<a class="code" href="structconnection__info__t.html#a912575fe32a4b37c941e06e241fc53ed">ipInfo</a>.gw.addr = 0;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    }</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">try</span> {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> netmaskStr = formMap.at(<span class="stringliteral">&quot;netmask&quot;</span>);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">if</span> (netmaskStr.empty()) {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;No Netmask address using default 0.0.0.0&quot;</span>);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            connectionInfo.<a class="code" href="structconnection__info__t.html#a912575fe32a4b37c941e06e241fc53ed">ipInfo</a>.netmask.addr = 0;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            <a class="code" href="connect__with__static__ip_8c.html#a4a705192be3844fa0fe58f6337391983">inet_pton</a>(AF_INET, netmaskStr.c_str(), &amp;connectionInfo.<a class="code" href="structconnection__info__t.html#a912575fe32a4b37c941e06e241fc53ed">ipInfo</a>.netmask);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    } <span class="keywordflow">catch</span>(std::out_of_range&amp; e) {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;No Netmask address using default 0.0.0.0&quot;</span>);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        connectionInfo.<a class="code" href="structconnection__info__t.html#a912575fe32a4b37c941e06e241fc53ed">ipInfo</a>.netmask.addr = 0;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    }</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;ssid: %s, password: %s&quot;</span>, connectionInfo.<a class="code" href="structconnection__info__t.html#a0d5e9764a9da1df9929fd76d14120ca0">ssid</a>, connectionInfo.<a class="code" href="structconnection__info__t.html#acd3f51d14b680a182d9bdae742af87dd">password</a>);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    saveConnectionInfo(&amp;connectionInfo);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  pResponse-&gt;<a class="code" href="class_http_response.html#af13a61ae987f15599232fa30d2cfdeab">setStatus</a>(<a class="code" href="class_http_response.html#acbede84921ca67c8b69bc8d34eaca9df">HttpResponse::HTTP_STATUS_OK</a>, <span class="stringliteral">&quot;OK&quot;</span>);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  pResponse-&gt;<a class="code" href="class_http_response.html#a6a83c668bb537a24f3e62255501fb25e">addHeader</a>(<a class="code" href="class_http_request.html#acd9cc6de0d1b29e34ed9a29b7825726e">HttpRequest::HTTP_HEADER_CONTENT_TYPE</a>, <span class="stringliteral">&quot;text/html&quot;</span>);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="comment">//pResponse-&gt;sendData(std::string((char*)selectAP_html, selectAP_html_len));</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    pResponse-&gt;<a class="code" href="class_http_response.html#a9fa95070f1861a24558f4a63f6d87818">close</a>();</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <a class="code" href="class_free_r_t_o_s.html#abea19fd141147c054f47c6a00e77f2ff">FreeRTOS::sleep</a>(500);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <a class="code" href="class_system.html#a41237d182fff760ea31f960b8d3bf343">System::restart</a>();</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;&lt;&lt; processForm&quot;</span>);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;} <span class="comment">// processForm</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="class_boot_wifi_event_handler.html">  210</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_boot_wifi_event_handler.html">BootWifiEventHandler</a>: <span class="keyword">public</span> <a class="code" href="class_wi_fi_event_handler.html">WiFiEventHandler</a> {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="class_boot_wifi_event_handler.html#a722ab57500c238ac97910364aaf8daaa">  212</a></span>&#160;    <a class="code" href="class_boot_wifi_event_handler.html#a722ab57500c238ac97910364aaf8daaa">BootWifiEventHandler</a>(<a class="code" href="class_boot_wi_fi.html">BootWiFi</a> *pBootWiFi) {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        m_pBootWiFi = pBootWiFi;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="class_boot_wifi_event_handler.html#a743415c7f2339976922e6e0aae0f463e">  220</a></span>&#160;    esp_err_t <a class="code" href="class_boot_wifi_event_handler.html#a743415c7f2339976922e6e0aae0f463e">apStart</a>() {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        ESP_LOGD(<span class="stringliteral">&quot;BootWifiEventHandler&quot;</span>, <span class="stringliteral">&quot;&gt;&gt; apStart&quot;</span>);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordflow">if</span> (m_pBootWiFi-&gt;m_httpServerStarted == <span class="keyword">false</span>) {</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            m_pBootWiFi-&gt;m_httpServerStarted = <span class="keyword">true</span>;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            m_pBootWiFi-&gt;m_httpServer.<a class="code" href="class_http_server.html#aac086f847e37748c0c54f1e295baf2e4">addPathHandler</a>(<span class="stringliteral">&quot;GET&quot;</span>,  <span class="stringliteral">&quot;/&quot;</span>,             sendForm);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            m_pBootWiFi-&gt;m_httpServer.<a class="code" href="class_http_server.html#aac086f847e37748c0c54f1e295baf2e4">addPathHandler</a>(<span class="stringliteral">&quot;POST&quot;</span>, <span class="stringliteral">&quot;/ssidSelected&quot;</span>, processForm);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            m_pBootWiFi-&gt;m_httpServer.<a class="code" href="class_http_server.html#a79bbf11522346b2eae709e6112b130c2">start</a>(80);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        }</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        ESP_LOGD(<span class="stringliteral">&quot;BootWifiEventHandler&quot;</span>, <span class="stringliteral">&quot;&lt;&lt; apStart&quot;</span>);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <span class="keywordflow">return</span> ESP_OK;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    } <span class="comment">// apStaConnected</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="class_boot_wifi_event_handler.html#abbd789a9d1a35744f1fcca2c426cd5f1">  236</a></span>&#160;    esp_err_t <a class="code" href="class_boot_wifi_event_handler.html#abbd789a9d1a35744f1fcca2c426cd5f1">staDisconnected</a>() {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        ESP_LOGD(<span class="stringliteral">&quot;BootWifiEventHandler&quot;</span>, <span class="stringliteral">&quot;&gt;&gt; staDisconnected&quot;</span>);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        m_pBootWiFi-&gt;m_wifi.<a class="code" href="class_wi_fi.html#ae5d8dc106189ee9a4cf332e4363fac58">startAP</a>(<span class="stringliteral">&quot;Duktape&quot;</span>, <span class="stringliteral">&quot;Duktape&quot;</span>);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        ESP_LOGD(<span class="stringliteral">&quot;BootWifiEventHandler&quot;</span>, <span class="stringliteral">&quot;&lt;&lt; staDisconnected&quot;</span>);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordflow">return</span> ESP_OK;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    } <span class="comment">// staDisconnected</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="class_boot_wifi_event_handler.html#abe7ef1fad385386502397f3257c1eef5">  244</a></span>&#160;    esp_err_t <a class="code" href="class_boot_wifi_event_handler.html#abe7ef1fad385386502397f3257c1eef5">staGotIp</a>(system_event_sta_got_ip_t event_sta_got_ip) {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        ESP_LOGD(<span class="stringliteral">&quot;BootWifiEventHandler&quot;</span>, <span class="stringliteral">&quot;&gt;&gt; staGotIP&quot;</span>);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    m_pBootWiFi-&gt;m_apConnectionStatus = ESP_OK;  <span class="comment">// Set the status to ESP_OK</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        m_pBootWiFi-&gt;m_completeSemaphore.<a class="code" href="class_free_r_t_o_s_1_1_semaphore.html#ad1aa158e37d15363b4441482fae82dd8">give</a>();   <span class="comment">// If we got an IP address, then we can end the boot process.</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        ESP_LOGD(<span class="stringliteral">&quot;BootWifiEventHandler&quot;</span>, <span class="stringliteral">&quot;&lt;&lt; staGotIP&quot;</span>);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">return</span> ESP_OK;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    } <span class="comment">// staGotIp</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <a class="code" href="class_boot_wi_fi.html">BootWiFi</a> *m_pBootWiFi;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;};</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="keywordtype">void</span> BootWiFi::bootWiFi2() {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;&gt;&gt; bootWiFi2&quot;</span>);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">// Check for a GPIO override which occurs when a physical Pin is high</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="comment">// during the test.  This can force the ability to check for new configuration</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="comment">// even if the existing configured access point is available.</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    m_wifi.<a class="code" href="class_wi_fi.html#abf6df73f23fed380a5109a29def8d08f">setWifiEventHandler</a>(<span class="keyword">new</span> <a class="code" href="class_boot_wifi_event_handler.html">BootWifiEventHandler</a>(<span class="keyword">this</span>));</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">if</span> (checkOverrideGpio()) {</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;- GPIO override detected&quot;</span>);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        m_wifi.<a class="code" href="class_wi_fi.html#ae5d8dc106189ee9a4cf332e4363fac58">startAP</a>(m_ssid, m_password);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="comment">// There was NO GPIO override, proceed as normal.  This means we retrieve</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="comment">// our stored access point information of the access point we should connect</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="comment">// against.  If that information doesn&#39;t exist, then again we become an</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="comment">// access point ourselves in order to allow a client to connect and bring</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="comment">// up a browser.</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <a class="code" href="structconnection__info__t.html">connection_info_t</a> connectionInfo;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = getConnectionInfo(&amp;connectionInfo);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> == 0) {</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            <span class="comment">// We have received connection information, let us now become a station</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            <span class="comment">// and attempt to connect to the access point.</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;- Connecting to access point \&quot;%s\&quot; ...&quot;</span>, connectionInfo.<a class="code" href="structconnection__info__t.html#a0d5e9764a9da1df9929fd76d14120ca0">ssid</a>);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            <a class="code" href="test1_8c.html#a74bb3debd3b0d3f9c3fe210442b4cacc">assert</a>(strlen(connectionInfo.<a class="code" href="structconnection__info__t.html#a0d5e9764a9da1df9929fd76d14120ca0">ssid</a>) &gt; 0);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            m_wifi.<a class="code" href="class_wi_fi.html#a9af2e6f3f5bf0dcf9a319954cf6ec5a0">setIPInfo</a>(</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                connectionInfo.<a class="code" href="structconnection__info__t.html#a912575fe32a4b37c941e06e241fc53ed">ipInfo</a>.ip.addr,</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                connectionInfo.<a class="code" href="structconnection__info__t.html#a912575fe32a4b37c941e06e241fc53ed">ipInfo</a>.gw.addr,</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                connectionInfo.<a class="code" href="structconnection__info__t.html#a912575fe32a4b37c941e06e241fc53ed">ipInfo</a>.netmask.addr</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            );</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;          </div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      m_apConnectionStatus = m_wifi.<a class="code" href="class_wi_fi.html#a6b11726f65299092288f68f129929303">connectAP</a>(connectionInfo.<a class="code" href="structconnection__info__t.html#a0d5e9764a9da1df9929fd76d14120ca0">ssid</a>, connectionInfo.<a class="code" href="structconnection__info__t.html#acd3f51d14b680a182d9bdae742af87dd">password</a>);   <span class="comment">// Try to connect to the access point.</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      m_completeSemaphore.<a class="code" href="class_free_r_t_o_s_1_1_semaphore.html#ad1aa158e37d15363b4441482fae82dd8">give</a>();                                                              <span class="comment">// end the boot process so we don&#39;t hang...</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <span class="comment">// We do NOT have connection information.  Let us now become an access</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            <span class="comment">// point that serves up a web server and allow a browser user to specify</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="comment">// the details that will be eventually used to allow us to connect</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            <span class="comment">// as a station.</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            m_wifi.<a class="code" href="class_wi_fi.html#ae5d8dc106189ee9a4cf332e4363fac58">startAP</a>(m_ssid, m_password);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        } <span class="comment">// We do NOT have connection info</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    }</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;&lt;&lt; bootWiFi2&quot;</span>);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;} <span class="comment">// bootWiFi2</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="class_boot_wi_fi.html#a7531b2d542b8a34e6eed4f76b230ed5b">  315</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_boot_wi_fi.html#a7531b2d542b8a34e6eed4f76b230ed5b">BootWiFi::setAccessPointCredentials</a>(<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> ssid, <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> password) {</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    m_ssid     = ssid;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    m_password = password;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;} <span class="comment">// setAccessPointCredentials</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno"><a class="line" href="class_boot_wi_fi.html#a6bd8311e36db92b7a7f947127a50b735">  329</a></span>&#160;uint8_t <a class="code" href="class_boot_wi_fi.html#a6bd8311e36db92b7a7f947127a50b735">BootWiFi::boot</a>() {</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;&gt;&gt; boot&quot;</span>);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot; +----------+&quot;</span>);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot; | BootWiFi |&quot;</span>);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot; +----------+&quot;</span>);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot; Access point credentials: %s/%s&quot;</span>, m_ssid.c_str(), m_password.c_str());</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    m_completeSemaphore.<a class="code" href="class_free_r_t_o_s_1_1_semaphore.html#a67fa9bf777be48332a30154e006827fd">take</a>(<span class="stringliteral">&quot;boot&quot;</span>);     <span class="comment">// Take the semaphore which will be unlocked when we complete booting.</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    bootWiFi2();</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    m_completeSemaphore.<a class="code" href="class_free_r_t_o_s_1_1_semaphore.html#a023cb404ff897bb39064b454732ccf21">wait</a>(<span class="stringliteral">&quot;boot&quot;</span>);     <span class="comment">// Wait for the semaphore that indicated we have completed booting.</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    m_wifi.<a class="code" href="class_wi_fi.html#abf6df73f23fed380a5109a29def8d08f">setWifiEventHandler</a>(<span class="keyword">nullptr</span>);  <span class="comment">// Remove the WiFi boot handler when we have completed booting.</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;&lt;&lt; boot&quot;</span>);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordflow">return</span> m_apConnectionStatus;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;} <span class="comment">// boot</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno"><a class="line" href="class_boot_wi_fi.html#a4be4224d7b2ddd75c5259d0274d13056">  343</a></span>&#160;<a class="code" href="class_boot_wi_fi.html#a4be4224d7b2ddd75c5259d0274d13056">BootWiFi::BootWiFi</a>() {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    m_httpServerStarted = <span class="keyword">false</span>;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  m_apConnectionStatus = UINT8_MAX;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="class_boot_wi_fi.html#a7531b2d542b8a34e6eed4f76b230ed5b">setAccessPointCredentials</a>(<span class="stringliteral">&quot;esp32&quot;</span>, <span class="stringliteral">&quot;password&quot;</span>);   <span class="comment">// Default access point credentials</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;}</div><div class="ttc" id="class_http_response_html_a9fa95070f1861a24558f4a63f6d87818"><div class="ttname"><a href="class_http_response.html#a9fa95070f1861a24558f4a63f6d87818">HttpResponse::close</a></div><div class="ttdeci">void close()</div><div class="ttdoc">Close the response. We close the response. If we haven&amp;#39;t yet sent the header, we send that now and th...</div><div class="ttdef"><b>Definition:</b> <a href="_http_response_8cpp_source.html#l00057">HttpResponse.cpp:57</a></div></div>
<div class="ttc" id="class_http_response_html_acbede84921ca67c8b69bc8d34eaca9df"><div class="ttname"><a href="class_http_response.html#acbede84921ca67c8b69bc8d34eaca9df">HttpResponse::HTTP_STATUS_OK</a></div><div class="ttdeci">static const int HTTP_STATUS_OK</div><div class="ttdef"><b>Definition:</b> <a href="_http_response_8h_source.html#l00020">HttpResponse.h:20</a></div></div>
<div class="ttc" id="_general_utils_8h_html"><div class="ttname"><a href="_general_utils_8h.html">GeneralUtils.h</a></div></div>
<div class="ttc" id="class_free_r_t_o_s_html_abea19fd141147c054f47c6a00e77f2ff"><div class="ttname"><a href="class_free_r_t_o_s.html#abea19fd141147c054f47c6a00e77f2ff">FreeRTOS::sleep</a></div><div class="ttdeci">static void sleep(uint32_t ms)</div><div class="ttdef"><b>Definition:</b> <a href="_free_r_t_o_s_8cpp_source.html#l00023">FreeRTOS.cpp:23</a></div></div>
<div class="ttc" id="class_wi_fi_html_a6b11726f65299092288f68f129929303"><div class="ttname"><a href="class_wi_fi.html#a6b11726f65299092288f68f129929303">WiFi::connectAP</a></div><div class="ttdeci">uint8_t connectAP(const std::string &amp;ssid, const std::string &amp;password, bool waitForConnection=true, wifi_mode_t mode=WIFI_MODE_STA)</div><div class="ttdoc">Connect to an external access point. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00159">WiFi.cpp:159</a></div></div>
<div class="ttc" id="class_boot_wifi_event_handler_html"><div class="ttname"><a href="class_boot_wifi_event_handler.html">BootWifiEventHandler</a></div><div class="ttdef"><b>Definition:</b> <a href="_boot_wi_fi_8cpp_source.html#l00210">BootWiFi.cpp:210</a></div></div>
<div class="ttc" id="structconnection__info__t_html_a0d5e9764a9da1df9929fd76d14120ca0"><div class="ttname"><a href="structconnection__info__t.html#a0d5e9764a9da1df9929fd76d14120ca0">connection_info_t::ssid</a></div><div class="ttdeci">char ssid[SSID_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="_boot_wi_fi_8cpp_source.html#l00044">BootWiFi.cpp:44</a></div></div>
<div class="ttc" id="_c_p_p_n_v_s_8h_html"><div class="ttname"><a href="_c_p_p_n_v_s_8h.html">CPPNVS.h</a></div></div>
<div class="ttc" id="class_n_v_s_html"><div class="ttname"><a href="class_n_v_s.html">NVS</a></div><div class="ttdoc">Provide Non Volatile Storage access. </div><div class="ttdef"><b>Definition:</b> <a href="_c_p_p_n_v_s_8h_source.html#l00016">CPPNVS.h:16</a></div></div>
<div class="ttc" id="class_http_request_html_acd9cc6de0d1b29e34ed9a29b7825726e"><div class="ttname"><a href="class_http_request.html#acd9cc6de0d1b29e34ed9a29b7825726e">HttpRequest::HTTP_HEADER_CONTENT_TYPE</a></div><div class="ttdeci">static const char HTTP_HEADER_CONTENT_TYPE[]</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00027">HttpRequest.h:27</a></div></div>
<div class="ttc" id="class_boot_wi_fi_html_a6bd8311e36db92b7a7f947127a50b735"><div class="ttname"><a href="class_boot_wi_fi.html#a6bd8311e36db92b7a7f947127a50b735">BootWiFi::boot</a></div><div class="ttdeci">uint8_t boot()</div><div class="ttdoc">Main entry point into booting WiFi - see BootWiFi2 for more detail. </div><div class="ttdef"><b>Definition:</b> <a href="_boot_wi_fi_8cpp_source.html#l00329">BootWiFi.cpp:329</a></div></div>
<div class="ttc" id="connect__with__static__ip_8c_html_a4a705192be3844fa0fe58f6337391983"><div class="ttname"><a href="connect__with__static__ip_8c.html#a4a705192be3844fa0fe58f6337391983">inet_pton</a></div><div class="ttdeci">inet_pton(AF_INET, DEVICE_IP, &amp;ipInfo.ip)</div></div>
<div class="ttc" id="_boot_wi_fi_8cpp_html_a6dd1fbdc2e55963d42b252357899b190"><div class="ttname"><a href="_boot_wi_fi_8cpp.html#a6dd1fbdc2e55963d42b252357899b190">KEY_CONNECTION_INFO</a></div><div class="ttdeci">#define KEY_CONNECTION_INFO</div><div class="ttdef"><b>Definition:</b> <a href="_boot_wi_fi_8cpp_source.html#l00034">BootWiFi.cpp:34</a></div></div>
<div class="ttc" id="connect-to_8d_html_a450c41f520f7661f0a48b8fd2597a74c"><div class="ttname"><a href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">string</a></div><div class="ttdeci">Long connect to e.g.at a specific cluster node in a cluster of servers.This option is only used to establish the network connection.It does NOT affect the hostname port that is used for TLS meaning any host port.HOST2 and PORT2 may also be the empty string</div><div class="ttdef"><b>Definition:</b> <a href="connect-to_8d_source.html#l00014">connect-to.d:14</a></div></div>
<div class="ttc" id="class_http_server_html_a79bbf11522346b2eae709e6112b130c2"><div class="ttname"><a href="class_http_server.html#a79bbf11522346b2eae709e6112b130c2">HttpServer::start</a></div><div class="ttdeci">void start(uint16_t portNumber, bool useSSL=false)</div><div class="ttdoc">Start the HTTP server listening. We start an instance of the HTTP server listening. A new task is spawned to perform this work in the back ground. </div><div class="ttdef"><b>Definition:</b> <a href="_http_server_8cpp_source.html#l00388">HttpServer.cpp:388</a></div></div>
<div class="ttc" id="class_http_server_html_aac086f847e37748c0c54f1e295baf2e4"><div class="ttname"><a href="class_http_server.html#aac086f847e37748c0c54f1e295baf2e4">HttpServer::addPathHandler</a></div><div class="ttdeci">void addPathHandler(std::string method, std::string pathExpr, void(*webServerRequestHandler)(HttpRequest *pHttpRequest, HttpResponse *pHttpResponse))</div><div class="ttdoc">Register a handler for a path. </div><div class="ttdef"><b>Definition:</b> <a href="_http_server_8cpp_source.html#l00215">HttpServer.cpp:215</a></div></div>
<div class="ttc" id="class_system_html_a41237d182fff760ea31f960b8d3bf343"><div class="ttname"><a href="class_system.html#a41237d182fff760ea31f960b8d3bf343">System::restart</a></div><div class="ttdeci">static void restart()</div><div class="ttdoc">Restart the ESP32. </div><div class="ttdef"><b>Definition:</b> <a href="_system_8cpp_source.html#l00492">System.cpp:492</a></div></div>
<div class="ttc" id="namespacedictserver_html_aeb700c49a1a229869c3b36509a6c6c32"><div class="ttname"><a href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">dictserver.rc</a></div><div class="ttdeci">def rc</div><div class="ttdef"><b>Definition:</b> <a href="dictserver_8py_source.html#l00153">dictserver.py:153</a></div></div>
<div class="ttc" id="class_boot_wifi_event_handler_html_abe7ef1fad385386502397f3257c1eef5"><div class="ttname"><a href="class_boot_wifi_event_handler.html#abe7ef1fad385386502397f3257c1eef5">BootWifiEventHandler::staGotIp</a></div><div class="ttdeci">esp_err_t staGotIp(system_event_sta_got_ip_t event_sta_got_ip)</div><div class="ttdoc">Handle the Station Got IP event. Handle having received/assigned an IP address when we are a station...</div><div class="ttdef"><b>Definition:</b> <a href="_boot_wi_fi_8cpp_source.html#l00244">BootWiFi.cpp:244</a></div></div>
<div class="ttc" id="class_free_r_t_o_s_1_1_semaphore_html_ad1aa158e37d15363b4441482fae82dd8"><div class="ttname"><a href="class_free_r_t_o_s_1_1_semaphore.html#ad1aa158e37d15363b4441482fae82dd8">FreeRTOS::Semaphore::give</a></div><div class="ttdeci">void give()</div><div class="ttdoc">Give a semaphore. The Semaphore is given. </div><div class="ttdef"><b>Definition:</b> <a href="_free_r_t_o_s_8cpp_source.html#l00114">FreeRTOS.cpp:114</a></div></div>
<div class="ttc" id="select_a_p_8h_html_ac8d9ac0dadd4b7d1789c3337585ec36e"><div class="ttname"><a href="select_a_p_8h.html#ac8d9ac0dadd4b7d1789c3337585ec36e">selectAP_html</a></div><div class="ttdeci">unsigned char selectAP_html[]</div><div class="ttdef"><b>Definition:</b> <a href="select_a_p_8h_source.html#l00001">selectAP.h:1</a></div></div>
<div class="ttc" id="_wi_fi_8h_html"><div class="ttname"><a href="_wi_fi_8h.html">WiFi.h</a></div></div>
<div class="ttc" id="structconnection__info__t_html"><div class="ttname"><a href="structconnection__info__t.html">connection_info_t</a></div><div class="ttdef"><b>Definition:</b> <a href="_boot_wi_fi_8cpp_source.html#l00043">BootWiFi.cpp:43</a></div></div>
<div class="ttc" id="class_http_request_html_a53f09999b5f93920c79eed1423a490cf"><div class="ttname"><a href="class_http_request.html#a53f09999b5f93920c79eed1423a490cf">HttpRequest::parseForm</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; parseForm()</div><div class="ttdoc">Parse the request message as a form. </div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8cpp_source.html#l00303">HttpRequest.cpp:303</a></div></div>
<div class="ttc" id="unit1304_8c_html_a82a69fcfe92d9db6dd585ccc532a2ab7"><div class="ttname"><a href="unit1304_8c.html#a82a69fcfe92d9db6dd585ccc532a2ab7">memcpy</a></div><div class="ttdeci">memcpy(filename, filename1, strlen(filename1))</div></div>
<div class="ttc" id="select_a_p_8h_html"><div class="ttname"><a href="select_a_p_8h.html">selectAP.h</a></div></div>
<div class="ttc" id="class_wi_fi_html_ae5d8dc106189ee9a4cf332e4363fac58"><div class="ttname"><a href="class_wi_fi.html#ae5d8dc106189ee9a4cf332e4363fac58">WiFi::startAP</a></div><div class="ttdeci">void startAP(const std::string &amp;ssid, const std::string &amp;passwd, wifi_auth_mode_t auth=WIFI_AUTH_OPEN)</div><div class="ttdoc">Start being an access point. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00587">WiFi.cpp:587</a></div></div>
<div class="ttc" id="class_boot_wifi_event_handler_html_a722ab57500c238ac97910364aaf8daaa"><div class="ttname"><a href="class_boot_wifi_event_handler.html#a722ab57500c238ac97910364aaf8daaa">BootWifiEventHandler::BootWifiEventHandler</a></div><div class="ttdeci">BootWifiEventHandler(BootWiFi *pBootWiFi)</div><div class="ttdef"><b>Definition:</b> <a href="_boot_wi_fi_8cpp_source.html#l00212">BootWiFi.cpp:212</a></div></div>
<div class="ttc" id="class_general_utils_html_a6060e23d9a79cad1d9684282b1b8eec3"><div class="ttname"><a href="class_general_utils.html#a6060e23d9a79cad1d9684282b1b8eec3">GeneralUtils::ipToString</a></div><div class="ttdeci">static std::string ipToString(uint8_t *ip)</div><div class="ttdoc">Convert an IP address to string. </div><div class="ttdef"><b>Definition:</b> <a href="_general_utils_8cpp_source.html#l00336">GeneralUtils.cpp:336</a></div></div>
<div class="ttc" id="select_a_p_8h_html_a671d338d987a8cc8945f1ded17a04cd5"><div class="ttname"><a href="select_a_p_8h.html#a671d338d987a8cc8945f1ded17a04cd5">selectAP_html_len</a></div><div class="ttdeci">unsigned int selectAP_html_len</div><div class="ttdef"><b>Definition:</b> <a href="select_a_p_8h_source.html#l00092">selectAP.h:92</a></div></div>
<div class="ttc" id="structconnection__info__t_html_a912575fe32a4b37c941e06e241fc53ed"><div class="ttname"><a href="structconnection__info__t.html#a912575fe32a4b37c941e06e241fc53ed">connection_info_t::ipInfo</a></div><div class="ttdeci">tcpip_adapter_ip_info_t ipInfo</div><div class="ttdef"><b>Definition:</b> <a href="_boot_wi_fi_8cpp_source.html#l00046">BootWiFi.cpp:46</a></div></div>
<div class="ttc" id="class_boot_wi_fi_html_a4be4224d7b2ddd75c5259d0274d13056"><div class="ttname"><a href="class_boot_wi_fi.html#a4be4224d7b2ddd75c5259d0274d13056">BootWiFi::BootWiFi</a></div><div class="ttdeci">BootWiFi()</div><div class="ttdef"><b>Definition:</b> <a href="_boot_wi_fi_8cpp_source.html#l00343">BootWiFi.cpp:343</a></div></div>
<div class="ttc" id="class_http_request_html"><div class="ttname"><a href="class_http_request.html">HttpRequest</a></div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00019">HttpRequest.h:19</a></div></div>
<div class="ttc" id="class_free_r_t_o_s_1_1_semaphore_html_a023cb404ff897bb39064b454732ccf21"><div class="ttname"><a href="class_free_r_t_o_s_1_1_semaphore.html#a023cb404ff897bb39064b454732ccf21">FreeRTOS::Semaphore::wait</a></div><div class="ttdeci">uint32_t wait(std::string owner=&quot;&lt;Unknown&gt;&quot;)</div><div class="ttdoc">Wait for a semaphore to be released by trying to take it and then releasing it again. </div><div class="ttdef"><b>Definition:</b> <a href="_free_r_t_o_s_8cpp_source.html#l00064">FreeRTOS.cpp:64</a></div></div>
<div class="ttc" id="_boot_wi_fi_8cpp_html_abcd911594f90afdd5b340c431c149e72"><div class="ttname"><a href="_boot_wi_fi_8cpp.html#abcd911594f90afdd5b340c431c149e72">KEY_VERSION</a></div><div class="ttdeci">#define KEY_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="_boot_wi_fi_8cpp_source.html#l00031">BootWiFi.cpp:31</a></div></div>
<div class="ttc" id="_boot_wi_fi_8cpp_html_a7ab1f77ed0eeb7cca99cbe175fc91f6f"><div class="ttname"><a href="_boot_wi_fi_8cpp.html#a7ab1f77ed0eeb7cca99cbe175fc91f6f">g_version</a></div><div class="ttdeci">uint32_t g_version</div><div class="ttdef"><b>Definition:</b> <a href="_boot_wi_fi_8cpp_source.html#l00032">BootWiFi.cpp:32</a></div></div>
<div class="ttc" id="_boot_wi_fi_8cpp_html_a4beb8dccd4fdbe871c5ffe78ac63b0cb"><div class="ttname"><a href="_boot_wi_fi_8cpp.html#a4beb8dccd4fdbe871c5ffe78ac63b0cb">PASSWORD_SIZE</a></div><div class="ttdeci">#define PASSWORD_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="_boot_wi_fi_8cpp_source.html#l00037">BootWiFi.cpp:37</a></div></div>
<div class="ttc" id="structconnection__info__t_html_acd3f51d14b680a182d9bdae742af87dd"><div class="ttname"><a href="structconnection__info__t.html#acd3f51d14b680a182d9bdae742af87dd">connection_info_t::password</a></div><div class="ttdeci">char password[PASSWORD_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="_boot_wi_fi_8cpp_source.html#l00045">BootWiFi.cpp:45</a></div></div>
<div class="ttc" id="unit1652_8c_html_a1d19b0eef3b3acd31be88886a0277c2e"><div class="ttname"><a href="unit1652_8c.html#a1d19b0eef3b3acd31be88886a0277c2e">memset</a></div><div class="ttdeci">memset(input, '\0', sizeof(input))</div></div>
<div class="ttc" id="class_wi_fi_html_abf6df73f23fed380a5109a29def8d08f"><div class="ttname"><a href="class_wi_fi.html#abf6df73f23fed380a5109a29def8d08f">WiFi::setWifiEventHandler</a></div><div class="ttdeci">void setWifiEventHandler(WiFiEventHandler *wifiEventHandler)</div><div class="ttdoc">Set the event handler to use to process detected events. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00656">WiFi.cpp:656</a></div></div>
<div class="ttc" id="_boot_wi_fi_8cpp_html_a85eee221d2e2055c9a2fc7b0934e7154"><div class="ttname"><a href="_boot_wi_fi_8cpp.html#a85eee221d2e2055c9a2fc7b0934e7154">BOOTWIFI_NAMESPACE</a></div><div class="ttdeci">#define BOOTWIFI_NAMESPACE</div><div class="ttdef"><b>Definition:</b> <a href="_boot_wi_fi_8cpp_source.html#l00035">BootWiFi.cpp:35</a></div></div>
<div class="ttc" id="class_boot_wifi_event_handler_html_a743415c7f2339976922e6e0aae0f463e"><div class="ttname"><a href="class_boot_wifi_event_handler.html#a743415c7f2339976922e6e0aae0f463e">BootWifiEventHandler::apStart</a></div><div class="ttdeci">esp_err_t apStart()</div><div class="ttdef"><b>Definition:</b> <a href="_boot_wi_fi_8cpp_source.html#l00220">BootWiFi.cpp:220</a></div></div>
<div class="ttc" id="progress-bar_8d_html_ab8db689d5132c4523a63d67bedf23c8a"><div class="ttname"><a href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a></div><div class="ttdeci">Short more meter.This progress bar draws a single line of shows a percentage if the transfer size is known.For transfers without a known size</div><div class="ttdef"><b>Definition:</b> <a href="progress-bar_8d_source.html#l00006">progress-bar.d:6</a></div></div>
<div class="ttc" id="class_http_response_html_a6a83c668bb537a24f3e62255501fb25e"><div class="ttname"><a href="class_http_response.html#a6a83c668bb537a24f3e62255501fb25e">HttpResponse::addHeader</a></div><div class="ttdeci">void addHeader(std::string name, std::string value)</div><div class="ttdoc">Add a header to the response message. If the response has already been committed then ignore this req...</div><div class="ttdef"><b>Definition:</b> <a href="_http_response_8cpp_source.html#l00046">HttpResponse.cpp:46</a></div></div>
<div class="ttc" id="_boot_wi_fi_8h_html"><div class="ttname"><a href="_boot_wi_fi_8h.html">BootWiFi.h</a></div></div>
<div class="ttc" id="_b_l_e_eddystone_t_l_m_8h_html_ab22abc2906422da61885ac6c8e6a1a59"><div class="ttname"><a href="_b_l_e_eddystone_t_l_m_8h.html#ab22abc2906422da61885ac6c8e6a1a59">version</a></div><div class="ttdeci">uint8_t version</div><div class="ttdef"><b>Definition:</b> <a href="_b_l_e_eddystone_t_l_m_8h_source.html#l00041">BLEEddystoneTLM.h:41</a></div></div>
<div class="ttc" id="_boot_wi_fi_8cpp_html_afdc7ff61b82a89ab09751e5d6dbfde88"><div class="ttname"><a href="_boot_wi_fi_8cpp.html#afdc7ff61b82a89ab09751e5d6dbfde88">SSID_SIZE</a></div><div class="ttdeci">#define SSID_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="_boot_wi_fi_8cpp_source.html#l00036">BootWiFi.cpp:36</a></div></div>
<div class="ttc" id="class_boot_wi_fi_html"><div class="ttname"><a href="class_boot_wi_fi.html">BootWiFi</a></div><div class="ttdef"><b>Definition:</b> <a href="_boot_wi_fi_8h_source.html#l00018">BootWiFi.h:18</a></div></div>
<div class="ttc" id="class_http_response_html"><div class="ttname"><a href="class_http_response.html">HttpResponse</a></div><div class="ttdef"><b>Definition:</b> <a href="_http_response_8h_source.html#l00016">HttpResponse.h:16</a></div></div>
<div class="ttc" id="class_http_response_html_a68bc032812a96326d9fe4fde668a372b"><div class="ttname"><a href="class_http_response.html#a68bc032812a96326d9fe4fde668a372b">HttpResponse::sendData</a></div><div class="ttdeci">void sendData(std::string data)</div><div class="ttdoc">Send data to the partner. Send some data to the partner. If we haven&amp;#39;t yet sent the HTTP header then ...</div><div class="ttdef"><b>Definition:</b> <a href="_http_response_8cpp_source.html#l00088">HttpResponse.cpp:88</a></div></div>
<div class="ttc" id="class_boot_wi_fi_html_a7531b2d542b8a34e6eed4f76b230ed5b"><div class="ttname"><a href="class_boot_wi_fi.html#a7531b2d542b8a34e6eed4f76b230ed5b">BootWiFi::setAccessPointCredentials</a></div><div class="ttdeci">void setAccessPointCredentials(std::string ssid, std::string password)</div><div class="ttdoc">Set the userid/password pair that will be used for the ESP32 access point. </div><div class="ttdef"><b>Definition:</b> <a href="_boot_wi_fi_8cpp_source.html#l00315">BootWiFi.cpp:315</a></div></div>
<div class="ttc" id="_http_server_8h_html"><div class="ttname"><a href="_http_server_8h.html">HttpServer.h</a></div></div>
<div class="ttc" id="class_free_r_t_o_s_1_1_semaphore_html_a67fa9bf777be48332a30154e006827fd"><div class="ttname"><a href="class_free_r_t_o_s_1_1_semaphore.html#a67fa9bf777be48332a30154e006827fd">FreeRTOS::Semaphore::take</a></div><div class="ttdeci">bool take(std::string owner=&quot;&lt;Unknown&gt;&quot;)</div><div class="ttdoc">Take a semaphore. Take a semaphore and wait indefinitely. </div><div class="ttdef"><b>Definition:</b> <a href="_free_r_t_o_s_8cpp_source.html#l00159">FreeRTOS.cpp:159</a></div></div>
<div class="ttc" id="class_wi_fi_html_a9af2e6f3f5bf0dcf9a319954cf6ec5a0"><div class="ttname"><a href="class_wi_fi.html#a9af2e6f3f5bf0dcf9a319954cf6ec5a0">WiFi::setIPInfo</a></div><div class="ttdeci">void setIPInfo(const std::string &amp;ip, const std::string &amp;gw, const std::string &amp;netmask)</div><div class="ttdoc">Set the IP info and enable DHCP if ip != 0. If called with ip == 0 then DHCP is enabled. If called with bad values it will do nothing. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00680">WiFi.cpp:680</a></div></div>
<div class="ttc" id="test1_8c_html_a74bb3debd3b0d3f9c3fe210442b4cacc"><div class="ttname"><a href="test1_8c.html#a74bb3debd3b0d3f9c3fe210442b4cacc">assert</a></div><div class="ttdeci">#define assert(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="test1_8c_source.html#l00202">test1.c:202</a></div></div>
<div class="ttc" id="class_http_response_html_af13a61ae987f15599232fa30d2cfdeab"><div class="ttname"><a href="class_http_response.html#af13a61ae987f15599232fa30d2cfdeab">HttpResponse::setStatus</a></div><div class="ttdeci">void setStatus(int status, std::string message)</div><div class="ttdoc">Set the status code that is to be sent back to the client. When a client makes a request, the response contains a status. This call sets the status that will be sent back to the client. </div><div class="ttdef"><b>Definition:</b> <a href="_http_response_8cpp_source.html#l00179">HttpResponse.cpp:179</a></div></div>
<div class="ttc" id="class_boot_wifi_event_handler_html_abbd789a9d1a35744f1fcca2c426cd5f1"><div class="ttname"><a href="class_boot_wifi_event_handler.html#abbd789a9d1a35744f1fcca2c426cd5f1">BootWifiEventHandler::staDisconnected</a></div><div class="ttdeci">esp_err_t staDisconnected()</div><div class="ttdef"><b>Definition:</b> <a href="_boot_wi_fi_8cpp_source.html#l00236">BootWiFi.cpp:236</a></div></div>
<div class="ttc" id="class_wi_fi_event_handler_html"><div class="ttname"><a href="class_wi_fi_event_handler.html">WiFiEventHandler</a></div><div class="ttdoc">WiFi state event handler. </div><div class="ttdef"><b>Definition:</b> <a href="_wi_fi_event_handler_8h_source.html#l00098">WiFiEventHandler.h:98</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_2b66d65f09a100230911d819a169d69c.html">esp32-snippets</a></li><li class="navelem"><a class="el" href="dir_e6509e8e306afd21d8371d681599573a.html">networking</a></li><li class="navelem"><a class="el" href="dir_f68137c71457af4369863facf8d7efec.html">bootwifi</a></li><li class="navelem"><a class="el" href="_boot_wi_fi_8cpp.html">BootWiFi.cpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
