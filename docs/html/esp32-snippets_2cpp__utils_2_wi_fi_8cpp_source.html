<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Plante: esp32-snippets/cpp_utils/WiFi.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Plante
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">WiFi.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * WiFi.cpp</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *  Created on: Feb 25, 2017</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *      Author: kolban</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//#define _GLIBCXX_USE_C99</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;iomanip&gt;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;sdkconfig.h&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_wi_fi_8h.html">WiFi.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;esp_event.h&gt;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;esp_event_loop.h&gt;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;esp_log.h&gt;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;esp_system.h&gt;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;esp_wifi.h&gt;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_general_utils_8h.html">GeneralUtils.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;freertos/FreeRTOS.h&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;nvs_flash.h&gt;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;lwip/dns.h&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;lwip/netdb.h&gt;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;lwip/sockets.h&gt;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* LOG_TAG = <span class="stringliteral">&quot;WiFi&quot;</span>;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">static void setDNSServer(char *ip) {</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">    ip_addr_t dnsserver;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">    ESP_LOGD(tag, &quot;Setting DNS[%d] to %s&quot;, 0, ip);</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">    inet_pton(AF_INET, ip, &amp;dnsserver);</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">    ESP_LOGD(tag, &quot;ip of DNS is %.8x&quot;, *(uint32_t *)&amp;dnsserver);</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">    dns_setserver(0, &amp;dnsserver);</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">}</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="class_wi_fi.html#a35af2c72328c41e79e7aef97b6a64fba">   49</a></span>&#160;<a class="code" href="class_wi_fi.html#a35af2c72328c41e79e7aef97b6a64fba">WiFi::WiFi</a>()</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    : ip(0)</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    , gw(0)</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    , netmask(0)</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    , m_pWifiEventHandler(nullptr)</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;{</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    m_eventLoopStarted  = <span class="keyword">false</span>;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    m_initCalled        = <span class="keyword">false</span>;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="comment">//m_pWifiEventHandler = new WiFiEventHandler();</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    m_apConnectionStatus       = UINT8_MAX;    <span class="comment">// Are we connected to an access point?</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;} <span class="comment">// WiFi</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="class_wi_fi.html#aa70d86d4709954beb1f79e73715dfd5b">   65</a></span>&#160;<a class="code" href="class_wi_fi.html#aa70d86d4709954beb1f79e73715dfd5b">WiFi::~WiFi</a>() {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">if</span> (m_pWifiEventHandler != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keyword">delete</span> m_pWifiEventHandler;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        m_pWifiEventHandler = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    }</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;} <span class="comment">// ~WiFi</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="class_wi_fi.html#a1b79df0ff40c783e062649ad96564905">   90</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_wi_fi.html#a1b79df0ff40c783e062649ad96564905">WiFi::addDNSServer</a>(<span class="keyword">const</span> <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>&amp; ip) {</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="class_wi_fi.html#a1b79df0ff40c783e062649ad96564905">addDNSServer</a>(ip.c_str());</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;} <span class="comment">// addDNSServer</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="class_wi_fi.html#ae479a70bda65638c17bad006d37fcd4f">   95</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_wi_fi.html#a1b79df0ff40c783e062649ad96564905">WiFi::addDNSServer</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* ip) {</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    ip_addr_t dns_server;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="connect__with__static__ip_8c.html#a4a705192be3844fa0fe58f6337391983">inet_pton</a>(AF_INET, ip, &amp;dns_server)) {</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <a class="code" href="class_wi_fi.html#a1b79df0ff40c783e062649ad96564905">addDNSServer</a>(ip);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    }</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;} <span class="comment">// addDNSServer</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="class_wi_fi.html#a0e18a65abef194619017323cc3b53ac2">  103</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_wi_fi.html#a1b79df0ff40c783e062649ad96564905">WiFi::addDNSServer</a>(ip_addr_t ip) {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;Setting DNS[%d] to %d.%d.%d.%d&quot;</span>, m_dnsCount, ((uint8_t*) (&amp;ip))[0], ((uint8_t*) (&amp;ip))[1], ((uint8_t*) (&amp;ip))[2], ((uint8_t*) (&amp;ip))[3]);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    init();</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    ::dns_setserver(m_dnsCount, &amp;ip);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    m_dnsCount++;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    m_dnsCount %= 2;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;} <span class="comment">// addDNSServer</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="class_wi_fi.html#a99cd00c2301a303e7c856192d2e16160">  128</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_wi_fi.html#a99cd00c2301a303e7c856192d2e16160">WiFi::setDNSServer</a>(<span class="keywordtype">int</span> numdns, <span class="keyword">const</span> <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>&amp; ip) {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="class_wi_fi.html#a99cd00c2301a303e7c856192d2e16160">setDNSServer</a>(numdns, ip.c_str());</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;} <span class="comment">// setDNSServer</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="class_wi_fi.html#afa9a51b68dd80936ff67e6428c60545e">  133</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_wi_fi.html#a99cd00c2301a303e7c856192d2e16160">WiFi::setDNSServer</a>(<span class="keywordtype">int</span> numdns, <span class="keyword">const</span> <span class="keywordtype">char</span>* ip) {</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    ip_addr_t dns_server;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="connect__with__static__ip_8c.html#a4a705192be3844fa0fe58f6337391983">inet_pton</a>(AF_INET, ip, &amp;dns_server)) {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <a class="code" href="class_wi_fi.html#a99cd00c2301a303e7c856192d2e16160">setDNSServer</a>(numdns, dns_server);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;} <span class="comment">// setDNSServer</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="class_wi_fi.html#a99e5bb712b7941215e603be5b7c76e28">  141</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_wi_fi.html#a99cd00c2301a303e7c856192d2e16160">WiFi::setDNSServer</a>(<span class="keywordtype">int</span> numdns, ip_addr_t ip) {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;Setting DNS[%d] to %d.%d.%d.%d&quot;</span>, m_dnsCount, ((uint8_t*) (&amp;ip))[0], ((uint8_t*) (&amp;ip))[1], ((uint8_t*) (&amp;ip))[2], ((uint8_t*) (&amp;ip))[3]);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    init();</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    ::dns_setserver(numdns, &amp;ip);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;} <span class="comment">// setDNSServer</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="class_wi_fi.html#a6b11726f65299092288f68f129929303">  159</a></span>&#160;uint8_t <a class="code" href="class_wi_fi.html#a6b11726f65299092288f68f129929303">WiFi::connectAP</a>(<span class="keyword">const</span> <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>&amp; ssid, <span class="keyword">const</span> <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>&amp; password, <span class="keywordtype">bool</span> waitForConnection, wifi_mode_t mode){</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;&gt;&gt; connectAP&quot;</span>);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    m_apConnectionStatus = UINT8_MAX;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    init();</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">if</span> (ip != 0 &amp;&amp; gw != 0 &amp;&amp; netmask != 0) {</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <a class="code" href="connect__with__static__ip_8c.html#a60d008fa41ac8e78270549ae866de10b">::tcpip_adapter_dhcpc_stop</a>(TCPIP_ADAPTER_IF_STA); <span class="comment">// Don&#39;t run a DHCP client</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        tcpip_adapter_ip_info_t <a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a>;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a>.ip.addr = ip;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a>.gw.addr = gw;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a>.netmask.addr = netmask;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <a class="code" href="connect__with__static__ip_8c.html#af15aac81e5264707fd358ed72802da61">::tcpip_adapter_set_ip_info</a>(TCPIP_ADAPTER_IF_STA, &amp;<a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a>);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    }</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    esp_err_t errRc = ::esp_wifi_set_mode(mode);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">if</span> (errRc != ESP_OK) {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        ESP_LOGE(LOG_TAG, <span class="stringliteral">&quot;esp_wifi_set_mode: rc=%d %s&quot;</span>, errRc, <a class="code" href="class_general_utils.html#a25e466e54ff002f54bfb7e1f43bd401b">GeneralUtils::errorToString</a>(errRc));</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        abort();</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    }</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    wifi_config_t <a class="code" href="connect__with__static__ip_8c.html#a6bb8e844ce89500f0fe43cc5b66c0d8e">sta_config</a>;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="unit1652_8c.html#a1d19b0eef3b3acd31be88886a0277c2e">::memset</a>(&amp;<a class="code" href="connect__with__static__ip_8c.html#a6bb8e844ce89500f0fe43cc5b66c0d8e">sta_config</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="connect__with__static__ip_8c.html#a6bb8e844ce89500f0fe43cc5b66c0d8e">sta_config</a>));</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <a class="code" href="unit1304_8c.html#a82a69fcfe92d9db6dd585ccc532a2ab7">::memcpy</a>(<a class="code" href="connect__with__static__ip_8c.html#a6bb8e844ce89500f0fe43cc5b66c0d8e">sta_config</a>.sta.ssid, ssid.data(), ssid.size());</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="unit1304_8c.html#a82a69fcfe92d9db6dd585ccc532a2ab7">::memcpy</a>(<a class="code" href="connect__with__static__ip_8c.html#a6bb8e844ce89500f0fe43cc5b66c0d8e">sta_config</a>.sta.password, password.data(), password.size());</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="connect__with__static__ip_8c.html#a6bb8e844ce89500f0fe43cc5b66c0d8e">sta_config</a>.sta.bssid_set = 0;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    errRc = ::esp_wifi_set_config(WIFI_IF_STA, &amp;<a class="code" href="connect__with__static__ip_8c.html#a6bb8e844ce89500f0fe43cc5b66c0d8e">sta_config</a>);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">if</span> (errRc != ESP_OK) {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        ESP_LOGE(LOG_TAG, <span class="stringliteral">&quot;esp_wifi_set_config: rc=%d %s&quot;</span>, errRc, <a class="code" href="class_general_utils.html#a25e466e54ff002f54bfb7e1f43bd401b">GeneralUtils::errorToString</a>(errRc));</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        abort();</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    errRc = ::esp_wifi_start();</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">if</span> (errRc != ESP_OK) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        ESP_LOGE(LOG_TAG, <span class="stringliteral">&quot;esp_wifi_start: rc=%d %s&quot;</span>, errRc, <a class="code" href="class_general_utils.html#a25e466e54ff002f54bfb7e1f43bd401b">GeneralUtils::errorToString</a>(errRc));</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        abort();</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    m_connectFinished.<a class="code" href="class_free_r_t_o_s_1_1_semaphore.html#a67fa9bf777be48332a30154e006827fd">take</a>(<span class="stringliteral">&quot;connectAP&quot;</span>);   <span class="comment">// Take the semaphore to wait for a connection.</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">do</span> {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;esp_wifi_connect&quot;</span>);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        errRc = ::esp_wifi_connect();</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keywordflow">if</span> (errRc != ESP_OK) {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            ESP_LOGE(LOG_TAG, <span class="stringliteral">&quot;esp_wifi_connect: rc=%d %s&quot;</span>, errRc, <a class="code" href="class_general_utils.html#a25e466e54ff002f54bfb7e1f43bd401b">GeneralUtils::errorToString</a>(errRc));</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            abort();</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        }</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">while</span> (!m_connectFinished.<a class="code" href="class_free_r_t_o_s_1_1_semaphore.html#a67fa9bf777be48332a30154e006827fd">take</a>(5000, <span class="stringliteral">&quot;connectAP&quot;</span>)); <span class="comment">// retry if not connected within 5s</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    m_connectFinished.<a class="code" href="class_free_r_t_o_s_1_1_semaphore.html#ad1aa158e37d15363b4441482fae82dd8">give</a>();</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;&lt;&lt; connectAP&quot;</span>);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">return</span> m_apConnectionStatus;  <span class="comment">// Return ESP_OK if we are now connected and wifi_err_reason_t if not.</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;} <span class="comment">// connectAP</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="class_wi_fi.html#aa06d7cb11e23c95b873b37b37e1c7d27">  217</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_wi_fi.html#aa06d7cb11e23c95b873b37b37e1c7d27">WiFi::dump</a>() {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;WiFi Dump&quot;</span>);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;---------&quot;</span>);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordtype">char</span> ipAddrStr[30];</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    ip_addr_t ip = ::dns_getserver(0);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    inet_ntop(AF_INET, &amp;ip, ipAddrStr, <span class="keyword">sizeof</span>(ipAddrStr));</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;DNS Server[0]: %s&quot;</span>, ipAddrStr);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;} <span class="comment">// dump</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="class_wi_fi.html#a8b9634fee0d3c7d27a77ca35823a1f86">  230</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_wi_fi.html#a8b9634fee0d3c7d27a77ca35823a1f86">WiFi::isConnectedToAP</a>() {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">return</span> m_apConnectionStatus;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;} <span class="comment">// isConnected</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">/* STATIC */</span> esp_err_t WiFi::eventHandler(<span class="keywordtype">void</span>* ctx, system_event_t* event) {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="comment">// This is the common event handler that we have provided for all event processing.  It is called for every event</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="comment">// that is received by the WiFi subsystem.  The &quot;ctx&quot; parameter is an instance of the current WiFi object that we are</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="comment">// processing.  We can then retrieve the specific/custom event handler from within it and invoke that.  This then makes this</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="comment">// an indirection vector to the real caller.</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <a class="code" href="class_wi_fi.html">WiFi</a>* pWiFi = (<a class="code" href="class_wi_fi.html">WiFi</a>*) ctx;   <span class="comment">// retrieve the WiFi object from the passed in context.</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment">// Invoke the event handler.</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    esp_err_t <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">if</span> (pWiFi-&gt;m_pWifiEventHandler != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = pWiFi-&gt;m_pWifiEventHandler-&gt;<a class="code" href="class_wi_fi_event_handler.html#a9eeffe417501462c8a12a9e879a69444">getEventHandler</a>()(pWiFi-&gt;m_pWifiEventHandler, event);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = ESP_OK;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment">// If the event we received indicates that we now have an IP address or that a connection was disconnected then unlock the mutex that</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="comment">// indicates we are waiting for a connection complete.</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">if</span> (event-&gt;event_id == SYSTEM_EVENT_STA_GOT_IP || event-&gt;event_id == SYSTEM_EVENT_STA_DISCONNECTED) {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="keywordflow">if</span> (event-&gt;event_id == SYSTEM_EVENT_STA_GOT_IP) {  <span class="comment">// If we connected and have an IP, change the status to ESP_OK.  Otherwise, change it to the reason code.</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            pWiFi-&gt;m_apConnectionStatus = ESP_OK;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            pWiFi-&gt;m_apConnectionStatus = <span class="keyword">event</span>-&gt;event_info.disconnected.reason;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        }</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        pWiFi-&gt;m_connectFinished.<a class="code" href="class_free_r_t_o_s_1_1_semaphore.html#ad1aa158e37d15363b4441482fae82dd8">give</a>();</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    }</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;} <span class="comment">// eventHandler</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="class_wi_fi.html#aa158786a3a91c13956be956e7d094622">  273</a></span>&#160;tcpip_adapter_ip_info_t <a class="code" href="class_wi_fi.html#aa158786a3a91c13956be956e7d094622">WiFi::getApIpInfo</a>() {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">//init();</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    tcpip_adapter_ip_info_t <a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a>;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    ::tcpip_adapter_get_ip_info(TCPIP_ADAPTER_IF_AP, &amp;<a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a>);</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a>;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;} <span class="comment">// getApIpInfo</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="class_wi_fi.html#a6b4031d4fa81fe133c7a6390669aa851">  285</a></span>&#160;<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="class_wi_fi.html#a6b4031d4fa81fe133c7a6390669aa851">WiFi::getApMac</a>() {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    uint8_t mac[6];</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="comment">//init();</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    esp_wifi_get_mac(WIFI_IF_AP, mac);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keyword">auto</span> mac_str = (<span class="keywordtype">char</span>*) <a class="code" href="curl__memory_8h.html#a2eb0b03d1a9de9615a291b1205969069">malloc</a>(18);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    sprintf(mac_str, <span class="stringliteral">&quot;%02X:%02X:%02X:%02X:%02X:%02X&quot;</span>, mac[0], mac[1], mac[2], mac[3], mac[4], mac[5]);</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>(std::move(mac_str));</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;} <span class="comment">// getApMac</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="class_wi_fi.html#abe209be37e5626ace49f182c57f96747">  299</a></span>&#160;<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="class_wi_fi.html#abe209be37e5626ace49f182c57f96747">WiFi::getApSSID</a>() {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    wifi_config_t conf;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">//init();</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    esp_wifi_get_config(WIFI_IF_AP, &amp;conf);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>((<span class="keywordtype">char</span>*) conf.sta.ssid);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;} <span class="comment">// getApSSID</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno"><a class="line" href="class_wi_fi.html#aff9498a1f42011f3d38876444a153963">  311</a></span>&#160;<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="class_wi_fi.html#aff9498a1f42011f3d38876444a153963">WiFi::getApIp</a>() {</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    tcpip_adapter_ip_info_t <a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a> = <a class="code" href="class_wi_fi.html#aa158786a3a91c13956be956e7d094622">getApIpInfo</a>();</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordtype">char</span> ipAddrStr[30];</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    inet_ntop(AF_INET, &amp;<a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a>.ip.addr, ipAddrStr, <span class="keyword">sizeof</span>(ipAddrStr));</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>(ipAddrStr);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;} <span class="comment">// getStaIp</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno"><a class="line" href="class_wi_fi.html#a7ba16ba35e5543c23db71dd9e054f555">  322</a></span>&#160;<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="class_wi_fi.html#a7ba16ba35e5543c23db71dd9e054f555">WiFi::getApNetmask</a>() {</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    tcpip_adapter_ip_info_t <a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a> = <a class="code" href="class_wi_fi.html#aa158786a3a91c13956be956e7d094622">getApIpInfo</a>();</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordtype">char</span> ipAddrStr[30];</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    inet_ntop(AF_INET, &amp;<a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a>.netmask.addr, ipAddrStr, <span class="keyword">sizeof</span>(ipAddrStr));</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>(ipAddrStr);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;} <span class="comment">// getStaNetmask</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno"><a class="line" href="class_wi_fi.html#af77c417d0a5a3285c8cedf1d7cc9ea23">  333</a></span>&#160;<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="class_wi_fi.html#af77c417d0a5a3285c8cedf1d7cc9ea23">WiFi::getApGateway</a>() {</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    tcpip_adapter_ip_info_t <a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a> = <a class="code" href="class_wi_fi.html#aa158786a3a91c13956be956e7d094622">getApIpInfo</a>();</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordtype">char</span> ipAddrStr[30];</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    inet_ntop(AF_INET, &amp;<a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a>.gw.addr, ipAddrStr, <span class="keyword">sizeof</span>(ipAddrStr));</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>(ipAddrStr);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;} <span class="comment">// getStaGateway</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno"><a class="line" href="class_wi_fi.html#a0ce7f33b938cfeb19a1f36a3080b602b">  347</a></span>&#160;<span class="keyword">struct </span>in_addr <a class="code" href="class_wi_fi.html">WiFi</a>::getHostByName(const std::string&amp; hostName) {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">return</span> getHostByName(hostName.c_str());</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;} <span class="comment">// getHostByName</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno"><a class="line" href="class_wi_fi.html#a09060de8fa5d9f284fb9aff7d885d81b">  352</a></span>&#160;<span class="keyword">struct </span>in_addr <a class="code" href="class_wi_fi.html">WiFi</a>::getHostByName(const char* hostName) {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keyword">struct </span>in_addr retAddr;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keyword">struct </span>hostent* he = gethostbyname(hostName);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">if</span> (he == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        retAddr.s_addr = 0;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;Unable to resolve %s - %d&quot;</span>, hostName, h_errno);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        retAddr = *(<span class="keyword">struct </span>in_addr*) (he-&gt;h_addr_list[0]);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;resolved %s to %.8x&quot;</span>, hostName, *(uint32_t*) &amp;retAddr);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    }</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">return</span> retAddr;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;} <span class="comment">// getHostByName</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno"><a class="line" href="class_wi_fi.html#abe399adb8a5d43f6affff8ceb78fc3fc">  370</a></span>&#160;<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="class_wi_fi.html#abe399adb8a5d43f6affff8ceb78fc3fc">WiFi::getMode</a>() {</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    wifi_mode_t mode;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    esp_wifi_get_mode(&amp;mode);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">switch</span> (mode) {</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="keywordflow">case</span> WIFI_MODE_NULL:</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;WIFI_MODE_NULL&quot;</span>;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <span class="keywordflow">case</span> WIFI_MODE_STA:</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;WIFI_MODE_STA&quot;</span>;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keywordflow">case</span> WIFI_MODE_AP:</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;WIFI_MODE_AP&quot;</span>;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="keywordflow">case</span> WIFI_MODE_APSTA:</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;WIFI_MODE_APSTA&quot;</span>;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;unknown&quot;</span>;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    }</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;} <span class="comment">// getMode</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno"><a class="line" href="class_wi_fi.html#a2aa9896c734e6e2e920d3216f175c596">  392</a></span>&#160;tcpip_adapter_ip_info_t <a class="code" href="class_wi_fi.html#a2aa9896c734e6e2e920d3216f175c596">WiFi::getStaIpInfo</a>() {</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    tcpip_adapter_ip_info_t <a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a>;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    tcpip_adapter_get_ip_info(TCPIP_ADAPTER_IF_STA, &amp;<a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a>);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a>;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;} <span class="comment">// getStaIpInfo</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno"><a class="line" href="class_wi_fi.html#a68cb65b5b2ce951ae7cc348d977ee78e">  403</a></span>&#160;<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="class_wi_fi.html#a68cb65b5b2ce951ae7cc348d977ee78e">WiFi::getStaIp</a>() {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    tcpip_adapter_ip_info_t <a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a> = <a class="code" href="class_wi_fi.html#a2aa9896c734e6e2e920d3216f175c596">getStaIpInfo</a>();</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordtype">char</span> ipAddrStr[30];</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    inet_ntop(AF_INET, &amp;<a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a>.ip.addr, ipAddrStr, <span class="keyword">sizeof</span>(ipAddrStr));</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>(ipAddrStr);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;} <span class="comment">// getStaIp</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno"><a class="line" href="class_wi_fi.html#a30e6d1c318cad75f44822fce97ded972">  415</a></span>&#160;<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="class_wi_fi.html#a30e6d1c318cad75f44822fce97ded972">WiFi::getStaNetmask</a>() {</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    tcpip_adapter_ip_info_t <a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a> = <a class="code" href="class_wi_fi.html#a2aa9896c734e6e2e920d3216f175c596">getStaIpInfo</a>();</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordtype">char</span> ipAddrStr[30];</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    inet_ntop(AF_INET, &amp;<a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a>.netmask.addr, ipAddrStr, <span class="keyword">sizeof</span>(ipAddrStr));</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>(ipAddrStr);</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;} <span class="comment">// getStaNetmask</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno"><a class="line" href="class_wi_fi.html#a6e72ca5bdf809465049966ef99bef570">  427</a></span>&#160;<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="class_wi_fi.html#a6e72ca5bdf809465049966ef99bef570">WiFi::getStaGateway</a>() {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    tcpip_adapter_ip_info_t <a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a> = <a class="code" href="class_wi_fi.html#a2aa9896c734e6e2e920d3216f175c596">getStaIpInfo</a>();</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordtype">char</span> ipAddrStr[30];</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    inet_ntop(AF_INET, &amp;<a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a>.gw.addr, ipAddrStr, <span class="keyword">sizeof</span>(ipAddrStr));</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>(ipAddrStr);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;} <span class="comment">// getStaGateway</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno"><a class="line" href="class_wi_fi.html#a08647c8bdbb4d8612abb2a4daf5dbdb1">  439</a></span>&#160;<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="class_wi_fi.html#a08647c8bdbb4d8612abb2a4daf5dbdb1">WiFi::getStaMac</a>() {</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    uint8_t mac[6];</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    esp_wifi_get_mac(WIFI_IF_STA, mac);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keyword">auto</span> mac_str = (<span class="keywordtype">char</span>*) <a class="code" href="curl__memory_8h.html#a2eb0b03d1a9de9615a291b1205969069">malloc</a>(18);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    sprintf(mac_str, <span class="stringliteral">&quot;%02X:%02X:%02X:%02X:%02X:%02X&quot;</span>, mac[0], mac[1], mac[2], mac[3], mac[4], mac[5]);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>(std::move(mac_str));</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;} <span class="comment">// getStaMac</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno"><a class="line" href="class_wi_fi.html#a888168c815c5363e79b2896b3790df25">  452</a></span>&#160;<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="class_wi_fi.html#a888168c815c5363e79b2896b3790df25">WiFi::getStaSSID</a>() {</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    wifi_config_t conf;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    esp_wifi_get_config(WIFI_IF_STA, &amp;conf);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>((<span class="keywordtype">char</span>*) conf.ap.ssid);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;} <span class="comment">// getStaSSID</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">/* PRIVATE */</span> <span class="keywordtype">void</span> WiFi::init() {</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="comment">// If we have already started the event loop, then change the handler otherwise</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="comment">// start the event loop.</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keywordflow">if</span> (m_eventLoopStarted) {</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        esp_event_loop_set_cb(WiFi::eventHandler, <span class="keyword">this</span>);   <span class="comment">// Returns the old handler.</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        esp_err_t errRc = ::esp_event_loop_init(WiFi::eventHandler, <span class="keyword">this</span>);  <span class="comment">// Initialze the event handler.</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="keywordflow">if</span> (errRc != ESP_OK) {</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            ESP_LOGE(LOG_TAG, <span class="stringliteral">&quot;esp_event_loop_init: rc=%d %s&quot;</span>, errRc, <a class="code" href="class_general_utils.html#a25e466e54ff002f54bfb7e1f43bd401b">GeneralUtils::errorToString</a>(errRc));</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            abort();</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        }</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        m_eventLoopStarted = <span class="keyword">true</span>;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    }</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="comment">// Now, one way or another, the event handler is WiFi::eventHandler.</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordflow">if</span> (!m_initCalled) {</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <a class="code" href="connect__with__static__ip_8c.html#a384dacd0c224cb8c2216c22676ba8f5d">::nvs_flash_init</a>();</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <a class="code" href="connect__with__static__ip_8c.html#a3c689382a63924a9ba86217deedfdf6d">::tcpip_adapter_init</a>();</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        wifi_init_config_t <a class="code" href="connect__with__static__ip_8c.html#abfbf16aec2572cf169e50233ced492ae">cfg</a> = WIFI_INIT_CONFIG_DEFAULT();</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        esp_err_t errRc = ::esp_wifi_init(&amp;<a class="code" href="connect__with__static__ip_8c.html#abfbf16aec2572cf169e50233ced492ae">cfg</a>);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="keywordflow">if</span> (errRc != ESP_OK) {</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            ESP_LOGE(LOG_TAG, <span class="stringliteral">&quot;esp_wifi_init: rc=%d %s&quot;</span>, errRc, <a class="code" href="class_general_utils.html#a25e466e54ff002f54bfb7e1f43bd401b">GeneralUtils::errorToString</a>(errRc));</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            abort();</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        }</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        errRc = ::esp_wifi_set_storage(WIFI_STORAGE_RAM);</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="keywordflow">if</span> (errRc != ESP_OK) {</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            ESP_LOGE(LOG_TAG, <span class="stringliteral">&quot;esp_wifi_set_storage: rc=%d %s&quot;</span>, errRc, <a class="code" href="class_general_utils.html#a25e466e54ff002f54bfb7e1f43bd401b">GeneralUtils::errorToString</a>(errRc));</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            abort();</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        }</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    }</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    m_initCalled = <span class="keyword">true</span>;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;} <span class="comment">// init</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno"><a class="line" href="class_wi_fi.html#a97592a3ac47f6f301a2417385c4e8ea2">  508</a></span>&#160;std::vector&lt;WiFiAPRecord&gt; <a class="code" href="class_wi_fi.html#a97592a3ac47f6f301a2417385c4e8ea2">WiFi::scan</a>() {</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;&gt;&gt; scan&quot;</span>);</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    std::vector&lt;WiFiAPRecord&gt; apRecords;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    init();</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    esp_err_t errRc = ::esp_wifi_set_mode(WIFI_MODE_STA);</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordflow">if</span> (errRc != ESP_OK) {</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        ESP_LOGE(LOG_TAG, <span class="stringliteral">&quot;esp_wifi_set_mode: rc=%d %s&quot;</span>, errRc, <a class="code" href="class_general_utils.html#a25e466e54ff002f54bfb7e1f43bd401b">GeneralUtils::errorToString</a>(errRc));</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        abort();</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    }</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    errRc = ::esp_wifi_start();</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">if</span> (errRc != ESP_OK) {</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        ESP_LOGE(LOG_TAG, <span class="stringliteral">&quot;esp_wifi_start: rc=%d %s&quot;</span>, errRc, <a class="code" href="class_general_utils.html#a25e466e54ff002f54bfb7e1f43bd401b">GeneralUtils::errorToString</a>(errRc));</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        abort();</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    }</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    wifi_scan_config_t conf;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <a class="code" href="unit1652_8c.html#a1d19b0eef3b3acd31be88886a0277c2e">memset</a>(&amp;conf, 0, <span class="keyword">sizeof</span>(conf));</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    conf.show_hidden = <span class="keyword">true</span>;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    esp_err_t <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = ::esp_wifi_scan_start(&amp;conf, <span class="keyword">true</span>);</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> != ESP_OK) {</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        ESP_LOGE(LOG_TAG, <span class="stringliteral">&quot;esp_wifi_scan_start: %d&quot;</span>, <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>);</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <span class="keywordflow">return</span> apRecords;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    }</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    uint16_t apCount;  <span class="comment">// Number of access points available.</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> = ::esp_wifi_scan_get_ap_num(&amp;apCount);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a> != ESP_OK) {</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        ESP_LOGE(LOG_TAG, <span class="stringliteral">&quot;esp_wifi_scan_get_ap_num: %d&quot;</span>, <a class="code" href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">rc</a>);</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <span class="keywordflow">return</span> apRecords;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;Count of found access points: %d&quot;</span>, apCount);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    }</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    wifi_ap_record_t* list = (wifi_ap_record_t*) <a class="code" href="curl__memory_8h.html#a2eb0b03d1a9de9615a291b1205969069">malloc</a>(<span class="keyword">sizeof</span>(wifi_ap_record_t) * apCount);</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keywordflow">if</span> (list == <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        ESP_LOGE(LOG_TAG, <span class="stringliteral">&quot;Failed to allocate memory&quot;</span>);</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <span class="keywordflow">return</span> apRecords;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    }</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    errRc = ::esp_wifi_scan_get_ap_records(&amp;apCount, list);</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">if</span> (errRc != ESP_OK) {</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        ESP_LOGE(LOG_TAG, <span class="stringliteral">&quot;esp_wifi_scan_get_ap_records: rc=%d %s&quot;</span>, errRc, <a class="code" href="class_general_utils.html#a25e466e54ff002f54bfb7e1f43bd401b">GeneralUtils::errorToString</a>(errRc));</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        abort();</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    }</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="keywordflow">for</span> (uint16_t <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &lt; apCount; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++) {</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <a class="code" href="class_wi_fi_a_p_record.html">WiFiAPRecord</a> wifiAPRecord;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <a class="code" href="unit1304_8c.html#a82a69fcfe92d9db6dd585ccc532a2ab7">memcpy</a>(wifiAPRecord.m_bssid, list[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].bssid, 6);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        wifiAPRecord.m_ssid  = <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>((<span class="keywordtype">char</span>*) list[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].ssid);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        wifiAPRecord.m_authMode = list[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].authmode;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        wifiAPRecord.m_rssi  = list[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].rssi;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        apRecords.push_back(wifiAPRecord);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    }</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <a class="code" href="curl__memory_8h.html#a9cc854374299a1dd933bf62029761768">free</a>(list);   <span class="comment">// Release the storage allocated to hold the records.</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    std::sort(apRecords.begin(),</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        apRecords.end(),</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        [](<span class="keyword">const</span> <a class="code" href="class_wi_fi_a_p_record.html">WiFiAPRecord</a>&amp; lhs, <span class="keyword">const</span> <a class="code" href="class_wi_fi_a_p_record.html">WiFiAPRecord</a>&amp; rhs){ <span class="keywordflow">return</span> lhs.m_rssi &gt; rhs.m_rssi; });</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keywordflow">return</span> apRecords;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;} <span class="comment">// scan</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00587"></a><span class="lineno"><a class="line" href="class_wi_fi.html#ae5d8dc106189ee9a4cf332e4363fac58">  587</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_wi_fi.html#ae5d8dc106189ee9a4cf332e4363fac58">WiFi::startAP</a>(<span class="keyword">const</span> <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>&amp; ssid, <span class="keyword">const</span> <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>&amp; password, wifi_auth_mode_t <a class="code" href="structauth.html">auth</a>) {</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <a class="code" href="class_wi_fi.html#ae5d8dc106189ee9a4cf332e4363fac58">startAP</a>(ssid, password, <a class="code" href="structauth.html">auth</a>, 0, <span class="keyword">false</span>, 4);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;} <span class="comment">// startAP</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div><div class="line"><a name="l00609"></a><span class="lineno"><a class="line" href="class_wi_fi.html#afe587b246a0a1a4024877bebd1dd3453">  609</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_wi_fi.html#ae5d8dc106189ee9a4cf332e4363fac58">WiFi::startAP</a>(<span class="keyword">const</span> <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>&amp; ssid, <span class="keyword">const</span> <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>&amp; password, wifi_auth_mode_t <a class="code" href="structauth.html">auth</a>, uint8_t channel, <span class="keywordtype">bool</span> ssid_hidden, uint8_t max_connection) {</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;&gt;&gt; startAP: ssid: %s&quot;</span>, ssid.c_str());</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    init();</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    esp_err_t errRc = ::esp_wifi_set_mode(WIFI_MODE_AP);</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keywordflow">if</span> (errRc != ESP_OK) {</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        ESP_LOGE(LOG_TAG, <span class="stringliteral">&quot;esp_wifi_set_mode: rc=%d %s&quot;</span>, errRc, <a class="code" href="class_general_utils.html#a25e466e54ff002f54bfb7e1f43bd401b">GeneralUtils::errorToString</a>(errRc));</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        abort();</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    }</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="comment">// Build the apConfig structure.</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    wifi_config_t apConfig;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <a class="code" href="unit1652_8c.html#a1d19b0eef3b3acd31be88886a0277c2e">::memset</a>(&amp;apConfig, 0, <span class="keyword">sizeof</span>(apConfig));</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <a class="code" href="unit1304_8c.html#a82a69fcfe92d9db6dd585ccc532a2ab7">::memcpy</a>(apConfig.ap.ssid, ssid.data(), ssid.size());</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    apConfig.ap.ssid_len = ssid.size();</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <a class="code" href="unit1304_8c.html#a82a69fcfe92d9db6dd585ccc532a2ab7">::memcpy</a>(apConfig.ap.password, password.data(), password.size());</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    apConfig.ap.channel         = channel;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    apConfig.ap.authmode        = <a class="code" href="structauth.html">auth</a>;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    apConfig.ap.ssid_hidden     = (uint8_t) ssid_hidden;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    apConfig.ap.max_connection  = max_connection;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    apConfig.ap.beacon_interval = 100;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    errRc = ::esp_wifi_set_config(WIFI_IF_AP, &amp;apConfig);</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordflow">if</span> (errRc != ESP_OK) {</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        ESP_LOGE(LOG_TAG, <span class="stringliteral">&quot;esp_wifi_set_config: rc=%d %s&quot;</span>, errRc, <a class="code" href="class_general_utils.html#a25e466e54ff002f54bfb7e1f43bd401b">GeneralUtils::errorToString</a>(errRc));</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        abort();</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    }</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    errRc = ::esp_wifi_start();</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordflow">if</span> (errRc != ESP_OK) {</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        ESP_LOGE(LOG_TAG, <span class="stringliteral">&quot;esp_wifi_start: rc=%d %s&quot;</span>, errRc, <a class="code" href="class_general_utils.html#a25e466e54ff002f54bfb7e1f43bd401b">GeneralUtils::errorToString</a>(errRc));</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        abort();</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    }</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    errRc = tcpip_adapter_dhcps_start(TCPIP_ADAPTER_IF_AP);</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordflow">if</span> (errRc != ESP_OK) {</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        ESP_LOGE(LOG_TAG, <span class="stringliteral">&quot;tcpip_adapter_dhcps_start: rc=%d %s&quot;</span>, errRc, <a class="code" href="class_general_utils.html#a25e466e54ff002f54bfb7e1f43bd401b">GeneralUtils::errorToString</a>(errRc));</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    }</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;&lt;&lt; startAP&quot;</span>);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;} <span class="comment">// startAP</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div><div class="line"><a name="l00656"></a><span class="lineno"><a class="line" href="class_wi_fi.html#abf6df73f23fed380a5109a29def8d08f">  656</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_wi_fi.html#abf6df73f23fed380a5109a29def8d08f">WiFi::setWifiEventHandler</a>(<a class="code" href="class_wi_fi_event_handler.html">WiFiEventHandler</a>* wifiEventHandler) {</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;&gt;&gt; setWifiEventHandler: 0x%d&quot;</span>, (uint32_t) wifiEventHandler);</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    this-&gt;m_pWifiEventHandler = wifiEventHandler;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;&lt;&lt; setWifiEventHandler&quot;</span>);</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;} <span class="comment">// setWifiEventHandler</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div><div class="line"><a name="l00680"></a><span class="lineno"><a class="line" href="class_wi_fi.html#a9af2e6f3f5bf0dcf9a319954cf6ec5a0">  680</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_wi_fi.html#a9af2e6f3f5bf0dcf9a319954cf6ec5a0">WiFi::setIPInfo</a>(<span class="keyword">const</span> <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>&amp; ip, <span class="keyword">const</span> <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>&amp; gw, <span class="keyword">const</span> <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>&amp; netmask) {</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <a class="code" href="class_wi_fi.html#a9af2e6f3f5bf0dcf9a319954cf6ec5a0">setIPInfo</a>(ip.c_str(), gw.c_str(), netmask.c_str());</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;} <span class="comment">// setIPInfo</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div><div class="line"><a name="l00685"></a><span class="lineno"><a class="line" href="class_wi_fi.html#a73b2b5e2a5a046aa2c2137ce2b1bcfe9">  685</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_wi_fi.html#a9af2e6f3f5bf0dcf9a319954cf6ec5a0">WiFi::setIPInfo</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* ip, <span class="keyword">const</span> <span class="keywordtype">char</span>* gw, <span class="keyword">const</span> <span class="keywordtype">char</span>* netmask) {</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    uint32_t new_ip;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    uint32_t new_gw;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    uint32_t new_netmask;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="keyword">auto</span> success = (<a class="code" href="curl__setup__once_8h.html#af6a258d8f3ee5206d682d799316314b1">bool</a>) <a class="code" href="connect__with__static__ip_8c.html#a4a705192be3844fa0fe58f6337391983">inet_pton</a>(AF_INET, ip, &amp;new_ip);</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    success = success &amp;&amp; <a class="code" href="connect__with__static__ip_8c.html#a4a705192be3844fa0fe58f6337391983">inet_pton</a>(AF_INET, gw, &amp;new_gw);</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    success = success &amp;&amp; <a class="code" href="connect__with__static__ip_8c.html#a4a705192be3844fa0fe58f6337391983">inet_pton</a>(AF_INET, netmask, &amp;new_netmask);</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordflow">if</span> (!success) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <a class="code" href="class_wi_fi.html#a9af2e6f3f5bf0dcf9a319954cf6ec5a0">setIPInfo</a>(new_ip, new_gw, new_netmask);</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;} <span class="comment">// setIPInfo</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno"><a class="line" href="class_wi_fi.html#ac791bd68948ead18bc9775fc936e0938">  706</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_wi_fi.html#a9af2e6f3f5bf0dcf9a319954cf6ec5a0">WiFi::setIPInfo</a>(uint32_t ip, uint32_t gw, uint32_t netmask) {</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    init();</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    this-&gt;ip      = ip;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    this-&gt;gw      = gw;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    this-&gt;netmask = netmask;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordflow">if</span> (ip != 0 &amp;&amp; gw != 0 &amp;&amp; netmask != 0) {</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        tcpip_adapter_ip_info_t <a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a>;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a>.ip.addr      = ip;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a>.gw.addr      = gw;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a>.netmask.addr = netmask;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <a class="code" href="connect__with__static__ip_8c.html#a60d008fa41ac8e78270549ae866de10b">::tcpip_adapter_dhcpc_stop</a>(TCPIP_ADAPTER_IF_STA);</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        <a class="code" href="connect__with__static__ip_8c.html#af15aac81e5264707fd358ed72802da61">::tcpip_adapter_set_ip_info</a>(TCPIP_ADAPTER_IF_STA, &amp;<a class="code" href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a>);</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        ip = 0;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        ::tcpip_adapter_dhcpc_start(TCPIP_ADAPTER_IF_STA);</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    }</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;} <span class="comment">// setIPInfo</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno"><a class="line" href="class_wi_fi_a_p_record.html#a7b634da0afbfeb15a9b4f52681a06ee1">  732</a></span>&#160;<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="class_wi_fi_a_p_record.html#a7b634da0afbfeb15a9b4f52681a06ee1">WiFiAPRecord::toString</a>() {</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="structauth.html">auth</a>;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="class_wi_fi_a_p_record.html#aa8857d2c0e0162b6eb38258db488131d">getAuthMode</a>()) {</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        <span class="keywordflow">case</span> WIFI_AUTH_OPEN:</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            <a class="code" href="structauth.html">auth</a> = <span class="stringliteral">&quot;WIFI_AUTH_OPEN&quot;</span>;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <span class="keywordflow">case</span> WIFI_AUTH_WEP:</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            <a class="code" href="structauth.html">auth</a> = <span class="stringliteral">&quot;WIFI_AUTH_WEP&quot;</span>;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <span class="keywordflow">case</span> WIFI_AUTH_WPA_PSK:</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            <a class="code" href="structauth.html">auth</a> = <span class="stringliteral">&quot;WIFI_AUTH_WPA_PSK&quot;</span>;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        <span class="keywordflow">case</span> WIFI_AUTH_WPA2_PSK:</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;            <a class="code" href="structauth.html">auth</a> = <span class="stringliteral">&quot;WIFI_AUTH_WPA2_PSK&quot;</span>;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <span class="keywordflow">case</span> WIFI_AUTH_WPA_WPA2_PSK:</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            <a class="code" href="structauth.html">auth</a> = <span class="stringliteral">&quot;WIFI_AUTH_WPA_WPA2_PSK&quot;</span>;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;            <a class="code" href="structauth.html">auth</a> = <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    }</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">//  std::stringstream s;</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment">//  s&lt;&lt; &quot;ssid: &quot; &lt;&lt; m_ssid &lt;&lt; &quot;, auth: &quot; &lt;&lt; auth &lt;&lt; &quot;, rssi: &quot; &lt;&lt; m_rssi;</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="keyword">auto</span> info_str = (<span class="keywordtype">char</span>*) <a class="code" href="curl__memory_8h.html#a2eb0b03d1a9de9615a291b1205969069">malloc</a>(6 + 32 + 8 + 22 + 8 + 3 + 1);</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    sprintf(info_str, <span class="stringliteral">&quot;ssid: %s, auth: %s, rssi: %d&quot;</span>, m_ssid.c_str(), <a class="code" href="structauth.html">auth</a>.c_str(), (int) m_rssi);</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>(std::move(info_str));</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;} <span class="comment">// toString</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">MDNS::MDNS() {</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">    esp_err_t errRc = ::mdns_init(TCPIP_ADAPTER_IF_STA, &amp;m_mdns_server);</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment">    if (errRc != ESP_OK) {</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment">        ESP_LOGE(LOG_TAG, &quot;mdns_init: rc=%d %s&quot;, errRc, GeneralUtils::errorToString(errRc));</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">        abort();</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment">    }</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment">}</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment">MDNS::~MDNS() {</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment">    if (m_mdns_server != nullptr) {</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment">        mdns_free(m_mdns_server);</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment">    }</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment">    m_mdns_server = nullptr;</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="comment">}</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="comment">void MDNS::serviceAdd(const std::string&amp; service, const std::string&amp; proto, uint16_t port) {</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="comment">    serviceAdd(service.c_str(), proto.c_str(), port);</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment">} // serviceAdd</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">void MDNS::serviceInstanceSet(const std::string&amp; service, const std::string&amp; proto, const std::string&amp; instance) {</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment">    serviceInstanceSet(service.c_str(), proto.c_str(), instance.c_str());</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment">} // serviceInstanceSet</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="comment">void MDNS::servicePortSet(const std::string&amp; service, const std::string&amp; proto, uint16_t port) {</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment">    servicePortSet(service.c_str(), proto.c_str(), port);</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment">} // servicePortSet</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment">void MDNS::serviceRemove(const std::string&amp; service, const std::string&amp; proto) {</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">    serviceRemove(service.c_str(), proto.c_str());</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">} // serviceRemove</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="comment">void MDNS::setHostname(const std::string&amp; hostname) {</span></div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="comment">    setHostname(hostname.c_str());</span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="comment">} // setHostname</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="comment">void MDNS::setInstance(const std::string&amp; instance) {</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="comment">    setInstance(instance.c_str());</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="comment">} // setInstance</span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="comment">void MDNS::serviceAdd(const char* service, const char* proto, uint16_t port) {</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="comment">    esp_err_t errRc = ::mdns_service_add(m_mdns_server, service, proto, port);</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment">    if (errRc != ESP_OK) {</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment">        ESP_LOGE(LOG_TAG, &quot;mdns_service_add: rc=%d %s&quot;, errRc, GeneralUtils::errorToString(errRc));</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment">        abort();</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment">    }</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="comment">} // serviceAdd</span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="comment">void MDNS::serviceInstanceSet(const char* service, const char* proto, const char* instance) {</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment">  esp_err_t errRc = ::mdns_service_instance_set(m_mdns_server, service, proto, instance);</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment">  if (errRc != ESP_OK) {</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment">    ESP_LOGE(LOG_TAG, &quot;mdns_service_instance_set: rc=%d %s&quot;, errRc, GeneralUtils::errorToString(errRc));</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="comment">    abort();</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="comment">  }</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="comment">} // serviceInstanceSet</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment">void MDNS::servicePortSet(const char* service, const char* proto, uint16_t port) {</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="comment">  esp_err_t errRc = ::mdns_service_port_set(m_mdns_server, service, proto, port);</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="comment">  if (errRc != ESP_OK) {</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="comment">    ESP_LOGE(LOG_TAG, &quot;mdns_service_port_set: rc=%d %s&quot;, errRc, GeneralUtils::errorToString(errRc));</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="comment">    abort();</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="comment">  }</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="comment">} // servicePortSet</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment">void MDNS::serviceRemove(const char* service, const char* proto) {</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">    esp_err_t errRc = ::mdns_service_remove(m_mdns_server, service, proto);</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment">    if (errRc != ESP_OK) {</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment">        ESP_LOGE(LOG_TAG, &quot;mdns_service_remove: rc=%d %s&quot;, errRc, GeneralUtils::errorToString(errRc));</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment">        abort();</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment">    }</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment">} // serviceRemove</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment">void MDNS::setHostname(const char* hostname) {</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment">  esp_err_t errRc = ::mdns_set_hostname(m_mdns_server,hostname);</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment">    if (errRc != ESP_OK) {</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment">        ESP_LOGE(LOG_TAG, &quot;mdns_set_hostname: rc=%d %s&quot;, errRc, GeneralUtils::errorToString(errRc));</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment">        abort();</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment">    }</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="comment">} // setHostname</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="comment">void MDNS::setInstance(const char* instance) {</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="comment">    esp_err_t errRc = ::mdns_set_instance(m_mdns_server, instance);</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="comment">    if (errRc != ESP_OK) {</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="comment">        ESP_LOGE(LOG_TAG, &quot;mdns_set_instance: rc=%d %s&quot;, errRc, GeneralUtils::errorToString(errRc));</span></div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="comment">        abort();</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment">    }</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment">} // setInstance</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment">*/</span></div><div class="ttc" id="curl__memory_8h_html_a9cc854374299a1dd933bf62029761768"><div class="ttname"><a href="curl__memory_8h.html#a9cc854374299a1dd933bf62029761768">free</a></div><div class="ttdeci">#define free(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="curl__memory_8h_source.html#l00130">curl_memory.h:130</a></div></div>
<div class="ttc" id="_general_utils_8h_html"><div class="ttname"><a href="_general_utils_8h.html">GeneralUtils.h</a></div></div>
<div class="ttc" id="class_wi_fi_html_a6b11726f65299092288f68f129929303"><div class="ttname"><a href="class_wi_fi.html#a6b11726f65299092288f68f129929303">WiFi::connectAP</a></div><div class="ttdeci">uint8_t connectAP(const std::string &amp;ssid, const std::string &amp;password, bool waitForConnection=true, wifi_mode_t mode=WIFI_MODE_STA)</div><div class="ttdoc">Connect to an external access point. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00159">WiFi.cpp:159</a></div></div>
<div class="ttc" id="class_wi_fi_html_a6e72ca5bdf809465049966ef99bef570"><div class="ttname"><a href="class_wi_fi.html#a6e72ca5bdf809465049966ef99bef570">WiFi::getStaGateway</a></div><div class="ttdeci">static std::string getStaGateway()</div><div class="ttdoc">Get the current STA Gateway IP. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00427">WiFi.cpp:427</a></div></div>
<div class="ttc" id="class_wi_fi_html_a2aa9896c734e6e2e920d3216f175c596"><div class="ttname"><a href="class_wi_fi.html#a2aa9896c734e6e2e920d3216f175c596">WiFi::getStaIpInfo</a></div><div class="ttdeci">static tcpip_adapter_ip_info_t getStaIpInfo()</div><div class="ttdoc">Get the STA IP Info. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00392">WiFi.cpp:392</a></div></div>
<div class="ttc" id="class_wi_fi_html_a1b79df0ff40c783e062649ad96564905"><div class="ttname"><a href="class_wi_fi.html#a1b79df0ff40c783e062649ad96564905">WiFi::addDNSServer</a></div><div class="ttdeci">void addDNSServer(const std::string &amp;ip)</div><div class="ttdoc">Add a reference to a DNS server. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00090">WiFi.cpp:90</a></div></div>
<div class="ttc" id="class_wi_fi_a_p_record_html_a7b634da0afbfeb15a9b4f52681a06ee1"><div class="ttname"><a href="class_wi_fi_a_p_record.html#a7b634da0afbfeb15a9b4f52681a06ee1">WiFiAPRecord::toString</a></div><div class="ttdeci">std::string toString()</div><div class="ttdoc">Return a string representation of the WiFi access point record. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00732">WiFi.cpp:732</a></div></div>
<div class="ttc" id="connect__with__static__ip_8c_html_a4a705192be3844fa0fe58f6337391983"><div class="ttname"><a href="connect__with__static__ip_8c.html#a4a705192be3844fa0fe58f6337391983">inet_pton</a></div><div class="ttdeci">inet_pton(AF_INET, DEVICE_IP, &amp;ipInfo.ip)</div></div>
<div class="ttc" id="connect-to_8d_html_a450c41f520f7661f0a48b8fd2597a74c"><div class="ttname"><a href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">string</a></div><div class="ttdeci">Long connect to e.g.at a specific cluster node in a cluster of servers.This option is only used to establish the network connection.It does NOT affect the hostname port that is used for TLS meaning any host port.HOST2 and PORT2 may also be the empty string</div><div class="ttdef"><b>Definition:</b> <a href="connect-to_8d_source.html#l00014">connect-to.d:14</a></div></div>
<div class="ttc" id="class_wi_fi_html_af77c417d0a5a3285c8cedf1d7cc9ea23"><div class="ttname"><a href="class_wi_fi.html#af77c417d0a5a3285c8cedf1d7cc9ea23">WiFi::getApGateway</a></div><div class="ttdeci">static std::string getApGateway()</div><div class="ttdoc">Get the current AP Gateway IP. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00333">WiFi.cpp:333</a></div></div>
<div class="ttc" id="class_wi_fi_html_a888168c815c5363e79b2896b3790df25"><div class="ttname"><a href="class_wi_fi.html#a888168c815c5363e79b2896b3790df25">WiFi::getStaSSID</a></div><div class="ttdeci">static std::string getStaSSID()</div><div class="ttdoc">Get the STA SSID. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00452">WiFi.cpp:452</a></div></div>
<div class="ttc" id="namespacedictserver_html_aeb700c49a1a229869c3b36509a6c6c32"><div class="ttname"><a href="namespacedictserver.html#aeb700c49a1a229869c3b36509a6c6c32">dictserver.rc</a></div><div class="ttdeci">def rc</div><div class="ttdef"><b>Definition:</b> <a href="dictserver_8py_source.html#l00153">dictserver.py:153</a></div></div>
<div class="ttc" id="class_wi_fi_html_a35af2c72328c41e79e7aef97b6a64fba"><div class="ttname"><a href="class_wi_fi.html#a35af2c72328c41e79e7aef97b6a64fba">WiFi::WiFi</a></div><div class="ttdeci">WiFi()</div><div class="ttdoc">Creates and uses a default event handler. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00049">WiFi.cpp:49</a></div></div>
<div class="ttc" id="connect__with__static__ip_8c_html_a6bb8e844ce89500f0fe43cc5b66c0d8e"><div class="ttname"><a href="connect__with__static__ip_8c.html#a6bb8e844ce89500f0fe43cc5b66c0d8e">sta_config</a></div><div class="ttdeci">wifi_config_t sta_config</div><div class="ttdef"><b>Definition:</b> <a href="connect__with__static__ip_8c_source.html#l00056">connect_with_static_ip.c:56</a></div></div>
<div class="ttc" id="class_free_r_t_o_s_1_1_semaphore_html_ad1aa158e37d15363b4441482fae82dd8"><div class="ttname"><a href="class_free_r_t_o_s_1_1_semaphore.html#ad1aa158e37d15363b4441482fae82dd8">FreeRTOS::Semaphore::give</a></div><div class="ttdeci">void give()</div><div class="ttdoc">Give a semaphore. The Semaphore is given. </div><div class="ttdef"><b>Definition:</b> <a href="_free_r_t_o_s_8cpp_source.html#l00114">FreeRTOS.cpp:114</a></div></div>
<div class="ttc" id="class_wi_fi_html_aa06d7cb11e23c95b873b37b37e1c7d27"><div class="ttname"><a href="class_wi_fi.html#aa06d7cb11e23c95b873b37b37e1c7d27">WiFi::dump</a></div><div class="ttdeci">void dump()</div><div class="ttdoc">Dump diagnostics to the log. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00217">WiFi.cpp:217</a></div></div>
<div class="ttc" id="curl__memory_8h_html_a2eb0b03d1a9de9615a291b1205969069"><div class="ttname"><a href="curl__memory_8h.html#a2eb0b03d1a9de9615a291b1205969069">malloc</a></div><div class="ttdeci">#define malloc(size)</div><div class="ttdef"><b>Definition:</b> <a href="curl__memory_8h_source.html#l00124">curl_memory.h:124</a></div></div>
<div class="ttc" id="_wi_fi_8h_html"><div class="ttname"><a href="_wi_fi_8h.html">WiFi.h</a></div></div>
<div class="ttc" id="class_wi_fi_html_a8b9634fee0d3c7d27a77ca35823a1f86"><div class="ttname"><a href="class_wi_fi.html#a8b9634fee0d3c7d27a77ca35823a1f86">WiFi::isConnectedToAP</a></div><div class="ttdeci">bool isConnectedToAP()</div><div class="ttdoc">Returns whether wifi is connected to an access point. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00230">WiFi.cpp:230</a></div></div>
<div class="ttc" id="unit1303_8c_html_ac8936188af0c1d2f8b9d0cd25fde43b2"><div class="ttname"><a href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a></div><div class="ttdeci">unsigned int i</div><div class="ttdef"><b>Definition:</b> <a href="unit1303_8c_source.html#l00078">unit1303.c:78</a></div></div>
<div class="ttc" id="class_wi_fi_html_a97592a3ac47f6f301a2417385c4e8ea2"><div class="ttname"><a href="class_wi_fi.html#a97592a3ac47f6f301a2417385c4e8ea2">WiFi::scan</a></div><div class="ttdeci">std::vector&lt; WiFiAPRecord &gt; scan()</div><div class="ttdoc">Perform a WiFi scan looking for access points. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00508">WiFi.cpp:508</a></div></div>
<div class="ttc" id="unit1304_8c_html_a82a69fcfe92d9db6dd585ccc532a2ab7"><div class="ttname"><a href="unit1304_8c.html#a82a69fcfe92d9db6dd585ccc532a2ab7">memcpy</a></div><div class="ttdeci">memcpy(filename, filename1, strlen(filename1))</div></div>
<div class="ttc" id="structauth_html"><div class="ttname"><a href="structauth.html">auth</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01172">urldata.h:1172</a></div></div>
<div class="ttc" id="class_wi_fi_html_abe209be37e5626ace49f182c57f96747"><div class="ttname"><a href="class_wi_fi.html#abe209be37e5626ace49f182c57f96747">WiFi::getApSSID</a></div><div class="ttdeci">static std::string getApSSID()</div><div class="ttdoc">Get the AP SSID. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00299">WiFi.cpp:299</a></div></div>
<div class="ttc" id="class_wi_fi_html_ae5d8dc106189ee9a4cf332e4363fac58"><div class="ttname"><a href="class_wi_fi.html#ae5d8dc106189ee9a4cf332e4363fac58">WiFi::startAP</a></div><div class="ttdeci">void startAP(const std::string &amp;ssid, const std::string &amp;passwd, wifi_auth_mode_t auth=WIFI_AUTH_OPEN)</div><div class="ttdoc">Start being an access point. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00587">WiFi.cpp:587</a></div></div>
<div class="ttc" id="connect__with__static__ip_8c_html_abfbf16aec2572cf169e50233ced492ae"><div class="ttname"><a href="connect__with__static__ip_8c.html#abfbf16aec2572cf169e50233ced492ae">cfg</a></div><div class="ttdeci">wifi_init_config_t cfg</div><div class="ttdef"><b>Definition:</b> <a href="connect__with__static__ip_8c_source.html#l00052">connect_with_static_ip.c:52</a></div></div>
<div class="ttc" id="class_general_utils_html_a25e466e54ff002f54bfb7e1f43bd401b"><div class="ttname"><a href="class_general_utils.html#a25e466e54ff002f54bfb7e1f43bd401b">GeneralUtils::errorToString</a></div><div class="ttdeci">static const char * errorToString(esp_err_t errCode)</div><div class="ttdoc">Convert an ESP error code to a string. </div><div class="ttdef"><b>Definition:</b> <a href="_general_utils_8cpp_source.html#l00366">GeneralUtils.cpp:366</a></div></div>
<div class="ttc" id="class_wi_fi_a_p_record_html_aa8857d2c0e0162b6eb38258db488131d"><div class="ttname"><a href="class_wi_fi_a_p_record.html#aa8857d2c0e0162b6eb38258db488131d">WiFiAPRecord::getAuthMode</a></div><div class="ttdeci">wifi_auth_mode_t getAuthMode()</div><div class="ttdoc">Get the auth mode. </div><div class="ttdef"><b>Definition:</b> <a href="_wi_fi_8h_source.html#l00056">WiFi.h:56</a></div></div>
<div class="ttc" id="curl__setup__once_8h_html_af6a258d8f3ee5206d682d799316314b1"><div class="ttname"><a href="curl__setup__once_8h.html#af6a258d8f3ee5206d682d799316314b1">bool</a></div><div class="ttdeci">bool</div><div class="ttdef"><b>Definition:</b> <a href="curl__setup__once_8h_source.html#l00299">curl_setup_once.h:299</a></div></div>
<div class="ttc" id="connect__with__static__ip_8c_html_a3c689382a63924a9ba86217deedfdf6d"><div class="ttname"><a href="connect__with__static__ip_8c.html#a3c689382a63924a9ba86217deedfdf6d">tcpip_adapter_init</a></div><div class="ttdeci">tcpip_adapter_init()</div></div>
<div class="ttc" id="connect__with__static__ip_8c_html_af15aac81e5264707fd358ed72802da61"><div class="ttname"><a href="connect__with__static__ip_8c.html#af15aac81e5264707fd358ed72802da61">tcpip_adapter_set_ip_info</a></div><div class="ttdeci">tcpip_adapter_set_ip_info(TCPIP_ADAPTER_IF_STA, &amp;ipInfo)</div></div>
<div class="ttc" id="class_wi_fi_html_a99cd00c2301a303e7c856192d2e16160"><div class="ttname"><a href="class_wi_fi.html#a99cd00c2301a303e7c856192d2e16160">WiFi::setDNSServer</a></div><div class="ttdeci">void setDNSServer(int numdns, const std::string &amp;ip)</div><div class="ttdoc">Set a reference to a DNS server. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00128">WiFi.cpp:128</a></div></div>
<div class="ttc" id="class_wi_fi_html_a30e6d1c318cad75f44822fce97ded972"><div class="ttname"><a href="class_wi_fi.html#a30e6d1c318cad75f44822fce97ded972">WiFi::getStaNetmask</a></div><div class="ttdeci">static std::string getStaNetmask()</div><div class="ttdoc">Get the current STA netmask. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00415">WiFi.cpp:415</a></div></div>
<div class="ttc" id="class_wi_fi_html_a68cb65b5b2ce951ae7cc348d977ee78e"><div class="ttname"><a href="class_wi_fi.html#a68cb65b5b2ce951ae7cc348d977ee78e">WiFi::getStaIp</a></div><div class="ttdeci">static std::string getStaIp()</div><div class="ttdoc">Get the current ESP32 IP form STA. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00403">WiFi.cpp:403</a></div></div>
<div class="ttc" id="unit1652_8c_html_a1d19b0eef3b3acd31be88886a0277c2e"><div class="ttname"><a href="unit1652_8c.html#a1d19b0eef3b3acd31be88886a0277c2e">memset</a></div><div class="ttdeci">memset(input, '\0', sizeof(input))</div></div>
<div class="ttc" id="class_wi_fi_html_abf6df73f23fed380a5109a29def8d08f"><div class="ttname"><a href="class_wi_fi.html#abf6df73f23fed380a5109a29def8d08f">WiFi::setWifiEventHandler</a></div><div class="ttdeci">void setWifiEventHandler(WiFiEventHandler *wifiEventHandler)</div><div class="ttdoc">Set the event handler to use to process detected events. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00656">WiFi.cpp:656</a></div></div>
<div class="ttc" id="connect__with__static__ip_8c_html_a60d008fa41ac8e78270549ae866de10b"><div class="ttname"><a href="connect__with__static__ip_8c.html#a60d008fa41ac8e78270549ae866de10b">tcpip_adapter_dhcpc_stop</a></div><div class="ttdeci">tcpip_adapter_dhcpc_stop(TCPIP_ADAPTER_IF_STA)</div></div>
<div class="ttc" id="class_wi_fi_html_aa158786a3a91c13956be956e7d094622"><div class="ttname"><a href="class_wi_fi.html#aa158786a3a91c13956be956e7d094622">WiFi::getApIpInfo</a></div><div class="ttdeci">static tcpip_adapter_ip_info_t getApIpInfo()</div><div class="ttdoc">Get the AP IP Info. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00273">WiFi.cpp:273</a></div></div>
<div class="ttc" id="connect__with__static__ip_8c_html_a3f808aeff17ef45a81bf2089b769709f"><div class="ttname"><a href="connect__with__static__ip_8c.html#a3f808aeff17ef45a81bf2089b769709f">ipInfo</a></div><div class="ttdeci">tcpip_adapter_ip_info_t ipInfo</div><div class="ttdef"><b>Definition:</b> <a href="connect__with__static__ip_8c_source.html#l00044">connect_with_static_ip.c:44</a></div></div>
<div class="ttc" id="class_wi_fi_a_p_record_html"><div class="ttname"><a href="class_wi_fi_a_p_record.html">WiFiAPRecord</a></div><div class="ttdoc">Manage mDNS server. </div><div class="ttdef"><b>Definition:</b> <a href="_wi_fi_8h_source.html#l00048">WiFi.h:48</a></div></div>
<div class="ttc" id="class_wi_fi_html_aff9498a1f42011f3d38876444a153963"><div class="ttname"><a href="class_wi_fi.html#aff9498a1f42011f3d38876444a153963">WiFi::getApIp</a></div><div class="ttdeci">static std::string getApIp()</div><div class="ttdoc">Get the current ESP32 IP form AP. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00311">WiFi.cpp:311</a></div></div>
<div class="ttc" id="connect__with__static__ip_8c_html_a384dacd0c224cb8c2216c22676ba8f5d"><div class="ttname"><a href="connect__with__static__ip_8c.html#a384dacd0c224cb8c2216c22676ba8f5d">nvs_flash_init</a></div><div class="ttdeci">nvs_flash_init()</div></div>
<div class="ttc" id="class_wi_fi_html"><div class="ttname"><a href="class_wi_fi.html">WiFi</a></div><div class="ttdoc">WiFi driver. </div><div class="ttdef"><b>Definition:</b> <a href="_wi_fi_8h_source.html#l00111">WiFi.h:111</a></div></div>
<div class="ttc" id="class_wi_fi_html_a08647c8bdbb4d8612abb2a4daf5dbdb1"><div class="ttname"><a href="class_wi_fi.html#a08647c8bdbb4d8612abb2a4daf5dbdb1">WiFi::getStaMac</a></div><div class="ttdeci">static std::string getStaMac()</div><div class="ttdoc">Get the MAC address of the STA interface. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00439">WiFi.cpp:439</a></div></div>
<div class="ttc" id="class_wi_fi_html_aa70d86d4709954beb1f79e73715dfd5b"><div class="ttname"><a href="class_wi_fi.html#aa70d86d4709954beb1f79e73715dfd5b">WiFi::~WiFi</a></div><div class="ttdeci">~WiFi()</div><div class="ttdoc">Deletes the event handler that was used by the class. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00065">WiFi.cpp:65</a></div></div>
<div class="ttc" id="class_free_r_t_o_s_1_1_semaphore_html_a67fa9bf777be48332a30154e006827fd"><div class="ttname"><a href="class_free_r_t_o_s_1_1_semaphore.html#a67fa9bf777be48332a30154e006827fd">FreeRTOS::Semaphore::take</a></div><div class="ttdeci">bool take(std::string owner=&quot;&lt;Unknown&gt;&quot;)</div><div class="ttdoc">Take a semaphore. Take a semaphore and wait indefinitely. </div><div class="ttdef"><b>Definition:</b> <a href="_free_r_t_o_s_8cpp_source.html#l00159">FreeRTOS.cpp:159</a></div></div>
<div class="ttc" id="class_wi_fi_html_a7ba16ba35e5543c23db71dd9e054f555"><div class="ttname"><a href="class_wi_fi.html#a7ba16ba35e5543c23db71dd9e054f555">WiFi::getApNetmask</a></div><div class="ttdeci">static std::string getApNetmask()</div><div class="ttdoc">Get the current AP netmask. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00322">WiFi.cpp:322</a></div></div>
<div class="ttc" id="class_wi_fi_html_a9af2e6f3f5bf0dcf9a319954cf6ec5a0"><div class="ttname"><a href="class_wi_fi.html#a9af2e6f3f5bf0dcf9a319954cf6ec5a0">WiFi::setIPInfo</a></div><div class="ttdeci">void setIPInfo(const std::string &amp;ip, const std::string &amp;gw, const std::string &amp;netmask)</div><div class="ttdoc">Set the IP info and enable DHCP if ip != 0. If called with ip == 0 then DHCP is enabled. If called with bad values it will do nothing. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00680">WiFi.cpp:680</a></div></div>
<div class="ttc" id="class_wi_fi_html_abe399adb8a5d43f6affff8ceb78fc3fc"><div class="ttname"><a href="class_wi_fi.html#abe399adb8a5d43f6affff8ceb78fc3fc">WiFi::getMode</a></div><div class="ttdeci">static std::string getMode()</div><div class="ttdoc">Get the WiFi Mode. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00370">WiFi.cpp:370</a></div></div>
<div class="ttc" id="class_wi_fi_event_handler_html"><div class="ttname"><a href="class_wi_fi_event_handler.html">WiFiEventHandler</a></div><div class="ttdoc">WiFi state event handler. </div><div class="ttdef"><b>Definition:</b> <a href="_wi_fi_event_handler_8h_source.html#l00098">WiFiEventHandler.h:98</a></div></div>
<div class="ttc" id="class_wi_fi_event_handler_html_a9eeffe417501462c8a12a9e879a69444"><div class="ttname"><a href="class_wi_fi_event_handler.html#a9eeffe417501462c8a12a9e879a69444">WiFiEventHandler::getEventHandler</a></div><div class="ttdeci">system_event_cb_t getEventHandler()</div><div class="ttdoc">Get the event handler. Retrieve the event handler function to be passed to the ESP-IDF event handler ...</div><div class="ttdef"><b>Definition:</b> <a href="_wi_fi_event_handler_8cpp_source.html#l00123">WiFiEventHandler.cpp:123</a></div></div>
<div class="ttc" id="class_wi_fi_html_a6b4031d4fa81fe133c7a6390669aa851"><div class="ttname"><a href="class_wi_fi.html#a6b4031d4fa81fe133c7a6390669aa851">WiFi::getApMac</a></div><div class="ttdeci">static std::string getApMac()</div><div class="ttdoc">Get the MAC address of the AP interface. </div><div class="ttdef"><b>Definition:</b> <a href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp_source.html#l00285">WiFi.cpp:285</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_2b66d65f09a100230911d819a169d69c.html">esp32-snippets</a></li><li class="navelem"><a class="el" href="dir_e66062f3a4d2a5b6b6746a6b0f9c85ac.html">cpp_utils</a></li><li class="navelem"><a class="el" href="esp32-snippets_2cpp__utils_2_wi_fi_8cpp.html">WiFi.cpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
