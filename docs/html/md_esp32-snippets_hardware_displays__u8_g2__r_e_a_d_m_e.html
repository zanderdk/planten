<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Plante: ESP32 U8G2 library support</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Plante
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_esp32-snippets_hardware_displays__u8_g2__r_e_a_d_m_e.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ESP32 U8G2 library support </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>There is an excellent open source library called <code>u8g2</code> that can be found on Github here:</p>
<p><a href="https://github.com/olikraus/u8g2">https://github.com/olikraus/u8g2</a></p>
<p>The purpose of the library is to provide a display independent driver layer for monochrome displays including LCD and OLED. The library "knows" how to driver the underlying displays as well as providing drawing primitives including text, fonts, lines and other geometrical shapes.</p>
<p>A version of the library is available in cleanly compiling C and compiles without incident on the ESP32-IDF framework.</p>
<p>However, since the library is agnostic of MCU environments and will work on a variety of boards, there has to be a mapping from the functions expected by the library to the underlying MCU board hardware. This includes driving GPIOs, <a class="el" href="class_i2_c.html" title="Interface to I2C functions. ">I2C</a>, <a class="el" href="class_s_p_i.html" title="Handle SPI protocol. ">SPI</a> and more.</p>
<p>The code in this folder provides a mapping from U8g2 to the ESP32 ESP-IDF. This should be included in your build of U8g2 applications.</p>
<p>To use with the ESP32, we must invoke the <code><a class="el" href="u8g2__esp32__hal_8c.html#a157783a76c13eddc1e7e39f1ce85818e">u8g2_esp32_hal_init()</a></code> function before invoking any of the normal U8g2 functons. What this call does is tell the ESP32 what pins we wish to map. Here is an example of <a class="el" href="class_s_p_i.html" title="Handle SPI protocol. ">SPI</a> use:</p>
<div class="fragment"><div class="line">u8g2_esp32_hal_t u8g2_esp32_hal = U8G2_ESP32_HAL_DEFAULT;</div><div class="line">u8g2_esp32_hal.clk   = PIN_CLK;</div><div class="line">u8g2_esp32_hal.mosi  = PIN_MOSI;</div><div class="line">u8g2_esp32_hal.cs    = PIN_CS;</div><div class="line">u8g2_esp32_hal.dc    = PIN_DC;</div><div class="line">u8g2_esp32_hal.reset = PIN_RESET;</div><div class="line">u8g2_esp32_hal_init(u8g2_esp32_hal);</div></div><!-- fragment --><p>and here is an example of <a class="el" href="class_i2_c.html" title="Interface to I2C functions. ">I2C</a> use:</p>
<div class="fragment"><div class="line">u8g2_esp32_hal_t u8g2_esp32_hal = U8G2_ESP32_HAL_DEFAULT;</div><div class="line">u8g2_esp32_hal.sda = PIN_SDA;</div><div class="line">u8g2_esp32_hal.scl = PIN_SCL;</div><div class="line">u8g2_esp32_hal_init(u8g2_esp32_hal);</div></div><!-- fragment --><p>Note: For <a class="el" href="class_i2_c.html" title="Interface to I2C functions. ">I2C</a>, after calling the display specific setup, invoke:</p>
<div class="fragment"><div class="line">u8x8_SetI2CAddress(&amp;u8g2.u8x8,&lt;address&gt;);</div></div><!-- fragment --><p>Note that <code>&lt;address&gt;</code> is the <a class="el" href="class_i2_c.html" title="Interface to I2C functions. ">I2C</a> address already shifted left to include the read/write flag. For example, if you are using an SSD1305, instead of supplying the address <code>0x3C</code> which would be <code>0011 1100</code> supply <code>0x78</code> which would be <code>0111 1000</code>.</p>
<p>The function takes as input a <code>u8g2_esp32_hal</code> structure instance which has the logical pins that U8g2 needs mapped to the physical pins on the ESP32 that we wish to use. If we don't use a specific pin for our specific display, set the value to be <code>U8G2_ESP32_HAL_UNDEFINED</code> which is the default initialization value.</p>
<p>Remember, ESP32 pins are not hard-coded to functions and as such, all the GPIO pins on the ESP32 are open for use. Following this initialization, we can use U8g2 as normal and described in the U8g2 documentation.</p>
<h2>Compiling U8G2</h2>
<p>To use the actual U8g2 library in your ESP32 project, perform the following steps:</p>
<ol type="1">
<li>Create a directory called <code>components</code> in your main project directory.</li>
<li>Change into the <code>components</code> directory.</li>
<li>Run <code>git clone <a href="https://github.com/olikraus/u8g2.git">https://github.com/olikraus/u8g2.git</a></code> to bring in a the latest copy of u8g2 library.</li>
<li>Change into the <code>u8g2</code> directory.</li>
<li>Create a file called <code>component.mk</code></li>
<li>Enter the following in the <code>component.mk</code> file: <div class="fragment"><div class="line">COMPONENT_SRCDIRS:=csrc</div><div class="line">COMPONENT_ADD_INCLUDEDIRS:=csrc</div></div><!-- fragment --></li>
</ol>
<h2>Development</h2>
<p>While in principal, there should be nothing specific needed beyond this addition to make U8g2 work on the ESP32, only a small number of boards have been tested. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
