<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Plante: esp32-snippets/cpp_utils/HttpRequest.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Plante
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_http_request_8cpp_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">HttpRequest.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_http_request_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * HTTPRequest.cpp</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *  Created on: Aug 30, 2017</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *      Author: kolban</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * A Websocket hand shake request looks like:</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * GET /chat HTTP/1.1</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * Host: server.example.com</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * Upgrade: websocket</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * Connection: Upgrade</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * Origin: http://example.com</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * Sec-WebSocket-Protocol: chat, superchat</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * Sec-WebSocket-Version: 13</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * A corresponding hand shake response looks like:</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * HTTP/1.1 101 Switching Protocols</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * Upgrade: websocket</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * Connection: Upgrade</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * Sec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> * Sec-WebSocket-Protocol: chat</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> * The server key returned in Sec-WebSocket-Accept is the value of Sec-WebSocket-Key passed in the</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> * request concatenated with &quot;258EAFA5-E914-47DA-95CA-C5AB0DC85B11&quot; and then take the SHA-1 hash</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> * of the result to give a 20 byte value which is then base64() encoded.</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_http_response_8h.html">HttpResponse.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_http_request_8h.html">HttpRequest.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_general_utils_8h.html">GeneralUtils.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &lt;esp_log.h&gt;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;hwcrypto/sha.h&gt;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="_http_request_8cpp.html#a0d7815723706a488b5bb65f7e3acf584">   44</a></span>&#160;<span class="preprocessor">#define STATE_NAME  0</span></div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="_http_request_8cpp.html#afa847074574f6dcfae4ac9ab675868e4">   45</a></span>&#160;<span class="preprocessor">#define STATE_VALUE 1</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* LOG_TAG=<span class="stringliteral">&quot;HttpRequest&quot;</span>;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">//static std::string lineTerminator = &quot;\r\n&quot;;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="class_http_request.html#a1bf74925c49868018669d681cb4c0c94">HttpRequest::HTTP_HEADER_ACCEPT</a>[]         = <span class="stringliteral">&quot;Accept&quot;</span>;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="class_http_request.html#a80792c9e9dd09feb759ce12ff02fecf3">HttpRequest::HTTP_HEADER_ALLOW</a>[]          = <span class="stringliteral">&quot;Allow&quot;</span>;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="class_http_request.html#a793c1599d8fefbadf35dd3b7074bafee">HttpRequest::HTTP_HEADER_CONNECTION</a>[]     = <span class="stringliteral">&quot;Connection&quot;</span>;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="class_http_request.html#ac5d0ff0b3b64863bbc10a8afaab380f2">HttpRequest::HTTP_HEADER_CONTENT_LENGTH</a>[] = <span class="stringliteral">&quot;Content-Length&quot;</span>;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="class_http_request.html#acd9cc6de0d1b29e34ed9a29b7825726e">HttpRequest::HTTP_HEADER_CONTENT_TYPE</a>[]   = <span class="stringliteral">&quot;Content-Type&quot;</span>;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="class_http_request.html#a9c93c97cb88c11f07b64cfdedf4bf5c4">HttpRequest::HTTP_HEADER_COOKIE</a>[]         = <span class="stringliteral">&quot;Cookie&quot;</span>;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="class_http_request.html#ad4fd263b7fa36324da7e7cbe341be72b">HttpRequest::HTTP_HEADER_HOST</a>[]           = <span class="stringliteral">&quot;Host&quot;</span>;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="class_http_request.html#a0cbddbceb2b4e23a4040a5ed7294afff">HttpRequest::HTTP_HEADER_LAST_MODIFIED</a>[]  = <span class="stringliteral">&quot;Last-Modified&quot;</span>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="class_http_request.html#ab930ef09eefc383fbb7ace48678533ed">HttpRequest::HTTP_HEADER_ORIGIN</a>[]         = <span class="stringliteral">&quot;Origin&quot;</span>;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="class_http_request.html#a2d3d6efe7f664f0118e43a89eec41c92">HttpRequest::HTTP_HEADER_SEC_WEBSOCKET_ACCEPT</a>[]   = <span class="stringliteral">&quot;Sec-WebSocket-Accept&quot;</span>;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="class_http_request.html#a6145511eaf108eee7bd1d11b97d89e11">HttpRequest::HTTP_HEADER_SEC_WEBSOCKET_PROTOCOL</a>[] = <span class="stringliteral">&quot;Sec-WebSocket-Protocol&quot;</span>;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="class_http_request.html#ab90162d2b9d3d7765c9cc4643118c11f">HttpRequest::HTTP_HEADER_SEC_WEBSOCKET_KEY</a>[]      = <span class="stringliteral">&quot;Sec-WebSocket-Key&quot;</span>;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="class_http_request.html#a39c6dbaf8c892f62644868155a55fa16">HttpRequest::HTTP_HEADER_SEC_WEBSOCKET_VERSION</a>[]  = <span class="stringliteral">&quot;Sec-WebSocket-Version&quot;</span>;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="class_http_request.html#a9a46d60c7608f54a1f407f44252b58e5">HttpRequest::HTTP_HEADER_UPGRADE</a>[]        = <span class="stringliteral">&quot;Upgrade&quot;</span>;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="class_http_request.html#a35642c9d929aaaeec7d77cdd58fe9468">HttpRequest::HTTP_HEADER_USER_AGENT</a>[]     = <span class="stringliteral">&quot;User-Agent&quot;</span>;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="class_http_request.html#a9b1633e44bd2c021fc523671197e5be3">HttpRequest::HTTP_METHOD_CONNECT</a>[] = <span class="stringliteral">&quot;CONNECT&quot;</span>;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="class_http_request.html#a916e41843c5caa4a8a8562224a4d664b">HttpRequest::HTTP_METHOD_DELETE</a>[]  = <span class="stringliteral">&quot;DELETE&quot;</span>;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="class_http_request.html#ae8a9a8ce924e193bdc1d4051e74e33d9">HttpRequest::HTTP_METHOD_GET</a>[]     = <span class="stringliteral">&quot;GET&quot;</span>;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="class_http_request.html#aad565b257daa811a7802b20f154f2b09">HttpRequest::HTTP_METHOD_HEAD</a>[]    = <span class="stringliteral">&quot;HEAD&quot;</span>;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="class_http_request.html#a30b325f6346e911cb4dc363ea56c8619">HttpRequest::HTTP_METHOD_OPTIONS</a>[] = <span class="stringliteral">&quot;OPTIONS&quot;</span>;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="class_http_request.html#acb543a90701d1bb532feb050594d0982">HttpRequest::HTTP_METHOD_PATCH</a>[]   = <span class="stringliteral">&quot;PATCH&quot;</span>;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="class_http_request.html#a680342d3f100041346d7ed8aba9f7cfd">HttpRequest::HTTP_METHOD_POST</a>[]    = <span class="stringliteral">&quot;POST&quot;</span>;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="class_http_request.html#af00e99f6c391bb91d9ec6349c9fa3cc5">HttpRequest::HTTP_METHOD_PUT</a>[]     = <span class="stringliteral">&quot;PUT&quot;</span>;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="_http_request_8cpp.html#af3e3c665edf193d583918b87eacebdec">   81</a></span>&#160;<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="_http_request_8cpp.html#af3e3c665edf193d583918b87eacebdec">buildWebsocketKeyResponseHash</a>(<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> requestKey) {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> newKey = requestKey + <span class="stringliteral">&quot;258EAFA5-E914-47DA-95CA-C5AB0DC85B11&quot;</span>;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    uint8_t shaData[20];</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    esp_sha(SHA1, (uint8_t*) newKey.data(), newKey.length(), shaData);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">//GeneralUtils::hexDump(shaData, 20);</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> retStr;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <a class="code" href="class_general_utils.html#abe8373207df0ef16bc66338b4ec8d298">GeneralUtils::base64Encode</a>(<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a>((<span class="keywordtype">char</span>*) shaData, <span class="keyword">sizeof</span>(shaData)), &amp;retStr);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">return</span> retStr;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;} <span class="comment">// buildWebsocketKeyResponseHash</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="class_http_request.html#a866f33e85b736b32f0084d64a716529c">   95</a></span>&#160;<a class="code" href="class_http_request.html#a866f33e85b736b32f0084d64a716529c">HttpRequest::HttpRequest</a>(<a class="code" href="class_socket.html">Socket</a> clientSocket) {</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    m_clientSocket = clientSocket;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    m_pWebSocket   = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    m_isClosed     = <span class="keyword">false</span>;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    m_parser.<a class="code" href="class_http_parser.html#ad1a4929041f71909610a230f9d9d769a">parse</a>(clientSocket); <span class="comment">// Parse the socket stream to build the HTTP data.</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">// We have to take some special action on the Connection header.  We want to know if it contains &quot;Upgrade&quot;</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// however it has come to light that the Connection header can contain multiple parts.  For example, it has</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">// been reported that it can contain &quot;keep-alive,Upgrade&quot;.  Because of this we can&#39;t simply examine the string</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="comment">// to see if it equals &quot;Upgrade&quot;.  Our solution is to get the value of Connection string, split it by &quot;,&quot; as</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="comment">// a delimiter and then examine each of the parts to see if any of those are &quot;Upgrade&quot;.</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    std::vector&lt;std::string&gt; parts = <a class="code" href="class_general_utils.html#addd9bb2f367a86841e48f5aa67f1d003">GeneralUtils::split</a>(<a class="code" href="class_http_request.html#ab252baed3c7368fd26708c299bf89e34">getHeader</a>(<a class="code" href="class_http_request.html#a793c1599d8fefbadf35dd3b7074bafee">HTTP_HEADER_CONNECTION</a>), <span class="charliteral">&#39;,&#39;</span>);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordtype">bool</span> upgradeFound = <span class="keyword">false</span>;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">if</span> (std::find(parts.begin(), parts.end(), <span class="stringliteral">&quot;Upgrade&quot;</span>) != parts.end()) {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        upgradeFound = <span class="keyword">true</span>;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="comment">// Is this a Web Socket?</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_http_request.html#ab71053bfdeac7cab93f438361f0a800d">getMethod</a>() == <a class="code" href="class_http_request.html#ae8a9a8ce924e193bdc1d4051e74e33d9">HTTP_METHOD_GET</a> &amp;&amp;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            !<a class="code" href="class_http_request.html#ab252baed3c7368fd26708c299bf89e34">getHeader</a>(<a class="code" href="class_http_request.html#ad4fd263b7fa36324da7e7cbe341be72b">HTTP_HEADER_HOST</a>).empty() &amp;&amp;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <a class="code" href="class_http_request.html#ab252baed3c7368fd26708c299bf89e34">getHeader</a>(<a class="code" href="class_http_request.html#a9a46d60c7608f54a1f407f44252b58e5">HTTP_HEADER_UPGRADE</a>) == <span class="stringliteral">&quot;websocket&quot;</span> &amp;&amp;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="comment">//getHeader(HTTP_HEADER_CONNECTION) == &quot;Upgrade&quot; &amp;&amp;</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            upgradeFound &amp;&amp;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            !<a class="code" href="class_http_request.html#ab252baed3c7368fd26708c299bf89e34">getHeader</a>(<a class="code" href="class_http_request.html#ab90162d2b9d3d7765c9cc4643118c11f">HTTP_HEADER_SEC_WEBSOCKET_KEY</a>).empty() &amp;&amp;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            !<a class="code" href="class_http_request.html#ab252baed3c7368fd26708c299bf89e34">getHeader</a>(<a class="code" href="class_http_request.html#a39c6dbaf8c892f62644868155a55fa16">HTTP_HEADER_SEC_WEBSOCKET_VERSION</a>).empty()) {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;Websocket detected!&quot;</span>);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="comment">// do something</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="comment">// Process the web socket request</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="comment">// Build and send the response HTTP message to switch to being a Web Socket</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <a class="code" href="class_http_response.html">HttpResponse</a> response(<span class="keyword">this</span>);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        response.<a class="code" href="class_http_response.html#af13a61ae987f15599232fa30d2cfdeab">setStatus</a>(<a class="code" href="class_http_response.html#a78dc24a606063749c4f2e1b97c9a7567">HttpResponse::HTTP_STATUS_SWITCHING_PROTOCOL</a>, <span class="stringliteral">&quot;Switching Protocols&quot;</span>);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        response.<a class="code" href="class_http_response.html#a6a83c668bb537a24f3e62255501fb25e">addHeader</a>(<a class="code" href="class_http_request.html#a9a46d60c7608f54a1f407f44252b58e5">HTTP_HEADER_UPGRADE</a>, <span class="stringliteral">&quot;websocket&quot;</span>);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        response.<a class="code" href="class_http_response.html#a6a83c668bb537a24f3e62255501fb25e">addHeader</a>(<a class="code" href="class_http_request.html#a793c1599d8fefbadf35dd3b7074bafee">HTTP_HEADER_CONNECTION</a>, <span class="stringliteral">&quot;Upgrade&quot;</span>);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        response.<a class="code" href="class_http_response.html#a6a83c668bb537a24f3e62255501fb25e">addHeader</a>(<a class="code" href="class_http_request.html#a2d3d6efe7f664f0118e43a89eec41c92">HTTP_HEADER_SEC_WEBSOCKET_ACCEPT</a>,</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            <a class="code" href="_http_request_8cpp.html#af3e3c665edf193d583918b87eacebdec">buildWebsocketKeyResponseHash</a>(<a class="code" href="class_http_request.html#ab252baed3c7368fd26708c299bf89e34">getHeader</a>(<a class="code" href="class_http_request.html#ab90162d2b9d3d7765c9cc4643118c11f">HTTP_HEADER_SEC_WEBSOCKET_KEY</a>)));</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        response.<a class="code" href="class_http_response.html#a68bc032812a96326d9fe4fde668a372b">sendData</a>(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="comment">// Now that we have converted the request into a WebSocket, create the new WebSocket entry.</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        m_pWebSocket = <span class="keyword">new</span> <a class="code" href="class_web_socket.html">WebSocket</a>(clientSocket);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    } <span class="comment">// if this is a web socket ...</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;} <span class="comment">// HttpRequest</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="class_http_request.html#adfc7ae561e6ba03d21890ee1855df72b">  141</a></span>&#160;<a class="code" href="class_http_request.html#adfc7ae561e6ba03d21890ee1855df72b">HttpRequest::~HttpRequest</a>() {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;} <span class="comment">// ~HttpRequest</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="class_http_request.html#a970869c3e73fb4cf6758793e5fa27471">  148</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_http_request.html#a970869c3e73fb4cf6758793e5fa27471">HttpRequest::close</a>() {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_http_request.html#ada6a0b548a6a104d1e94b17f6c96d5fe">isWebsocket</a>()) {</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        ESP_LOGW(LOG_TAG, <span class="stringliteral">&quot;Request to close an HTTP Request but we think it is a web socket!&quot;</span>);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    m_clientSocket.<a class="code" href="class_socket.html#aef06605c6725958004116983f1a2051f">close</a>();</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    m_isClosed = <span class="keyword">true</span>;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;} <span class="comment">// close_cpp</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="class_http_request.html#a0a5ce3688a7340c0e04b026c51ee5154">  160</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_http_request.html#a0a5ce3688a7340c0e04b026c51ee5154">HttpRequest::dump</a>() {</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;Method: %s, URL: \&quot;%s\&quot;, Version: %s&quot;</span>, <a class="code" href="class_http_request.html#ab71053bfdeac7cab93f438361f0a800d">getMethod</a>().c_str(), <a class="code" href="class_http_request.html#a1c8e0c2c14135ece794b8bbbd37ccfdb">getPath</a>().c_str(), <a class="code" href="class_http_request.html#aa8ffb5df637ec2c7d3d0c4346c5154e7">getVersion</a>().c_str());</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keyword">auto</span> <a class="code" href="anyauth_8d.html#a076c285cdc160cc073b20f7cf28ef85f">headers</a> = <a class="code" href="class_http_request.html#a8e157d6a9059373a5614573d3d49860b">getHeaders</a>();</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keyword">auto</span> it2 = <a class="code" href="anyauth_8d.html#a076c285cdc160cc073b20f7cf28ef85f">headers</a>.begin();</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">for</span> (; it2 != <a class="code" href="anyauth_8d.html#a076c285cdc160cc073b20f7cf28ef85f">headers</a>.end(); ++it2) {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;name=\&quot;%s\&quot;, value=\&quot;%s\&quot;&quot;</span>, it2-&gt;first.c_str(), it2-&gt;second.c_str());</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    }</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;Body: \&quot;%s\&quot;&quot;</span>, <a class="code" href="class_http_request.html#afbdb7737b89853ed346dd61c51e1836f">getBody</a>().c_str());</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;} <span class="comment">// dump</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="class_http_request.html#afbdb7737b89853ed346dd61c51e1836f">  174</a></span>&#160;<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="class_http_request.html#afbdb7737b89853ed346dd61c51e1836f">HttpRequest::getBody</a>() {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">return</span> m_parser.<a class="code" href="class_http_parser.html#a96e449829ffcec1555ce2b83f35b1ce5">getBody</a>();</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;} <span class="comment">// getBody</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="class_http_request.html#ab252baed3c7368fd26708c299bf89e34">  184</a></span>&#160;<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="class_http_request.html#ab252baed3c7368fd26708c299bf89e34">HttpRequest::getHeader</a>(<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>) {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">return</span> m_parser.<a class="code" href="class_http_parser.html#ac41defb5ee108129a23e3b5466343627">getHeader</a>(<a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;} <span class="comment">// getHeader</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="class_http_request.html#a8e157d6a9059373a5614573d3d49860b">  189</a></span>&#160;std::map&lt;std::string, std::string&gt; <a class="code" href="class_http_request.html#a8e157d6a9059373a5614573d3d49860b">HttpRequest::getHeaders</a>() {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">return</span> m_parser.<a class="code" href="class_http_parser.html#a2788d08e90f4e6f923e67e9ecea5641f">getHeaders</a>();</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;} <span class="comment">// getHeaders</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="class_http_request.html#ab71053bfdeac7cab93f438361f0a800d">  194</a></span>&#160;<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="class_http_request.html#ab71053bfdeac7cab93f438361f0a800d">HttpRequest::getMethod</a>() {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">return</span> m_parser.<a class="code" href="class_http_parser.html#a69564f05f57b50c0362eca738a5a744c">getMethod</a>();</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;} <span class="comment">// getMethod</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="class_http_request.html#a1c8e0c2c14135ece794b8bbbd37ccfdb">  199</a></span>&#160;<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="class_http_request.html#a1c8e0c2c14135ece794b8bbbd37ccfdb">HttpRequest::getPath</a>() {</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">return</span> m_parser.<a class="code" href="class_http_parser.html#a5c117f22e6c3ba6bc3488de01d211fa7">getURL</a>();</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;} <span class="comment">// getPath</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="class_http_request.html#ab09977e9201d7b79d0f77d416096d707">  210</a></span>&#160;std::map&lt;std::string, std::string&gt; <a class="code" href="class_http_request.html#ab09977e9201d7b79d0f77d416096d707">HttpRequest::getQuery</a>() {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="comment">// Walk through all the characters in the query string maintaining a simple state machine</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">// that lets us know what we are parsing.</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    std::map&lt;std::string, std::string&gt; queryMap;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> possibleQueryString = <a class="code" href="class_http_request.html#a1c8e0c2c14135ece794b8bbbd37ccfdb">getPath</a>();</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordtype">int</span> qindex = possibleQueryString.find_first_of(<span class="stringliteral">&quot;?&quot;</span>);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span> (qindex &lt; 0) {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;No query string present&quot;</span>);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="keywordflow">return</span> queryMap ;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> queryString = possibleQueryString.substr(qindex + 1, -1) ;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;query string: %s&quot;</span>, queryString.c_str()) ;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">     * We maintain a simple state machine with states of:</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">     * * STATE_NAME - We are parsing a name.</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">     * * STATE_VALUE - We are parsing a value.</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a> = <a class="code" href="_http_request_8cpp.html#a0d7815723706a488b5bb65f7e3acf584">STATE_NAME</a>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a> = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a>;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="comment">// Loop through each character in the query string.</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &lt; queryString.length(); <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++) {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordtype">char</span> currentChar = queryString[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>];</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a> == <a class="code" href="_http_request_8cpp.html#a0d7815723706a488b5bb65f7e3acf584">STATE_NAME</a>) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <span class="keywordflow">if</span> (currentChar != <span class="charliteral">&#39;=&#39;</span>) {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                <a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a> += currentChar;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                <a class="code" href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a> = <a class="code" href="_http_request_8cpp.html#afa847074574f6dcfae4ac9ab675868e4">STATE_VALUE</a>;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                <a class="code" href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a> = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            }</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        } <span class="comment">// End state = STATE_NAME</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a> == <a class="code" href="_http_request_8cpp.html#afa847074574f6dcfae4ac9ab675868e4">STATE_VALUE</a>) {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <span class="keywordflow">if</span> (currentChar != <span class="charliteral">&#39;&amp;&#39;</span>) {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                <a class="code" href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a> += currentChar;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                <span class="comment">//ESP_LOGD(tag, &quot;name=%s, value=%s&quot;, name.c_str(), value.c_str());</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                queryMap[<a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>] = <a class="code" href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a>;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                <a class="code" href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a> = <a class="code" href="_http_request_8cpp.html#a0d7815723706a488b5bb65f7e3acf584">STATE_NAME</a>;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                <a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a> = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            }</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        } <span class="comment">// End state = STATE_VALUE</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    } <span class="comment">// End for loop</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a> == <a class="code" href="_http_request_8cpp.html#afa847074574f6dcfae4ac9ab675868e4">STATE_VALUE</a>) {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="comment">//ESP_LOGD(tag, &quot;name=%s, value=%s&quot;, name.c_str(), value.c_str());</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        queryMap[<a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>] = <a class="code" href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    }</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">return</span> queryMap;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;} <span class="comment">// getQuery</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno"><a class="line" href="class_http_request.html#a704e22a6312c4b88d3a13803893faccf">  266</a></span>&#160;<a class="code" href="class_socket.html">Socket</a> <a class="code" href="class_http_request.html#a704e22a6312c4b88d3a13803893faccf">HttpRequest::getSocket</a>() {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordflow">return</span> m_clientSocket;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;} <span class="comment">// getSocket</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="class_http_request.html#aa8ffb5df637ec2c7d3d0c4346c5154e7">  271</a></span>&#160;<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="class_http_request.html#aa8ffb5df637ec2c7d3d0c4346c5154e7">HttpRequest::getVersion</a>() {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">return</span> m_parser.<a class="code" href="class_http_parser.html#a642904cb67f3c2aca2551c6807346bd9">getVersion</a>();</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;} <span class="comment">// getVersion</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="class_http_request.html#ad888f752e5970269ddcba963304d57d0">  276</a></span>&#160;<a class="code" href="class_web_socket.html">WebSocket</a>* <a class="code" href="class_http_request.html#ad888f752e5970269ddcba963304d57d0">HttpRequest::getWebSocket</a>() {</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">return</span> m_pWebSocket;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;} <span class="comment">// getWebSocket</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="class_http_request.html#a219c6b9d700e5940d86d909e4c9a0169">  285</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_http_request.html#a219c6b9d700e5940d86d909e4c9a0169">HttpRequest::isClosed</a>() {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">return</span> m_isClosed;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;} <span class="comment">// isClosed</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno"><a class="line" href="class_http_request.html#ada6a0b548a6a104d1e94b17f6c96d5fe">  294</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_http_request.html#ada6a0b548a6a104d1e94b17f6c96d5fe">HttpRequest::isWebsocket</a>() {</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">return</span> m_pWebSocket != <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;} <span class="comment">// isWebsocket</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno"><a class="line" href="class_http_request.html#a53f09999b5f93920c79eed1423a490cf">  303</a></span>&#160;std::map&lt;std::string, std::string&gt; <a class="code" href="class_http_request.html#a53f09999b5f93920c79eed1423a490cf">HttpRequest::parseForm</a>() {</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;&gt;&gt; parseForm&quot;</span>);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    std::map&lt;std::string, std::string&gt; map;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="comment">// A form is composed of name=value pairs where each pair is separated with an &quot;&amp;&quot; character.</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment">// Our algorithm is to split all the pairs by &quot;&amp;&quot; and then split all the name/value pairs by &quot;=&quot;.</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    std::istringstream ss(<a class="code" href="class_http_request.html#afbdb7737b89853ed346dd61c51e1836f">getBody</a>());         <span class="comment">// Get the body of the request.</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> currentEntry;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">while</span> (std::getline(ss, currentEntry, <span class="charliteral">&#39;&amp;&#39;</span>)) {   <span class="comment">// For each form entry.</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;Processing: %s&quot;</span>, currentEntry.c_str());   <span class="comment">// Debug</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        std::istringstream currentPair(currentEntry);   <span class="comment">// Prepare to parse the name=value string.</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>;                               <span class="comment">// Declare the name variable.</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a>;                              <span class="comment">// Declare the value variable.</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        std::getline(currentPair, <a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>, <span class="charliteral">&#39;=&#39;</span>);           <span class="comment">// Parse the current form entry into name/value.</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        currentPair &gt;&gt; <a class="code" href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a>;                           <span class="comment">// The value is what remains.</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        map[<a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>] = <a class="code" href="class_http_request.html#a33588e0cf0864e1be7c519f7d491e01e">urlDecode</a>(<a class="code" href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a>);                   <span class="comment">// Decode the field which may have been encoded.</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot; %s = \&quot;%s\&quot;&quot;</span>, <a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>.c_str(), map[<a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>].c_str());   <span class="comment">// Debug</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                              <span class="comment">// Add the form entry into the map.</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    } <span class="comment">// Processed all form entries.</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;&lt;&lt; parseForm&quot;</span>);                <span class="comment">// Debug</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">return</span> map;                                       <span class="comment">// Return the map of form entries.</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;} <span class="comment">// parseForm</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="class_http_request.html#a69559e9b796efa4ba6abaefffc77ddd0">  346</a></span>&#160;std::vector&lt;std::string&gt; <a class="code" href="class_http_request.html#a69559e9b796efa4ba6abaefffc77ddd0">HttpRequest::pathSplit</a>() {</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    std::istringstream <a class="code" href="data-binary_8d.html#a3ac969eb89029f16e1971dc874d41dab">stream</a>(<a class="code" href="class_http_request.html#a1c8e0c2c14135ece794b8bbbd37ccfdb">getPath</a>());</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    std::vector&lt;std::string&gt; ret;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> pathPart;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">while</span> (std::getline(<a class="code" href="data-binary_8d.html#a3ac969eb89029f16e1971dc874d41dab">stream</a>, pathPart, <span class="charliteral">&#39;/&#39;</span>)) {</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        ret.push_back(pathPart);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    }</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="comment">// Debug</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &lt; ret.size(); <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++) {</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        ESP_LOGD(LOG_TAG, <span class="stringliteral">&quot;part[%d]: %s&quot;</span>, <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>, ret[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].c_str());</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    }</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;} <span class="comment">// pathSplit</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00366"></a><span class="lineno"><a class="line" href="class_http_request.html#a33588e0cf0864e1be7c519f7d491e01e">  366</a></span>&#160;<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="class_http_request.html#a33588e0cf0864e1be7c519f7d491e01e">HttpRequest::urlDecode</a>(<a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> <a class="code" href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>) {</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="comment">// https://stackoverflow.com/questions/154536/encode-decode-urls-in-c</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <a class="code" href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">std::string</a> ret;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordtype">char</span> ch;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordtype">int</span> ii, <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = <a class="code" href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>.length();</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &lt; <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++) {</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>] != <span class="charliteral">&#39;%&#39;</span>){</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>] == <span class="charliteral">&#39;+&#39;</span>) {</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                ret += <span class="charliteral">&#39; &#39;</span>;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                ret += <a class="code" href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>];</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            }</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            sscanf(<a class="code" href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>.substr(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> + 1, 2).c_str(), <span class="stringliteral">&quot;%x&quot;</span>, &amp;ii);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            ch = <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span><span class="keyword">&gt;</span>(ii);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            ret += ch;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> + 2;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        }</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    }</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;} <span class="comment">// urlDecode</span></div><div class="ttc" id="class_http_request_html_ad888f752e5970269ddcba963304d57d0"><div class="ttname"><a href="class_http_request.html#ad888f752e5970269ddcba963304d57d0">HttpRequest::getWebSocket</a></div><div class="ttdeci">WebSocket * getWebSocket()</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8cpp_source.html#l00276">HttpRequest.cpp:276</a></div></div>
<div class="ttc" id="ftp_8c_html_a77812d4945cd21094debbd06962f0f01"><div class="ttname"><a href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a></div><div class="ttdeci">#define state(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="ftp_8c_source.html#l00101">ftp.c:101</a></div></div>
<div class="ttc" id="class_http_request_html_a1c8e0c2c14135ece794b8bbbd37ccfdb"><div class="ttname"><a href="class_http_request.html#a1c8e0c2c14135ece794b8bbbd37ccfdb">HttpRequest::getPath</a></div><div class="ttdeci">std::string getPath()</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8cpp_source.html#l00199">HttpRequest.cpp:199</a></div></div>
<div class="ttc" id="_general_utils_8h_html"><div class="ttname"><a href="_general_utils_8h.html">GeneralUtils.h</a></div></div>
<div class="ttc" id="class_http_request_html_a0cbddbceb2b4e23a4040a5ed7294afff"><div class="ttname"><a href="class_http_request.html#a0cbddbceb2b4e23a4040a5ed7294afff">HttpRequest::HTTP_HEADER_LAST_MODIFIED</a></div><div class="ttdeci">static const char HTTP_HEADER_LAST_MODIFIED[]</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00030">HttpRequest.h:30</a></div></div>
<div class="ttc" id="class_http_request_html_ae8a9a8ce924e193bdc1d4051e74e33d9"><div class="ttname"><a href="class_http_request.html#ae8a9a8ce924e193bdc1d4051e74e33d9">HttpRequest::HTTP_METHOD_GET</a></div><div class="ttdeci">static const char HTTP_METHOD_GET[]</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00041">HttpRequest.h:41</a></div></div>
<div class="ttc" id="class_http_request_html_ab252baed3c7368fd26708c299bf89e34"><div class="ttname"><a href="class_http_request.html#ab252baed3c7368fd26708c299bf89e34">HttpRequest::getHeader</a></div><div class="ttdeci">std::string getHeader(std::string name)</div><div class="ttdoc">Get the named header. </div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8cpp_source.html#l00184">HttpRequest.cpp:184</a></div></div>
<div class="ttc" id="class_http_request_html_a9c93c97cb88c11f07b64cfdedf4bf5c4"><div class="ttname"><a href="class_http_request.html#a9c93c97cb88c11f07b64cfdedf4bf5c4">HttpRequest::HTTP_HEADER_COOKIE</a></div><div class="ttdeci">static const char HTTP_HEADER_COOKIE[]</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00028">HttpRequest.h:28</a></div></div>
<div class="ttc" id="_http_request_8cpp_html_af3e3c665edf193d583918b87eacebdec"><div class="ttname"><a href="_http_request_8cpp.html#af3e3c665edf193d583918b87eacebdec">buildWebsocketKeyResponseHash</a></div><div class="ttdeci">std::string buildWebsocketKeyResponseHash(std::string requestKey)</div><div class="ttdoc">Build a WebSockey response has. </div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8cpp_source.html#l00081">HttpRequest.cpp:81</a></div></div>
<div class="ttc" id="class_http_request_html_ab90162d2b9d3d7765c9cc4643118c11f"><div class="ttname"><a href="class_http_request.html#ab90162d2b9d3d7765c9cc4643118c11f">HttpRequest::HTTP_HEADER_SEC_WEBSOCKET_KEY</a></div><div class="ttdeci">static const char HTTP_HEADER_SEC_WEBSOCKET_KEY[]</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00034">HttpRequest.h:34</a></div></div>
<div class="ttc" id="class_http_request_html_a80792c9e9dd09feb759ce12ff02fecf3"><div class="ttname"><a href="class_http_request.html#a80792c9e9dd09feb759ce12ff02fecf3">HttpRequest::HTTP_HEADER_ALLOW</a></div><div class="ttdeci">static const char HTTP_HEADER_ALLOW[]</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00024">HttpRequest.h:24</a></div></div>
<div class="ttc" id="class_http_request_html_acd9cc6de0d1b29e34ed9a29b7825726e"><div class="ttname"><a href="class_http_request.html#acd9cc6de0d1b29e34ed9a29b7825726e">HttpRequest::HTTP_HEADER_CONTENT_TYPE</a></div><div class="ttdeci">static const char HTTP_HEADER_CONTENT_TYPE[]</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00027">HttpRequest.h:27</a></div></div>
<div class="ttc" id="class_http_request_html_a219c6b9d700e5940d86d909e4c9a0169"><div class="ttname"><a href="class_http_request.html#a219c6b9d700e5940d86d909e4c9a0169">HttpRequest::isClosed</a></div><div class="ttdeci">bool isClosed()</div><div class="ttdoc">Determine if the request is closed. </div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8cpp_source.html#l00285">HttpRequest.cpp:285</a></div></div>
<div class="ttc" id="connect-to_8d_html_a450c41f520f7661f0a48b8fd2597a74c"><div class="ttname"><a href="connect-to_8d.html#a450c41f520f7661f0a48b8fd2597a74c">string</a></div><div class="ttdeci">Long connect to e.g.at a specific cluster node in a cluster of servers.This option is only used to establish the network connection.It does NOT affect the hostname port that is used for TLS meaning any host port.HOST2 and PORT2 may also be the empty string</div><div class="ttdef"><b>Definition:</b> <a href="connect-to_8d_source.html#l00014">connect-to.d:14</a></div></div>
<div class="ttc" id="class_socket_html_aef06605c6725958004116983f1a2051f"><div class="ttname"><a href="class_socket.html#aef06605c6725958004116983f1a2051f">Socket::close</a></div><div class="ttdeci">int close()</div><div class="ttdoc">Close the socket. </div><div class="ttdef"><b>Definition:</b> <a href="_socket_8cpp_source.html#l00135">Socket.cpp:135</a></div></div>
<div class="ttc" id="class_http_parser_html_a2788d08e90f4e6f923e67e9ecea5641f"><div class="ttname"><a href="class_http_parser.html#a2788d08e90f4e6f923e67e9ecea5641f">HttpParser::getHeaders</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; getHeaders()</div><div class="ttdef"><b>Definition:</b> <a href="_http_parser_8cpp_source.html#l00150">HttpParser.cpp:150</a></div></div>
<div class="ttc" id="class_http_request_html_a69559e9b796efa4ba6abaefffc77ddd0"><div class="ttname"><a href="class_http_request.html#a69559e9b796efa4ba6abaefffc77ddd0">HttpRequest::pathSplit</a></div><div class="ttdeci">std::vector&lt; std::string &gt; pathSplit()</div><div class="ttdoc">Return the constituent parts of the path. If we imagine a path as composed of parts separated by slas...</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8cpp_source.html#l00346">HttpRequest.cpp:346</a></div></div>
<div class="ttc" id="class_http_parser_html_a642904cb67f3c2aca2551c6807346bd9"><div class="ttname"><a href="class_http_parser.html#a642904cb67f3c2aca2551c6807346bd9">HttpParser::getVersion</a></div><div class="ttdeci">std::string getVersion()</div><div class="ttdef"><b>Definition:</b> <a href="_http_parser_8cpp_source.html#l00165">HttpParser.cpp:165</a></div></div>
<div class="ttc" id="class_http_parser_html_a5c117f22e6c3ba6bc3488de01d211fa7"><div class="ttname"><a href="class_http_parser.html#a5c117f22e6c3ba6bc3488de01d211fa7">HttpParser::getURL</a></div><div class="ttdeci">std::string getURL()</div><div class="ttdef"><b>Definition:</b> <a href="_http_parser_8cpp_source.html#l00160">HttpParser.cpp:160</a></div></div>
<div class="ttc" id="class_http_request_html_a793c1599d8fefbadf35dd3b7074bafee"><div class="ttname"><a href="class_http_request.html#a793c1599d8fefbadf35dd3b7074bafee">HttpRequest::HTTP_HEADER_CONNECTION</a></div><div class="ttdeci">static const char HTTP_HEADER_CONNECTION[]</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00025">HttpRequest.h:25</a></div></div>
<div class="ttc" id="class_http_request_html_ab930ef09eefc383fbb7ace48678533ed"><div class="ttname"><a href="class_http_request.html#ab930ef09eefc383fbb7ace48678533ed">HttpRequest::HTTP_HEADER_ORIGIN</a></div><div class="ttdeci">static const char HTTP_HEADER_ORIGIN[]</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00031">HttpRequest.h:31</a></div></div>
<div class="ttc" id="class_http_request_html_af00e99f6c391bb91d9ec6349c9fa3cc5"><div class="ttname"><a href="class_http_request.html#af00e99f6c391bb91d9ec6349c9fa3cc5">HttpRequest::HTTP_METHOD_PUT</a></div><div class="ttdeci">static const char HTTP_METHOD_PUT[]</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00046">HttpRequest.h:46</a></div></div>
<div class="ttc" id="unit1303_8c_html_ac8936188af0c1d2f8b9d0cd25fde43b2"><div class="ttname"><a href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a></div><div class="ttdeci">unsigned int i</div><div class="ttdef"><b>Definition:</b> <a href="unit1303_8c_source.html#l00078">unit1303.c:78</a></div></div>
<div class="ttc" id="_http_response_8h_html"><div class="ttname"><a href="_http_response_8h.html">HttpResponse.h</a></div></div>
<div class="ttc" id="class_http_request_html_a0a5ce3688a7340c0e04b026c51ee5154"><div class="ttname"><a href="class_http_request.html#a0a5ce3688a7340c0e04b026c51ee5154">HttpRequest::dump</a></div><div class="ttdeci">void dump()</div><div class="ttdoc">Dump the HttpRequest for debugging purposes. </div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8cpp_source.html#l00160">HttpRequest.cpp:160</a></div></div>
<div class="ttc" id="_http_request_8cpp_html_afa847074574f6dcfae4ac9ab675868e4"><div class="ttname"><a href="_http_request_8cpp.html#afa847074574f6dcfae4ac9ab675868e4">STATE_VALUE</a></div><div class="ttdeci">#define STATE_VALUE</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8cpp_source.html#l00045">HttpRequest.cpp:45</a></div></div>
<div class="ttc" id="class_http_request_html_aa8ffb5df637ec2c7d3d0c4346c5154e7"><div class="ttname"><a href="class_http_request.html#aa8ffb5df637ec2c7d3d0c4346c5154e7">HttpRequest::getVersion</a></div><div class="ttdeci">std::string getVersion()</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8cpp_source.html#l00271">HttpRequest.cpp:271</a></div></div>
<div class="ttc" id="class_http_request_html_a53f09999b5f93920c79eed1423a490cf"><div class="ttname"><a href="class_http_request.html#a53f09999b5f93920c79eed1423a490cf">HttpRequest::parseForm</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; parseForm()</div><div class="ttdoc">Parse the request message as a form. </div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8cpp_source.html#l00303">HttpRequest.cpp:303</a></div></div>
<div class="ttc" id="curl__sasl_8c_html_a7360b55975153b822efc5217b7734e6a"><div class="ttname"><a href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a></div><div class="ttdeci">size_t len</div><div class="ttdef"><b>Definition:</b> <a href="curl__sasl_8c_source.html#l00055">curl_sasl.c:55</a></div></div>
<div class="ttc" id="anyauth_8d_html_a076c285cdc160cc073b20f7cf28ef85f"><div class="ttname"><a href="anyauth_8d.html#a076c285cdc160cc073b20f7cf28ef85f">headers</a></div><div class="ttdeci">Long and use the most secure one the remote site claims to support.This is done by first doing a request and checking the response headers</div><div class="ttdef"><b>Definition:</b> <a href="anyauth_8d_source.html#l00006">anyauth.d:6</a></div></div>
<div class="ttc" id="class_http_request_html_a35642c9d929aaaeec7d77cdd58fe9468"><div class="ttname"><a href="class_http_request.html#a35642c9d929aaaeec7d77cdd58fe9468">HttpRequest::HTTP_HEADER_USER_AGENT</a></div><div class="ttdeci">static const char HTTP_HEADER_USER_AGENT[]</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00037">HttpRequest.h:37</a></div></div>
<div class="ttc" id="unit1398_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="unit1398_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="unit1398_8c_source.html#l00033">unit1398.c:33</a></div></div>
<div class="ttc" id="class_http_parser_html_ac41defb5ee108129a23e3b5466343627"><div class="ttname"><a href="class_http_parser.html#ac41defb5ee108129a23e3b5466343627">HttpParser::getHeader</a></div><div class="ttdeci">std::string getHeader(const std::string &amp;name)</div><div class="ttdoc">Retrieve the value of the named header. </div><div class="ttdef"><b>Definition:</b> <a href="_http_parser_8cpp_source.html#l00141">HttpParser.cpp:141</a></div></div>
<div class="ttc" id="_http_request_8cpp_html_a0d7815723706a488b5bb65f7e3acf584"><div class="ttname"><a href="_http_request_8cpp.html#a0d7815723706a488b5bb65f7e3acf584">STATE_NAME</a></div><div class="ttdeci">#define STATE_NAME</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8cpp_source.html#l00044">HttpRequest.cpp:44</a></div></div>
<div class="ttc" id="class_http_request_html_a9b1633e44bd2c021fc523671197e5be3"><div class="ttname"><a href="class_http_request.html#a9b1633e44bd2c021fc523671197e5be3">HttpRequest::HTTP_METHOD_CONNECT</a></div><div class="ttdeci">static const char HTTP_METHOD_CONNECT[]</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00039">HttpRequest.h:39</a></div></div>
<div class="ttc" id="class_http_parser_html_a69564f05f57b50c0362eca738a5a744c"><div class="ttname"><a href="class_http_parser.html#a69564f05f57b50c0362eca738a5a744c">HttpParser::getMethod</a></div><div class="ttdeci">std::string getMethod()</div><div class="ttdef"><b>Definition:</b> <a href="_http_parser_8cpp_source.html#l00155">HttpParser.cpp:155</a></div></div>
<div class="ttc" id="class_http_request_html_acb543a90701d1bb532feb050594d0982"><div class="ttname"><a href="class_http_request.html#acb543a90701d1bb532feb050594d0982">HttpRequest::HTTP_METHOD_PATCH</a></div><div class="ttdeci">static const char HTTP_METHOD_PATCH[]</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00044">HttpRequest.h:44</a></div></div>
<div class="ttc" id="class_http_request_html_aad565b257daa811a7802b20f154f2b09"><div class="ttname"><a href="class_http_request.html#aad565b257daa811a7802b20f154f2b09">HttpRequest::HTTP_METHOD_HEAD</a></div><div class="ttdeci">static const char HTTP_METHOD_HEAD[]</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00042">HttpRequest.h:42</a></div></div>
<div class="ttc" id="class_general_utils_html_addd9bb2f367a86841e48f5aa67f1d003"><div class="ttname"><a href="class_general_utils.html#addd9bb2f367a86841e48f5aa67f1d003">GeneralUtils::split</a></div><div class="ttdeci">static std::vector&lt; std::string &gt; split(std::string source, char delimiter)</div><div class="ttdoc">Split a string into parts based on a delimiter. </div><div class="ttdef"><b>Definition:</b> <a href="_general_utils_8cpp_source.html#l00349">GeneralUtils.cpp:349</a></div></div>
<div class="ttc" id="class_http_request_html_a30b325f6346e911cb4dc363ea56c8619"><div class="ttname"><a href="class_http_request.html#a30b325f6346e911cb4dc363ea56c8619">HttpRequest::HTTP_METHOD_OPTIONS</a></div><div class="ttdeci">static const char HTTP_METHOD_OPTIONS[]</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00043">HttpRequest.h:43</a></div></div>
<div class="ttc" id="data-binary_8d_html_a3ac969eb89029f16e1971dc874d41dab"><div class="ttname"><a href="data-binary_8d.html#a3ac969eb89029f16e1971dc874d41dab">stream</a></div><div class="ttdeci">Long the rest should be a filename.Data is posted in a similar manner as data except that newlines and carriage returns are preserved and conversions are never done.Like data the default content type sent to the server is application x www form urlencoded.If you want the data to be treated as arbitrary binary data by the server then set the content type to octet stream</div><div class="ttdef"><b>Definition:</b> <a href="data-binary_8d_source.html#l00008">data-binary.d:8</a></div></div>
<div class="ttc" id="remote-name_8d_html_aa335f8bb20424b03700f57b150bf0aa6"><div class="ttname"><a href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a></div><div class="ttdeci">Long the path is cut off.The file will be saved in the current working directory.If you want the file saved in a different make sure you change the current working directory before invoking curl with this option.The remote file name to use for saving is extracted from the given nothing and if it already exists it will be overwritten.If you want the server to be able to choose the file name refer to remote header name which can be used in addition to this option.If the server chooses a file name and that name already exists it will not be overwritten.There is no URL decoding done on the file name.If it has or other URL encoded parts of the name</div><div class="ttdef"><b>Definition:</b> <a href="remote-name_8d_source.html#l00006">remote-name.d:6</a></div></div>
<div class="ttc" id="class_http_request_html_a704e22a6312c4b88d3a13803893faccf"><div class="ttname"><a href="class_http_request.html#a704e22a6312c4b88d3a13803893faccf">HttpRequest::getSocket</a></div><div class="ttdeci">Socket getSocket()</div><div class="ttdoc">Get the underlying socket. </div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8cpp_source.html#l00266">HttpRequest.cpp:266</a></div></div>
<div class="ttc" id="class_http_request_html_a680342d3f100041346d7ed8aba9f7cfd"><div class="ttname"><a href="class_http_request.html#a680342d3f100041346d7ed8aba9f7cfd">HttpRequest::HTTP_METHOD_POST</a></div><div class="ttdeci">static const char HTTP_METHOD_POST[]</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00045">HttpRequest.h:45</a></div></div>
<div class="ttc" id="class_http_request_html_a6145511eaf108eee7bd1d11b97d89e11"><div class="ttname"><a href="class_http_request.html#a6145511eaf108eee7bd1d11b97d89e11">HttpRequest::HTTP_HEADER_SEC_WEBSOCKET_PROTOCOL</a></div><div class="ttdeci">static const char HTTP_HEADER_SEC_WEBSOCKET_PROTOCOL[]</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00033">HttpRequest.h:33</a></div></div>
<div class="ttc" id="class_http_request_html_ab09977e9201d7b79d0f77d416096d707"><div class="ttname"><a href="class_http_request.html#ab09977e9201d7b79d0f77d416096d707">HttpRequest::getQuery</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; getQuery()</div><div class="ttdoc">Get the query part of the request. The query is a set of name = value pairs. The return is a map keye...</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8cpp_source.html#l00210">HttpRequest.cpp:210</a></div></div>
<div class="ttc" id="class_socket_html"><div class="ttname"><a href="class_socket.html">Socket</a></div><div class="ttdoc">Encapsulate a socket. </div><div class="ttdef"><b>Definition:</b> <a href="_socket_8h_source.html#l00062">Socket.h:62</a></div></div>
<div class="ttc" id="class_http_request_html_ab71053bfdeac7cab93f438361f0a800d"><div class="ttname"><a href="class_http_request.html#ab71053bfdeac7cab93f438361f0a800d">HttpRequest::getMethod</a></div><div class="ttdeci">std::string getMethod()</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8cpp_source.html#l00194">HttpRequest.cpp:194</a></div></div>
<div class="ttc" id="class_http_request_html_ad4fd263b7fa36324da7e7cbe341be72b"><div class="ttname"><a href="class_http_request.html#ad4fd263b7fa36324da7e7cbe341be72b">HttpRequest::HTTP_HEADER_HOST</a></div><div class="ttdeci">static const char HTTP_HEADER_HOST[]</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00029">HttpRequest.h:29</a></div></div>
<div class="ttc" id="class_http_request_html_a866f33e85b736b32f0084d64a716529c"><div class="ttname"><a href="class_http_request.html#a866f33e85b736b32f0084d64a716529c">HttpRequest::HttpRequest</a></div><div class="ttdeci">HttpRequest(Socket s)</div><div class="ttdoc">Create an HTTP Request instance. </div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8cpp_source.html#l00095">HttpRequest.cpp:95</a></div></div>
<div class="ttc" id="class_http_request_html_adfc7ae561e6ba03d21890ee1855df72b"><div class="ttname"><a href="class_http_request.html#adfc7ae561e6ba03d21890ee1855df72b">HttpRequest::~HttpRequest</a></div><div class="ttdeci">virtual ~HttpRequest()</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8cpp_source.html#l00141">HttpRequest.cpp:141</a></div></div>
<div class="ttc" id="class_http_request_html_ac5d0ff0b3b64863bbc10a8afaab380f2"><div class="ttname"><a href="class_http_request.html#ac5d0ff0b3b64863bbc10a8afaab380f2">HttpRequest::HTTP_HEADER_CONTENT_LENGTH</a></div><div class="ttdeci">static const char HTTP_HEADER_CONTENT_LENGTH[]</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00026">HttpRequest.h:26</a></div></div>
<div class="ttc" id="class_http_request_html_a33588e0cf0864e1be7c519f7d491e01e"><div class="ttname"><a href="class_http_request.html#a33588e0cf0864e1be7c519f7d491e01e">HttpRequest::urlDecode</a></div><div class="ttdeci">std::string urlDecode(std::string str)</div><div class="ttdoc">Decode a URL/form. </div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8cpp_source.html#l00366">HttpRequest.cpp:366</a></div></div>
<div class="ttc" id="class_http_response_html_a6a83c668bb537a24f3e62255501fb25e"><div class="ttname"><a href="class_http_response.html#a6a83c668bb537a24f3e62255501fb25e">HttpResponse::addHeader</a></div><div class="ttdeci">void addHeader(std::string name, std::string value)</div><div class="ttdoc">Add a header to the response message. If the response has already been committed then ignore this req...</div><div class="ttdef"><b>Definition:</b> <a href="_http_response_8cpp_source.html#l00046">HttpResponse.cpp:46</a></div></div>
<div class="ttc" id="class_http_request_html_ada6a0b548a6a104d1e94b17f6c96d5fe"><div class="ttname"><a href="class_http_request.html#ada6a0b548a6a104d1e94b17f6c96d5fe">HttpRequest::isWebsocket</a></div><div class="ttdeci">bool isWebsocket()</div><div class="ttdoc">Determine if this request represents a WebSocket. </div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8cpp_source.html#l00294">HttpRequest.cpp:294</a></div></div>
<div class="ttc" id="class_http_request_html_a9a46d60c7608f54a1f407f44252b58e5"><div class="ttname"><a href="class_http_request.html#a9a46d60c7608f54a1f407f44252b58e5">HttpRequest::HTTP_HEADER_UPGRADE</a></div><div class="ttdeci">static const char HTTP_HEADER_UPGRADE[]</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00036">HttpRequest.h:36</a></div></div>
<div class="ttc" id="class_web_socket_html"><div class="ttname"><a href="class_web_socket.html">WebSocket</a></div><div class="ttdef"><b>Definition:</b> <a href="_web_socket_8h_source.html#l00060">WebSocket.h:60</a></div></div>
<div class="ttc" id="class_http_request_html_a916e41843c5caa4a8a8562224a4d664b"><div class="ttname"><a href="class_http_request.html#a916e41843c5caa4a8a8562224a4d664b">HttpRequest::HTTP_METHOD_DELETE</a></div><div class="ttdeci">static const char HTTP_METHOD_DELETE[]</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00040">HttpRequest.h:40</a></div></div>
<div class="ttc" id="class_http_response_html"><div class="ttname"><a href="class_http_response.html">HttpResponse</a></div><div class="ttdef"><b>Definition:</b> <a href="_http_response_8h_source.html#l00016">HttpResponse.h:16</a></div></div>
<div class="ttc" id="_http_request_8h_html"><div class="ttname"><a href="_http_request_8h.html">HttpRequest.h</a></div></div>
<div class="ttc" id="class_http_parser_html_ad1a4929041f71909610a230f9d9d769a"><div class="ttname"><a href="class_http_parser.html#ad1a4929041f71909610a230f9d9d769a">HttpParser::parse</a></div><div class="ttdeci">void parse(std::string message)</div></div>
<div class="ttc" id="unit1602_8c_html_a1f81d06f9ccd5ec47176a7fc466b6030"><div class="ttname"><a href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a></div><div class="ttdeci">UNITTEST_START int * value</div><div class="ttdef"><b>Definition:</b> <a href="unit1602_8c_source.html#l00051">unit1602.c:51</a></div></div>
<div class="ttc" id="class_http_request_html_a970869c3e73fb4cf6758793e5fa27471"><div class="ttname"><a href="class_http_request.html#a970869c3e73fb4cf6758793e5fa27471">HttpRequest::close</a></div><div class="ttdeci">void close()</div><div class="ttdoc">Close the HttpRequest. </div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8cpp_source.html#l00148">HttpRequest.cpp:148</a></div></div>
<div class="ttc" id="class_http_request_html_a2d3d6efe7f664f0118e43a89eec41c92"><div class="ttname"><a href="class_http_request.html#a2d3d6efe7f664f0118e43a89eec41c92">HttpRequest::HTTP_HEADER_SEC_WEBSOCKET_ACCEPT</a></div><div class="ttdeci">static const char HTTP_HEADER_SEC_WEBSOCKET_ACCEPT[]</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00032">HttpRequest.h:32</a></div></div>
<div class="ttc" id="class_http_response_html_a68bc032812a96326d9fe4fde668a372b"><div class="ttname"><a href="class_http_response.html#a68bc032812a96326d9fe4fde668a372b">HttpResponse::sendData</a></div><div class="ttdeci">void sendData(std::string data)</div><div class="ttdoc">Send data to the partner. Send some data to the partner. If we haven&amp;#39;t yet sent the HTTP header then ...</div><div class="ttdef"><b>Definition:</b> <a href="_http_response_8cpp_source.html#l00088">HttpResponse.cpp:88</a></div></div>
<div class="ttc" id="class_http_request_html_a1bf74925c49868018669d681cb4c0c94"><div class="ttname"><a href="class_http_request.html#a1bf74925c49868018669d681cb4c0c94">HttpRequest::HTTP_HEADER_ACCEPT</a></div><div class="ttdeci">static const char HTTP_HEADER_ACCEPT[]</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00023">HttpRequest.h:23</a></div></div>
<div class="ttc" id="class_http_parser_html_a96e449829ffcec1555ce2b83f35b1ce5"><div class="ttname"><a href="class_http_parser.html#a96e449829ffcec1555ce2b83f35b1ce5">HttpParser::getBody</a></div><div class="ttdeci">std::string getBody()</div><div class="ttdef"><b>Definition:</b> <a href="_http_parser_8cpp_source.html#l00131">HttpParser.cpp:131</a></div></div>
<div class="ttc" id="class_http_request_html_afbdb7737b89853ed346dd61c51e1836f"><div class="ttname"><a href="class_http_request.html#afbdb7737b89853ed346dd61c51e1836f">HttpRequest::getBody</a></div><div class="ttdeci">std::string getBody()</div><div class="ttdoc">Get the body of the HttpRequest. </div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8cpp_source.html#l00174">HttpRequest.cpp:174</a></div></div>
<div class="ttc" id="class_http_request_html_a8e157d6a9059373a5614573d3d49860b"><div class="ttname"><a href="class_http_request.html#a8e157d6a9059373a5614573d3d49860b">HttpRequest::getHeaders</a></div><div class="ttdeci">std::map&lt; std::string, std::string &gt; getHeaders()</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8cpp_source.html#l00189">HttpRequest.cpp:189</a></div></div>
<div class="ttc" id="class_general_utils_html_abe8373207df0ef16bc66338b4ec8d298"><div class="ttname"><a href="class_general_utils.html#abe8373207df0ef16bc66338b4ec8d298">GeneralUtils::base64Encode</a></div><div class="ttdeci">static bool base64Encode(const std::string &amp;in, std::string *out)</div><div class="ttdoc">Encode a string into base 64. </div><div class="ttdef"><b>Definition:</b> <a href="_general_utils_8cpp_source.html#l00059">GeneralUtils.cpp:59</a></div></div>
<div class="ttc" id="class_http_response_html_af13a61ae987f15599232fa30d2cfdeab"><div class="ttname"><a href="class_http_response.html#af13a61ae987f15599232fa30d2cfdeab">HttpResponse::setStatus</a></div><div class="ttdeci">void setStatus(int status, std::string message)</div><div class="ttdoc">Set the status code that is to be sent back to the client. When a client makes a request, the response contains a status. This call sets the status that will be sent back to the client. </div><div class="ttdef"><b>Definition:</b> <a href="_http_response_8cpp_source.html#l00179">HttpResponse.cpp:179</a></div></div>
<div class="ttc" id="class_http_request_html_a39c6dbaf8c892f62644868155a55fa16"><div class="ttname"><a href="class_http_request.html#a39c6dbaf8c892f62644868155a55fa16">HttpRequest::HTTP_HEADER_SEC_WEBSOCKET_VERSION</a></div><div class="ttdeci">static const char HTTP_HEADER_SEC_WEBSOCKET_VERSION[]</div><div class="ttdef"><b>Definition:</b> <a href="_http_request_8h_source.html#l00035">HttpRequest.h:35</a></div></div>
<div class="ttc" id="class_http_response_html_a78dc24a606063749c4f2e1b97c9a7567"><div class="ttname"><a href="class_http_response.html#a78dc24a606063749c4f2e1b97c9a7567">HttpResponse::HTTP_STATUS_SWITCHING_PROTOCOL</a></div><div class="ttdeci">static const int HTTP_STATUS_SWITCHING_PROTOCOL</div><div class="ttdef"><b>Definition:</b> <a href="_http_response_8h_source.html#l00019">HttpResponse.h:19</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_2b66d65f09a100230911d819a169d69c.html">esp32-snippets</a></li><li class="navelem"><a class="el" href="dir_e66062f3a4d2a5b6b6746a6b0f9c85ac.html">cpp_utils</a></li><li class="navelem"><a class="el" href="_http_request_8cpp.html">HttpRequest.cpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
