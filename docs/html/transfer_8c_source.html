<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Plante: components/curl/lib/transfer.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Plante
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('transfer_8c_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">transfer.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="transfer_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/***************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *                                  _   _ ____  _</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *  Project                     ___| | | |  _ \| |</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *                             / __| | | | |_) | |</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *                            | (__| |_| |  _ &lt;| |___</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *                             \___|\___/|_| \_\_____|</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * Copyright (C) 1998 - 2018, Daniel Stenberg, &lt;daniel@haxx.se&gt;, et al.</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * This software is licensed as described in the file COPYING, which</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * you should have received as part of this distribution. The terms</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * are also available at https://curl.haxx.se/docs/copyright.html.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * You may opt to use, copy, modify, merge, publish, distribute and/or sell</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * copies of the Software, and permit persons to whom the Software is</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * furnished to do so, under the terms of the COPYING file.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * This software is distributed on an &quot;AS IS&quot; basis, WITHOUT WARRANTY OF ANY</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * KIND, either express or implied.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> ***************************************************************************/</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="curl__setup_8h.html">curl_setup.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="strtoofft_8h.html">strtoofft.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#ifdef HAVE_NETINET_IN_H</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;netinet/in.h&gt;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#ifdef HAVE_NETDB_H</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;netdb.h&gt;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#ifdef HAVE_ARPA_INET_H</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;arpa/inet.h&gt;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#ifdef HAVE_NET_IF_H</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;net/if.h&gt;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#ifdef HAVE_SYS_IOCTL_H</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;sys/ioctl.h&gt;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#ifdef HAVE_SIGNAL_H</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;signal.h&gt;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#ifdef HAVE_SYS_PARAM_H</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &lt;sys/param.h&gt;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#ifdef HAVE_SYS_SELECT_H</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;sys/select.h&gt;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#ifndef HAVE_SOCKET</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#error &quot;We can&#39;t compile without socket() support!&quot;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="urldata_8h.html">urldata.h</a>&quot;</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="curl_8h.html">curl/curl.h</a>&gt;</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="netrc_8h.html">netrc.h</a>&quot;</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="content__encoding_8h.html">content_encoding.h</a>&quot;</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hostip_8h.html">hostip.h</a>&quot;</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="transfer_8h.html">transfer.h</a>&quot;</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sendf_8h.html">sendf.h</a>&quot;</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="speedcheck_8h.html">speedcheck.h</a>&quot;</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="progress_8h.html">progress.h</a>&quot;</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="http_8h.html">http.h</a>&quot;</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="url_8h.html">url.h</a>&quot;</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="getinfo_8h.html">getinfo.h</a>&quot;</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vtls_8h.html">vtls/vtls.h</a>&quot;</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="select_8h.html">select.h</a>&quot;</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="multiif_8h.html">multiif.h</a>&quot;</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="connect_8h.html">connect.h</a>&quot;</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="non-ascii_8h.html">non-ascii.h</a>&quot;</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="http2_8h.html">http2.h</a>&quot;</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mime_8h.html">mime.h</a>&quot;</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="strcase_8h.html">strcase.h</a>&quot;</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="urlapi-int_8h.html">urlapi-int.h</a>&quot;</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">/* The last 3 #include files should be in this order */</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="curl__printf_8h.html">curl_printf.h</a>&quot;</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="curl__memory_8h.html">curl_memory.h</a>&quot;</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="memdebug_8h.html">memdebug.h</a>&quot;</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#if !defined(CURL_DISABLE_HTTP) || !defined(CURL_DISABLE_SMTP) || \</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">    !defined(CURL_DISABLE_IMAP)</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment"> * checkheaders() checks the linked list of custom headers for a</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment"> * particular header (prefix). Provide the prefix without colon!</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"> * Returns a pointer to the first matching header or NULL if none matched.</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="transfer_8h.html#a0649a25288fefe787c7bedddadb8a31d">   93</a></span>&#160;<span class="keywordtype">char</span> *<a class="code" href="transfer_8c.html#a0649a25288fefe787c7bedddadb8a31d">Curl_checkheaders</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structconnectdata.html">connectdata</a> *conn,</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">char</span> *thisheader)</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;{</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keyword">struct </span><a class="code" href="structcurl__slist.html">curl_slist</a> *<a class="code" href="get_8d.html#a72405a3df7019c7ac95d2f3be7247548">head</a>;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordtype">size_t</span> thislen = strlen(thisheader);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a> = conn-&gt;<a class="code" href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">data</a>;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordflow">for</span>(<a class="code" href="get_8d.html#a72405a3df7019c7ac95d2f3be7247548">head</a> = <a class="code" href="structdata.html">data</a>-&gt;set.headers; <a class="code" href="get_8d.html#a72405a3df7019c7ac95d2f3be7247548">head</a>; <a class="code" href="get_8d.html#a72405a3df7019c7ac95d2f3be7247548">head</a> = <a class="code" href="get_8d.html#a72405a3df7019c7ac95d2f3be7247548">head</a>-&gt;next) {</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="strcase_8h.html#a48c605aaef9b3681c41d91096b6baad0">strncasecompare</a>(<a class="code" href="get_8d.html#a72405a3df7019c7ac95d2f3be7247548">head</a>-&gt;data, thisheader, thislen) &amp;&amp;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;       <a class="code" href="transfer_8h.html#add920a73e8f85870585b3391b7e4feed">Curl_headersep</a>(<a class="code" href="get_8d.html#a72405a3df7019c7ac95d2f3be7247548">head</a>-&gt;data[thislen]) )</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="get_8d.html#a72405a3df7019c7ac95d2f3be7247548">head</a>-&gt;data;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;}</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="transfer_8h.html#a15440032c495bf0f3f6c535ec5e811e3">  110</a></span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="transfer_8c.html#a15440032c495bf0f3f6c535ec5e811e3">Curl_get_upload_buffer</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>)</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;{</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="structdata.html">data</a>-&gt;state.ulbuf) {</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;state.ulbuf = <a class="code" href="curl__memory_8h.html#a2eb0b03d1a9de9615a291b1205969069">malloc</a>(<a class="code" href="structdata.html">data</a>-&gt;set.upload_buffer_size);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="structdata.html">data</a>-&gt;state.ulbuf)</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951aba5a22c9f705ed27933344be221fe937">CURLE_OUT_OF_MEMORY</a>;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  }</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;}</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment"> * This function will call the read callback to fill our buffer with data</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment"> * to upload.</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="transfer_8h.html#a2d575b634fe05cd90230cc12d6b73f76">  124</a></span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="transfer_8c.html#a2d575b634fe05cd90230cc12d6b73f76">Curl_fillreadbuffer</a>(<span class="keyword">struct</span> <a class="code" href="structconnectdata.html">connectdata</a> *conn, <span class="keywordtype">size_t</span> bytes,</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                             <span class="keywordtype">size_t</span> *nreadp)</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;{</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a> = conn-&gt;<a class="code" href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">data</a>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keywordtype">size_t</span> buffersize = bytes;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordtype">size_t</span> nread;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="preprocessor">#ifdef CURL_DOES_CONVERSIONS</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordtype">bool</span> sending_http_headers = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a58a76486bc087b55e1e7a3bf8e90254c">protocol</a>&amp;(<a class="code" href="urldata_8h.html#a9d346cfcc0046f6c6ed206bde086ab2d">PROTO_FAMILY_HTTP</a>|<a class="code" href="curl_8h.html#a57c429ed3dc3a2dc9ff5c6eba392b6b2">CURLPROTO_RTSP</a>)) {</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="struct_h_t_t_p.html">HTTP</a> *<a class="code" href="proto-redir_8d.html#a3663ac2460793e505561ad6c89686402">http</a> = <a class="code" href="structdata.html">data</a>-&gt;req.protop;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="proto-redir_8d.html#a3663ac2460793e505561ad6c89686402">http</a>-&gt;<a class="code" href="struct_h_t_t_p.html#af03324bf31aec4772357d7d826ca75d9">sending</a> == <a class="code" href="struct_h_t_t_p.html#a0249b638827cfaf90270d9c651a1035fa9d8155c9496f897f08cfcfbdd42a3cd0">HTTPSEND_REQUEST</a>)</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <span class="comment">/* We&#39;re sending the HTTP request headers, not the data.</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">         Remember that so we don&#39;t re-translate them into garbage. */</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      sending_http_headers = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;req.upload_chunky) {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="comment">/* if chunked Transfer-Encoding */</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    buffersize -= (8 + 2 + 2);   <span class="comment">/* 32bit hex + CRLF + CRLF */</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;req.upload_fromhere += (8 + 2); <span class="comment">/* 32bit hex + CRLF */</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <a class="code" href="multi_8c.html#af60eeb6175f9a25baeee40253c56330e">Curl_set_in_callback</a>(<a class="code" href="structdata.html">data</a>, <span class="keyword">true</span>);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  nread = <a class="code" href="structdata.html">data</a>-&gt;state.fread_func(<a class="code" href="structdata.html">data</a>-&gt;req.upload_fromhere, 1,</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                                 buffersize, <a class="code" href="structdata.html">data</a>-&gt;state.in);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <a class="code" href="multi_8c.html#af60eeb6175f9a25baeee40253c56330e">Curl_set_in_callback</a>(<a class="code" href="structdata.html">data</a>, <span class="keyword">false</span>);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keywordflow">if</span>(nread == <a class="code" href="curl_8h.html#a37f72557bd7b33a75cb3c3ab165e357e">CURL_READFUNC_ABORT</a>) {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;operation aborted by callback&quot;</span>);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    *nreadp = 0;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a309ade641c94c3e710ae887405dba78b">CURLE_ABORTED_BY_CALLBACK</a>;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  }</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keywordflow">if</span>(nread == <a class="code" href="curl_8h.html#a8a6431fcced5944dec01685f14de2540">CURL_READFUNC_PAUSE</a>) {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_single_request.html">SingleRequest</a> *k = &amp;<a class="code" href="structdata.html">data</a>-&gt;req;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a2fc887b2697c63980406a19108b82a24">flags</a> &amp; <a class="code" href="urldata_8h.html#a3bfbbdae2857443d0580fc5b5b4a0a5b">PROTOPT_NONETWORK</a>) {</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <span class="comment">/* protocols that work without network cannot be paused. This is</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">         actually only FILE:// just now, and it can&#39;t pause since the transfer</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">         isn&#39;t done using the &quot;normal&quot; procedure. */</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Read callback asked for PAUSE when not supported!&quot;</span>);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951adaff0cec927d10c0ec5059ee0104ef62">CURLE_READ_ERROR</a>;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">/* CURL_READFUNC_PAUSE pauses read callbacks that feed socket writes */</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a> |= <a class="code" href="urldata_8h.html#a4a561967b6a40f1b5cbec45beeff78a6">KEEP_SEND_PAUSE</a>; <span class="comment">/* mark socket send as paused */</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;req.upload_chunky) {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="comment">/* Back out the preallocation done above */</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <a class="code" href="structdata.html">data</a>-&gt;req.upload_fromhere -= (8 + 2);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    *nreadp = 0;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>; <span class="comment">/* nothing was read */</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  }</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(nread &gt; buffersize) {</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">/* the read function returned a too large value */</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    *nreadp = 0;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;read function returned funny value&quot;</span>);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951adaff0cec927d10c0ec5059ee0104ef62">CURLE_READ_ERROR</a>;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="structdata.html">data</a>-&gt;req.forbidchunk &amp;&amp; <a class="code" href="structdata.html">data</a>-&gt;req.upload_chunky) {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">/* if chunked Transfer-Encoding</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">     *    build chunk:</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">     *        &lt;HEX SIZE&gt; CRLF</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">     *        &lt;DATA&gt; CRLF</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="comment">/* On non-ASCII platforms the &lt;DATA&gt; may or may not be</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">       translated based on set.prefer_ascii while the protocol</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">       portion must always be translated to the network encoding.</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">       To further complicate matters, line end conversion might be</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">       done later on, so we need to prevent CRLFs from becoming</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">       CRCRLFs if that&#39;s the case.  To do this we use bare LFs</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">       here, knowing they&#39;ll become CRLFs later on.</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordtype">char</span> hexbuffer[11];</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *endofline_native;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *endofline_network;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordtype">int</span> hexlen;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">if</span>(</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;#ifdef <a class="code" href="urldata_8h.html#a9039214065dbe00b428b3ddcb2192f79">CURL_DO_LINEEND_CONV</a></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;       (<a class="code" href="structdata.html">data</a>-&gt;set.prefer_ascii) ||</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;#endif</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;       (<a class="code" href="structdata.html">data</a>-&gt;set.crlf)) {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <span class="comment">/* \n will become \r\n later on */</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      endofline_native  = <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      endofline_network = <span class="stringliteral">&quot;\x0a&quot;</span>;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      endofline_native  = <span class="stringliteral">&quot;\r\n&quot;</span>;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      endofline_network = <span class="stringliteral">&quot;\x0d\x0a&quot;</span>;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    hexlen = <a class="code" href="unit1652_8c.html#a348cae967f89c4bad8fb37e45a469d1a">msnprintf</a>(hexbuffer, <span class="keyword">sizeof</span>(hexbuffer),</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                       <span class="stringliteral">&quot;%x%s&quot;</span>, nread, endofline_native);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="comment">/* move buffer pointer */</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;req.upload_fromhere -= hexlen;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    nread += hexlen;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">/* copy the prefix to the buffer, leaving out the NUL */</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <a class="code" href="unit1304_8c.html#a82a69fcfe92d9db6dd585ccc532a2ab7">memcpy</a>(<a class="code" href="structdata.html">data</a>-&gt;req.upload_fromhere, hexbuffer, hexlen);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment">/* always append ASCII CRLF to the data */</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="unit1304_8c.html#a82a69fcfe92d9db6dd585ccc532a2ab7">memcpy</a>(<a class="code" href="structdata.html">data</a>-&gt;req.upload_fromhere + nread,</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;           endofline_network,</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;           strlen(endofline_network));</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="preprocessor">#ifdef CURL_DOES_CONVERSIONS</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    {</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="keywordtype">size_t</span> length;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;set.prefer_ascii)</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="comment">/* translate the protocol and data */</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        length = nread;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="comment">/* just translate the protocol portion */</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        length = strlen(hexbuffer);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="non-ascii_8h.html#ab7de472e1367a01da556c8f5acad93bb">Curl_convert_to_network</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="structdata.html">data</a>-&gt;req.upload_fromhere,</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                                       length);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <span class="comment">/* Curl_convert_to_network calls failf if unsuccessful */</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    }</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CURL_DOES_CONVERSIONS */</span><span class="preprocessor"></span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">if</span>((nread - hexlen) == 0) {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="comment">/* mark this as done once this chunk is transferred */</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <a class="code" href="structdata.html">data</a>-&gt;req.upload_done = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Signaling end of chunked upload via terminating chunk.\n&quot;</span>);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    nread += strlen(endofline_native); <span class="comment">/* for the added end of line */</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  }</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="preprocessor">#ifdef CURL_DOES_CONVERSIONS</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>((<a class="code" href="structdata.html">data</a>-&gt;set.prefer_ascii) &amp;&amp; (!sending_http_headers)) {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="non-ascii_8h.html#ab7de472e1367a01da556c8f5acad93bb">Curl_convert_to_network</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="structdata.html">data</a>-&gt;req.upload_fromhere, nread);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="comment">/* Curl_convert_to_network calls failf if unsuccessful */</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  }</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CURL_DOES_CONVERSIONS */</span><span class="preprocessor"></span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  *nreadp = nread;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;}</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment"> * Curl_readrewind() rewinds the read stream. This is typically used for HTTP</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment"> * POST/PUT with multi-pass authentication when a sending was denied and a</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment"> * resend is necessary.</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="transfer_8h.html#a1ccf9c16ae7d51395fc19e946da56c09">  283</a></span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="transfer_8c.html#a1ccf9c16ae7d51395fc19e946da56c09">Curl_readrewind</a>(<span class="keyword">struct</span> <a class="code" href="structconnectdata.html">connectdata</a> *conn)</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;{</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a> = conn-&gt;<a class="code" href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">data</a>;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *mimepart = &amp;<a class="code" href="structdata.html">data</a>-&gt;set.mimepost;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  conn-&gt;<a class="code" href="structconnectdata.html#a9312f162d29fe7f59bc2b5dbeda85d9d">bits</a>.<a class="code" href="struct_connect_bits.html#a92cc38ee21acd0ebfeb725f35ee9241b">rewindaftersend</a> = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>; <span class="comment">/* we rewind now */</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="comment">/* explicitly switch off sending data on this connection now since we are</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">     about to restart a new transfer and thus we want to avoid inadvertently</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">     sending more data on the existing connection until the next transfer</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">     starts */</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;req.keepon &amp;= ~<a class="code" href="urldata_8h.html#a93237a6ee2f27182bb966487a03bce44">KEEP_SEND</a>;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="comment">/* We have sent away data. If not using CURLOPT_POSTFIELDS or</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">     CURLOPT_HTTPPOST, call app to rewind</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">  */</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a58a76486bc087b55e1e7a3bf8e90254c">protocol</a> &amp; <a class="code" href="urldata_8h.html#a9d346cfcc0046f6c6ed206bde086ab2d">PROTO_FAMILY_HTTP</a>) {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_h_t_t_p.html">HTTP</a> *<a class="code" href="proto-redir_8d.html#a3663ac2460793e505561ad6c89686402">http</a> = <a class="code" href="structdata.html">data</a>-&gt;req.protop;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="proto-redir_8d.html#a3663ac2460793e505561ad6c89686402">http</a>-&gt;<a class="code" href="struct_h_t_t_p.html#ad61a3f1f01ef29d9fa9a8b495f8abbfc">sendit</a>)</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      mimepart = <a class="code" href="proto-redir_8d.html#a3663ac2460793e505561ad6c89686402">http</a>-&gt;<a class="code" href="struct_h_t_t_p.html#ad61a3f1f01ef29d9fa9a8b495f8abbfc">sendit</a>;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;set.postfields)</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    ; <span class="comment">/* do nothing */</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;set.httpreq == <a class="code" href="urldata_8h.html#ac67e77846b7b67d5808da8f1dfa2eab8a34d2478b945364d0d1bc6cb5f2845f71">HTTPREQ_POST_MIME</a> ||</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;          <a class="code" href="structdata.html">data</a>-&gt;set.httpreq == <a class="code" href="urldata_8h.html#ac67e77846b7b67d5808da8f1dfa2eab8ae11eeb30f15276332563390b730fd389">HTTPREQ_POST_FORM</a>) {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="mime_8c.html#a16da9e4dbf38be0096a6c63bd408c39c">Curl_mime_rewind</a>(mimepart)) {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Cannot rewind mime/post data&quot;</span>);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a1a9263421629452bb969e2aa901c11ed">CURLE_SEND_FAIL_REWIND</a>;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    }</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  }</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;set.seek_func) {</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="keywordtype">int</span> err;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <a class="code" href="multi_8c.html#af60eeb6175f9a25baeee40253c56330e">Curl_set_in_callback</a>(<a class="code" href="structdata.html">data</a>, <span class="keyword">true</span>);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      err = (<a class="code" href="structdata.html">data</a>-&gt;set.seek_func)(<a class="code" href="structdata.html">data</a>-&gt;set.seek_client, 0, SEEK_SET);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <a class="code" href="multi_8c.html#af60eeb6175f9a25baeee40253c56330e">Curl_set_in_callback</a>(<a class="code" href="structdata.html">data</a>, <span class="keyword">false</span>);</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="keywordflow">if</span>(err) {</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;seek callback returned error %d&quot;</span>, (<span class="keywordtype">int</span>)err);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a1a9263421629452bb969e2aa901c11ed">CURLE_SEND_FAIL_REWIND</a>;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      }</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    }</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;set.ioctl_func) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <a class="code" href="curl_8h.html#aed08c6203949f0b52a655e094f241920">curlioerr</a> err;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <a class="code" href="multi_8c.html#af60eeb6175f9a25baeee40253c56330e">Curl_set_in_callback</a>(<a class="code" href="structdata.html">data</a>, <span class="keyword">true</span>);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      err = (<a class="code" href="structdata.html">data</a>-&gt;set.ioctl_func)(<a class="code" href="structdata.html">data</a>, <a class="code" href="curl_8h.html#a3781556120d1f44d126ef1cf50019cf4a86fa94f83ce5f3a990ff26ea4a8b18ab">CURLIOCMD_RESTARTREAD</a>,</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                                   <a class="code" href="structdata.html">data</a>-&gt;set.ioctl_client);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <a class="code" href="multi_8c.html#af60eeb6175f9a25baeee40253c56330e">Curl_set_in_callback</a>(<a class="code" href="structdata.html">data</a>, <span class="keyword">false</span>);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;the ioctl callback returned %d\n&quot;</span>, (<span class="keywordtype">int</span>)err);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <span class="keywordflow">if</span>(err) {</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="comment">/* FIXME: convert to a human readable error message */</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;ioctl callback returned error %d&quot;</span>, (<span class="keywordtype">int</span>)err);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a1a9263421629452bb969e2aa901c11ed">CURLE_SEND_FAIL_REWIND</a>;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      }</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    }</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="comment">/* If no CURLOPT_READFUNCTION is used, we know that we operate on a</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">         given FILE * stream and we can actually attempt to rewind that</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">         ourselves with fseek() */</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;state.fread_func == (<a class="code" href="curl_8h.html#a7516630ec17f247697dd3272be7ada74">curl_read_callback</a>)<a class="code" href="stdcheaders_8h.html#aae22dd41ebe1e64904429c5a31e7e642">fread</a>) {</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <span class="keywordflow">if</span>(-1 != fseek(<a class="code" href="structdata.html">data</a>-&gt;state.in, 0, SEEK_SET))</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;          <span class="comment">/* successful rewind */</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      }</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <span class="comment">/* no callback set or failure above, makes us fail at once */</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;necessary data rewind wasn&#39;t possible&quot;</span>);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a1a9263421629452bb969e2aa901c11ed">CURLE_SEND_FAIL_REWIND</a>;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;}</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> data_pending(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structconnectdata.html">connectdata</a> *conn)</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;{</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="comment">/* in the case of libssh2, we can never be really sure that we have emptied</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">     its internal buffers so we MUST always try until we get EAGAIN back */</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keywordflow">return</span> conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a58a76486bc087b55e1e7a3bf8e90254c">protocol</a>&amp;(<a class="code" href="curl_8h.html#a9815b02ec8c789f7afcda6e4e1144d23">CURLPROTO_SCP</a>|<a class="code" href="curl_8h.html#a7f016ee652c822683d1f48fdbe21dbb6">CURLPROTO_SFTP</a>) ||</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;#<span class="keywordflow">if</span> defined(USE_NGHTTP2)</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <a class="code" href="vtls_8h.html#ac50ee79a0869be9ea58bda0388abde58">Curl_ssl_data_pending</a>(conn, <a class="code" href="urldata_8h.html#a56b23efdd8d04b0179b52224a251bcb7">FIRSTSOCKET</a>) ||</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="comment">/* For HTTP/2, we may read up everything including response body</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">       with header fields in Curl_http_readwrite_headers. If no</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">       content-length is provided, curl waits for the connection</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment">       close, which we emulate it using conn-&gt;proto.httpc.closed =</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">       TRUE. The thing is if we read everything, then http2_recv won&#39;t</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">       be called and we cannot signal the HTTP/2 stream has closed. As</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">       a workaround, we return nonzero here to call http2_recv. */</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    ((conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a58a76486bc087b55e1e7a3bf8e90254c">protocol</a>&amp;<a class="code" href="urldata_8h.html#a9d346cfcc0046f6c6ed206bde086ab2d">PROTO_FAMILY_HTTP</a>) &amp;&amp; conn-&gt;<a class="code" href="structconnectdata.html#a8c6daf7fa40e95c75eac915b7496a32a">httpversion</a> == 20);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <a class="code" href="vtls_8h.html#ac50ee79a0869be9ea58bda0388abde58">Curl_ssl_data_pending</a>(conn, <a class="code" href="urldata_8h.html#a56b23efdd8d04b0179b52224a251bcb7">FIRSTSOCKET</a>);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;}</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> read_rewind(<span class="keyword">struct</span> <a class="code" href="structconnectdata.html">connectdata</a> *conn,</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                        <span class="keywordtype">size_t</span> thismuch)</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;{</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <a class="code" href="curl__setup__once_8h.html#a23d7b88872d6ead46c978b567908d587">DEBUGASSERT</a>(conn-&gt;<a class="code" href="structconnectdata.html#ab3afce952fb3c7582192a976b3ff83ca">read_pos</a> &gt;= thismuch);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  conn-&gt;<a class="code" href="structconnectdata.html#ab3afce952fb3c7582192a976b3ff83ca">read_pos</a> -= thismuch;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  conn-&gt;<a class="code" href="structconnectdata.html#a9312f162d29fe7f59bc2b5dbeda85d9d">bits</a>.<a class="code" href="struct_connect_bits.html#a895dbf934d6f1d6c48751228942caaaf">stream_was_rewound</a> = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="preprocessor">#ifdef DEBUGBUILD</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordtype">char</span> <a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>[512 + 1];</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="getpart_8c.html#a10c315f2ac084dfafd0508bd53868f21">show</a>;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <a class="code" href="getpart_8c.html#a10c315f2ac084dfafd0508bd53868f21">show</a> = <a class="code" href="curl__setup_8h.html#a5dd6efb91a5151f2bb4e4fff1b386582">CURLMIN</a>(conn-&gt;<a class="code" href="structconnectdata.html#ad185ac65e3bff56d3be4f5d5bf0f02cb">buf_len</a> - conn-&gt;<a class="code" href="structconnectdata.html#ab3afce952fb3c7582192a976b3ff83ca">read_pos</a>, <span class="keyword">sizeof</span>(<a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>)-1);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#a90fee5026509bdba864f256eab51a77b">master_buffer</a>) {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <a class="code" href="unit1304_8c.html#a82a69fcfe92d9db6dd585ccc532a2ab7">memcpy</a>(<a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>, conn-&gt;<a class="code" href="structconnectdata.html#a90fee5026509bdba864f256eab51a77b">master_buffer</a> + conn-&gt;<a class="code" href="structconnectdata.html#ab3afce952fb3c7582192a976b3ff83ca">read_pos</a>, <a class="code" href="getpart_8c.html#a10c315f2ac084dfafd0508bd53868f21">show</a>);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>[<a class="code" href="getpart_8c.html#a10c315f2ac084dfafd0508bd53868f21">show</a>] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    }</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    }</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <a class="code" href="curl__setup__once_8h.html#a805079d1643f348afa725659b45b6f87">DEBUGF</a>(<a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(conn-&gt;<a class="code" href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">data</a>,</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                 <span class="stringliteral">&quot;Buffer after stream rewind (read_pos = %zu): [%s]\n&quot;</span>,</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                 conn-&gt;<a class="code" href="structconnectdata.html#ab3afce952fb3c7582192a976b3ff83ca">read_pos</a>, <a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>));</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  }</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;}</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment"> * Check to see if CURLOPT_TIMECONDITION was met by comparing the time of the</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment"> * remote document with the time provided by CURLOPT_TIMEVAL</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00412"></a><span class="lineno"><a class="line" href="transfer_8h.html#a110f6f53341d61200abc2b0b7cdd53f2">  412</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="transfer_8c.html#a110f6f53341d61200abc2b0b7cdd53f2">Curl_meets_timecondition</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>, time_t timeofdoc)</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;{</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordflow">if</span>((timeofdoc == 0) || (<a class="code" href="structdata.html">data</a>-&gt;set.timevalue == 0))</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keywordflow">switch</span>(<a class="code" href="structdata.html">data</a>-&gt;set.timecondition) {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="curl_8h.html#a845d262749bd413d724b58e26f713f25ad13e365aab4f32a0ee193510118f533d">CURL_TIMECOND_IFMODSINCE</a>:</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="keywordflow">default</span>:</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">if</span>(timeofdoc &lt;= data-&gt;<span class="keyword">set</span>.timevalue) {</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>,</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            <span class="stringliteral">&quot;The requested document is not new enough\n&quot;</span>);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <a class="code" href="structdata.html">data</a>-&gt;info.timecond = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    }</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="curl_8h.html#a845d262749bd413d724b58e26f713f25ab52a0e6ddf579f8f81b40d8a684155a6">CURL_TIMECOND_IFUNMODSINCE</a>:</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">if</span>(timeofdoc &gt;= <a class="code" href="structdata.html">data</a>-&gt;set.timevalue) {</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>,</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            <span class="stringliteral">&quot;The requested document is not old enough\n&quot;</span>);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      <a class="code" href="structdata.html">data</a>-&gt;info.timecond = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    }</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  }</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;}</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment"> * Go ahead and do a read if we have a readable socket or if</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment"> * the stream was rewound (in which case we have data in a</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment"> * buffer)</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment"> * return &#39;*comeback&#39; TRUE if we didn&#39;t properly drain the socket so this</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment"> * function should get called again without select() or similar in between!</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="keyword">static</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> readwrite_data(<span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>,</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                               <span class="keyword">struct</span> <a class="code" href="structconnectdata.html">connectdata</a> *conn,</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                               <span class="keyword">struct</span> <a class="code" href="struct_single_request.html">SingleRequest</a> *k,</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                               <span class="keywordtype">int</span> *didwhat, <span class="keywordtype">bool</span> *done,</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                               <span class="keywordtype">bool</span> *comeback)</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;{</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <a class="code" href="config-win32_8h.html#a8af93bbb66534e14d651bbb0638ee796">ssize_t</a> nread; <span class="comment">/* number of bytes read */</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="keywordtype">size_t</span> excess = 0; <span class="comment">/* excess bytes read */</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="keywordtype">bool</span> readmore = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>; <span class="comment">/* used by RTP to signal for more data */</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="keywordtype">int</span> maxloops = 100;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  *done = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  *comeback = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="comment">/* This is where we loop until we have read everything there is to</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">     read or we get a CURLE_AGAIN */</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordtype">bool</span> is_empty_data = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordtype">size_t</span> buffersize = <a class="code" href="structdata.html">data</a>-&gt;set.buffer_size;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordtype">size_t</span> bytestoread = buffersize;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keywordflow">if</span>(</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;#<span class="keywordflow">if</span> defined(USE_NGHTTP2)</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;       <span class="comment">/* For HTTP/2, read data without caring about the content</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">          length. This is safe because body in HTTP/2 is always</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">          segmented thanks to its framing layer. Meanwhile, we have to</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">          call Curl_read to ensure that http2_handle_stream_close is</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">          called when we read all incoming bytes for a particular</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">          stream. */</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;       !((conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a58a76486bc087b55e1e7a3bf8e90254c">protocol</a> &amp; <a class="code" href="urldata_8h.html#a9d346cfcc0046f6c6ed206bde086ab2d">PROTO_FAMILY_HTTP</a>) &amp;&amp;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;         conn-&gt;<a class="code" href="structconnectdata.html#a8c6daf7fa40e95c75eac915b7496a32a">httpversion</a> == 20) &amp;&amp;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;#endif</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;       k-&gt;<a class="code" href="struct_single_request.html#a7b830d1607062193706245f7f4512ac9">size</a> != -1 &amp;&amp; !k-&gt;<a class="code" href="struct_single_request.html#a97c471abe695b617c7695de635b49440">header</a>) {</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      <span class="comment">/* make sure we don&#39;t read &quot;too much&quot; if we can help it since we</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">         might be pipelining and then someone else might want to read what</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">         follows! */</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> totalleft = k-&gt;<a class="code" href="struct_single_request.html#a7b830d1607062193706245f7f4512ac9">size</a> - k-&gt;<a class="code" href="struct_single_request.html#a7bd7f9afc35050a31e496a08c5baaeb8">bytecount</a>;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <span class="keywordflow">if</span>(totalleft &lt; (<a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a>)bytestoread)</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        bytestoread = (size_t)totalleft;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    }</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordflow">if</span>(bytestoread) {</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <span class="comment">/* receive data from the network! */</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="sendf_8c.html#a828e2a7d5a11a7682d78140d6a5cba63">Curl_read</a>(conn, conn-&gt;<a class="code" href="structconnectdata.html#adbc9021ab6a2581b41035b181d27a1ea">sockfd</a>, k-&gt;<a class="code" href="struct_single_request.html#a9342cccc08a1a935d26085f854a4a9ef">buf</a>, bytestoread, &amp;nread);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      <span class="comment">/* read would&#39;ve blocked */</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a8527394a7d1a590228373b95f55a61a7">CURLE_AGAIN</a> == <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keywordflow">break</span>; <span class="comment">/* get out of loop */</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>&gt;0)</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    }</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <span class="comment">/* read nothing but since we wanted nothing we consider this an OK</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">         situation to proceed from */</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <a class="code" href="curl__setup__once_8h.html#a805079d1643f348afa725659b45b6f87">DEBUGF</a>(<a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;readwrite_data: we&#39;re done!\n&quot;</span>));</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      nread = 0;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    }</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">if</span>((k-&gt;<a class="code" href="struct_single_request.html#a7bd7f9afc35050a31e496a08c5baaeb8">bytecount</a> == 0) &amp;&amp; (k-&gt;<a class="code" href="struct_single_request.html#a272e8b20707c1c2307574968495320d4">writebytecount</a> == 0)) {</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <a class="code" href="progress_8c.html#a1344967836d86ae13b5739ed0a6e6916">Curl_pgrsTime</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="progress_8h.html#abc090d144fb55d31dff488d24c46fb2aaca28f218d1fd3c4e65cd7b4d2dfe32ed">TIMER_STARTTRANSFER</a>);</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <span class="keywordflow">if</span>(k-&gt;<a class="code" href="struct_single_request.html#afcc113884223e5e1329d1f0a29427cb8">exp100</a> &gt; <a class="code" href="urldata_8h.html#a0a15328bccb6e0baf3d1c6150eb39449ac77a92a2088eebb5391259dcf6eb9952">EXP100_SEND_DATA</a>)</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="comment">/* set time stamp to compare with when waiting for the 100 */</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        k-&gt;<a class="code" href="struct_single_request.html#ab837cef7bb2e4d7e9fb5c734a6a8013d">start100</a> = <a class="code" href="timeval_8c.html#ae736e803680e1b7fa2b2868317b4b91f">Curl_now</a>();</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    }</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    *didwhat |= <a class="code" href="urldata_8h.html#ab141b3290dad267f76cd77a91c641146">KEEP_RECV</a>;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="comment">/* indicates data of zero size, i.e. empty file */</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    is_empty_data = ((nread == 0) &amp;&amp; (k-&gt;<a class="code" href="struct_single_request.html#ab39e7eb68cb5e6fc7f7ee241c0cb0ae2">bodywrites</a> == 0)) ? <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> : <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="comment">/* NUL terminate, allowing string ops to be used */</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">if</span>(0 &lt; nread || is_empty_data) {</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      k-&gt;<a class="code" href="struct_single_request.html#a9342cccc08a1a935d26085f854a4a9ef">buf</a>[nread] = 0;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    }</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(0 &gt;= nread) {</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      <span class="comment">/* if we receive 0 or less here, the server closed the connection</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment">         and we bail out from this! */</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <a class="code" href="curl__setup__once_8h.html#a805079d1643f348afa725659b45b6f87">DEBUGF</a>(<a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;nread &lt;= 0, server closed connection, bailing\n&quot;</span>));</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a> &amp;= ~<a class="code" href="urldata_8h.html#ab141b3290dad267f76cd77a91c641146">KEEP_RECV</a>;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    }</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="comment">/* Default buffer to use when we write the buffer, it may be changed</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">       in the flow below before the actual storing is done. */</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    k-&gt;<a class="code" href="struct_single_request.html#abad0ca3c76032134d15077908bdbc7a1">str</a> = k-&gt;<a class="code" href="struct_single_request.html#a9342cccc08a1a935d26085f854a4a9ef">buf</a>;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a0d8fb7f012fa14459bf003c1e0d4a127">readwrite</a>) {</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a0d8fb7f012fa14459bf003c1e0d4a127">readwrite</a>(<a class="code" href="structdata.html">data</a>, conn, &amp;nread, &amp;readmore);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <span class="keywordflow">if</span>(readmore)</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    }</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="preprocessor">#ifndef CURL_DISABLE_HTTP</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="comment">/* Since this is a two-state thing, we check if we are parsing</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">       headers at the moment or not. */</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keywordflow">if</span>(k-&gt;<a class="code" href="struct_single_request.html#a97c471abe695b617c7695de635b49440">header</a>) {</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      <span class="comment">/* we are in parse-the-header-mode */</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      <span class="keywordtype">bool</span> stop_reading = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="http_8c.html#a06db2840299ee6694923087317b8133a">Curl_http_readwrite_headers</a>(<a class="code" href="structdata.html">data</a>, conn, &amp;nread, &amp;stop_reading);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a0d8fb7f012fa14459bf003c1e0d4a127">readwrite</a> &amp;&amp;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;         (k-&gt;<a class="code" href="struct_single_request.html#a8516340c7835dfd47166418da27c40a0">maxdownload</a> &lt;= 0 &amp;&amp; nread &gt; 0)) {</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a0d8fb7f012fa14459bf003c1e0d4a127">readwrite</a>(<a class="code" href="structdata.html">data</a>, conn, &amp;nread, &amp;readmore);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <span class="keywordflow">if</span>(readmore)</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      }</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <span class="keywordflow">if</span>(stop_reading) {</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <span class="comment">/* We&#39;ve stopped dealing with input, get out of the do-while loop */</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="keywordflow">if</span>(nread &gt; 0) {</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;          <span class="keywordflow">if</span>(<a class="code" href="multi_8c.html#aa21e52a95b57b1ce52a02736bb0ca68c">Curl_pipeline_wanted</a>(conn-&gt;<a class="code" href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">data</a>-&gt;<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>, <a class="code" href="multi_8h.html#a19006903930bc7552c4e74ed6b32990f">CURLPIPE_HTTP1</a>)) {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>,</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                  <span class="stringliteral">&quot;Rewinding stream by : %zd&quot;</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                  <span class="stringliteral">&quot; bytes on url %s (zero-length body)\n&quot;</span>,</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                  nread, <a class="code" href="structdata.html">data</a>-&gt;state.up.path);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            read_rewind(conn, (<span class="keywordtype">size_t</span>)nread);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;          }</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;          <span class="keywordflow">else</span> {</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>,</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                  <span class="stringliteral">&quot;Excess found in a non pipelined read:&quot;</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                  <span class="stringliteral">&quot; excess = %zd&quot;</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                  <span class="stringliteral">&quot; url = %s (zero-length body)\n&quot;</span>,</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                  nread, <a class="code" href="structdata.html">data</a>-&gt;state.up.path);</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;          }</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        }</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    }</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CURL_DISABLE_HTTP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="comment">/* This is not an &#39;else if&#39; since it may be a rest from the header</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">       parsing, where the beginning of the buffer is headers and the end</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment">       is non-headers. */</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keywordflow">if</span>(k-&gt;<a class="code" href="struct_single_request.html#abad0ca3c76032134d15077908bdbc7a1">str</a> &amp;&amp; !k-&gt;<a class="code" href="struct_single_request.html#a97c471abe695b617c7695de635b49440">header</a> &amp;&amp; (nread &gt; 0 || is_empty_data)) {</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;set.opt_no_body) {</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="comment">/* data arrives although we want none, bail out */</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <a class="code" href="connect_8h.html#a39c490691a02b6643d80882c12b189ed">streamclose</a>(conn, <span class="stringliteral">&quot;ignoring body&quot;</span>);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        *done = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a9c2850d0cbdb8743ad056150ca51e191">CURLE_WEIRD_SERVER_REPLY</a>;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      }</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="preprocessor">#ifndef CURL_DISABLE_HTTP</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      <span class="keywordflow">if</span>(0 == k-&gt;<a class="code" href="struct_single_request.html#ab39e7eb68cb5e6fc7f7ee241c0cb0ae2">bodywrites</a> &amp;&amp; !is_empty_data) {</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <span class="comment">/* These checks are only made the first time we are about to</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment">           write a piece of the body */</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a58a76486bc087b55e1e7a3bf8e90254c">protocol</a>&amp;(<a class="code" href="urldata_8h.html#a9d346cfcc0046f6c6ed206bde086ab2d">PROTO_FAMILY_HTTP</a>|<a class="code" href="curl_8h.html#a57c429ed3dc3a2dc9ff5c6eba392b6b2">CURLPROTO_RTSP</a>)) {</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;          <span class="comment">/* HTTP-only checks */</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;          <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;req.newurl) {</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#a9312f162d29fe7f59bc2b5dbeda85d9d">bits</a>.<a class="code" href="struct_connect_bits.html#aaf15319fba965e2d87ac0ac839ae8351">close</a>) {</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;              <span class="comment">/* Abort after the headers if &quot;follow Location&quot; is set</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">                 and we&#39;re set to close anyway. */</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;              k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a> &amp;= ~<a class="code" href="urldata_8h.html#ab141b3290dad267f76cd77a91c641146">KEEP_RECV</a>;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;              *done = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;              <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            }</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            <span class="comment">/* We have a new url to load, but since we want to be able</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">               to re-use this connection properly, we read the full</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">               response in &quot;ignore more&quot; */</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            k-&gt;<a class="code" href="struct_single_request.html#a6ded6fbb86cb5457049ff225c7ee8827">ignorebody</a> = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Ignoring the response-body\n&quot;</span>);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;          }</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;          <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;state.resume_from &amp;&amp; !k-&gt;<a class="code" href="struct_single_request.html#ac259c8cd70d58252f455cf673e4d9df9">content_range</a> &amp;&amp;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;             (<a class="code" href="structdata.html">data</a>-&gt;set.httpreq == <a class="code" href="urldata_8h.html#ac67e77846b7b67d5808da8f1dfa2eab8ae4322de705c516b61756f9874183ef05">HTTPREQ_GET</a>) &amp;&amp;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;             !k-&gt;<a class="code" href="struct_single_request.html#a6ded6fbb86cb5457049ff225c7ee8827">ignorebody</a>) {</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            <span class="keywordflow">if</span>(k-&gt;<a class="code" href="struct_single_request.html#a7b830d1607062193706245f7f4512ac9">size</a> == <a class="code" href="structdata.html">data</a>-&gt;state.resume_from) {</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;              <span class="comment">/* The resume point is at the end of file, consider this fine</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment">                 even if it doesn&#39;t allow resume from here. */</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;              <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;The entire document is already downloaded&quot;</span>);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;              <a class="code" href="connect_8h.html#a0f98be540dd5a5f56c9ec98dc2489661">connclose</a>(conn, <span class="stringliteral">&quot;already downloaded&quot;</span>);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;              <span class="comment">/* Abort download */</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;              k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a> &amp;= ~<a class="code" href="urldata_8h.html#ab141b3290dad267f76cd77a91c641146">KEEP_RECV</a>;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;              *done = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;              <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            }</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            <span class="comment">/* we wanted to resume a download, although the server doesn&#39;t</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">             * seem to support this and we did this with a GET (if it</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">             * wasn&#39;t a GET we did a POST or PUT resume) */</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;HTTP server doesn&#39;t seem to support &quot;</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                  <span class="stringliteral">&quot;byte ranges. Cannot resume.&quot;</span>);</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951ab14492d4934da6ddd87b78ede328becd">CURLE_RANGE_ERROR</a>;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;          }</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;          <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;set.timecondition &amp;&amp; !<a class="code" href="structdata.html">data</a>-&gt;state.range) {</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            <span class="comment">/* A time condition has been set AND no ranges have been</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment">               requested. This seems to be what chapter 13.3.4 of</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment">               RFC 2616 defines to be the correct action for a</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment">               HTTP/1.1 client */</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            <span class="keywordflow">if</span>(!<a class="code" href="transfer_8c.html#a110f6f53341d61200abc2b0b7cdd53f2">Curl_meets_timecondition</a>(<a class="code" href="structdata.html">data</a>, k-&gt;<a class="code" href="struct_single_request.html#a9da5df2779ae21bdf94e14359214dbcf">timeofdoc</a>)) {</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;              *done = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;              <span class="comment">/* We&#39;re simulating a http 304 from server so we return</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">                 what should have been returned from the server */</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;              <a class="code" href="structdata.html">data</a>-&gt;info.httpcode = 304;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;              <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Simulate a HTTP 304 response!\n&quot;</span>);</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;              <span class="comment">/* we abort the transfer before it is completed == we ruin the</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">                 re-use ability. Close the connection */</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;              <a class="code" href="connect_8h.html#a0f98be540dd5a5f56c9ec98dc2489661">connclose</a>(conn, <span class="stringliteral">&quot;Simulated 304 handling&quot;</span>);</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;              <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            }</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;          } <span class="comment">/* we have a time condition */</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        } <span class="comment">/* this is HTTP or RTSP */</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      } <span class="comment">/* this is the first time we write a body part */</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CURL_DISABLE_HTTP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      k-&gt;<a class="code" href="struct_single_request.html#ab39e7eb68cb5e6fc7f7ee241c0cb0ae2">bodywrites</a>++;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;      <span class="comment">/* pass data to the debug function before it gets &quot;dechunked&quot; */</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;set.verbose) {</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="keywordflow">if</span>(k-&gt;<a class="code" href="struct_single_request.html#acd41ba7d3b44e699dd1a46ec4754e151">badheader</a>) {</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;          <a class="code" href="sendf_8c.html#a8b0f0a06869b888abb80a069182d0d5a">Curl_debug</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="curl_8h.html#a9704d2633927f77efaa3e3c6f1c23a14a415579b635fe7e73cfe18e013f9a7dd7">CURLINFO_DATA_IN</a>, <a class="code" href="structdata.html">data</a>-&gt;state.headerbuff,</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                     (<span class="keywordtype">size_t</span>)k-&gt;<a class="code" href="struct_single_request.html#a83841cbaec57fb35d0ca5e9d1908d3b0">hbuflen</a>);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;          <span class="keywordflow">if</span>(k-&gt;<a class="code" href="struct_single_request.html#acd41ba7d3b44e699dd1a46ec4754e151">badheader</a> == HEADER_PARTHEADER)</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;            <a class="code" href="sendf_8c.html#a8b0f0a06869b888abb80a069182d0d5a">Curl_debug</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="curl_8h.html#a9704d2633927f77efaa3e3c6f1c23a14a415579b635fe7e73cfe18e013f9a7dd7">CURLINFO_DATA_IN</a>,</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                       k-&gt;<a class="code" href="struct_single_request.html#abad0ca3c76032134d15077908bdbc7a1">str</a>, (<span class="keywordtype">size_t</span>)nread);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        }</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;          <a class="code" href="sendf_8c.html#a8b0f0a06869b888abb80a069182d0d5a">Curl_debug</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="curl_8h.html#a9704d2633927f77efaa3e3c6f1c23a14a415579b635fe7e73cfe18e013f9a7dd7">CURLINFO_DATA_IN</a>,</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                     k-&gt;<a class="code" href="struct_single_request.html#abad0ca3c76032134d15077908bdbc7a1">str</a>, (<span class="keywordtype">size_t</span>)nread);</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      }</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="preprocessor">#ifndef CURL_DISABLE_HTTP</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      <span class="keywordflow">if</span>(k-&gt;<a class="code" href="struct_single_request.html#a3018293fe5f120a8a4c77d16207ab5da">chunk</a>) {</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">         * Here comes a chunked transfer flying and we need to decode this</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">         * properly.  While the name says read, this function both reads</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">         * and writes away the data. The returned &#39;nread&#39; holds the number</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment">         * of actual data it wrote to the client.</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        <a class="code" href="http__chunks_8h.html#a5825bd9da56a09bfd4380b161b4e33ec">CHUNKcode</a> res =</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;          <a class="code" href="http_8h.html#ab3f84083b58fb24a50404be32074445c">Curl_httpchunk_read</a>(conn, k-&gt;<a class="code" href="struct_single_request.html#abad0ca3c76032134d15077908bdbc7a1">str</a>, nread, &amp;nread);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="http__chunks_8h.html#a5825bd9da56a09bfd4380b161b4e33ecae1530ccd260bd8f764651103e4b4cc93">CHUNKE_OK</a> &lt; res) {</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;          <span class="keywordflow">if</span>(<a class="code" href="http__chunks_8h.html#a5825bd9da56a09bfd4380b161b4e33ecab882035f19c6e654f06d8fb771e659bb">CHUNKE_WRITE_ERROR</a> == res) {</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;            <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Failed writing data&quot;</span>);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951acaaed2faf20c957350e90a68282ae314">CURLE_WRITE_ERROR</a>;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;          }</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;          <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;%s in chunked-encoding&quot;</span>, <a class="code" href="http__chunks_8c.html#a402dded2164e3980ea7916c05a8ad1d2">Curl_chunked_strerror</a>(res));</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951ae6d701fdcc9728db65dadb0ec7d1eec1">CURLE_RECV_ERROR</a>;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        }</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="http__chunks_8h.html#a5825bd9da56a09bfd4380b161b4e33eca189de71d73fd3b6c8fbc4b11fc16ad01">CHUNKE_STOP</a> == res) {</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;          <span class="keywordtype">size_t</span> dataleft;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;          <span class="comment">/* we&#39;re done reading chunks! */</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;          k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a> &amp;= ~<a class="code" href="urldata_8h.html#ab141b3290dad267f76cd77a91c641146">KEEP_RECV</a>; <span class="comment">/* read no more */</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;          <span class="comment">/* There are now possibly N number of bytes at the end of the</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment">             str buffer that weren&#39;t written to the client.</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment">             We DO care about this data if we are pipelining.</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="comment">             Push it back to be read on the next pass. */</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;          dataleft = conn-&gt;<a class="code" href="structconnectdata.html#a25a7557b96b8081454080f8b2e7181a1">chunk</a>.<a class="code" href="struct_curl__chunker.html#a96cc6de3b19afc87fe2712aa5e429d3d">dataleft</a>;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;          <span class="keywordflow">if</span>(dataleft != 0) {</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(conn-&gt;<a class="code" href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">data</a>, <span class="stringliteral">&quot;Leftovers after chunking: %zu bytes\n&quot;</span>,</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                  dataleft);</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="multi_8c.html#aa21e52a95b57b1ce52a02736bb0ca68c">Curl_pipeline_wanted</a>(conn-&gt;<a class="code" href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">data</a>-&gt;<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>, <a class="code" href="multi_8h.html#a19006903930bc7552c4e74ed6b32990f">CURLPIPE_HTTP1</a>)) {</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;              <span class="comment">/* only attempt the rewind if we truly are pipelining */</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;              <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(conn-&gt;<a class="code" href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">data</a>, <span class="stringliteral">&quot;Rewinding %zu bytes\n&quot;</span>,dataleft);</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;              read_rewind(conn, dataleft);</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            }</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;          }</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        }</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <span class="comment">/* If it returned OK, we just keep going */</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      }</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* CURL_DISABLE_HTTP */</span><span class="preprocessor"></span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      <span class="comment">/* Account for body content stored in the header buffer */</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      <span class="keywordflow">if</span>((k-&gt;<a class="code" href="struct_single_request.html#acd41ba7d3b44e699dd1a46ec4754e151">badheader</a> == HEADER_PARTHEADER) &amp;&amp; !k-&gt;<a class="code" href="struct_single_request.html#a6ded6fbb86cb5457049ff225c7ee8827">ignorebody</a>) {</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <a class="code" href="curl__setup__once_8h.html#a805079d1643f348afa725659b45b6f87">DEBUGF</a>(<a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Increasing bytecount by %zu from hbuflen\n&quot;</span>,</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                     k-&gt;<a class="code" href="struct_single_request.html#a83841cbaec57fb35d0ca5e9d1908d3b0">hbuflen</a>));</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        k-&gt;<a class="code" href="struct_single_request.html#a7bd7f9afc35050a31e496a08c5baaeb8">bytecount</a> += k-&gt;<a class="code" href="struct_single_request.html#a83841cbaec57fb35d0ca5e9d1908d3b0">hbuflen</a>;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      }</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      <span class="keywordflow">if</span>((-1 != k-&gt;<a class="code" href="struct_single_request.html#a8516340c7835dfd47166418da27c40a0">maxdownload</a>) &amp;&amp;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;         (k-&gt;<a class="code" href="struct_single_request.html#a7bd7f9afc35050a31e496a08c5baaeb8">bytecount</a> + nread &gt;= k-&gt;<a class="code" href="struct_single_request.html#a8516340c7835dfd47166418da27c40a0">maxdownload</a>)) {</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        excess = (size_t)(k-&gt;<a class="code" href="struct_single_request.html#a7bd7f9afc35050a31e496a08c5baaeb8">bytecount</a> + nread - k-&gt;<a class="code" href="struct_single_request.html#a8516340c7835dfd47166418da27c40a0">maxdownload</a>);</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        <span class="keywordflow">if</span>(excess &gt; 0 &amp;&amp; !k-&gt;<a class="code" href="struct_single_request.html#a6ded6fbb86cb5457049ff225c7ee8827">ignorebody</a>) {</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;          <span class="keywordflow">if</span>(<a class="code" href="multi_8c.html#aa21e52a95b57b1ce52a02736bb0ca68c">Curl_pipeline_wanted</a>(conn-&gt;<a class="code" href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">data</a>-&gt;<a class="code" href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">multi</a>, <a class="code" href="multi_8h.html#a19006903930bc7552c4e74ed6b32990f">CURLPIPE_HTTP1</a>)) {</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>,</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                  <span class="stringliteral">&quot;Rewinding stream by : %zu&quot;</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                  <span class="stringliteral">&quot; bytes on url %s (size = %&quot;</span> <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a3dca40ce1e998420175eabe37246e05b">CURL_FORMAT_CURL_OFF_T</a></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                  <span class="stringliteral">&quot;, maxdownload = %&quot;</span> <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a3dca40ce1e998420175eabe37246e05b">CURL_FORMAT_CURL_OFF_T</a></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                  <span class="stringliteral">&quot;, bytecount = %&quot;</span> <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a3dca40ce1e998420175eabe37246e05b">CURL_FORMAT_CURL_OFF_T</a> <span class="stringliteral">&quot;, nread = %zd)\n&quot;</span>,</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                  excess, <a class="code" href="structdata.html">data</a>-&gt;state.up.path,</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                  k-&gt;<a class="code" href="struct_single_request.html#a7b830d1607062193706245f7f4512ac9">size</a>, k-&gt;<a class="code" href="struct_single_request.html#a8516340c7835dfd47166418da27c40a0">maxdownload</a>, k-&gt;<a class="code" href="struct_single_request.html#a7bd7f9afc35050a31e496a08c5baaeb8">bytecount</a>, nread);</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;            read_rewind(conn, excess);</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;          }</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;          <span class="keywordflow">else</span> {</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;            <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>,</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                  <span class="stringliteral">&quot;Excess found in a non pipelined read:&quot;</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                  <span class="stringliteral">&quot; excess = %zu&quot;</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                  <span class="stringliteral">&quot;, size = %&quot;</span> <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a3dca40ce1e998420175eabe37246e05b">CURL_FORMAT_CURL_OFF_T</a></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                  <span class="stringliteral">&quot;, maxdownload = %&quot;</span> <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a3dca40ce1e998420175eabe37246e05b">CURL_FORMAT_CURL_OFF_T</a></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                  <span class="stringliteral">&quot;, bytecount = %&quot;</span> <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a3dca40ce1e998420175eabe37246e05b">CURL_FORMAT_CURL_OFF_T</a> <span class="stringliteral">&quot;\n&quot;</span>,</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                  excess, k-&gt;<a class="code" href="struct_single_request.html#a7b830d1607062193706245f7f4512ac9">size</a>, k-&gt;<a class="code" href="struct_single_request.html#a8516340c7835dfd47166418da27c40a0">maxdownload</a>, k-&gt;<a class="code" href="struct_single_request.html#a7bd7f9afc35050a31e496a08c5baaeb8">bytecount</a>);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;          }</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        }</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        nread = (<a class="code" href="config-win32_8h.html#a8af93bbb66534e14d651bbb0638ee796">ssize_t</a>) (k-&gt;<a class="code" href="struct_single_request.html#a8516340c7835dfd47166418da27c40a0">maxdownload</a> - k-&gt;<a class="code" href="struct_single_request.html#a7bd7f9afc35050a31e496a08c5baaeb8">bytecount</a>);</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <span class="keywordflow">if</span>(nread &lt; 0) <span class="comment">/* this should be unusual */</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;          nread = 0;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a> &amp;= ~<a class="code" href="urldata_8h.html#ab141b3290dad267f76cd77a91c641146">KEEP_RECV</a>; <span class="comment">/* we&#39;re done reading */</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      }</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      k-&gt;<a class="code" href="struct_single_request.html#a7bd7f9afc35050a31e496a08c5baaeb8">bytecount</a> += nread;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      <a class="code" href="progress_8c.html#afd65889574fb7bde6ffcec48b0d8debb">Curl_pgrsSetDownloadCounter</a>(<a class="code" href="structdata.html">data</a>, k-&gt;<a class="code" href="struct_single_request.html#a7bd7f9afc35050a31e496a08c5baaeb8">bytecount</a>);</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      <span class="keywordflow">if</span>(!k-&gt;<a class="code" href="struct_single_request.html#a3018293fe5f120a8a4c77d16207ab5da">chunk</a> &amp;&amp; (nread || k-&gt;<a class="code" href="struct_single_request.html#acd41ba7d3b44e699dd1a46ec4754e151">badheader</a> || is_empty_data)) {</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        <span class="comment">/* If this is chunky transfer, it was already written */</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        <span class="keywordflow">if</span>(k-&gt;<a class="code" href="struct_single_request.html#acd41ba7d3b44e699dd1a46ec4754e151">badheader</a> &amp;&amp; !k-&gt;<a class="code" href="struct_single_request.html#a6ded6fbb86cb5457049ff225c7ee8827">ignorebody</a>) {</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;          <span class="comment">/* we parsed a piece of data wrongly assuming it was a header</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment">             and now we output it as body instead */</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;          <span class="comment">/* Don&#39;t let excess data pollute body writes */</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;          <span class="keywordflow">if</span>(k-&gt;<a class="code" href="struct_single_request.html#a8516340c7835dfd47166418da27c40a0">maxdownload</a> == -1 || (<a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a>)k-&gt;<a class="code" href="struct_single_request.html#a83841cbaec57fb35d0ca5e9d1908d3b0">hbuflen</a> &lt;= k-&gt;<a class="code" href="struct_single_request.html#a8516340c7835dfd47166418da27c40a0">maxdownload</a>)</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="sendf_8c.html#ad59954133649b7538b387f940b86024f">Curl_client_write</a>(conn, <a class="code" href="sendf_8h.html#aae18389dfefc98a5057629f6a46fd78f">CLIENTWRITE_BODY</a>,</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                                       <a class="code" href="structdata.html">data</a>-&gt;state.headerbuff,</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                                       k-&gt;<a class="code" href="struct_single_request.html#a83841cbaec57fb35d0ca5e9d1908d3b0">hbuflen</a>);</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;            <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="sendf_8c.html#ad59954133649b7538b387f940b86024f">Curl_client_write</a>(conn, <a class="code" href="sendf_8h.html#aae18389dfefc98a5057629f6a46fd78f">CLIENTWRITE_BODY</a>,</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                                       <a class="code" href="structdata.html">data</a>-&gt;state.headerbuff,</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                                       (<span class="keywordtype">size_t</span>)k-&gt;<a class="code" href="struct_single_request.html#a8516340c7835dfd47166418da27c40a0">maxdownload</a>);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;          <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        }</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        <span class="keywordflow">if</span>(k-&gt;<a class="code" href="struct_single_request.html#acd41ba7d3b44e699dd1a46ec4754e151">badheader</a> &lt; HEADER_ALLBAD) {</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;          <span class="comment">/* This switch handles various content encodings. If there&#39;s an</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">             error here, be sure to check over the almost identical code</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment">             in http_chunks.c.</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment">             Make sure that ALL_CONTENT_ENCODINGS contains all the</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment">             encodings handled here. */</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;          <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">data</a>-&gt;<a class="code" href="struct_curl__easy.html#abcc5aa61af150adc1388b1a3492c2599">set</a>.<a class="code" href="struct_user_defined.html#af0beb9d3806fe92e90475ee9f13bbee9">http_ce_skip</a> || !k-&gt;<a class="code" href="struct_single_request.html#a7170a3761d03bcd51596bd54abc2a23c">writer_stack</a>) {</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            <span class="keywordflow">if</span>(!k-&gt;<a class="code" href="struct_single_request.html#a6ded6fbb86cb5457049ff225c7ee8827">ignorebody</a>) {</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="preprocessor">#ifndef CURL_DISABLE_POP3</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;              <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a58a76486bc087b55e1e7a3bf8e90254c">protocol</a> &amp; <a class="code" href="urldata_8h.html#a34f8f0932e9fd37ba15b42607b219964">PROTO_FAMILY_POP3</a>)</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="pop3_8c.html#a36744463f05bbebba6da2a4eba301287">Curl_pop3_write</a>(conn, k-&gt;<a class="code" href="struct_single_request.html#abad0ca3c76032134d15077908bdbc7a1">str</a>, nread);</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;              <span class="keywordflow">else</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CURL_DISABLE_POP3 */</span><span class="preprocessor"></span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="sendf_8c.html#ad59954133649b7538b387f940b86024f">Curl_client_write</a>(conn, <a class="code" href="sendf_8h.html#aae18389dfefc98a5057629f6a46fd78f">CLIENTWRITE_BODY</a>, k-&gt;<a class="code" href="struct_single_request.html#abad0ca3c76032134d15077908bdbc7a1">str</a>,</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                                           nread);</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;            }</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;          }</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!k-&gt;<a class="code" href="struct_single_request.html#a6ded6fbb86cb5457049ff225c7ee8827">ignorebody</a>)</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;            <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="content__encoding_8c.html#aa026433194b6ea0fde7a6e8682148f32">Curl_unencode_write</a>(conn, k-&gt;<a class="code" href="struct_single_request.html#a7170a3761d03bcd51596bd54abc2a23c">writer_stack</a>, k-&gt;<a class="code" href="struct_single_request.html#abad0ca3c76032134d15077908bdbc7a1">str</a>, nread);</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        }</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        k-&gt;<a class="code" href="struct_single_request.html#acd41ba7d3b44e699dd1a46ec4754e151">badheader</a> = HEADER_NORMAL; <span class="comment">/* taken care of now */</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;      }</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    } <span class="comment">/* if(!header and data to read) */</span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a0d8fb7f012fa14459bf003c1e0d4a127">readwrite</a> &amp;&amp; excess &amp;&amp; !conn-&gt;<a class="code" href="structconnectdata.html#a9312f162d29fe7f59bc2b5dbeda85d9d">bits</a>.<a class="code" href="struct_connect_bits.html#a895dbf934d6f1d6c48751228942caaaf">stream_was_rewound</a>) {</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      <span class="comment">/* Parse the excess data */</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      k-&gt;<a class="code" href="struct_single_request.html#abad0ca3c76032134d15077908bdbc7a1">str</a> += nread;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      <span class="keywordflow">if</span>(&amp;k-&gt;<a class="code" href="struct_single_request.html#abad0ca3c76032134d15077908bdbc7a1">str</a>[excess] &gt; &amp;k-&gt;<a class="code" href="struct_single_request.html#a9342cccc08a1a935d26085f854a4a9ef">buf</a>[<a class="code" href="structdata.html">data</a>-&gt;set.buffer_size]) {</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        <span class="comment">/* the excess amount was too excessive(!), make sure</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="comment">           it doesn&#39;t read out of buffer */</span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        excess = &amp;k-&gt;<a class="code" href="struct_single_request.html#a9342cccc08a1a935d26085f854a4a9ef">buf</a>[<a class="code" href="structdata.html">data</a>-&gt;set.buffer_size] - k-&gt;<a class="code" href="struct_single_request.html#abad0ca3c76032134d15077908bdbc7a1">str</a>;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      }</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      nread = (<a class="code" href="config-win32_8h.html#a8af93bbb66534e14d651bbb0638ee796">ssize_t</a>)excess;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a0d8fb7f012fa14459bf003c1e0d4a127">readwrite</a>(<a class="code" href="structdata.html">data</a>, conn, &amp;nread, &amp;readmore);</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      <span class="keywordflow">if</span>(readmore)</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a> |= <a class="code" href="urldata_8h.html#ab141b3290dad267f76cd77a91c641146">KEEP_RECV</a>; <span class="comment">/* we&#39;re not done reading */</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    }</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="keywordflow">if</span>(is_empty_data) {</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      <span class="comment">/* if we received nothing, the server closed the connection and we</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="comment">         are done */</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a> &amp;= ~<a class="code" href="urldata_8h.html#ab141b3290dad267f76cd77a91c641146">KEEP_RECV</a>;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    }</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <span class="keywordflow">if</span>(k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a> &amp; <a class="code" href="urldata_8h.html#a5f72b40a5e27226c8993aaba303f0204">KEEP_RECV_PAUSE</a>) {</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      <span class="comment">/* this is a paused transfer */</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    }</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  } <span class="keywordflow">while</span>(data_pending(conn) &amp;&amp; maxloops--);</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <span class="keywordflow">if</span>(maxloops &lt;= 0) {</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="comment">/* we mark it as read-again-please */</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    conn-&gt;<a class="code" href="structconnectdata.html#a78797dc69666513b9115491097cdcc40">cselect_bits</a> = <a class="code" href="multi_8h.html#ac9841bc853b2a1874c9b5528b2ad3e5b">CURL_CSELECT_IN</a>;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    *comeback = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  }</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="keywordflow">if</span>(((k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a> &amp; (<a class="code" href="urldata_8h.html#ab141b3290dad267f76cd77a91c641146">KEEP_RECV</a>|<a class="code" href="urldata_8h.html#a93237a6ee2f27182bb966487a03bce44">KEEP_SEND</a>)) == <a class="code" href="urldata_8h.html#a93237a6ee2f27182bb966487a03bce44">KEEP_SEND</a>) &amp;&amp;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;     conn-&gt;<a class="code" href="structconnectdata.html#a9312f162d29fe7f59bc2b5dbeda85d9d">bits</a>.<a class="code" href="struct_connect_bits.html#aaf15319fba965e2d87ac0ac839ae8351">close</a>) {</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="comment">/* When we&#39;ve read the entire thing and the close bit is set, the server</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment">       may now close the connection. If there&#39;s now any kind of sending going</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment">       on from our side, we need to stop that immediately. */</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;we are done reading and this is set to close, stop send\n&quot;</span>);</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a> &amp;= ~<a class="code" href="urldata_8h.html#a93237a6ee2f27182bb966487a03bce44">KEEP_SEND</a>; <span class="comment">/* no writing anymore either */</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  }</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;}</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="keyword">static</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> done_sending(<span class="keyword">struct</span> <a class="code" href="structconnectdata.html">connectdata</a> *conn,</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                             <span class="keyword">struct</span> <a class="code" href="struct_single_request.html">SingleRequest</a> *k)</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;{</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a> &amp;= ~<a class="code" href="urldata_8h.html#a93237a6ee2f27182bb966487a03bce44">KEEP_SEND</a>; <span class="comment">/* we&#39;re done writing */</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <a class="code" href="http2_8h.html#acc13c28304b7e874ac61ea2816c5a2ae">Curl_http2_done_sending</a>(conn);</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#a9312f162d29fe7f59bc2b5dbeda85d9d">bits</a>.<a class="code" href="struct_connect_bits.html#a92cc38ee21acd0ebfeb725f35ee9241b">rewindaftersend</a>) {</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="transfer_8c.html#a1ccf9c16ae7d51395fc19e946da56c09">Curl_readrewind</a>(conn);</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  }</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;}</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="preprocessor">#if defined(WIN32) &amp;&amp; !defined(USE_LWIPSOCK)</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="preprocessor">#ifndef SIO_IDEAL_SEND_BACKLOG_QUERY</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="preprocessor">#define SIO_IDEAL_SEND_BACKLOG_QUERY 0x4004747B</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="transfer_8c.html#a1718bf5edce26e06c21b7ad18e4b6956">win_update_buffer_size</a>(<a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> sockfd)</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;{</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  ULONG ideal;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  DWORD ideallen;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = WSAIoctl(sockfd, SIO_IDEAL_SEND_BACKLOG_QUERY, 0, 0,</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                    &amp;ideal, <span class="keyword">sizeof</span>(ideal), &amp;ideallen, 0, 0);</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> == 0) {</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    setsockopt(sockfd, SOL_SOCKET, SO_SNDBUF,</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;               (<span class="keyword">const</span> <span class="keywordtype">char</span> *)&amp;ideal, <span class="keyword">sizeof</span>(ideal));</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  }</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;}</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00905"></a><span class="lineno"><a class="line" href="transfer_8c.html#a1718bf5edce26e06c21b7ad18e4b6956">  905</a></span>&#160;<span class="preprocessor">#define win_update_buffer_size(x)</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="comment"> * Send data to upload to the server, when the socket is writable.</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="keyword">static</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> readwrite_upload(<span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>,</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                                 <span class="keyword">struct</span> <a class="code" href="structconnectdata.html">connectdata</a> *conn,</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                                 <span class="keywordtype">int</span> *didwhat)</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;{</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <a class="code" href="config-win32_8h.html#a8af93bbb66534e14d651bbb0638ee796">ssize_t</a> <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>, si;</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  <a class="code" href="config-win32_8h.html#a8af93bbb66534e14d651bbb0638ee796">ssize_t</a> bytes_written;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <a class="code" href="config-win32_8h.html#a8af93bbb66534e14d651bbb0638ee796">ssize_t</a> nread; <span class="comment">/* number of bytes read */</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  <span class="keywordtype">bool</span> sending_http_headers = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_single_request.html">SingleRequest</a> *k = &amp;<a class="code" href="structdata.html">data</a>-&gt;req;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="keywordflow">if</span>((k-&gt;<a class="code" href="struct_single_request.html#a7bd7f9afc35050a31e496a08c5baaeb8">bytecount</a> == 0) &amp;&amp; (k-&gt;<a class="code" href="struct_single_request.html#a272e8b20707c1c2307574968495320d4">writebytecount</a> == 0))</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <a class="code" href="progress_8c.html#a1344967836d86ae13b5739ed0a6e6916">Curl_pgrsTime</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="progress_8h.html#abc090d144fb55d31dff488d24c46fb2aaca28f218d1fd3c4e65cd7b4d2dfe32ed">TIMER_STARTTRANSFER</a>);</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  *didwhat |= <a class="code" href="urldata_8h.html#a93237a6ee2f27182bb966487a03bce44">KEEP_SEND</a>;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="keywordflow">do</span> {</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="comment">/* only read more data if there&#39;s no upload data already</span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="comment">       present in the upload buffer */</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="keywordflow">if</span>(0 == k-&gt;<a class="code" href="struct_single_request.html#a10791150206c872b38d9ffa7b81d2a5c">upload_present</a>) {</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="transfer_8c.html#a15440032c495bf0f3f6c535ec5e811e3">Curl_get_upload_buffer</a>(<a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      <span class="comment">/* init the &quot;upload from here&quot; pointer */</span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      k-&gt;<a class="code" href="struct_single_request.html#a29a93742706b21aad3b169dffd1f611a">upload_fromhere</a> = <a class="code" href="structdata.html">data</a>-&gt;state.ulbuf;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;      <span class="keywordflow">if</span>(!k-&gt;<a class="code" href="struct_single_request.html#a8e8fb4ea5e024d91a2c1ee812694254a">upload_done</a>) {</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <span class="comment">/* HTTP pollution, this should be written nicer to become more</span></div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="comment">           protocol agnostic. */</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        <span class="keywordtype">size_t</span> fillcount;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        <span class="keyword">struct </span><a class="code" href="struct_h_t_t_p.html">HTTP</a> *<a class="code" href="proto-redir_8d.html#a3663ac2460793e505561ad6c89686402">http</a> = k-&gt;<a class="code" href="struct_single_request.html#a5803af0f75195ad74badb6ced9b24b16">protop</a>;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        <span class="keywordflow">if</span>((k-&gt;<a class="code" href="struct_single_request.html#afcc113884223e5e1329d1f0a29427cb8">exp100</a> == <a class="code" href="urldata_8h.html#a0a15328bccb6e0baf3d1c6150eb39449a94cd923039f125122b711f42a066077a">EXP100_SENDING_REQUEST</a>) &amp;&amp;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;           (<a class="code" href="proto-redir_8d.html#a3663ac2460793e505561ad6c89686402">http</a>-&gt;<a class="code" href="struct_h_t_t_p.html#af03324bf31aec4772357d7d826ca75d9">sending</a> == <a class="code" href="struct_h_t_t_p.html#a0249b638827cfaf90270d9c651a1035fa2d7e73a6f2680c507a7cc05dc974e1e4">HTTPSEND_BODY</a>)) {</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;          <span class="comment">/* If this call is to send body data, we must take some action:</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="comment">             We have sent off the full HTTP 1.1 request, and we shall now</span></div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="comment">             go into the Expect: 100 state and await such a header */</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;          k-&gt;<a class="code" href="struct_single_request.html#afcc113884223e5e1329d1f0a29427cb8">exp100</a> = <a class="code" href="urldata_8h.html#a0a15328bccb6e0baf3d1c6150eb39449a9d3a27f37991e9aeea4443efd051f309">EXP100_AWAITING_CONTINUE</a>; <span class="comment">/* wait for the header */</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;          k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a> &amp;= ~<a class="code" href="urldata_8h.html#a93237a6ee2f27182bb966487a03bce44">KEEP_SEND</a>;         <span class="comment">/* disable writing */</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;          k-&gt;<a class="code" href="struct_single_request.html#ab837cef7bb2e4d7e9fb5c734a6a8013d">start100</a> = <a class="code" href="timeval_8c.html#ae736e803680e1b7fa2b2868317b4b91f">Curl_now</a>();       <span class="comment">/* timeout count starts now */</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;          *didwhat &amp;= ~<a class="code" href="urldata_8h.html#a93237a6ee2f27182bb966487a03bce44">KEEP_SEND</a>;  <span class="comment">/* we didn&#39;t write anything actually */</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;          <span class="comment">/* set a timeout for the multi interface */</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;          <a class="code" href="multi_8c.html#a759a3f675165554a5f5d6e784afa7fe0">Curl_expire</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="structdata.html">data</a>-&gt;set.expect_100_timeout, <a class="code" href="urldata_8h.html#aabb7db968656c3ee0555ea3d8784310da9ce9f2e0534f44e7777fac288d3c522a">EXPIRE_100_TIMEOUT</a>);</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        }</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a58a76486bc087b55e1e7a3bf8e90254c">protocol</a>&amp;(<a class="code" href="urldata_8h.html#a9d346cfcc0046f6c6ed206bde086ab2d">PROTO_FAMILY_HTTP</a>|<a class="code" href="curl_8h.html#a57c429ed3dc3a2dc9ff5c6eba392b6b2">CURLPROTO_RTSP</a>)) {</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;          <span class="keywordflow">if</span>(<a class="code" href="proto-redir_8d.html#a3663ac2460793e505561ad6c89686402">http</a>-&gt;<a class="code" href="struct_h_t_t_p.html#af03324bf31aec4772357d7d826ca75d9">sending</a> == <a class="code" href="struct_h_t_t_p.html#a0249b638827cfaf90270d9c651a1035fa9d8155c9496f897f08cfcfbdd42a3cd0">HTTPSEND_REQUEST</a>)</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;            <span class="comment">/* We&#39;re sending the HTTP request headers, not the data.</span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="comment">               Remember that so we don&#39;t change the line endings. */</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;            sending_http_headers = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;            sending_http_headers = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        }</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="transfer_8c.html#a2d575b634fe05cd90230cc12d6b73f76">Curl_fillreadbuffer</a>(conn, <a class="code" href="structdata.html">data</a>-&gt;set.upload_buffer_size,</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                                     &amp;fillcount);</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        nread = fillcount;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      }</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        nread = 0; <span class="comment">/* we&#39;re done uploading/reading */</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      <span class="keywordflow">if</span>(!nread &amp;&amp; (k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a> &amp; <a class="code" href="urldata_8h.html#a4a561967b6a40f1b5cbec45beeff78a6">KEEP_SEND_PAUSE</a>)) {</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        <span class="comment">/* this is a paused transfer */</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      }</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;      <span class="keywordflow">if</span>(nread &lt;= 0) {</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = done_sending(conn, k);</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      }</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      <span class="comment">/* store number of bytes available for upload */</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      k-&gt;<a class="code" href="struct_single_request.html#a10791150206c872b38d9ffa7b81d2a5c">upload_present</a> = nread;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      <span class="comment">/* convert LF to CRLF if so asked */</span></div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      <span class="keywordflow">if</span>((!sending_http_headers) &amp;&amp; (</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;#ifdef <a class="code" href="urldata_8h.html#a9039214065dbe00b428b3ddcb2192f79">CURL_DO_LINEEND_CONV</a></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;         <span class="comment">/* always convert if we&#39;re FTPing in ASCII mode */</span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;         (<a class="code" href="structdata.html">data</a>-&gt;set.prefer_ascii) ||</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;#endif</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;         (<a class="code" href="structdata.html">data</a>-&gt;set.crlf))) {</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        <span class="comment">/* Do we need to allocate a scratch buffer? */</span></div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="structdata.html">data</a>-&gt;state.scratch) {</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;          <a class="code" href="structdata.html">data</a>-&gt;state.scratch = <a class="code" href="curl__memory_8h.html#a2eb0b03d1a9de9615a291b1205969069">malloc</a>(2 * <a class="code" href="structdata.html">data</a>-&gt;set.upload_buffer_size);</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;          <span class="keywordflow">if</span>(!<a class="code" href="structdata.html">data</a>-&gt;state.scratch) {</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Failed to alloc scratch buffer!&quot;</span>);</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951aba5a22c9f705ed27933344be221fe937">CURLE_OUT_OF_MEMORY</a>;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;          }</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        }</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="comment">         * ASCII/EBCDIC Note: This is presumably a text (not binary)</span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="comment">         * transfer so the data should already be in ASCII.</span></div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="comment">         * That means the hex values for ASCII CR (0x0d) &amp; LF (0x0a)</span></div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="comment">         * must be used instead of the escape sequences \r &amp; \n.</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        <span class="keywordflow">for</span>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0, si = 0; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &lt; nread; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++, si++) {</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;          <span class="keywordflow">if</span>(k-&gt;<a class="code" href="struct_single_request.html#a29a93742706b21aad3b169dffd1f611a">upload_fromhere</a>[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>] == 0x0a) {</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;            <a class="code" href="structdata.html">data</a>-&gt;state.scratch[si++] = 0x0d;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;            <a class="code" href="structdata.html">data</a>-&gt;state.scratch[si] = 0x0a;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;            <span class="keywordflow">if</span>(!<a class="code" href="structdata.html">data</a>-&gt;set.crlf) {</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;              <span class="comment">/* we&#39;re here only because FTP is in ASCII mode...</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="comment">                 bump infilesize for the LF we just added */</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;              <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;state.infilesize != -1)</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                <a class="code" href="structdata.html">data</a>-&gt;state.infilesize++;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;            }</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;          }</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;          <span class="keywordflow">else</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;            <a class="code" href="structdata.html">data</a>-&gt;state.scratch[si] = k-&gt;<a class="code" href="struct_single_request.html#a29a93742706b21aad3b169dffd1f611a">upload_fromhere</a>[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>];</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        }</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <span class="keywordflow">if</span>(si != nread) {</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;          <span class="comment">/* only perform the special operation if we really did replace</span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="comment">             anything */</span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;          nread = si;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;          <span class="comment">/* upload from the new (replaced) buffer instead */</span></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;          k-&gt;<a class="code" href="struct_single_request.html#a29a93742706b21aad3b169dffd1f611a">upload_fromhere</a> = <a class="code" href="structdata.html">data</a>-&gt;state.scratch;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;          <span class="comment">/* set the new amount too */</span></div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;          k-&gt;<a class="code" href="struct_single_request.html#a10791150206c872b38d9ffa7b81d2a5c">upload_present</a> = nread;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        }</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      }</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="preprocessor">#ifndef CURL_DISABLE_SMTP</span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a58a76486bc087b55e1e7a3bf8e90254c">protocol</a> &amp; <a class="code" href="urldata_8h.html#a4b5d3a45e8003619df16c1a7c6ad7669">PROTO_FAMILY_SMTP</a>) {</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="smtp_8c.html#a46484575f5a9a0af2efdc95bf7ac7d90">Curl_smtp_escape_eob</a>(conn, nread);</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;      }</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CURL_DISABLE_SMTP */</span><span class="preprocessor"></span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    } <span class="comment">/* if 0 == k-&gt;upload_present */</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      <span class="comment">/* We have a partial buffer left from a previous &quot;round&quot;. Use</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment">         that instead of reading more data */</span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    }</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="comment">/* write to socket (send away data) */</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="sendf_8c.html#a6d7b9f1e0b64c65b824a115d0b00b5a2">Curl_write</a>(conn,</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                        conn-&gt;<a class="code" href="structconnectdata.html#a73d6d39e7554e4d764099ab3f1181a40">writesockfd</a>,  <span class="comment">/* socket to send to */</span></div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                        k-&gt;<a class="code" href="struct_single_request.html#a29a93742706b21aad3b169dffd1f611a">upload_fromhere</a>, <span class="comment">/* buffer pointer */</span></div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                        k-&gt;<a class="code" href="struct_single_request.html#a10791150206c872b38d9ffa7b81d2a5c">upload_present</a>,  <span class="comment">/* buffer size */</span></div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                        &amp;bytes_written);    <span class="comment">/* actually sent */</span></div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <a class="code" href="transfer_8c.html#a1718bf5edce26e06c21b7ad18e4b6956">win_update_buffer_size</a>(conn-&gt;<a class="code" href="structconnectdata.html#a73d6d39e7554e4d764099ab3f1181a40">writesockfd</a>);</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;set.verbose)</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;      <span class="comment">/* show the data before we change the pointer upload_fromhere */</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      <a class="code" href="sendf_8c.html#a8b0f0a06869b888abb80a069182d0d5a">Curl_debug</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="curl_8h.html#a9704d2633927f77efaa3e3c6f1c23a14a650f0c484d2be1b78af50ff3d5bf4ddc">CURLINFO_DATA_OUT</a>, k-&gt;<a class="code" href="struct_single_request.html#a29a93742706b21aad3b169dffd1f611a">upload_fromhere</a>,</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                 (<span class="keywordtype">size_t</span>)bytes_written);</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    k-&gt;<a class="code" href="struct_single_request.html#a272e8b20707c1c2307574968495320d4">writebytecount</a> += bytes_written;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="keywordflow">if</span>((!k-&gt;<a class="code" href="struct_single_request.html#a3c3d4ae5c2ddb7cc44bd01b794779269">upload_chunky</a> || k-&gt;<a class="code" href="struct_single_request.html#a0ba1903778006c214622044083c106c4">forbidchunk</a>) &amp;&amp;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;       (k-&gt;<a class="code" href="struct_single_request.html#a272e8b20707c1c2307574968495320d4">writebytecount</a> == <a class="code" href="structdata.html">data</a>-&gt;state.infilesize)) {</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      <span class="comment">/* we have sent all data we were supposed to */</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      k-&gt;<a class="code" href="struct_single_request.html#a8e8fb4ea5e024d91a2c1ee812694254a">upload_done</a> = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;      <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;We are completely uploaded and fine\n&quot;</span>);</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    }</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="keywordflow">if</span>(k-&gt;<a class="code" href="struct_single_request.html#a10791150206c872b38d9ffa7b81d2a5c">upload_present</a> != bytes_written) {</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;      <span class="comment">/* we only wrote a part of the buffer (if anything), deal with it! */</span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      <span class="comment">/* store the amount of bytes left in the buffer to write */</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      k-&gt;<a class="code" href="struct_single_request.html#a10791150206c872b38d9ffa7b81d2a5c">upload_present</a> -= bytes_written;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;      <span class="comment">/* advance the pointer where to find the buffer when the next send</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="comment">         is to happen */</span></div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;      k-&gt;<a class="code" href="struct_single_request.html#a29a93742706b21aad3b169dffd1f611a">upload_fromhere</a> += bytes_written;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    }</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      <span class="comment">/* we&#39;ve uploaded that buffer now */</span></div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="transfer_8c.html#a15440032c495bf0f3f6c535ec5e811e3">Curl_get_upload_buffer</a>(<a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      k-&gt;<a class="code" href="struct_single_request.html#a29a93742706b21aad3b169dffd1f611a">upload_fromhere</a> = <a class="code" href="structdata.html">data</a>-&gt;state.ulbuf;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;      k-&gt;<a class="code" href="struct_single_request.html#a10791150206c872b38d9ffa7b81d2a5c">upload_present</a> = 0; <span class="comment">/* no more bytes left */</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      <span class="keywordflow">if</span>(k-&gt;<a class="code" href="struct_single_request.html#a8e8fb4ea5e024d91a2c1ee812694254a">upload_done</a>) {</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = done_sending(conn, k);</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;      }</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    }</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <a class="code" href="progress_8c.html#a9458c724bbe21e16b9abf8f696a3916a">Curl_pgrsSetUploadCounter</a>(<a class="code" href="structdata.html">data</a>, k-&gt;<a class="code" href="struct_single_request.html#a272e8b20707c1c2307574968495320d4">writebytecount</a>);</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  } <a class="code" href="curl__setup__once_8h.html#a9a32154c5232f39a3164f0c0abba32d7">WHILE_FALSE</a>; <span class="comment">/* just to break out from! */</span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;}</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment"> * Curl_readwrite() is the low-level function to be called when data is to</span></div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="comment"> * be read and written to/from the connection.</span></div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment"> * return &#39;*comeback&#39; TRUE if we didn&#39;t properly drain the socket so this</span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment"> * function should get called again without select() or similar in between!</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01120"></a><span class="lineno"><a class="line" href="transfer_8h.html#ac06679494870ed2a702de92759b06c7d"> 1120</a></span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="transfer_8c.html#ac06679494870ed2a702de92759b06c7d">Curl_readwrite</a>(<span class="keyword">struct</span> <a class="code" href="structconnectdata.html">connectdata</a> *conn,</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                        <span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>,</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                        <span class="keywordtype">bool</span> *done,</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                        <span class="keywordtype">bool</span> *comeback)</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;{</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_single_request.html">SingleRequest</a> *k = &amp;<a class="code" href="structdata.html">data</a>-&gt;req;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  <span class="keywordtype">int</span> didwhat = 0;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> fd_read;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> fd_write;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <span class="keywordtype">int</span> select_res = conn-&gt;<a class="code" href="structconnectdata.html#a78797dc69666513b9115491097cdcc40">cselect_bits</a>;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  conn-&gt;<a class="code" href="structconnectdata.html#a78797dc69666513b9115491097cdcc40">cselect_bits</a> = 0;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <span class="comment">/* only use the proper socket if the *_HOLD bit is not set simultaneously as</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="comment">     then we are in rate limiting state in that transfer direction */</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <span class="keywordflow">if</span>((k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a> &amp; <a class="code" href="urldata_8h.html#ab4bb409a0fb8f0d3c827ba8188f96801">KEEP_RECVBITS</a>) == <a class="code" href="urldata_8h.html#ab141b3290dad267f76cd77a91c641146">KEEP_RECV</a>)</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    fd_read = conn-&gt;<a class="code" href="structconnectdata.html#adbc9021ab6a2581b41035b181d27a1ea">sockfd</a>;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    fd_read = <a class="code" href="curl_8h.html#ada0bbe252b7b370ef4e135b93b2fe71e">CURL_SOCKET_BAD</a>;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="keywordflow">if</span>((k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a> &amp; <a class="code" href="urldata_8h.html#af1753ad9e9b8ef3ec4e2d6e8729409b6">KEEP_SENDBITS</a>) == <a class="code" href="urldata_8h.html#a93237a6ee2f27182bb966487a03bce44">KEEP_SEND</a>)</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    fd_write = conn-&gt;<a class="code" href="structconnectdata.html#a73d6d39e7554e4d764099ab3f1181a40">writesockfd</a>;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    fd_write = <a class="code" href="curl_8h.html#ada0bbe252b7b370ef4e135b93b2fe71e">CURL_SOCKET_BAD</a>;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">data</a>-&gt;<a class="code" href="struct_curl__easy.html#a15aced4a015c44ff454787debee23520">state</a>.<a class="code" href="struct_url_state.html#aa1236acc4e6fd67f22473a1a928c7af8">drain</a>) {</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    select_res |= <a class="code" href="multi_8h.html#ac9841bc853b2a1874c9b5528b2ad3e5b">CURL_CSELECT_IN</a>;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <a class="code" href="curl__setup__once_8h.html#a805079d1643f348afa725659b45b6f87">DEBUGF</a>(<a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Curl_readwrite: forcibly told to drain data\n&quot;</span>));</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  }</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <span class="keywordflow">if</span>(!select_res) <span class="comment">/* Call for select()/poll() only, if read/write/error</span></div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="comment">                     status is not known. */</span></div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    select_res = <a class="code" href="select_8c.html#a5c7e56fd4476c27a049314f502981f29">Curl_socket_check</a>(fd_read, <a class="code" href="curl_8h.html#ada0bbe252b7b370ef4e135b93b2fe71e">CURL_SOCKET_BAD</a>, fd_write, 0);</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="keywordflow">if</span>(select_res == <a class="code" href="multi_8h.html#ac2f6404b4a34b0b43b61315b3c214912">CURL_CSELECT_ERR</a>) {</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;select/poll returned error&quot;</span>);</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a9e0c77963cb42831dba8d5ee1840e80b">CURLE_SEND_ERROR</a>;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  }</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  <span class="comment">/* We go ahead and do a read if we have a readable socket or if</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="comment">     the stream was rewound (in which case we have data in a</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="comment">     buffer) */</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <span class="keywordflow">if</span>((k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a> &amp; <a class="code" href="urldata_8h.html#ab141b3290dad267f76cd77a91c641146">KEEP_RECV</a>) &amp;&amp;</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;     ((select_res &amp; <a class="code" href="multi_8h.html#ac9841bc853b2a1874c9b5528b2ad3e5b">CURL_CSELECT_IN</a>) || conn-&gt;<a class="code" href="structconnectdata.html#a9312f162d29fe7f59bc2b5dbeda85d9d">bits</a>.<a class="code" href="struct_connect_bits.html#a895dbf934d6f1d6c48751228942caaaf">stream_was_rewound</a>)) {</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = readwrite_data(<a class="code" href="structdata.html">data</a>, conn, k, &amp;didwhat, done, comeback);</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> || *done)</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  }</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="comment">/* If we still have writing to do, we check if we have a writable socket. */</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <span class="keywordflow">if</span>((k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a> &amp; <a class="code" href="urldata_8h.html#a93237a6ee2f27182bb966487a03bce44">KEEP_SEND</a>) &amp;&amp; (select_res &amp; <a class="code" href="multi_8h.html#a11b8f4342e1cd64f59b37eda075627a6">CURL_CSELECT_OUT</a>)) {</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="comment">/* write */</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = readwrite_upload(<a class="code" href="structdata.html">data</a>, conn, &amp;didwhat);</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  }</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  k-&gt;<a class="code" href="struct_single_request.html#a42d81b6759b5810f79c4b743288a36f5">now</a> = <a class="code" href="timeval_8c.html#ae736e803680e1b7fa2b2868317b4b91f">Curl_now</a>();</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <span class="keywordflow">if</span>(didwhat) {</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <span class="comment">/* Update read/write counters */</span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="keywordflow">if</span>(k-&gt;<a class="code" href="struct_single_request.html#aa114fbb6f13e62c24d25799e6b8ab740">bytecountp</a>)</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;      *k-&gt;<a class="code" href="struct_single_request.html#aa114fbb6f13e62c24d25799e6b8ab740">bytecountp</a> = k-&gt;<a class="code" href="struct_single_request.html#a7bd7f9afc35050a31e496a08c5baaeb8">bytecount</a>; <span class="comment">/* read count */</span></div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="keywordflow">if</span>(k-&gt;<a class="code" href="struct_single_request.html#a5c32fec94e8dd89dee43a9da394d0729">writebytecountp</a>)</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;      *k-&gt;<a class="code" href="struct_single_request.html#a5c32fec94e8dd89dee43a9da394d0729">writebytecountp</a> = k-&gt;<a class="code" href="struct_single_request.html#a272e8b20707c1c2307574968495320d4">writebytecount</a>; <span class="comment">/* write count */</span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  }</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="comment">/* no read no write, this is a timeout? */</span></div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <span class="keywordflow">if</span>(k-&gt;<a class="code" href="struct_single_request.html#afcc113884223e5e1329d1f0a29427cb8">exp100</a> == <a class="code" href="urldata_8h.html#a0a15328bccb6e0baf3d1c6150eb39449a9d3a27f37991e9aeea4443efd051f309">EXP100_AWAITING_CONTINUE</a>) {</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;      <span class="comment">/* This should allow some time for the header to arrive, but only a</span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;<span class="comment">         very short time as otherwise it&#39;ll be too much wasted time too</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="comment">         often. */</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;      <span class="comment">/* Quoting RFC2616, section &quot;8.2.3 Use of the 100 (Continue) Status&quot;:</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="comment">         Therefore, when a client sends this header field to an origin server</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="comment">         (possibly via a proxy) from which it has never seen a 100 (Continue)</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="comment">         status, the client SHOULD NOT wait for an indefinite period before</span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="comment">         sending the request body.</span></div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="comment">      */</span></div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;      <a class="code" href="timeval_8h.html#aeb19832fd3e7f11c8d047d6824300e87">timediff_t</a> ms = <a class="code" href="timeval_8c.html#a93ce3158c8838916ed817489c98e37c4">Curl_timediff</a>(k-&gt;<a class="code" href="struct_single_request.html#a42d81b6759b5810f79c4b743288a36f5">now</a>, k-&gt;<a class="code" href="struct_single_request.html#ab837cef7bb2e4d7e9fb5c734a6a8013d">start100</a>);</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;      <span class="keywordflow">if</span>(ms &gt;= <a class="code" href="structdata.html">data</a>-&gt;set.expect_100_timeout) {</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        <span class="comment">/* we&#39;ve waited long enough, continue anyway */</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        k-&gt;<a class="code" href="struct_single_request.html#afcc113884223e5e1329d1f0a29427cb8">exp100</a> = <a class="code" href="urldata_8h.html#a0a15328bccb6e0baf3d1c6150eb39449ac77a92a2088eebb5391259dcf6eb9952">EXP100_SEND_DATA</a>;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a> |= <a class="code" href="urldata_8h.html#a93237a6ee2f27182bb966487a03bce44">KEEP_SEND</a>;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        <a class="code" href="multi_8c.html#ab12ca318b29f9bd535afc9bea98b82bb">Curl_expire_done</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="urldata_8h.html#aabb7db968656c3ee0555ea3d8784310da9ce9f2e0534f44e7777fac288d3c522a">EXPIRE_100_TIMEOUT</a>);</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Done waiting for 100-continue\n&quot;</span>);</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;      }</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    }</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  }</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="progress_8c.html#a40686d443707afea0c0e47cee805df01">Curl_pgrsUpdate</a>(conn))</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a309ade641c94c3e710ae887405dba78b">CURLE_ABORTED_BY_CALLBACK</a>;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="speedcheck_8c.html#a9bb3788a8c28461af0215fc47308d36c">Curl_speedcheck</a>(<a class="code" href="structdata.html">data</a>, k-&gt;<a class="code" href="struct_single_request.html#a42d81b6759b5810f79c4b743288a36f5">now</a>);</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <span class="keywordflow">if</span>(k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a>) {</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="keywordflow">if</span>(0 &gt; <a class="code" href="connect_8c.html#aed32c0fb99c80a40c097c98a3eb03c74">Curl_timeleft</a>(<a class="code" href="structdata.html">data</a>, &amp;k-&gt;<a class="code" href="struct_single_request.html#a42d81b6759b5810f79c4b743288a36f5">now</a>, <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>)) {</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;      <span class="keywordflow">if</span>(k-&gt;<a class="code" href="struct_single_request.html#a7b830d1607062193706245f7f4512ac9">size</a> != -1) {</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Operation timed out after %ld milliseconds with %&quot;</span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;              <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a3dca40ce1e998420175eabe37246e05b">CURL_FORMAT_CURL_OFF_T</a> <span class="stringliteral">&quot; out of %&quot;</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;              <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a3dca40ce1e998420175eabe37246e05b">CURL_FORMAT_CURL_OFF_T</a> <span class="stringliteral">&quot; bytes received&quot;</span>,</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;              <a class="code" href="timeval_8c.html#a93ce3158c8838916ed817489c98e37c4">Curl_timediff</a>(k-&gt;<a class="code" href="struct_single_request.html#a42d81b6759b5810f79c4b743288a36f5">now</a>, <a class="code" href="structdata.html">data</a>-&gt;progress.t_startsingle),</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;              k-&gt;<a class="code" href="struct_single_request.html#a7bd7f9afc35050a31e496a08c5baaeb8">bytecount</a>, k-&gt;<a class="code" href="struct_single_request.html#a7b830d1607062193706245f7f4512ac9">size</a>);</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;      }</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Operation timed out after %ld milliseconds with %&quot;</span></div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;              <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a3dca40ce1e998420175eabe37246e05b">CURL_FORMAT_CURL_OFF_T</a> <span class="stringliteral">&quot; bytes received&quot;</span>,</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;              <a class="code" href="timeval_8c.html#a93ce3158c8838916ed817489c98e37c4">Curl_timediff</a>(k-&gt;<a class="code" href="struct_single_request.html#a42d81b6759b5810f79c4b743288a36f5">now</a>, <a class="code" href="structdata.html">data</a>-&gt;progress.t_startsingle),</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;              k-&gt;<a class="code" href="struct_single_request.html#a7bd7f9afc35050a31e496a08c5baaeb8">bytecount</a>);</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;      }</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951aaa7a948caaac0addf8754794663f48b1">CURLE_OPERATION_TIMEDOUT</a>;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    }</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  }</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;<span class="comment">     * The transfer has been performed. Just make some general checks before</span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="comment">     * returning.</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <span class="keywordflow">if</span>(!(<a class="code" href="structdata.html">data</a>-&gt;set.opt_no_body) &amp;&amp; (k-&gt;<a class="code" href="struct_single_request.html#a7b830d1607062193706245f7f4512ac9">size</a> != -1) &amp;&amp;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;       (k-&gt;<a class="code" href="struct_single_request.html#a7bd7f9afc35050a31e496a08c5baaeb8">bytecount</a> != k-&gt;<a class="code" href="struct_single_request.html#a7b830d1607062193706245f7f4512ac9">size</a>) &amp;&amp;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;#ifdef <a class="code" href="urldata_8h.html#a9039214065dbe00b428b3ddcb2192f79">CURL_DO_LINEEND_CONV</a></div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;       <span class="comment">/* Most FTP servers don&#39;t adjust their file SIZE response for CRLFs,</span></div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;<span class="comment">          so we&#39;ll check to see if the discrepancy can be explained</span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;<span class="comment">          by the number of CRLFs we&#39;ve changed to LFs.</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;       (k-&gt;<a class="code" href="struct_single_request.html#a7bd7f9afc35050a31e496a08c5baaeb8">bytecount</a> != (k-&gt;<a class="code" href="struct_single_request.html#a7b830d1607062193706245f7f4512ac9">size</a> + <a class="code" href="structdata.html">data</a>-&gt;state.crlf_conversions)) &amp;&amp;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;#endif <span class="comment">/* CURL_DO_LINEEND_CONV */</span></div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;       !k-&gt;<a class="code" href="struct_single_request.html#afb8f90bb8c150155d2c27ba5f9dabc6d">newurl</a>) {</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;      <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;transfer closed with %&quot;</span> <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a3dca40ce1e998420175eabe37246e05b">CURL_FORMAT_CURL_OFF_T</a></div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;            <span class="stringliteral">&quot; bytes remaining to read&quot;</span>, k-&gt;<a class="code" href="struct_single_request.html#a7b830d1607062193706245f7f4512ac9">size</a> - k-&gt;<a class="code" href="struct_single_request.html#a7bd7f9afc35050a31e496a08c5baaeb8">bytecount</a>);</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951ac6544fd7da6ddfd7893d74095b17a28d">CURLE_PARTIAL_FILE</a>;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    }</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <span class="keywordflow">if</span>(!(<a class="code" href="structdata.html">data</a>-&gt;set.opt_no_body) &amp;&amp; k-&gt;<a class="code" href="struct_single_request.html#a3018293fe5f120a8a4c77d16207ab5da">chunk</a> &amp;&amp;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;       (conn-&gt;<a class="code" href="structconnectdata.html#a25a7557b96b8081454080f8b2e7181a1">chunk</a>.<a class="code" href="struct_curl__chunker.html#a537803528ee3bbc5a4928a2862f12b81">state</a> != <a class="code" href="http__chunks_8h.html#a00a95e212e978d27dded822d1eb5ca6cada1bd400ffe095d84a67c9cb84ee4368">CHUNK_STOP</a>)) {</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="comment">       * In chunked mode, return an error if the connection is closed prior to</span></div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;<span class="comment">       * the empty (terminating) chunk is read.</span></div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;<span class="comment">       * The condition above used to check for</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="comment">       * conn-&gt;proto.http-&gt;chunk.datasize != 0 which is true after reading</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="comment">       * *any* chunk, not just the empty chunk.</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;      <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;transfer closed with outstanding read data remaining&quot;</span>);</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951ac6544fd7da6ddfd7893d74095b17a28d">CURLE_PARTIAL_FILE</a>;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    }</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="progress_8c.html#a40686d443707afea0c0e47cee805df01">Curl_pgrsUpdate</a>(conn))</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a309ade641c94c3e710ae887405dba78b">CURLE_ABORTED_BY_CALLBACK</a>;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  }</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  <span class="comment">/* Now update the &quot;done&quot; boolean we return */</span></div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  *done = (0 == (k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a>&amp;(<a class="code" href="urldata_8h.html#ab141b3290dad267f76cd77a91c641146">KEEP_RECV</a>|<a class="code" href="urldata_8h.html#a93237a6ee2f27182bb966487a03bce44">KEEP_SEND</a>|</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                            <a class="code" href="urldata_8h.html#a5f72b40a5e27226c8993aaba303f0204">KEEP_RECV_PAUSE</a>|<a class="code" href="urldata_8h.html#a4a561967b6a40f1b5cbec45beeff78a6">KEEP_SEND_PAUSE</a>))) ? <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a> : <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;}</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;<span class="comment"> * Curl_single_getsock() gets called by the multi interface code when the app</span></div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;<span class="comment"> * has requested to get the sockets for the current connection. This function</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;<span class="comment"> * will then be called once for every connection that the multi interface</span></div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;<span class="comment"> * keeps track of. This function will only be called for connections that are</span></div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;<span class="comment"> * in the proper state to have this information available.</span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01294"></a><span class="lineno"><a class="line" href="transfer_8h.html#aac0636287f23333afc6a08d60c332dbd"> 1294</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="transfer_8c.html#a672d018ece26cc8a8f2da835cc68122f">Curl_single_getsock</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structconnectdata.html">connectdata</a> *conn,</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                        <a class="code" href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a> *sock, <span class="comment">/* points to numsocks number</span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;<span class="comment">                                                of sockets */</span></div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                        <span class="keywordtype">int</span> numsocks)</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;{</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a> = conn-&gt;<a class="code" href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">data</a>;</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  <span class="keywordtype">int</span> bitmap = <a class="code" href="multiif_8h.html#ad755633cd6d4e90c3df49fefd1052bad">GETSOCK_BLANK</a>;</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;  <span class="keywordtype">unsigned</span> sockindex = 0;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a4cb97489ff5e99482751b9cf94c4e3a0">perform_getsock</a>)</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <span class="keywordflow">return</span> conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a4cb97489ff5e99482751b9cf94c4e3a0">perform_getsock</a>(conn, sock, <a class="code" href="struct_curl__easy.html#ae5487e7b1b5e91d240646325c575fd0c">numsocks</a>);</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="struct_curl__easy.html#ae5487e7b1b5e91d240646325c575fd0c">numsocks</a> &lt; 2)</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <span class="comment">/* simple check but we might need two slots */</span></div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multiif_8h.html#ad755633cd6d4e90c3df49fefd1052bad">GETSOCK_BLANK</a>;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  <span class="comment">/* don&#39;t include HOLD and PAUSE connections */</span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <span class="keywordflow">if</span>((<a class="code" href="structdata.html">data</a>-&gt;req.keepon &amp; <a class="code" href="urldata_8h.html#ab4bb409a0fb8f0d3c827ba8188f96801">KEEP_RECVBITS</a>) == <a class="code" href="urldata_8h.html#ab141b3290dad267f76cd77a91c641146">KEEP_RECV</a>) {</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <a class="code" href="curl__setup__once_8h.html#a23d7b88872d6ead46c978b567908d587">DEBUGASSERT</a>(conn-&gt;<a class="code" href="structconnectdata.html#adbc9021ab6a2581b41035b181d27a1ea">sockfd</a> != <a class="code" href="curl_8h.html#ada0bbe252b7b370ef4e135b93b2fe71e">CURL_SOCKET_BAD</a>);</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    bitmap |= <a class="code" href="multiif_8h.html#a4ae1fb64a27264765b6a2fe5aca78830">GETSOCK_READSOCK</a>(sockindex);</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    sock[sockindex] = conn-&gt;<a class="code" href="structconnectdata.html#adbc9021ab6a2581b41035b181d27a1ea">sockfd</a>;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  }</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  <span class="comment">/* don&#39;t include HOLD and PAUSE connections */</span></div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  <span class="keywordflow">if</span>((<a class="code" href="structdata.html">data</a>-&gt;req.keepon &amp; <a class="code" href="urldata_8h.html#af1753ad9e9b8ef3ec4e2d6e8729409b6">KEEP_SENDBITS</a>) == <a class="code" href="urldata_8h.html#a93237a6ee2f27182bb966487a03bce44">KEEP_SEND</a>) {</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    <span class="keywordflow">if</span>((conn-&gt;<a class="code" href="structconnectdata.html#adbc9021ab6a2581b41035b181d27a1ea">sockfd</a> != conn-&gt;<a class="code" href="structconnectdata.html#a73d6d39e7554e4d764099ab3f1181a40">writesockfd</a>) ||</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;       bitmap == <a class="code" href="multiif_8h.html#ad755633cd6d4e90c3df49fefd1052bad">GETSOCK_BLANK</a>) {</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;      <span class="comment">/* only if they are not the same socket and we have a readable</span></div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="comment">         one, we increase index */</span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;      <span class="keywordflow">if</span>(bitmap != <a class="code" href="multiif_8h.html#ad755633cd6d4e90c3df49fefd1052bad">GETSOCK_BLANK</a>)</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        sockindex++; <span class="comment">/* increase index if we need two entries */</span></div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;      <a class="code" href="curl__setup__once_8h.html#a23d7b88872d6ead46c978b567908d587">DEBUGASSERT</a>(conn-&gt;<a class="code" href="structconnectdata.html#a73d6d39e7554e4d764099ab3f1181a40">writesockfd</a> != <a class="code" href="curl_8h.html#ada0bbe252b7b370ef4e135b93b2fe71e">CURL_SOCKET_BAD</a>);</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;      sock[sockindex] = conn-&gt;<a class="code" href="structconnectdata.html#a73d6d39e7554e4d764099ab3f1181a40">writesockfd</a>;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    }</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    bitmap |= <a class="code" href="multiif_8h.html#a9aabda59f0ff87c1db3a2d306a410713">GETSOCK_WRITESOCK</a>(sockindex);</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  }</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <span class="keywordflow">return</span> bitmap;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;}</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;<span class="comment">/* Curl_init_CONNECT() gets called each time the handle switches to CONNECT</span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;<span class="comment">   which means this gets called once for each subsequent redirect etc */</span></div><div class="line"><a name="l01342"></a><span class="lineno"><a class="line" href="transfer_8h.html#a055b20e035ac986f69148eaa4a44eaaa"> 1342</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="transfer_8c.html#a055b20e035ac986f69148eaa4a44eaaa">Curl_init_CONNECT</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>)</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;{</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;state.fread_func = <a class="code" href="structdata.html">data</a>-&gt;set.fread_func_set;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;state.in = <a class="code" href="structdata.html">data</a>-&gt;set.in_set;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;}</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;<span class="comment"> * Curl_pretransfer() is called immediately before a transfer starts, and only</span></div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;<span class="comment"> * once for one transfer no matter if it has redirects or do multi-pass</span></div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;<span class="comment"> * authentication etc.</span></div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01353"></a><span class="lineno"><a class="line" href="transfer_8h.html#a0dae98156f3b0dc5f703d4d19d15c137"> 1353</a></span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="transfer_8c.html#a0dae98156f3b0dc5f703d4d19d15c137">Curl_pretransfer</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>)</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;{</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="structdata.html">data</a>-&gt;change.url &amp;&amp; !<a class="code" href="structdata.html">data</a>-&gt;set.uh) {</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <span class="comment">/* we can&#39;t do anything without URL */</span></div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;No URL set!&quot;</span>);</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951ab9b2b0dca8aa242d128640dbfde66fc6">CURLE_URL_MALFORMAT</a>;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  }</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;  <span class="comment">/* since the URL may have been redirected in a previous use of this handle */</span></div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;change.url_alloc) {</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <span class="comment">/* the already set URL is allocated, free it first! */</span></div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <a class="code" href="memdebug_8h.html#a795660f73c902cc80ac0fe6cda0dbd1c">Curl_safefree</a>(<a class="code" href="structdata.html">data</a>-&gt;change.url);</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;change.url_alloc = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  }</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="structdata.html">data</a>-&gt;change.url &amp;&amp; <a class="code" href="structdata.html">data</a>-&gt;set.uh) {</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <a class="code" href="urlapi_8h.html#a6a5b8d5c719d5d893048d2410d74d1de">CURLUcode</a> uc;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    uc = <a class="code" href="urlapi_8h.html#abfb2378e801e13033e70c3819d8afca1">curl_url_get</a>(<a class="code" href="structdata.html">data</a>-&gt;set.uh,</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;                        <a class="code" href="urlapi_8h.html#aa61ba3e924e11f4a7f208aa051a5d2eba652d7cac677d1aca71efd0386e57f927">CURLUPART_URL</a>, &amp;<a class="code" href="structdata.html">data</a>-&gt;set.str[<a class="code" href="urldata_8h.html#a9607658ec977f6ca435daf26b82f6b3fa8effa4c4c5def044f3743a8250369058">STRING_SET_URL</a>], 0);</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <span class="keywordflow">if</span>(uc) {</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;      <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;No URL set!&quot;</span>);</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951ab9b2b0dca8aa242d128640dbfde66fc6">CURLE_URL_MALFORMAT</a>;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    }</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  }</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;change.url = <a class="code" href="structdata.html">data</a>-&gt;set.str[<a class="code" href="urldata_8h.html#a9607658ec977f6ca435daf26b82f6b3fa8effa4c4c5def044f3743a8250369058">STRING_SET_URL</a>];</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  <span class="comment">/* Init the SSL session ID cache here. We do it here since we want to do it</span></div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;<span class="comment">     after the *_setopt() calls (that could specify the size of the cache) but</span></div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="comment">     before any transfer takes place. */</span></div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="vtls_8h.html#a646fd2a8d6796d8ff481bffc36b371d5">Curl_ssl_initsessions</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="structdata.html">data</a>-&gt;set.general_ssl.max_ssl_sessions);</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;state.wildcardmatch = <a class="code" href="structdata.html">data</a>-&gt;set.wildcard_enabled;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;set.followlocation = 0; <span class="comment">/* reset the location-follow counter */</span></div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;state.this_is_a_follow = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>; <span class="comment">/* reset this */</span></div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;state.errorbuf = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>; <span class="comment">/* no error has occurred */</span></div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;state.httpversion = 0; <span class="comment">/* don&#39;t assume any particular server version */</span></div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;state.authproblem = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;state.authhost.want = <a class="code" href="structdata.html">data</a>-&gt;set.httpauth;</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;state.authproxy.want = <a class="code" href="structdata.html">data</a>-&gt;set.proxyauth;</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  <a class="code" href="memdebug_8h.html#a795660f73c902cc80ac0fe6cda0dbd1c">Curl_safefree</a>(<a class="code" href="structdata.html">data</a>-&gt;info.wouldredirect);</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;info.wouldredirect = NULL;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;set.httpreq == <a class="code" href="urldata_8h.html#ac67e77846b7b67d5808da8f1dfa2eab8a4b328e0aa83f04505b21057059a9715f">HTTPREQ_PUT</a>)</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;state.infilesize = <a class="code" href="structdata.html">data</a>-&gt;set.filesize;</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;state.infilesize = <a class="code" href="structdata.html">data</a>-&gt;set.postfieldsize;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;set.postfields &amp;&amp; (<a class="code" href="structdata.html">data</a>-&gt;state.infilesize == -1))</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;      <a class="code" href="structdata.html">data</a>-&gt;state.infilesize = (<a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a>)strlen(<a class="code" href="structdata.html">data</a>-&gt;set.postfields);</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;  }</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  <span class="comment">/* If there is a list of cookie files to read, do it now! */</span></div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;change.cookielist)</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <a class="code" href="cookie_8c.html#ae44350d9d4dd49e91e604b70c3573809">Curl_cookie_loadfiles</a>(<a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  <span class="comment">/* If there is a list of host pairs to deal with */</span></div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;change.resolve)</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="hostip_8c.html#a8b9544b1eed8e7a9680f3f06520c11e6">Curl_loadhostpairs</a>(<a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <span class="comment">/* Allow data-&gt;set.use_port to set which port to use. This needs to be</span></div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;<span class="comment">     * disabled for example when we follow Location: headers to URLs using</span></div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;<span class="comment">     * different ports! */</span></div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;state.allow_port = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;<span class="preprocessor">#if defined(HAVE_SIGNAL) &amp;&amp; defined(SIGPIPE) &amp;&amp; !defined(HAVE_MSG_NOSIGNAL)</span></div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    <span class="comment">/*************************************************************</span></div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;<span class="comment">     * Tell signal handler to ignore SIGPIPE</span></div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;<span class="comment">     *************************************************************/</span></div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="structdata.html">data</a>-&gt;set.no_signal)</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;      <a class="code" href="structdata.html">data</a>-&gt;state.prev_signal = signal(SIGPIPE, SIG_IGN);</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <a class="code" href="lib_2getinfo_8c.html#aac05d1e18067264a6b4b66e515cfdaaa">Curl_initinfo</a>(<a class="code" href="structdata.html">data</a>); <span class="comment">/* reset session-specific information &quot;variables&quot; */</span></div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <a class="code" href="progress_8c.html#ad9dca3b2d400d41c3f7d255a9fedcf59">Curl_pgrsResetTransferSizes</a>(<a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <a class="code" href="progress_8c.html#a4887bd15abbedadf869cedab36e4eb34">Curl_pgrsStartNow</a>(<a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;set.timeout)</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      <a class="code" href="multi_8c.html#a759a3f675165554a5f5d6e784afa7fe0">Curl_expire</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="structdata.html">data</a>-&gt;set.timeout, <a class="code" href="urldata_8h.html#aabb7db968656c3ee0555ea3d8784310da5752eb3ce2744e0f02e05837624abf2c">EXPIRE_TIMEOUT</a>);</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;set.connecttimeout)</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;      <a class="code" href="multi_8c.html#a759a3f675165554a5f5d6e784afa7fe0">Curl_expire</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="structdata.html">data</a>-&gt;set.connecttimeout, <a class="code" href="urldata_8h.html#aabb7db968656c3ee0555ea3d8784310dabe4de12f4e6f14e2ea88bc30d544509c">EXPIRE_CONNECTTIMEOUT</a>);</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    <span class="comment">/* In case the handle is re-used and an authentication method was picked</span></div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;<span class="comment">       in the session we need to make sure we only use the one(s) we now</span></div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;<span class="comment">       consider to be fine */</span></div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;state.authhost.picked &amp;= <a class="code" href="structdata.html">data</a>-&gt;state.authhost.want;</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;state.authproxy.picked &amp;= <a class="code" href="structdata.html">data</a>-&gt;state.authproxy.want;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;state.wildcardmatch) {</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;      <span class="keyword">struct </span><a class="code" href="struct_wildcard_data.html">WildcardData</a> *wc = &amp;<a class="code" href="structdata.html">data</a>-&gt;wildcard;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;      <span class="keywordflow">if</span>(wc-&gt;<a class="code" href="struct_wildcard_data.html#aa312ae53f66b4fe3f10c3701c67abecf">state</a> &lt; <a class="code" href="wildcard_8h.html#ab4724474e988ca4793d666e449cd2b0aafac8d563d66d0af0fceb27bca71fc3ac">CURLWC_INIT</a>) {</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="wildcard_8c.html#accb01e4546f67b5392ef1f647f265ab2">Curl_wildcard_init</a>(wc); <span class="comment">/* init wildcard structures */</span></div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951aba5a22c9f705ed27933344be221fe937">CURLE_OUT_OF_MEMORY</a>;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;      }</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    }</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  }</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;}</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="comment"> * Curl_posttransfer() is called immediately after a transfer ends</span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01463"></a><span class="lineno"><a class="line" href="transfer_8h.html#a6afc3b6e11b658604fb00a32646c2f15"> 1463</a></span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="transfer_8c.html#a6afc3b6e11b658604fb00a32646c2f15">Curl_posttransfer</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>)</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;{</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;<span class="preprocessor">#if defined(HAVE_SIGNAL) &amp;&amp; defined(SIGPIPE) &amp;&amp; !defined(HAVE_MSG_NOSIGNAL)</span></div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;  <span class="comment">/* restore the signal handler for SIGPIPE before we get back */</span></div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="structdata.html">data</a>-&gt;set.no_signal)</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    signal(SIGPIPE, <a class="code" href="structdata.html">data</a>-&gt;state.prev_signal);</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  (void)<a class="code" href="structdata.html">data</a>; <span class="comment">/* unused parameter */</span></div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;}</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;<span class="comment"> * Curl_follow() handles the URL redirect magic. Pass in the &#39;newurl&#39; string</span></div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;<span class="comment"> * as given by the remote server and set up the new URL to request.</span></div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;<span class="comment"> * This function DOES NOT FREE the given url.</span></div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01482"></a><span class="lineno"><a class="line" href="transfer_8h.html#a96a72bb80c85af1210d7fc49244920e9"> 1482</a></span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="transfer_8c.html#a96a72bb80c85af1210d7fc49244920e9">Curl_follow</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a>,</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;                     <span class="keywordtype">char</span> *newurl,    <span class="comment">/* the Location: string */</span></div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;                     <a class="code" href="transfer_8h.html#a5d8d8c391641700d5c2f715193e27963">followtype</a> <a class="code" href="form_8d.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>) <span class="comment">/* see transfer.h */</span></div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;{</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;<span class="preprocessor">#ifdef CURL_DISABLE_HTTP</span></div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;  (void)<a class="code" href="structdata.html">data</a>;</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  (void)newurl;</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  (void)<a class="code" href="form_8d.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  <span class="comment">/* Location: following will not happen when HTTP is disabled */</span></div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a8933e6db041d3f4a94227e991d789745">CURLE_TOO_MANY_REDIRECTS</a>;</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;  <span class="comment">/* Location: redirect */</span></div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;  <span class="keywordtype">bool</span> disallowport = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  <span class="keywordtype">bool</span> reachedmax = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;  <a class="code" href="urlapi_8h.html#a6a5b8d5c719d5d893048d2410d74d1de">CURLUcode</a> uc;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="form_8d.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> == <a class="code" href="transfer_8h.html#a5d8d8c391641700d5c2f715193e27963a88a3c59ee1a6490b85dc50d0568e2603">FOLLOW_REDIR</a>) {</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="keywordflow">if</span>((<a class="code" href="structdata.html">data</a>-&gt;set.maxredirs != -1) &amp;&amp;</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;       (<a class="code" href="structdata.html">data</a>-&gt;set.followlocation &gt;= <a class="code" href="structdata.html">data</a>-&gt;set.maxredirs)) {</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;      reachedmax = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      <a class="code" href="form_8d.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> = <a class="code" href="transfer_8h.html#a5d8d8c391641700d5c2f715193e27963a0d049e79236e49899f5aff3e0b46bed6">FOLLOW_FAKE</a>; <span class="comment">/* switch to fake to store the would-be-redirected</span></div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;<span class="comment">                             to URL */</span></div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    }</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;      <span class="comment">/* mark the next request as a followed location: */</span></div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;      <a class="code" href="structdata.html">data</a>-&gt;state.this_is_a_follow = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      <a class="code" href="structdata.html">data</a>-&gt;set.followlocation++; <span class="comment">/* count location-followers */</span></div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;set.http_auto_referer) {</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;        <span class="comment">/* We are asked to automatically set the previous URL as the referer</span></div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;<span class="comment">           when we get the next URL. We pick the -&gt;url field, which may or may</span></div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;<span class="comment">           not be 100% correct */</span></div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;change.referer_alloc) {</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;          <a class="code" href="memdebug_8h.html#a795660f73c902cc80ac0fe6cda0dbd1c">Curl_safefree</a>(<a class="code" href="structdata.html">data</a>-&gt;change.referer);</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;          <a class="code" href="structdata.html">data</a>-&gt;change.referer_alloc = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;        }</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;        <a class="code" href="structdata.html">data</a>-&gt;change.referer = <a class="code" href="curl__memory_8h.html#aa3f578f8f1eaebf25b2e2313db31cb40">strdup</a>(<a class="code" href="structdata.html">data</a>-&gt;change.url);</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="structdata.html">data</a>-&gt;change.referer)</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951aba5a22c9f705ed27933344be221fe937">CURLE_OUT_OF_MEMORY</a>;</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;        <a class="code" href="structdata.html">data</a>-&gt;change.referer_alloc = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>; <span class="comment">/* yes, free this later */</span></div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;      }</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    }</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;  }</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="urlapi-int_8h.html#ae78d47dea8b3c5ad97e65a720c65cd65">Curl_is_absolute_url</a>(newurl, NULL, <a class="code" href="urlapi-int_8h.html#ac1c52efdd487ad52d2eaebc4963c5616">MAX_SCHEME_LEN</a>))</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    <span class="comment">/* This is an absolute URL, don&#39;t allow the custom port number */</span></div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    disallowport = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  <a class="code" href="curl__setup__once_8h.html#a23d7b88872d6ead46c978b567908d587">DEBUGASSERT</a>(<a class="code" href="structdata.html">data</a>-&gt;state.uh);</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  uc = <a class="code" href="urlapi_8h.html#a1cb93c92958648f06fab038f397cfeae">curl_url_set</a>(<a class="code" href="structdata.html">data</a>-&gt;state.uh, <a class="code" href="urlapi_8h.html#aa61ba3e924e11f4a7f208aa051a5d2eba652d7cac677d1aca71efd0386e57f927">CURLUPART_URL</a>, newurl,</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;                    (<a class="code" href="form_8d.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> == <a class="code" href="transfer_8h.html#a5d8d8c391641700d5c2f715193e27963a0d049e79236e49899f5aff3e0b46bed6">FOLLOW_FAKE</a>) ? <a class="code" href="urlapi_8h.html#a38354ba89f94ee9d65db974f5040f6db">CURLU_NON_SUPPORT_SCHEME</a> : 0);</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  <span class="keywordflow">if</span>(uc)</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="url_8c.html#af403c3591d12b4ac9d7637de1cba3e62">Curl_uc_to_curlcode</a>(uc);</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  uc = <a class="code" href="urlapi_8h.html#abfb2378e801e13033e70c3819d8afca1">curl_url_get</a>(<a class="code" href="structdata.html">data</a>-&gt;state.uh, <a class="code" href="urlapi_8h.html#aa61ba3e924e11f4a7f208aa051a5d2eba652d7cac677d1aca71efd0386e57f927">CURLUPART_URL</a>, &amp;newurl, 0);</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  <span class="keywordflow">if</span>(uc)</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="url_8c.html#af403c3591d12b4ac9d7637de1cba3e62">Curl_uc_to_curlcode</a>(uc);</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="form_8d.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a> == <a class="code" href="transfer_8h.html#a5d8d8c391641700d5c2f715193e27963a0d049e79236e49899f5aff3e0b46bed6">FOLLOW_FAKE</a>) {</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <span class="comment">/* we&#39;re only figuring out the new url if we would&#39;ve followed locations</span></div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;<span class="comment">       but now we&#39;re done so we can get out! */</span></div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;info.wouldredirect = newurl;</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    <span class="keywordflow">if</span>(reachedmax) {</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;      <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Maximum (%ld) redirects followed&quot;</span>, <a class="code" href="structdata.html">data</a>-&gt;set.maxredirs);</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a8933e6db041d3f4a94227e991d789745">CURLE_TOO_MANY_REDIRECTS</a>;</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    }</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  }</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  <span class="keywordflow">if</span>(disallowport)</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;state.allow_port = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;change.url_alloc)</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <a class="code" href="memdebug_8h.html#a795660f73c902cc80ac0fe6cda0dbd1c">Curl_safefree</a>(<a class="code" href="structdata.html">data</a>-&gt;change.url);</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;change.url = newurl;</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  <a class="code" href="structdata.html">data</a>-&gt;change.url_alloc = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Issue another request to this URL: &#39;%s&#39;\n&quot;</span>, <a class="code" href="structdata.html">data</a>-&gt;change.url);</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;<span class="comment">   * We get here when the HTTP code is 300-399 (and 401). We need to perform</span></div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;<span class="comment">   * differently based on exactly what return code there was.</span></div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;<span class="comment">   *</span></div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;<span class="comment">   * News from 7.10.6: we can also get here on a 401 or 407, in case we act on</span></div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;<span class="comment">   * a HTTP (proxy-) authentication scheme other than Basic.</span></div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  <span class="keywordflow">switch</span>(<a class="code" href="structdata.html">data</a>-&gt;info.httpcode) {</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <span class="comment">/* 401 - Act on a WWW-Authenticate, we keep on moving and do the</span></div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;<span class="comment">       Authorization: XXXX header in the HTTP request code snippet */</span></div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    <span class="comment">/* 407 - Act on a Proxy-Authenticate, we keep on moving and do the</span></div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;<span class="comment">       Proxy-Authorization: XXXX header in the HTTP request code snippet */</span></div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <span class="comment">/* 300 - Multiple Choices */</span></div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <span class="comment">/* 306 - Not used */</span></div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    <span class="comment">/* 307 - Temporary Redirect */</span></div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;  <span class="keywordflow">default</span>:  <span class="comment">/* for all above (and the unknown ones) */</span></div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    <span class="comment">/* Some codes are explicitly mentioned since I&#39;ve checked RFC2616 and they</span></div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;<span class="comment">     * seem to be OK to POST to.</span></div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;  <span class="keywordflow">case</span> 301: <span class="comment">/* Moved Permanently */</span></div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    <span class="comment">/* (quote from RFC7231, section 6.4.2)</span></div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;<span class="comment">     * Note: For historical reasons, a user agent MAY change the request</span></div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;<span class="comment">     * method from POST to GET for the subsequent request.  If this</span></div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;<span class="comment">     * behavior is undesired, the 307 (Temporary Redirect) status code</span></div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;<span class="comment">     * can be used instead.</span></div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;<span class="comment">     * ----</span></div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;<span class="comment">     * Many webservers expect this, so these servers often answers to a POST</span></div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;<span class="comment">     * request with an error page. To be sure that libcurl gets the page that</span></div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;<span class="comment">     * most user agents would get, libcurl has to force GET.</span></div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;<span class="comment">     * This behaviour is forbidden by RFC1945 and the obsolete RFC2616, and</span></div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;<span class="comment">     * can be overridden with CURLOPT_POSTREDIR.</span></div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    <span class="keywordflow">if</span>((<a class="code" href="structdata.html">data</a>-&gt;set.httpreq == <a class="code" href="urldata_8h.html#ac67e77846b7b67d5808da8f1dfa2eab8aae19a0f63b68ec93cabbd9f3074fb496">HTTPREQ_POST</a></div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        || <a class="code" href="structdata.html">data</a>-&gt;set.httpreq == <a class="code" href="urldata_8h.html#ac67e77846b7b67d5808da8f1dfa2eab8ae11eeb30f15276332563390b730fd389">HTTPREQ_POST_FORM</a></div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;        || <a class="code" href="structdata.html">data</a>-&gt;set.httpreq == <a class="code" href="urldata_8h.html#ac67e77846b7b67d5808da8f1dfa2eab8a34d2478b945364d0d1bc6cb5f2845f71">HTTPREQ_POST_MIME</a>)</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;       &amp;&amp; !(<a class="code" href="structdata.html">data</a>-&gt;set.keep_post &amp; <a class="code" href="curl_8h.html#abf6110d6bc48dd3362cd3f849cde56b6">CURL_REDIR_POST_301</a>)) {</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;      <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Switch from POST to GET\n&quot;</span>);</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;      <a class="code" href="structdata.html">data</a>-&gt;set.httpreq = <a class="code" href="urldata_8h.html#ac67e77846b7b67d5808da8f1dfa2eab8ae4322de705c516b61756f9874183ef05">HTTPREQ_GET</a>;</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    }</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  <span class="keywordflow">case</span> 302: <span class="comment">/* Found */</span></div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    <span class="comment">/* (quote from RFC7231, section 6.4.3)</span></div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;<span class="comment">     * Note: For historical reasons, a user agent MAY change the request</span></div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;<span class="comment">     * method from POST to GET for the subsequent request.  If this</span></div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;<span class="comment">     * behavior is undesired, the 307 (Temporary Redirect) status code</span></div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;<span class="comment">     * can be used instead.</span></div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;<span class="comment">     * ----</span></div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;<span class="comment">     * Many webservers expect this, so these servers often answers to a POST</span></div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;<span class="comment">     * request with an error page. To be sure that libcurl gets the page that</span></div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;<span class="comment">     * most user agents would get, libcurl has to force GET.</span></div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;<span class="comment">     *</span></div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;<span class="comment">     * This behaviour is forbidden by RFC1945 and the obsolete RFC2616, and</span></div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;<span class="comment">     * can be overridden with CURLOPT_POSTREDIR.</span></div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    <span class="keywordflow">if</span>((<a class="code" href="structdata.html">data</a>-&gt;set.httpreq == <a class="code" href="urldata_8h.html#ac67e77846b7b67d5808da8f1dfa2eab8aae19a0f63b68ec93cabbd9f3074fb496">HTTPREQ_POST</a></div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        || <a class="code" href="structdata.html">data</a>-&gt;set.httpreq == <a class="code" href="urldata_8h.html#ac67e77846b7b67d5808da8f1dfa2eab8ae11eeb30f15276332563390b730fd389">HTTPREQ_POST_FORM</a></div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;        || <a class="code" href="structdata.html">data</a>-&gt;set.httpreq == <a class="code" href="urldata_8h.html#ac67e77846b7b67d5808da8f1dfa2eab8a34d2478b945364d0d1bc6cb5f2845f71">HTTPREQ_POST_MIME</a>)</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;       &amp;&amp; !(<a class="code" href="structdata.html">data</a>-&gt;set.keep_post &amp; <a class="code" href="curl_8h.html#a02bb343e31cce7e50c7623ced74e5d09">CURL_REDIR_POST_302</a>)) {</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;      <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Switch from POST to GET\n&quot;</span>);</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;      <a class="code" href="structdata.html">data</a>-&gt;set.httpreq = <a class="code" href="urldata_8h.html#ac67e77846b7b67d5808da8f1dfa2eab8ae4322de705c516b61756f9874183ef05">HTTPREQ_GET</a>;</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    }</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;  <span class="keywordflow">case</span> 303: <span class="comment">/* See Other */</span></div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    <span class="comment">/* Disable both types of POSTs, unless the user explicitly</span></div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;<span class="comment">       asks for POST after POST */</span></div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;set.httpreq != <a class="code" href="urldata_8h.html#ac67e77846b7b67d5808da8f1dfa2eab8ae4322de705c516b61756f9874183ef05">HTTPREQ_GET</a></div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;      &amp;&amp; !(<a class="code" href="structdata.html">data</a>-&gt;set.keep_post &amp; <a class="code" href="curl_8h.html#a381b5af92e29a2b013413ae7e9cae096">CURL_REDIR_POST_303</a>)) {</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;      <a class="code" href="structdata.html">data</a>-&gt;set.httpreq = <a class="code" href="urldata_8h.html#ac67e77846b7b67d5808da8f1dfa2eab8ae4322de705c516b61756f9874183ef05">HTTPREQ_GET</a>; <span class="comment">/* enforce GET request */</span></div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;      <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(<a class="code" href="structdata.html">data</a>, <span class="stringliteral">&quot;Disables POST, goes with %s\n&quot;</span>,</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;            <a class="code" href="structdata.html">data</a>-&gt;set.opt_no_body?<span class="stringliteral">&quot;HEAD&quot;</span>:<span class="stringliteral">&quot;GET&quot;</span>);</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    }</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;  <span class="keywordflow">case</span> 304: <span class="comment">/* Not Modified */</span></div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    <span class="comment">/* 304 means we did a conditional request and it was &quot;Not modified&quot;.</span></div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;<span class="comment">     * We shouldn&#39;t get any Location: header in this response!</span></div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  <span class="keywordflow">case</span> 305: <span class="comment">/* Use Proxy */</span></div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <span class="comment">/* (quote from RFC2616, section 10.3.6):</span></div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;<span class="comment">     * &quot;The requested resource MUST be accessed through the proxy given</span></div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;<span class="comment">     * by the Location field. The Location field gives the URI of the</span></div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;<span class="comment">     * proxy.  The recipient is expected to repeat this single request</span></div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;<span class="comment">     * via the proxy. 305 responses MUST only be generated by origin</span></div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;<span class="comment">     * servers.&quot;</span></div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;  }</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;  <a class="code" href="progress_8c.html#a1344967836d86ae13b5739ed0a6e6916">Curl_pgrsTime</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="progress_8h.html#abc090d144fb55d31dff488d24c46fb2aa2356d042c0b8d22c2c319bd33f0b3d44">TIMER_REDIRECT</a>);</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;  <a class="code" href="progress_8c.html#ad9dca3b2d400d41c3f7d255a9fedcf59">Curl_pgrsResetTransferSizes</a>(<a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* CURL_DISABLE_HTTP */</span><span class="preprocessor"></span></div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;}</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;<span class="comment">/* Returns CURLE_OK *and* sets &#39;*url&#39; if a request retry is wanted.</span></div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;<span class="comment">   NOTE: that the *url is malloc()ed. */</span></div><div class="line"><a name="l01673"></a><span class="lineno"><a class="line" href="transfer_8h.html#a6315105ff113a2067916488c9cce4905"> 1673</a></span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="transfer_8c.html#a6315105ff113a2067916488c9cce4905">Curl_retry_request</a>(<span class="keyword">struct</span> <a class="code" href="structconnectdata.html">connectdata</a> *conn,</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;                            <span class="keywordtype">char</span> **<a class="code" href="_b_l_e_eddystone_u_r_l_8h.html#ad62c324cbfcc92532598792c6d0f6494">url</a>)</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;{</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="structdata.html">data</a> = conn-&gt;<a class="code" href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">data</a>;</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  <span class="keywordtype">bool</span> retry = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  *<a class="code" href="_b_l_e_eddystone_u_r_l_8h.html#ad62c324cbfcc92532598792c6d0f6494">url</a> = NULL;</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;  <span class="comment">/* if we&#39;re talking upload, we can&#39;t do the checks below, unless the protocol</span></div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;<span class="comment">     is HTTP as when uploading over HTTP we will still get a response */</span></div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;set.upload &amp;&amp;</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;     !(conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a58a76486bc087b55e1e7a3bf8e90254c">protocol</a>&amp;(<a class="code" href="urldata_8h.html#a9d346cfcc0046f6c6ed206bde086ab2d">PROTO_FAMILY_HTTP</a>|<a class="code" href="curl_8h.html#a57c429ed3dc3a2dc9ff5c6eba392b6b2">CURLPROTO_RTSP</a>)))</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;  <span class="keywordflow">if</span>((<a class="code" href="structdata.html">data</a>-&gt;req.bytecount + <a class="code" href="structdata.html">data</a>-&gt;req.headerbytecount == 0) &amp;&amp;</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;      conn-&gt;<a class="code" href="structconnectdata.html#a9312f162d29fe7f59bc2b5dbeda85d9d">bits</a>.<a class="code" href="struct_connect_bits.html#a40c9341dbcd23241fd1b75054cf050a2">reuse</a> &amp;&amp;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;      (!<a class="code" href="structdata.html">data</a>-&gt;set.opt_no_body</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;        || (conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a58a76486bc087b55e1e7a3bf8e90254c">protocol</a> &amp; <a class="code" href="urldata_8h.html#a9d346cfcc0046f6c6ed206bde086ab2d">PROTO_FAMILY_HTTP</a>)) &amp;&amp;</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;      (<a class="code" href="structdata.html">data</a>-&gt;set.rtspreq != <a class="code" href="urldata_8h.html#a816857c637b57c60b680d1bf575ef159ab40fcc18591226e7876ea08ef2b72c66">RTSPREQ_RECEIVE</a>))</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <span class="comment">/* We got no data, we attempted to re-use a connection. For HTTP this</span></div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;<span class="comment">       can be a retry so we try again regardless if we expected a body.</span></div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;<span class="comment">       For other protocols we only try again only if we expected a body.</span></div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;<span class="comment">       This might happen if the connection was left alive when we were</span></div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;<span class="comment">       done using it before, but that was closed when we wanted to read from</span></div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;<span class="comment">       it again. Bad luck. Retry the same request on a fresh connect! */</span></div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    retry = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;state.refused_stream &amp;&amp;</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;          (<a class="code" href="structdata.html">data</a>-&gt;req.bytecount + <a class="code" href="structdata.html">data</a>-&gt;req.headerbytecount == 0) ) {</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    <span class="comment">/* This was sent on a refused stream, safe to rerun. A refused stream</span></div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;<span class="comment">       error can typically only happen on HTTP/2 level if the stream is safe</span></div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;<span class="comment">       to issue again, but the nghttp2 API can deliver the message to other</span></div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;<span class="comment">       streams as well, which is why this adds the check the data counters</span></div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;<span class="comment">       too. */</span></div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(conn-&gt;<a class="code" href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">data</a>, <span class="stringliteral">&quot;REFUSED_STREAM, retrying a fresh connect\n&quot;</span>);</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <a class="code" href="structdata.html">data</a>-&gt;state.refused_stream = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>; <span class="comment">/* clear again */</span></div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    retry = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;  }</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;  <span class="keywordflow">if</span>(retry) {</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    <a class="code" href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a>(conn-&gt;<a class="code" href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">data</a>, <span class="stringliteral">&quot;Connection died, retrying a fresh connect\n&quot;</span>);</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    *<a class="code" href="_b_l_e_eddystone_u_r_l_8h.html#ad62c324cbfcc92532598792c6d0f6494">url</a> = <a class="code" href="curl__memory_8h.html#aa3f578f8f1eaebf25b2e2313db31cb40">strdup</a>(conn-&gt;<a class="code" href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">data</a>-&gt;<a class="code" href="struct_curl__easy.html#ada05343783606cce7fe3f8a583aeb50b">change</a>.<a class="code" href="struct_dynamic_static.html#accca10153cd39e65ed19e507cf45e3a9">url</a>);</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    <span class="keywordflow">if</span>(!*<a class="code" href="_b_l_e_eddystone_u_r_l_8h.html#ad62c324cbfcc92532598792c6d0f6494">url</a>)</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951aba5a22c9f705ed27933344be221fe937">CURLE_OUT_OF_MEMORY</a>;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <a class="code" href="connect_8h.html#a0f98be540dd5a5f56c9ec98dc2489661">connclose</a>(conn, <span class="stringliteral">&quot;retry&quot;</span>); <span class="comment">/* close this connection */</span></div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    conn-&gt;<a class="code" href="structconnectdata.html#a9312f162d29fe7f59bc2b5dbeda85d9d">bits</a>.<a class="code" href="struct_connect_bits.html#a2abc75753ca4206fe82edfd27c1479c6">retry</a> = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>; <span class="comment">/* mark this as a connection we&#39;re about</span></div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;<span class="comment">                                to retry. Marking it this way should</span></div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;<span class="comment">                                prevent i.e HTTP transfers to return</span></div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;<span class="comment">                                error just because nothing has been</span></div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;<span class="comment">                                transferred! */</span></div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a58a76486bc087b55e1e7a3bf8e90254c">protocol</a>&amp;<a class="code" href="urldata_8h.html#a9d346cfcc0046f6c6ed206bde086ab2d">PROTO_FAMILY_HTTP</a>) {</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;      <span class="keyword">struct </span><a class="code" href="struct_h_t_t_p.html">HTTP</a> *<a class="code" href="proto-redir_8d.html#a3663ac2460793e505561ad6c89686402">http</a> = <a class="code" href="structdata.html">data</a>-&gt;req.protop;</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="proto-redir_8d.html#a3663ac2460793e505561ad6c89686402">http</a>-&gt;<a class="code" href="struct_h_t_t_p.html#aba0d54486cf031467f38895a0c29a5b3">writebytecount</a>) {</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;        <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="transfer_8c.html#a1ccf9c16ae7d51395fc19e946da56c09">Curl_readrewind</a>(conn);</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>) {</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;          <a class="code" href="memdebug_8h.html#a795660f73c902cc80ac0fe6cda0dbd1c">Curl_safefree</a>(*<a class="code" href="_b_l_e_eddystone_u_r_l_8h.html#ad62c324cbfcc92532598792c6d0f6494">url</a>);</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;        }</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;      }</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;    }</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;  }</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;}</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;<span class="comment"> * Curl_setup_transfer() is called to setup some basic properties for the</span></div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;<span class="comment"> * upcoming transfer.</span></div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l01743"></a><span class="lineno"><a class="line" href="transfer_8h.html#ad8a9576bf2b4400ad0a0826699589c07"> 1743</a></span>&#160;<a class="code" href="transfer_8c.html#a8ccd1948f2a90c90b6fd1ac993e44a32">Curl_setup_transfer</a>(</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;  <span class="keyword">struct</span> <a class="code" href="structconnectdata.html">connectdata</a> *conn, <span class="comment">/* connection data */</span></div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  <span class="keywordtype">int</span> sockindex,            <span class="comment">/* socket index to read from or -1 */</span></div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>,          <span class="comment">/* -1 if unknown at this point */</span></div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  <span class="keywordtype">bool</span> getheader,           <span class="comment">/* TRUE if header parsing is wanted */</span></div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;  <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> *bytecountp,   <span class="comment">/* return number of bytes read or NULL */</span></div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;  <span class="keywordtype">int</span> writesockindex,       <span class="comment">/* socket index to write to, it may very well be</span></div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;<span class="comment">                               the same we read from. -1 disables */</span></div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;  <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> *writecountp   <span class="comment">/* return number of bytes written or NULL */</span></div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;  )</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;{</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="get_8d.html#a38b0ef81b65f2aee282c8c217a123176">data</a>;</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;  <span class="keyword">struct </span><a class="code" href="struct_single_request.html">SingleRequest</a> *k;</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;  <a class="code" href="curl__setup__once_8h.html#a23d7b88872d6ead46c978b567908d587">DEBUGASSERT</a>(conn != NULL);</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;  <a class="code" href="structdata.html">data</a> = conn-&gt;<a class="code" href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">data</a>;</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;  k = &amp;<a class="code" href="structdata.html">data</a>-&gt;req;</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;  <a class="code" href="curl__setup__once_8h.html#a23d7b88872d6ead46c978b567908d587">DEBUGASSERT</a>((sockindex &lt;= 1) &amp;&amp; (sockindex &gt;= -1));</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;  <span class="keywordflow">if</span>(conn-&gt;<a class="code" href="structconnectdata.html#a9312f162d29fe7f59bc2b5dbeda85d9d">bits</a>.<a class="code" href="struct_connect_bits.html#a72ceb38665fe6374e78ebb8ca8d5e33a">multiplex</a> || conn-&gt;<a class="code" href="structconnectdata.html#a8c6daf7fa40e95c75eac915b7496a32a">httpversion</a> == 20) {</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    <span class="comment">/* when multiplexing, the read/write sockets need to be the same! */</span></div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    conn-&gt;<a class="code" href="structconnectdata.html#adbc9021ab6a2581b41035b181d27a1ea">sockfd</a> = sockindex == -1 ?</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;      ((writesockindex == -1 ? <a class="code" href="curl_8h.html#ada0bbe252b7b370ef4e135b93b2fe71e">CURL_SOCKET_BAD</a> : conn-&gt;<a class="code" href="structconnectdata.html#a13cc2123ad38902e8ad44e67f10ed7aa">sock</a>[writesockindex])) :</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;      conn-&gt;<a class="code" href="structconnectdata.html#a13cc2123ad38902e8ad44e67f10ed7aa">sock</a>[sockindex];</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    conn-&gt;<a class="code" href="structconnectdata.html#a73d6d39e7554e4d764099ab3f1181a40">writesockfd</a> = conn-&gt;<a class="code" href="structconnectdata.html#adbc9021ab6a2581b41035b181d27a1ea">sockfd</a>;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;  }</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    conn-&gt;<a class="code" href="structconnectdata.html#adbc9021ab6a2581b41035b181d27a1ea">sockfd</a> = sockindex == -1 ?</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;      <a class="code" href="curl_8h.html#ada0bbe252b7b370ef4e135b93b2fe71e">CURL_SOCKET_BAD</a> : conn-&gt;<a class="code" href="structconnectdata.html#a13cc2123ad38902e8ad44e67f10ed7aa">sock</a>[sockindex];</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    conn-&gt;<a class="code" href="structconnectdata.html#a73d6d39e7554e4d764099ab3f1181a40">writesockfd</a> = writesockindex == -1 ?</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      <a class="code" href="curl_8h.html#ada0bbe252b7b370ef4e135b93b2fe71e">CURL_SOCKET_BAD</a>:conn-&gt;<a class="code" href="structconnectdata.html#a13cc2123ad38902e8ad44e67f10ed7aa">sock</a>[writesockindex];</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;  }</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;  k-&gt;<a class="code" href="struct_single_request.html#aec6b44088a4ed23d680c294ec83443db">getheader</a> = <a class="code" href="struct_single_request.html#aec6b44088a4ed23d680c294ec83443db">getheader</a>;</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  k-&gt;<a class="code" href="struct_single_request.html#a7b830d1607062193706245f7f4512ac9">size</a> = <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>;</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;  k-&gt;<a class="code" href="struct_single_request.html#aa114fbb6f13e62c24d25799e6b8ab740">bytecountp</a> = <a class="code" href="struct_single_request.html#aa114fbb6f13e62c24d25799e6b8ab740">bytecountp</a>;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;  k-&gt;<a class="code" href="struct_single_request.html#a5c32fec94e8dd89dee43a9da394d0729">writebytecountp</a> = writecountp;</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  <span class="comment">/* The code sequence below is placed in this function just because all</span></div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;<span class="comment">     necessary input is not always known in do_complete() as this function may</span></div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;<span class="comment">     be called after that */</span></div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  <span class="keywordflow">if</span>(!k-&gt;<a class="code" href="struct_single_request.html#aec6b44088a4ed23d680c294ec83443db">getheader</a>) {</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    k-&gt;<a class="code" href="struct_single_request.html#a97c471abe695b617c7695de635b49440">header</a> = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> &gt; 0)</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;      <a class="code" href="progress_8c.html#a00f01952b08507f31def8af5b088e53f">Curl_pgrsSetDownloadSize</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>);</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;  }</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;  <span class="comment">/* we want header and/or body, if neither then don&#39;t do this! */</span></div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;  <span class="keywordflow">if</span>(k-&gt;<a class="code" href="struct_single_request.html#aec6b44088a4ed23d680c294ec83443db">getheader</a> || !<a class="code" href="structdata.html">data</a>-&gt;set.opt_no_body) {</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    <span class="keywordflow">if</span>(sockindex != -1)</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;      k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a> |= <a class="code" href="urldata_8h.html#ab141b3290dad267f76cd77a91c641146">KEEP_RECV</a>;</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    <span class="keywordflow">if</span>(writesockindex != -1) {</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;      <span class="keyword">struct </span><a class="code" href="struct_h_t_t_p.html">HTTP</a> *<a class="code" href="proto-redir_8d.html#a3663ac2460793e505561ad6c89686402">http</a> = <a class="code" href="structdata.html">data</a>-&gt;req.protop;</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;      <span class="comment">/* HTTP 1.1 magic:</span></div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;<span class="comment">         Even if we require a 100-return code before uploading data, we might</span></div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;<span class="comment">         need to write data before that since the REQUEST may not have been</span></div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;<span class="comment">         finished sent off just yet.</span></div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;<span class="comment">         Thus, we must check if the request has been sent before we set the</span></div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;<span class="comment">         state info where we wait for the 100-return code</span></div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;<span class="comment">      */</span></div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;      <span class="keywordflow">if</span>((<a class="code" href="structdata.html">data</a>-&gt;state.expect100header) &amp;&amp;</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;         (conn-&gt;<a class="code" href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">handler</a>-&gt;<a class="code" href="struct_curl__handler.html#a58a76486bc087b55e1e7a3bf8e90254c">protocol</a>&amp;<a class="code" href="urldata_8h.html#a9d346cfcc0046f6c6ed206bde086ab2d">PROTO_FAMILY_HTTP</a>) &amp;&amp;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;         (<a class="code" href="proto-redir_8d.html#a3663ac2460793e505561ad6c89686402">http</a>-&gt;<a class="code" href="struct_h_t_t_p.html#af03324bf31aec4772357d7d826ca75d9">sending</a> == <a class="code" href="struct_h_t_t_p.html#a0249b638827cfaf90270d9c651a1035fa2d7e73a6f2680c507a7cc05dc974e1e4">HTTPSEND_BODY</a>)) {</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;        <span class="comment">/* wait with write until we either got 100-continue or a timeout */</span></div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;        k-&gt;<a class="code" href="struct_single_request.html#afcc113884223e5e1329d1f0a29427cb8">exp100</a> = <a class="code" href="urldata_8h.html#a0a15328bccb6e0baf3d1c6150eb39449a9d3a27f37991e9aeea4443efd051f309">EXP100_AWAITING_CONTINUE</a>;</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;        k-&gt;<a class="code" href="struct_single_request.html#ab837cef7bb2e4d7e9fb5c734a6a8013d">start100</a> = <a class="code" href="timeval_8c.html#ae736e803680e1b7fa2b2868317b4b91f">Curl_now</a>();</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;        <span class="comment">/* Set a timeout for the multi interface. Add the inaccuracy margin so</span></div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;<span class="comment">           that we don&#39;t fire slightly too early and get denied to run. */</span></div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;        <a class="code" href="multi_8c.html#a759a3f675165554a5f5d6e784afa7fe0">Curl_expire</a>(<a class="code" href="structdata.html">data</a>, <a class="code" href="structdata.html">data</a>-&gt;set.expect_100_timeout, <a class="code" href="urldata_8h.html#aabb7db968656c3ee0555ea3d8784310da9ce9f2e0534f44e7777fac288d3c522a">EXPIRE_100_TIMEOUT</a>);</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;      }</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>-&gt;state.expect100header)</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;          <span class="comment">/* when we&#39;ve sent off the rest of the headers, we must await a</span></div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;<span class="comment">             100-continue but first finish sending the request */</span></div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;          k-&gt;<a class="code" href="struct_single_request.html#afcc113884223e5e1329d1f0a29427cb8">exp100</a> = <a class="code" href="urldata_8h.html#a0a15328bccb6e0baf3d1c6150eb39449a94cd923039f125122b711f42a066077a">EXP100_SENDING_REQUEST</a>;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;        <span class="comment">/* enable the write bit when we&#39;re not waiting for continue */</span></div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;        k-&gt;<a class="code" href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">keepon</a> |= <a class="code" href="urldata_8h.html#a93237a6ee2f27182bb966487a03bce44">KEEP_SEND</a>;</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;      }</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;    } <span class="comment">/* if(writesockindex != -1) */</span></div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;  } <span class="comment">/* if(k-&gt;getheader || !data-&gt;set.opt_no_body) */</span></div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;}</div><div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951aaa7a948caaac0addf8754794663f48b1"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951aaa7a948caaac0addf8754794663f48b1">CURLE_OPERATION_TIMEDOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00498">curl.h:498</a></div></div>
<div class="ttc" id="http_8h_html_ab3f84083b58fb24a50404be32074445c"><div class="ttname"><a href="http_8h.html#ab3f84083b58fb24a50404be32074445c">Curl_httpchunk_read</a></div><div class="ttdeci">CHUNKcode Curl_httpchunk_read(struct connectdata *conn, char *datap, ssize_t length, ssize_t *wrote)</div><div class="ttdef"><b>Definition:</b> <a href="http__chunks_8c_source.html#l00109">http_chunks.c:109</a></div></div>
<div class="ttc" id="struct_curl__easy_html_a15aced4a015c44ff454787debee23520"><div class="ttname"><a href="struct_curl__easy.html#a15aced4a015c44ff454787debee23520">Curl_easy::state</a></div><div class="ttdeci">struct UrlState state</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01795">urldata.h:1795</a></div></div>
<div class="ttc" id="urlapi-int_8h_html_ac1c52efdd487ad52d2eaebc4963c5616"><div class="ttname"><a href="urlapi-int_8h.html#ac1c52efdd487ad52d2eaebc4963c5616">MAX_SCHEME_LEN</a></div><div class="ttdeci">#define MAX_SCHEME_LEN</div><div class="ttdef"><b>Definition:</b> <a href="urlapi-int_8h_source.html#l00027">urlapi-int.h:27</a></div></div>
<div class="ttc" id="struct_h_t_t_p_html_af03324bf31aec4772357d7d826ca75d9"><div class="ttname"><a href="struct_h_t_t_p.html#af03324bf31aec4772357d7d826ca75d9">HTTP::sending</a></div><div class="ttdeci">enum HTTP::@38 sending</div></div>
<div class="ttc" id="sendf_8h_html_aae18389dfefc98a5057629f6a46fd78f"><div class="ttname"><a href="sendf_8h.html#aae18389dfefc98a5057629f6a46fd78f">CLIENTWRITE_BODY</a></div><div class="ttdeci">#define CLIENTWRITE_BODY</div><div class="ttdef"><b>Definition:</b> <a href="sendf_8h_source.html#l00050">sendf.h:50</a></div></div>
<div class="ttc" id="struct_curl__easy_html_ae5487e7b1b5e91d240646325c575fd0c"><div class="ttname"><a href="struct_curl__easy.html#ae5487e7b1b5e91d240646325c575fd0c">Curl_easy::numsocks</a></div><div class="ttdeci">int numsocks</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01774">urldata.h:1774</a></div></div>
<div class="ttc" id="curl_8h_html_a9815b02ec8c789f7afcda6e4e1144d23"><div class="ttname"><a href="curl_8h.html#a9815b02ec8c789f7afcda6e4e1144d23">CURLPROTO_SCP</a></div><div class="ttdeci">#define CURLPROTO_SCP</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00869">curl.h:869</a></div></div>
<div class="ttc" id="pop3_8c_html_a36744463f05bbebba6da2a4eba301287"><div class="ttname"><a href="pop3_8c.html#a36744463f05bbebba6da2a4eba301287">Curl_pop3_write</a></div><div class="ttdeci">CURLcode Curl_pop3_write(struct connectdata *conn, char *str, size_t nread)</div><div class="ttdef"><b>Definition:</b> <a href="pop3_8c_source.html#l01428">pop3.c:1428</a></div></div>
<div class="ttc" id="structconnectdata_html_a9312f162d29fe7f59bc2b5dbeda85d9d"><div class="ttname"><a href="structconnectdata.html#a9312f162d29fe7f59bc2b5dbeda85d9d">connectdata::bits</a></div><div class="ttdeci">struct ConnectBits bits</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00894">urldata.h:894</a></div></div>
<div class="ttc" id="urlapi-int_8h_html_ae78d47dea8b3c5ad97e65a720c65cd65"><div class="ttname"><a href="urlapi-int_8h.html#ae78d47dea8b3c5ad97e65a720c65cd65">Curl_is_absolute_url</a></div><div class="ttdeci">bool Curl_is_absolute_url(const char *url, char *scheme, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="lib_2urlapi_8c_source.html#l00232">urlapi.c:232</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951ae6d701fdcc9728db65dadb0ec7d1eec1"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951ae6d701fdcc9728db65dadb0ec7d1eec1">CURLE_RECV_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00527">curl.h:527</a></div></div>
<div class="ttc" id="transfer_8c_html_a96a72bb80c85af1210d7fc49244920e9"><div class="ttname"><a href="transfer_8c.html#a96a72bb80c85af1210d7fc49244920e9">Curl_follow</a></div><div class="ttdeci">CURLcode Curl_follow(struct Curl_easy *data, char *newurl, followtype type)</div><div class="ttdef"><b>Definition:</b> <a href="transfer_8c_source.html#l01482">transfer.c:1482</a></div></div>
<div class="ttc" id="struct_curl__easy_html"><div class="ttname"><a href="struct_curl__easy.html">Curl_easy</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01755">urldata.h:1755</a></div></div>
<div class="ttc" id="struct_single_request_html_a10791150206c872b38d9ffa7b81d2a5c"><div class="ttname"><a href="struct_single_request.html#a10791150206c872b38d9ffa7b81d2a5c">SingleRequest::upload_present</a></div><div class="ttdeci">ssize_t upload_present</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00602">urldata.h:602</a></div></div>
<div class="ttc" id="strcase_8h_html"><div class="ttname"><a href="strcase_8h.html">strcase.h</a></div></div>
<div class="ttc" id="struct_single_request_html_a8e8fb4ea5e024d91a2c1ee812694254a"><div class="ttname"><a href="struct_single_request.html#a8e8fb4ea5e024d91a2c1ee812694254a">SingleRequest::upload_done</a></div><div class="ttdeci">bool upload_done</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00588">urldata.h:588</a></div></div>
<div class="ttc" id="progress_8c_html_a9458c724bbe21e16b9abf8f696a3916a"><div class="ttname"><a href="progress_8c.html#a9458c724bbe21e16b9abf8f696a3916a">Curl_pgrsSetUploadCounter</a></div><div class="ttdeci">void Curl_pgrsSetUploadCounter(struct Curl_easy *data, curl_off_t size)</div><div class="ttdef"><b>Definition:</b> <a href="progress_8c_source.html#l00336">progress.c:336</a></div></div>
<div class="ttc" id="connect_8h_html_a0f98be540dd5a5f56c9ec98dc2489661"><div class="ttname"><a href="connect_8h.html#a0f98be540dd5a5f56c9ec98dc2489661">connclose</a></div><div class="ttdeci">#define connclose(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="connect_8h_source.html#l00145">connect.h:145</a></div></div>
<div class="ttc" id="multi_8c_html_ab12ca318b29f9bd535afc9bea98b82bb"><div class="ttname"><a href="multi_8c.html#ab12ca318b29f9bd535afc9bea98b82bb">Curl_expire_done</a></div><div class="ttdeci">void Curl_expire_done(struct Curl_easy *data, expire_id id)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l03059">multi.c:3059</a></div></div>
<div class="ttc" id="urldata_8h_html_a9039214065dbe00b428b3ddcb2192f79"><div class="ttname"><a href="urldata_8h.html#a9039214065dbe00b428b3ddcb2192f79">CURL_DO_LINEEND_CONV</a></div><div class="ttdeci">#define CURL_DO_LINEEND_CONV</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01324">urldata.h:1324</a></div></div>
<div class="ttc" id="multi_8h_html_a11b8f4342e1cd64f59b37eda075627a6"><div class="ttname"><a href="multi_8h.html#a11b8f4342e1cd64f59b37eda075627a6">CURL_CSELECT_OUT</a></div><div class="ttdeci">#define CURL_CSELECT_OUT</div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00267">multi.h:267</a></div></div>
<div class="ttc" id="structcurl__slist_html"><div class="ttname"><a href="structcurl__slist.html">curl_slist</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l02394">curl.h:2394</a></div></div>
<div class="ttc" id="struct_single_request_html_a8516340c7835dfd47166418da27c40a0"><div class="ttname"><a href="struct_single_request.html#a8516340c7835dfd47166418da27c40a0">SingleRequest::maxdownload</a></div><div class="ttdeci">curl_off_t maxdownload</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00537">urldata.h:537</a></div></div>
<div class="ttc" id="transfer_8c_html_ac06679494870ed2a702de92759b06c7d"><div class="ttname"><a href="transfer_8c.html#ac06679494870ed2a702de92759b06c7d">Curl_readwrite</a></div><div class="ttdeci">CURLcode Curl_readwrite(struct connectdata *conn, struct Curl_easy *data, bool *done, bool *comeback)</div><div class="ttdef"><b>Definition:</b> <a href="transfer_8c_source.html#l01120">transfer.c:1120</a></div></div>
<div class="ttc" id="struct_single_request_html_a0ba1903778006c214622044083c106c4"><div class="ttname"><a href="struct_single_request.html#a0ba1903778006c214622044083c106c4">SingleRequest::forbidchunk</a></div><div class="ttdeci">bool forbidchunk</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00615">urldata.h:615</a></div></div>
<div class="ttc" id="progress_8c_html_a1344967836d86ae13b5739ed0a6e6916"><div class="ttname"><a href="progress_8c.html#a1344967836d86ae13b5739ed0a6e6916">Curl_pgrsTime</a></div><div class="ttdeci">void Curl_pgrsTime(struct Curl_easy *data, timerid timer)</div><div class="ttdef"><b>Definition:</b> <a href="progress_8c_source.html#l00166">progress.c:166</a></div></div>
<div class="ttc" id="urldata_8h_html_a56b23efdd8d04b0179b52224a251bcb7"><div class="ttname"><a href="urldata_8h.html#a56b23efdd8d04b0179b52224a251bcb7">FIRSTSOCKET</a></div><div class="ttdeci">#define FIRSTSOCKET</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00480">urldata.h:480</a></div></div>
<div class="ttc" id="connect_8h_html_a39c490691a02b6643d80882c12b189ed"><div class="ttname"><a href="connect_8h.html#a39c490691a02b6643d80882c12b189ed">streamclose</a></div><div class="ttdeci">#define streamclose(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="connect_8h_source.html#l00144">connect.h:144</a></div></div>
<div class="ttc" id="transfer_8c_html_a6afc3b6e11b658604fb00a32646c2f15"><div class="ttname"><a href="transfer_8c.html#a6afc3b6e11b658604fb00a32646c2f15">Curl_posttransfer</a></div><div class="ttdeci">CURLcode Curl_posttransfer(struct Curl_easy *data)</div><div class="ttdef"><b>Definition:</b> <a href="transfer_8c_source.html#l01463">transfer.c:1463</a></div></div>
<div class="ttc" id="wildcard_8h_html_ab4724474e988ca4793d666e449cd2b0aafac8d563d66d0af0fceb27bca71fc3ac"><div class="ttname"><a href="wildcard_8h.html#ab4724474e988ca4793d666e449cd2b0aafac8d563d66d0af0fceb27bca71fc3ac">CURLWC_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="wildcard_8h_source.html#l00032">wildcard.h:32</a></div></div>
<div class="ttc" id="curl_8h_html_ada0bbe252b7b370ef4e135b93b2fe71e"><div class="ttname"><a href="curl_8h.html#ada0bbe252b7b370ef4e135b93b2fe71e">CURL_SOCKET_BAD</a></div><div class="ttdeci">#define CURL_SOCKET_BAD</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00131">curl.h:131</a></div></div>
<div class="ttc" id="struct_single_request_html_a42d81b6759b5810f79c4b743288a36f5"><div class="ttname"><a href="struct_single_request.html#a42d81b6759b5810f79c4b743288a36f5">SingleRequest::now</a></div><div class="ttdeci">struct curltime now</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00552">urldata.h:552</a></div></div>
<div class="ttc" id="structconnectdata_html_a78797dc69666513b9115491097cdcc40"><div class="ttname"><a href="structconnectdata.html#a78797dc69666513b9115491097cdcc40">connectdata::cselect_bits</a></div><div class="ttdeci">int cselect_bits</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01015">urldata.h:1015</a></div></div>
<div class="ttc" id="urldata_8h_html_aabb7db968656c3ee0555ea3d8784310dabe4de12f4e6f14e2ea88bc30d544509c"><div class="ttname"><a href="urldata_8h.html#aabb7db968656c3ee0555ea3d8784310dabe4de12f4e6f14e2ea88bc30d544509c">EXPIRE_CONNECTTIMEOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01208">urldata.h:1208</a></div></div>
<div class="ttc" id="connect_8h_html"><div class="ttname"><a href="connect_8h.html">connect.h</a></div></div>
<div class="ttc" id="sendf_8h_html_ae8e06000059e436c9c404603126718d6"><div class="ttname"><a href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a></div><div class="ttdeci">#define failf</div><div class="ttdef"><b>Definition:</b> <a href="sendf_8h_source.html#l00048">sendf.h:48</a></div></div>
<div class="ttc" id="http__chunks_8h_html_a5825bd9da56a09bfd4380b161b4e33ecae1530ccd260bd8f764651103e4b4cc93"><div class="ttname"><a href="http__chunks_8h.html#a5825bd9da56a09bfd4380b161b4e33ecae1530ccd260bd8f764651103e4b4cc93">CHUNKE_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="http__chunks_8h_source.html#l00070">http_chunks.h:70</a></div></div>
<div class="ttc" id="struct_single_request_html_a6ca30fe8e465c2b5be16ee98769120b8"><div class="ttname"><a href="struct_single_request.html#a6ca30fe8e465c2b5be16ee98769120b8">SingleRequest::keepon</a></div><div class="ttdeci">int keepon</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00586">urldata.h:586</a></div></div>
<div class="ttc" id="sendf_8h_html"><div class="ttname"><a href="sendf_8h.html">sendf.h</a></div></div>
<div class="ttc" id="urldata_8h_html_a816857c637b57c60b680d1bf575ef159ab40fcc18591226e7876ea08ef2b72c66"><div class="ttname"><a href="urldata_8h.html#a816857c637b57c60b680d1bf575ef159ab40fcc18591226e7876ea08ef2b72c66">RTSPREQ_RECEIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01157">urldata.h:1157</a></div></div>
<div class="ttc" id="curl__memory_8h_html_aa3f578f8f1eaebf25b2e2313db31cb40"><div class="ttname"><a href="curl__memory_8h.html#aa3f578f8f1eaebf25b2e2313db31cb40">strdup</a></div><div class="ttdeci">#define strdup(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="curl__memory_8h_source.html#l00122">curl_memory.h:122</a></div></div>
<div class="ttc" id="urlapi_8h_html_abfb2378e801e13033e70c3819d8afca1"><div class="ttname"><a href="urlapi_8h.html#abfb2378e801e13033e70c3819d8afca1">curl_url_get</a></div><div class="ttdeci">CURL_EXTERN CURLUcode curl_url_get(CURLU *handle, CURLUPart what, char **part, unsigned int flags)</div><div class="ttdef"><b>Definition:</b> <a href="lib_2urlapi_8c_source.html#l00920">urlapi.c:920</a></div></div>
<div class="ttc" id="struct_single_request_html_a6ded6fbb86cb5457049ff225c7ee8827"><div class="ttname"><a href="struct_single_request.html#a6ded6fbb86cb5457049ff225c7ee8827">SingleRequest::ignorebody</a></div><div class="ttdeci">bool ignorebody</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00591">urldata.h:591</a></div></div>
<div class="ttc" id="proto-redir_8d_html_a3663ac2460793e505561ad6c89686402"><div class="ttname"><a href="proto-redir_8d.html#a3663ac2460793e505561ad6c89686402">http</a></div><div class="ttdeci">Long allow only HTTP and HTTPS on http</div><div class="ttdef"><b>Definition:</b> <a href="proto-redir_8d_source.html#l00010">proto-redir.d:10</a></div></div>
<div class="ttc" id="structconnectdata_html_ae7924587f916593e1fb682086f298ce8"><div class="ttname"><a href="structconnectdata.html#ae7924587f916593e1fb682086f298ce8">connectdata::handler</a></div><div class="ttdeci">const struct Curl_handler * handler</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00905">urldata.h:905</a></div></div>
<div class="ttc" id="structconnectdata_html_adbc9021ab6a2581b41035b181d27a1ea"><div class="ttname"><a href="structconnectdata.html#adbc9021ab6a2581b41035b181d27a1ea">connectdata::sockfd</a></div><div class="ttdeci">curl_socket_t sockfd</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00919">urldata.h:919</a></div></div>
<div class="ttc" id="curl__setup__once_8h_html_a23d7b88872d6ead46c978b567908d587"><div class="ttname"><a href="curl__setup__once_8h.html#a23d7b88872d6ead46c978b567908d587">DEBUGASSERT</a></div><div class="ttdeci">#define DEBUGASSERT(x)</div><div class="ttdef"><b>Definition:</b> <a href="curl__setup__once_8h_source.html#l00401">curl_setup_once.h:401</a></div></div>
<div class="ttc" id="urldata_8h_html_a0a15328bccb6e0baf3d1c6150eb39449ac77a92a2088eebb5391259dcf6eb9952"><div class="ttname"><a href="urldata_8h.html#a0a15328bccb6e0baf3d1c6150eb39449ac77a92a2088eebb5391259dcf6eb9952">EXP100_SEND_DATA</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00490">urldata.h:490</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a></div><div class="ttdeci">CURLcode</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00457">curl.h:457</a></div></div>
<div class="ttc" id="multiif_8h_html_a4ae1fb64a27264765b6a2fe5aca78830"><div class="ttname"><a href="multiif_8h.html#a4ae1fb64a27264765b6a2fe5aca78830">GETSOCK_READSOCK</a></div><div class="ttdeci">#define GETSOCK_READSOCK(x)</div><div class="ttdef"><b>Definition:</b> <a href="multiif_8h_source.html#l00051">multiif.h:51</a></div></div>
<div class="ttc" id="transfer_8c_html_a055b20e035ac986f69148eaa4a44eaaa"><div class="ttname"><a href="transfer_8c.html#a055b20e035ac986f69148eaa4a44eaaa">Curl_init_CONNECT</a></div><div class="ttdeci">void Curl_init_CONNECT(struct Curl_easy *data)</div><div class="ttdef"><b>Definition:</b> <a href="transfer_8c_source.html#l01342">transfer.c:1342</a></div></div>
<div class="ttc" id="struct_h_t_t_p_html_a0249b638827cfaf90270d9c651a1035fa2d7e73a6f2680c507a7cc05dc974e1e4"><div class="ttname"><a href="struct_h_t_t_p.html#a0249b638827cfaf90270d9c651a1035fa2d7e73a6f2680c507a7cc05dc974e1e4">HTTP::HTTPSEND_BODY</a></div><div class="ttdef"><b>Definition:</b> <a href="http_8h_source.html#l00155">http.h:155</a></div></div>
<div class="ttc" id="lib_2getinfo_8c_html_aac05d1e18067264a6b4b66e515cfdaaa"><div class="ttname"><a href="lib_2getinfo_8c.html#aac05d1e18067264a6b4b66e515cfdaaa">Curl_initinfo</a></div><div class="ttdeci">CURLcode Curl_initinfo(struct Curl_easy *data)</div><div class="ttdef"><b>Definition:</b> <a href="lib_2getinfo_8c_source.html#l00045">getinfo.c:45</a></div></div>
<div class="ttc" id="struct_curl__chunker_html_a96cc6de3b19afc87fe2712aa5e429d3d"><div class="ttname"><a href="struct_curl__chunker.html#a96cc6de3b19afc87fe2712aa5e429d3d">Curl_chunker::dataleft</a></div><div class="ttdeci">size_t dataleft</div><div class="ttdef"><b>Definition:</b> <a href="http__chunks_8h_source.html#l00087">http_chunks.h:87</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951a9e0c77963cb42831dba8d5ee1840e80b"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951a9e0c77963cb42831dba8d5ee1840e80b">CURLE_SEND_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00526">curl.h:526</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951a9c2850d0cbdb8743ad056150ca51e191"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951a9c2850d0cbdb8743ad056150ca51e191">CURLE_WEIRD_SERVER_REPLY</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00467">curl.h:467</a></div></div>
<div class="ttc" id="content__encoding_8c_html_aa026433194b6ea0fde7a6e8682148f32"><div class="ttname"><a href="content__encoding_8c.html#aa026433194b6ea0fde7a6e8682148f32">Curl_unencode_write</a></div><div class="ttdeci">CURLcode Curl_unencode_write(struct connectdata *conn, contenc_writer *writer, const char *buf, size_t nbytes)</div><div class="ttdef"><b>Definition:</b> <a href="content__encoding_8c_source.html#l00900">content_encoding.c:900</a></div></div>
<div class="ttc" id="urldata_8h_html_ab141b3290dad267f76cd77a91c641146"><div class="ttname"><a href="urldata_8h.html#ab141b3290dad267f76cd77a91c641146">KEEP_RECV</a></div><div class="ttdeci">#define KEEP_RECV</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00458">urldata.h:458</a></div></div>
<div class="ttc" id="structconnectdata_html_ad185ac65e3bff56d3be4f5d5bf0f02cb"><div class="ttname"><a href="structconnectdata.html#ad185ac65e3bff56d3be4f5d5bf0f02cb">connectdata::buf_len</a></div><div class="ttdeci">size_t buf_len</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00970">urldata.h:970</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951a8527394a7d1a590228373b95f55a61a7"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951a8527394a7d1a590228373b95f55a61a7">CURLE_AGAIN</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00564">curl.h:564</a></div></div>
<div class="ttc" id="structconnectdata_html_a25a7557b96b8081454080f8b2e7181a1"><div class="ttname"><a href="structconnectdata.html#a25a7557b96b8081454080f8b2e7181a1">connectdata::chunk</a></div><div class="ttdeci">struct Curl_chunker chunk</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00793">urldata.h:793</a></div></div>
<div class="ttc" id="curl_8h_html_a845d262749bd413d724b58e26f713f25ad13e365aab4f32a0ee193510118f533d"><div class="ttname"><a href="curl_8h.html#a845d262749bd413d724b58e26f713f25ad13e365aab4f32a0ee193510118f533d">CURL_TIMECOND_IFMODSINCE</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l02017">curl.h:2017</a></div></div>
<div class="ttc" id="multi_8c_html_af60eeb6175f9a25baeee40253c56330e"><div class="ttname"><a href="multi_8c.html#af60eeb6175f9a25baeee40253c56330e">Curl_set_in_callback</a></div><div class="ttdeci">void Curl_set_in_callback(struct Curl_easy *data, bool value)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l03174">multi.c:3174</a></div></div>
<div class="ttc" id="transfer_8h_html_add920a73e8f85870585b3391b7e4feed"><div class="ttname"><a href="transfer_8h.html#add920a73e8f85870585b3391b7e4feed">Curl_headersep</a></div><div class="ttdeci">#define Curl_headersep(x)</div><div class="ttdef"><b>Definition:</b> <a href="transfer_8h_source.html#l00025">transfer.h:25</a></div></div>
<div class="ttc" id="multi_8c_html_aa21e52a95b57b1ce52a02736bb0ca68c"><div class="ttname"><a href="multi_8c.html#aa21e52a95b57b1ce52a02736bb0ca68c">Curl_pipeline_wanted</a></div><div class="ttdeci">bool Curl_pipeline_wanted(const struct Curl_multi *multi, int bits)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l00811">multi.c:811</a></div></div>
<div class="ttc" id="urldata_8h_html_ac67e77846b7b67d5808da8f1dfa2eab8a34d2478b945364d0d1bc6cb5f2845f71"><div class="ttname"><a href="urldata_8h.html#ac67e77846b7b67d5808da8f1dfa2eab8a34d2478b945364d0d1bc6cb5f2845f71">HTTPREQ_POST_MIME</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01137">urldata.h:1137</a></div></div>
<div class="ttc" id="multi_8h_html_a19006903930bc7552c4e74ed6b32990f"><div class="ttname"><a href="multi_8h.html#a19006903930bc7552c4e74ed6b32990f">CURLPIPE_HTTP1</a></div><div class="ttdeci">#define CURLPIPE_HTTP1</div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00085">multi.h:85</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951ab9b2b0dca8aa242d128640dbfde66fc6"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951ab9b2b0dca8aa242d128640dbfde66fc6">CURLE_URL_MALFORMAT</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00461">curl.h:461</a></div></div>
<div class="ttc" id="struct_single_request_html_afb8f90bb8c150155d2c27ba5f9dabc6d"><div class="ttname"><a href="struct_single_request.html#afb8f90bb8c150155d2c27ba5f9dabc6d">SingleRequest::newurl</a></div><div class="ttdeci">char * newurl</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00597">urldata.h:597</a></div></div>
<div class="ttc" id="curl_8h_html"><div class="ttname"><a href="curl_8h.html">curl.h</a></div></div>
<div class="ttc" id="curl__memory_8h_html_a2eb0b03d1a9de9615a291b1205969069"><div class="ttname"><a href="curl__memory_8h.html#a2eb0b03d1a9de9615a291b1205969069">malloc</a></div><div class="ttdeci">#define malloc(size)</div><div class="ttdef"><b>Definition:</b> <a href="curl__memory_8h_source.html#l00124">curl_memory.h:124</a></div></div>
<div class="ttc" id="components_2curl_2include_2curl_2_system_8h_html_a3dca40ce1e998420175eabe37246e05b"><div class="ttname"><a href="components_2curl_2include_2curl_2_system_8h.html#a3dca40ce1e998420175eabe37246e05b">CURL_FORMAT_CURL_OFF_T</a></div><div class="ttdeci">#define CURL_FORMAT_CURL_OFF_T</div><div class="ttdef"><b>Definition:</b> <a href="components_2curl_2include_2curl_2_system_8h_source.html#l00395">system.h:395</a></div></div>
<div class="ttc" id="progress_8h_html_abc090d144fb55d31dff488d24c46fb2aaca28f218d1fd3c4e65cd7b4d2dfe32ed"><div class="ttname"><a href="progress_8h.html#abc090d144fb55d31dff488d24c46fb2aaca28f218d1fd3c4e65cd7b4d2dfe32ed">TIMER_STARTTRANSFER</a></div><div class="ttdef"><b>Definition:</b> <a href="progress_8h_source.html#l00036">progress.h:36</a></div></div>
<div class="ttc" id="progress_8c_html_a4887bd15abbedadf869cedab36e4eb34"><div class="ttname"><a href="progress_8c.html#a4887bd15abbedadf869cedab36e4eb34">Curl_pgrsStartNow</a></div><div class="ttdeci">void Curl_pgrsStartNow(struct Curl_easy *data)</div><div class="ttdef"><b>Definition:</b> <a href="progress_8c_source.html#l00230">progress.c:230</a></div></div>
<div class="ttc" id="unit1304_8c_html_a937d4dd628a8858b443a399410d2600b"><div class="ttname"><a href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a></div><div class="ttdeci">UNITTEST_START int result</div><div class="ttdef"><b>Definition:</b> <a href="unit1304_8c_source.html#l00049">unit1304.c:49</a></div></div>
<div class="ttc" id="struct_curl__handler_html_a58a76486bc087b55e1e7a3bf8e90254c"><div class="ttname"><a href="struct_curl__handler.html#a58a76486bc087b55e1e7a3bf8e90254c">Curl_handler::protocol</a></div><div class="ttdeci">unsigned int protocol</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00700">urldata.h:700</a></div></div>
<div class="ttc" id="struct_connect_bits_html_a40c9341dbcd23241fd1b75054cf050a2"><div class="ttname"><a href="struct_connect_bits.html#a40c9341dbcd23241fd1b75054cf050a2">ConnectBits::reuse</a></div><div class="ttdeci">bool reuse</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00382">urldata.h:382</a></div></div>
<div class="ttc" id="speedcheck_8h_html"><div class="ttname"><a href="speedcheck_8h.html">speedcheck.h</a></div></div>
<div class="ttc" id="cookie_8c_html_ae44350d9d4dd49e91e604b70c3573809"><div class="ttname"><a href="cookie_8c.html#ae44350d9d4dd49e91e604b70c3573809">Curl_cookie_loadfiles</a></div><div class="ttdeci">void Curl_cookie_loadfiles(struct Curl_easy *data)</div><div class="ttdef"><b>Definition:</b> <a href="cookie_8c_source.html#l00337">cookie.c:337</a></div></div>
<div class="ttc" id="http__chunks_8h_html_a00a95e212e978d27dded822d1eb5ca6cada1bd400ffe095d84a67c9cb84ee4368"><div class="ttname"><a href="http__chunks_8h.html#a00a95e212e978d27dded822d1eb5ca6cada1bd400ffe095d84a67c9cb84ee4368">CHUNK_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="http__chunks_8h_source.html#l00051">http_chunks.h:51</a></div></div>
<div class="ttc" id="http__chunks_8h_html_a5825bd9da56a09bfd4380b161b4e33eca189de71d73fd3b6c8fbc4b11fc16ad01"><div class="ttname"><a href="http__chunks_8h.html#a5825bd9da56a09bfd4380b161b4e33eca189de71d73fd3b6c8fbc4b11fc16ad01">CHUNKE_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="http__chunks_8h_source.html#l00069">http_chunks.h:69</a></div></div>
<div class="ttc" id="struct_h_t_t_p_html_a0249b638827cfaf90270d9c651a1035fa9d8155c9496f897f08cfcfbdd42a3cd0"><div class="ttname"><a href="struct_h_t_t_p.html#a0249b638827cfaf90270d9c651a1035fa9d8155c9496f897f08cfcfbdd42a3cd0">HTTP::HTTPSEND_REQUEST</a></div><div class="ttdef"><b>Definition:</b> <a href="http_8h_source.html#l00154">http.h:154</a></div></div>
<div class="ttc" id="content__encoding_8h_html"><div class="ttname"><a href="content__encoding_8h.html">content_encoding.h</a></div></div>
<div class="ttc" id="struct_curl__easy_html_ada05343783606cce7fe3f8a583aeb50b"><div class="ttname"><a href="struct_curl__easy.html#ada05343783606cce7fe3f8a583aeb50b">Curl_easy::change</a></div><div class="ttdeci">struct DynamicStatic change</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01789">urldata.h:1789</a></div></div>
<div class="ttc" id="urldata_8h_html_a4a561967b6a40f1b5cbec45beeff78a6"><div class="ttname"><a href="urldata_8h.html#a4a561967b6a40f1b5cbec45beeff78a6">KEEP_SEND_PAUSE</a></div><div class="ttdeci">#define KEEP_SEND_PAUSE</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00465">urldata.h:465</a></div></div>
<div class="ttc" id="components_2curl_2include_2curl_2_system_8h_html_a494e2b4279dc064f7ed1d0abd602b28d"><div class="ttname"><a href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a></div><div class="ttdeci">CURL_TYPEOF_CURL_OFF_T curl_off_t</div><div class="ttdef"><b>Definition:</b> <a href="components_2curl_2include_2curl_2_system_8h_source.html#l00442">system.h:442</a></div></div>
<div class="ttc" id="struct_curl__easy_html_ae50ee3c1668aaed84ae0338046f4f737"><div class="ttname"><a href="struct_curl__easy.html#ae50ee3c1668aaed84ae0338046f4f737">Curl_easy::multi</a></div><div class="ttdeci">struct Curl_multi * multi</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01777">urldata.h:1777</a></div></div>
<div class="ttc" id="unit1303_8c_html_ac8936188af0c1d2f8b9d0cd25fde43b2"><div class="ttname"><a href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a></div><div class="ttdeci">unsigned int i</div><div class="ttdef"><b>Definition:</b> <a href="unit1303_8c_source.html#l00078">unit1303.c:78</a></div></div>
<div class="ttc" id="wildcard_8c_html_accb01e4546f67b5392ef1f647f265ab2"><div class="ttname"><a href="wildcard_8c.html#accb01e4546f67b5392ef1f647f265ab2">Curl_wildcard_init</a></div><div class="ttdeci">CURLcode Curl_wildcard_init(struct WildcardData *wc)</div><div class="ttdef"><b>Definition:</b> <a href="wildcard_8c_source.html#l00039">wildcard.c:39</a></div></div>
<div class="ttc" id="urldata_8h_html_af1753ad9e9b8ef3ec4e2d6e8729409b6"><div class="ttname"><a href="urldata_8h.html#af1753ad9e9b8ef3ec4e2d6e8729409b6">KEEP_SENDBITS</a></div><div class="ttdeci">#define KEEP_SENDBITS</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00468">urldata.h:468</a></div></div>
<div class="ttc" id="curl__setup__once_8h_html_a9a32154c5232f39a3164f0c0abba32d7"><div class="ttname"><a href="curl__setup__once_8h.html#a9a32154c5232f39a3164f0c0abba32d7">WHILE_FALSE</a></div><div class="ttdeci">#define WHILE_FALSE</div><div class="ttdef"><b>Definition:</b> <a href="curl__setup__once_8h_source.html#l00337">curl_setup_once.h:337</a></div></div>
<div class="ttc" id="curl_8h_html_a7f016ee652c822683d1f48fdbe21dbb6"><div class="ttname"><a href="curl_8h.html#a7f016ee652c822683d1f48fdbe21dbb6">CURLPROTO_SFTP</a></div><div class="ttdeci">#define CURLPROTO_SFTP</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00870">curl.h:870</a></div></div>
<div class="ttc" id="urldata_8h_html_a0a15328bccb6e0baf3d1c6150eb39449a94cd923039f125122b711f42a066077a"><div class="ttname"><a href="urldata_8h.html#a0a15328bccb6e0baf3d1c6150eb39449a94cd923039f125122b711f42a066077a">EXP100_SENDING_REQUEST</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00492">urldata.h:492</a></div></div>
<div class="ttc" id="struct_single_request_html_a9da5df2779ae21bdf94e14359214dbcf"><div class="ttname"><a href="struct_single_request.html#a9da5df2779ae21bdf94e14359214dbcf">SingleRequest::timeofdoc</a></div><div class="ttdeci">time_t timeofdoc</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00580">urldata.h:580</a></div></div>
<div class="ttc" id="http_8h_html"><div class="ttname"><a href="http_8h.html">http.h</a></div></div>
<div class="ttc" id="timeval_8c_html_ae736e803680e1b7fa2b2868317b4b91f"><div class="ttname"><a href="timeval_8c.html#ae736e803680e1b7fa2b2868317b4b91f">Curl_now</a></div><div class="ttdeci">struct curltime Curl_now(void)</div><div class="ttdef"><b>Definition:</b> <a href="timeval_8c_source.html#l00154">timeval.c:154</a></div></div>
<div class="ttc" id="urlapi_8h_html_a38354ba89f94ee9d65db974f5040f6db"><div class="ttname"><a href="urlapi_8h.html#a38354ba89f94ee9d65db974f5040f6db">CURLU_NON_SUPPORT_SCHEME</a></div><div class="ttdeci">#define CURLU_NON_SUPPORT_SCHEME</div><div class="ttdef"><b>Definition:</b> <a href="urlapi_8h_source.html#l00070">urlapi.h:70</a></div></div>
<div class="ttc" id="curl__printf_8h_html"><div class="ttname"><a href="curl__printf_8h.html">curl_printf.h</a></div></div>
<div class="ttc" id="progress_8c_html_a40686d443707afea0c0e47cee805df01"><div class="ttname"><a href="progress_8c.html#a40686d443707afea0c0e47cee805df01">Curl_pgrsUpdate</a></div><div class="ttdeci">int Curl_pgrsUpdate(struct connectdata *conn)</div><div class="ttdef"><b>Definition:</b> <a href="progress_8c_source.html#l00369">progress.c:369</a></div></div>
<div class="ttc" id="curl__setup_8h_html_a5dd6efb91a5151f2bb4e4fff1b386582"><div class="ttname"><a href="curl__setup_8h.html#a5dd6efb91a5151f2bb4e4fff1b386582">CURLMIN</a></div><div class="ttdeci">#define CURLMIN(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="curl__setup_8h_source.html#l00810">curl_setup.h:810</a></div></div>
<div class="ttc" id="struct_single_request_html_a7b830d1607062193706245f7f4512ac9"><div class="ttname"><a href="struct_single_request.html#a7b830d1607062193706245f7f4512ac9">SingleRequest::size</a></div><div class="ttdeci">curl_off_t size</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00534">urldata.h:534</a></div></div>
<div class="ttc" id="vtls_8h_html"><div class="ttname"><a href="vtls_8h.html">vtls.h</a></div></div>
<div class="ttc" id="struct_single_request_html_a3c3d4ae5c2ddb7cc44bd01b794779269"><div class="ttname"><a href="struct_single_request.html#a3c3d4ae5c2ddb7cc44bd01b794779269">SingleRequest::upload_chunky</a></div><div class="ttdeci">bool upload_chunky</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00611">urldata.h:611</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951adaff0cec927d10c0ec5059ee0104ef62"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951adaff0cec927d10c0ec5059ee0104ef62">CURLE_READ_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00492">curl.h:492</a></div></div>
<div class="ttc" id="unit1304_8c_html_a82a69fcfe92d9db6dd585ccc532a2ab7"><div class="ttname"><a href="unit1304_8c.html#a82a69fcfe92d9db6dd585ccc532a2ab7">memcpy</a></div><div class="ttdeci">memcpy(filename, filename1, strlen(filename1))</div></div>
<div class="ttc" id="struct_single_request_html_afcc113884223e5e1329d1f0a29427cb8"><div class="ttname"><a href="struct_single_request.html#afcc113884223e5e1329d1f0a29427cb8">SingleRequest::exp100</a></div><div class="ttdeci">enum expect100 exp100</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00575">urldata.h:575</a></div></div>
<div class="ttc" id="multi_8h_html_ac2f6404b4a34b0b43b61315b3c214912"><div class="ttname"><a href="multi_8h.html#ac2f6404b4a34b0b43b61315b3c214912">CURL_CSELECT_ERR</a></div><div class="ttdeci">#define CURL_CSELECT_ERR</div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00268">multi.h:268</a></div></div>
<div class="ttc" id="vtls_8h_html_ac50ee79a0869be9ea58bda0388abde58"><div class="ttname"><a href="vtls_8h.html#ac50ee79a0869be9ea58bda0388abde58">Curl_ssl_data_pending</a></div><div class="ttdeci">#define Curl_ssl_data_pending(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="vtls_8h_source.html#l00267">vtls.h:267</a></div></div>
<div class="ttc" id="form_8d_html_a7aead736a07eaf25623ad7bfa1f0ee2d"><div class="ttname"><a href="form_8d.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a></div><div class="ttdeci">type</div><div class="ttdef"><b>Definition:</b> <a href="form_8d_source.html#l00048">form.d:48</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951aba5a22c9f705ed27933344be221fe937"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951aba5a22c9f705ed27933344be221fe937">CURLE_OUT_OF_MEMORY</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00493">curl.h:493</a></div></div>
<div class="ttc" id="structconnectdata_html_a8c6daf7fa40e95c75eac915b7496a32a"><div class="ttname"><a href="structconnectdata.html#a8c6daf7fa40e95c75eac915b7496a32a">connectdata::httpversion</a></div><div class="ttdeci">int httpversion</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00869">urldata.h:869</a></div></div>
<div class="ttc" id="transfer_8c_html_a1ccf9c16ae7d51395fc19e946da56c09"><div class="ttname"><a href="transfer_8c.html#a1ccf9c16ae7d51395fc19e946da56c09">Curl_readrewind</a></div><div class="ttdeci">CURLcode Curl_readrewind(struct connectdata *conn)</div><div class="ttdef"><b>Definition:</b> <a href="transfer_8c_source.html#l00283">transfer.c:283</a></div></div>
<div class="ttc" id="struct_single_request_html_ac259c8cd70d58252f455cf673e4d9df9"><div class="ttname"><a href="struct_single_request.html#ac259c8cd70d58252f455cf673e4d9df9">SingleRequest::content_range</a></div><div class="ttdeci">bool content_range</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00569">urldata.h:569</a></div></div>
<div class="ttc" id="curl_8h_html_abf6110d6bc48dd3362cd3f849cde56b6"><div class="ttname"><a href="curl_8h.html#abf6110d6bc48dd3362cd3f849cde56b6">CURL_REDIR_POST_301</a></div><div class="ttdeci">#define CURL_REDIR_POST_301</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l02008">curl.h:2008</a></div></div>
<div class="ttc" id="progress_8h_html"><div class="ttname"><a href="progress_8h.html">progress.h</a></div></div>
<div class="ttc" id="transfer_8c_html_a8ccd1948f2a90c90b6fd1ac993e44a32"><div class="ttname"><a href="transfer_8c.html#a8ccd1948f2a90c90b6fd1ac993e44a32">Curl_setup_transfer</a></div><div class="ttdeci">void Curl_setup_transfer(struct connectdata *conn, int sockindex, curl_off_t size, bool getheader, curl_off_t *bytecountp, int writesockindex, curl_off_t *writecountp)</div><div class="ttdef"><b>Definition:</b> <a href="transfer_8c_source.html#l01743">transfer.c:1743</a></div></div>
<div class="ttc" id="curl_8h_html_a57c429ed3dc3a2dc9ff5c6eba392b6b2"><div class="ttname"><a href="curl_8h.html#a57c429ed3dc3a2dc9ff5c6eba392b6b2">CURLPROTO_RTSP</a></div><div class="ttdeci">#define CURLPROTO_RTSP</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00883">curl.h:883</a></div></div>
<div class="ttc" id="curl__setup__once_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> <a href="curl__setup__once_8h_source.html#l00327">curl_setup_once.h:327</a></div></div>
<div class="ttc" id="struct_single_request_html_a83841cbaec57fb35d0ca5e9d1908d3b0"><div class="ttname"><a href="struct_single_request.html#a83841cbaec57fb35d0ca5e9d1908d3b0">SingleRequest::hbuflen</a></div><div class="ttdeci">size_t hbuflen</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00564">urldata.h:564</a></div></div>
<div class="ttc" id="struct_single_request_html_a5c32fec94e8dd89dee43a9da394d0729"><div class="ttname"><a href="struct_single_request.html#a5c32fec94e8dd89dee43a9da394d0729">SingleRequest::writebytecountp</a></div><div class="ttdeci">curl_off_t * writebytecountp</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00539">urldata.h:539</a></div></div>
<div class="ttc" id="urlapi_8h_html_a1cb93c92958648f06fab038f397cfeae"><div class="ttname"><a href="urlapi_8h.html#a1cb93c92958648f06fab038f397cfeae">curl_url_set</a></div><div class="ttdeci">CURL_EXTERN CURLUcode curl_url_set(CURLU *handle, CURLUPart what, const char *part, unsigned int flags)</div><div class="ttdef"><b>Definition:</b> <a href="lib_2urlapi_8c_source.html#l01097">urlapi.c:1097</a></div></div>
<div class="ttc" id="multi_8h_html_ac9841bc853b2a1874c9b5528b2ad3e5b"><div class="ttname"><a href="multi_8h.html#ac9841bc853b2a1874c9b5528b2ad3e5b">CURL_CSELECT_IN</a></div><div class="ttdeci">#define CURL_CSELECT_IN</div><div class="ttdef"><b>Definition:</b> <a href="multi_8h_source.html#l00266">multi.h:266</a></div></div>
<div class="ttc" id="mime_8h_html"><div class="ttname"><a href="mime_8h.html">mime.h</a></div></div>
<div class="ttc" id="struct_dynamic_static_html_accca10153cd39e65ed19e507cf45e3a9"><div class="ttname"><a href="struct_dynamic_static.html#accca10153cd39e65ed19e507cf45e3a9">DynamicStatic::url</a></div><div class="ttdeci">char * url</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01376">urldata.h:1376</a></div></div>
<div class="ttc" id="struct_single_request_html_a272e8b20707c1c2307574968495320d4"><div class="ttname"><a href="struct_single_request.html#a272e8b20707c1c2307574968495320d4">SingleRequest::writebytecount</a></div><div class="ttdeci">curl_off_t writebytecount</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00542">urldata.h:542</a></div></div>
<div class="ttc" id="struct_h_t_t_p_html_ad61a3f1f01ef29d9fa9a8b495f8abbfc"><div class="ttname"><a href="struct_h_t_t_p.html#ad61a3f1f01ef29d9fa9a8b495f8abbfc">HTTP::sendit</a></div><div class="ttdeci">curl_mimepart * sendit</div><div class="ttdef"><b>Definition:</b> <a href="http_8h_source.html#l00133">http.h:133</a></div></div>
<div class="ttc" id="struct_wildcard_data_html"><div class="ttname"><a href="struct_wildcard_data.html">WildcardData</a></div><div class="ttdef"><b>Definition:</b> <a href="wildcard_8h_source.html#l00046">wildcard.h:46</a></div></div>
<div class="ttc" id="mime_8c_html_a16da9e4dbf38be0096a6c63bd408c39c"><div class="ttname"><a href="mime_8c.html#a16da9e4dbf38be0096a6c63bd408c39c">Curl_mime_rewind</a></div><div class="ttdeci">CURLcode Curl_mime_rewind(curl_mimepart *part)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l01541">mime.c:1541</a></div></div>
<div class="ttc" id="connect_8c_html_aed32c0fb99c80a40c097c98a3eb03c74"><div class="ttname"><a href="connect_8c.html#aed32c0fb99c80a40c097c98a3eb03c74">Curl_timeleft</a></div><div class="ttdeci">timediff_t Curl_timeleft(struct Curl_easy *data, struct curltime *nowp, bool duringconnect)</div><div class="ttdef"><b>Definition:</b> <a href="connect_8c_source.html#l00184">connect.c:184</a></div></div>
<div class="ttc" id="urlapi_8h_html_aa61ba3e924e11f4a7f208aa051a5d2eba652d7cac677d1aca71efd0386e57f927"><div class="ttname"><a href="urlapi_8h.html#aa61ba3e924e11f4a7f208aa051a5d2eba652d7cac677d1aca71efd0386e57f927">CURLUPART_URL</a></div><div class="ttdef"><b>Definition:</b> <a href="urlapi_8h_source.html#l00052">urlapi.h:52</a></div></div>
<div class="ttc" id="url_8c_html_af403c3591d12b4ac9d7637de1cba3e62"><div class="ttname"><a href="url_8c.html#af403c3591d12b4ac9d7637de1cba3e62">Curl_uc_to_curlcode</a></div><div class="ttdeci">CURLcode Curl_uc_to_curlcode(CURLUcode uc)</div><div class="ttdef"><b>Definition:</b> <a href="url_8c_source.html#l02008">url.c:2008</a></div></div>
<div class="ttc" id="transfer_8c_html_a110f6f53341d61200abc2b0b7cdd53f2"><div class="ttname"><a href="transfer_8c.html#a110f6f53341d61200abc2b0b7cdd53f2">Curl_meets_timecondition</a></div><div class="ttdeci">bool Curl_meets_timecondition(struct Curl_easy *data, time_t timeofdoc)</div><div class="ttdef"><b>Definition:</b> <a href="transfer_8c_source.html#l00412">transfer.c:412</a></div></div>
<div class="ttc" id="urldata_8h_html_aabb7db968656c3ee0555ea3d8784310da5752eb3ce2744e0f02e05837624abf2c"><div class="ttname"><a href="urldata_8h.html#aabb7db968656c3ee0555ea3d8784310da5752eb3ce2744e0f02e05837624abf2c">EXPIRE_TIMEOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01214">urldata.h:1214</a></div></div>
<div class="ttc" id="progress_8h_html_abc090d144fb55d31dff488d24c46fb2aa2356d042c0b8d22c2c319bd33f0b3d44"><div class="ttname"><a href="progress_8h.html#abc090d144fb55d31dff488d24c46fb2aa2356d042c0b8d22c2c319bd33f0b3d44">TIMER_REDIRECT</a></div><div class="ttdef"><b>Definition:</b> <a href="progress_8h_source.html#l00039">progress.h:39</a></div></div>
<div class="ttc" id="http__chunks_8h_html_a5825bd9da56a09bfd4380b161b4e33ecab882035f19c6e654f06d8fb771e659bb"><div class="ttname"><a href="http__chunks_8h.html#a5825bd9da56a09bfd4380b161b4e33ecab882035f19c6e654f06d8fb771e659bb">CHUNKE_WRITE_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="http__chunks_8h_source.html#l00074">http_chunks.h:74</a></div></div>
<div class="ttc" id="strcase_8h_html_a48c605aaef9b3681c41d91096b6baad0"><div class="ttname"><a href="strcase_8h.html#a48c605aaef9b3681c41d91096b6baad0">strncasecompare</a></div><div class="ttdeci">#define strncasecompare(a, b, c)</div><div class="ttdef"><b>Definition:</b> <a href="strcase_8h_source.html#l00036">strcase.h:36</a></div></div>
<div class="ttc" id="select_8h_html"><div class="ttname"><a href="select_8h.html">select.h</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951a309ade641c94c3e710ae887405dba78b"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951a309ade641c94c3e710ae887405dba78b">CURLE_ABORTED_BY_CALLBACK</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00512">curl.h:512</a></div></div>
<div class="ttc" id="vtls_8h_html_a646fd2a8d6796d8ff481bffc36b371d5"><div class="ttname"><a href="vtls_8h.html#a646fd2a8d6796d8ff481bffc36b371d5">Curl_ssl_initsessions</a></div><div class="ttdeci">#define Curl_ssl_initsessions(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="vtls_8h_source.html#l00265">vtls.h:265</a></div></div>
<div class="ttc" id="urldata_8h_html_ac67e77846b7b67d5808da8f1dfa2eab8aae19a0f63b68ec93cabbd9f3074fb496"><div class="ttname"><a href="urldata_8h.html#ac67e77846b7b67d5808da8f1dfa2eab8aae19a0f63b68ec93cabbd9f3074fb496">HTTPREQ_POST</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01135">urldata.h:1135</a></div></div>
<div class="ttc" id="struct_single_request_html_abad0ca3c76032134d15077908bdbc7a1"><div class="ttname"><a href="struct_single_request.html#abad0ca3c76032134d15077908bdbc7a1">SingleRequest::str</a></div><div class="ttdeci">char * str</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00565">urldata.h:565</a></div></div>
<div class="ttc" id="urldata_8h_html_a9607658ec977f6ca435daf26b82f6b3fa8effa4c4c5def044f3743a8250369058"><div class="ttname"><a href="urldata_8h.html#a9607658ec977f6ca435daf26b82f6b3fa8effa4c4c5def044f3743a8250369058">STRING_SET_URL</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01424">urldata.h:1424</a></div></div>
<div class="ttc" id="http__chunks_8h_html_a5825bd9da56a09bfd4380b161b4e33ec"><div class="ttname"><a href="http__chunks_8h.html#a5825bd9da56a09bfd4380b161b4e33ec">CHUNKcode</a></div><div class="ttdeci">CHUNKcode</div><div class="ttdef"><b>Definition:</b> <a href="http__chunks_8h_source.html#l00068">http_chunks.h:68</a></div></div>
<div class="ttc" id="progress_8c_html_a00f01952b08507f31def8af5b088e53f"><div class="ttname"><a href="progress_8c.html#a00f01952b08507f31def8af5b088e53f">Curl_pgrsSetDownloadSize</a></div><div class="ttdeci">void Curl_pgrsSetDownloadSize(struct Curl_easy *data, curl_off_t size)</div><div class="ttdef"><b>Definition:</b> <a href="progress_8c_source.html#l00341">progress.c:341</a></div></div>
<div class="ttc" id="non-ascii_8h_html_ab7de472e1367a01da556c8f5acad93bb"><div class="ttname"><a href="non-ascii_8h.html#ab7de472e1367a01da556c8f5acad93bb">Curl_convert_to_network</a></div><div class="ttdeci">#define Curl_convert_to_network(a, b, c)</div><div class="ttdef"><b>Definition:</b> <a href="non-ascii_8h_source.html#l00056">non-ascii.h:56</a></div></div>
<div class="ttc" id="multiif_8h_html_ad755633cd6d4e90c3df49fefd1052bad"><div class="ttname"><a href="multiif_8h.html#ad755633cd6d4e90c3df49fefd1052bad">GETSOCK_BLANK</a></div><div class="ttdeci">#define GETSOCK_BLANK</div><div class="ttdef"><b>Definition:</b> <a href="multiif_8h_source.html#l00045">multiif.h:45</a></div></div>
<div class="ttc" id="transfer_8c_html_a15440032c495bf0f3f6c535ec5e811e3"><div class="ttname"><a href="transfer_8c.html#a15440032c495bf0f3f6c535ec5e811e3">Curl_get_upload_buffer</a></div><div class="ttdeci">CURLcode Curl_get_upload_buffer(struct Curl_easy *data)</div><div class="ttdef"><b>Definition:</b> <a href="transfer_8c_source.html#l00110">transfer.c:110</a></div></div>
<div class="ttc" id="strtoofft_8h_html"><div class="ttname"><a href="strtoofft_8h.html">strtoofft.h</a></div></div>
<div class="ttc" id="sendf_8c_html_a8b0f0a06869b888abb80a069182d0d5a"><div class="ttname"><a href="sendf_8c.html#a8b0f0a06869b888abb80a069182d0d5a">Curl_debug</a></div><div class="ttdeci">int Curl_debug(struct Curl_easy *data, curl_infotype type, char *ptr, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="sendf_8c_source.html#l00776">sendf.c:776</a></div></div>
<div class="ttc" id="urldata_8h_html_a93237a6ee2f27182bb966487a03bce44"><div class="ttname"><a href="urldata_8h.html#a93237a6ee2f27182bb966487a03bce44">KEEP_SEND</a></div><div class="ttdeci">#define KEEP_SEND</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00459">urldata.h:459</a></div></div>
<div class="ttc" id="transfer_8h_html_a5d8d8c391641700d5c2f715193e27963"><div class="ttname"><a href="transfer_8h.html#a5d8d8c391641700d5c2f715193e27963">followtype</a></div><div class="ttdeci">followtype</div><div class="ttdef"><b>Definition:</b> <a href="transfer_8h_source.html#l00035">transfer.h:35</a></div></div>
<div class="ttc" id="curl_8h_html_a7516630ec17f247697dd3272be7ada74"><div class="ttname"><a href="curl_8h.html#a7516630ec17f247697dd3272be7ada74">curl_read_callback</a></div><div class="ttdeci">size_t(* curl_read_callback)(char *buffer, size_t size, size_t nitems, void *instream)</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00358">curl.h:358</a></div></div>
<div class="ttc" id="urldata_8h_html_ab4bb409a0fb8f0d3c827ba8188f96801"><div class="ttname"><a href="urldata_8h.html#ab4bb409a0fb8f0d3c827ba8188f96801">KEEP_RECVBITS</a></div><div class="ttdeci">#define KEEP_RECVBITS</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00467">urldata.h:467</a></div></div>
<div class="ttc" id="transfer_8h_html_a5d8d8c391641700d5c2f715193e27963a0d049e79236e49899f5aff3e0b46bed6"><div class="ttname"><a href="transfer_8h.html#a5d8d8c391641700d5c2f715193e27963a0d049e79236e49899f5aff3e0b46bed6">FOLLOW_FAKE</a></div><div class="ttdef"><b>Definition:</b> <a href="transfer_8h_source.html#l00038">transfer.h:38</a></div></div>
<div class="ttc" id="sendf_8c_html_a6d7b9f1e0b64c65b824a115d0b00b5a2"><div class="ttname"><a href="sendf_8c.html#a6d7b9f1e0b64c65b824a115d0b00b5a2">Curl_write</a></div><div class="ttdeci">CURLcode Curl_write(struct connectdata *conn, curl_socket_t sockfd, const void *mem, size_t len, ssize_t *written)</div><div class="ttdef"><b>Definition:</b> <a href="sendf_8c_source.html#l00338">sendf.c:338</a></div></div>
<div class="ttc" id="urlapi-int_8h_html"><div class="ttname"><a href="urlapi-int_8h.html">urlapi-int.h</a></div></div>
<div class="ttc" id="multiif_8h_html_a9aabda59f0ff87c1db3a2d306a410713"><div class="ttname"><a href="multiif_8h.html#a9aabda59f0ff87c1db3a2d306a410713">GETSOCK_WRITESOCK</a></div><div class="ttdeci">#define GETSOCK_WRITESOCK(x)</div><div class="ttdef"><b>Definition:</b> <a href="multiif_8h_source.html#l00048">multiif.h:48</a></div></div>
<div class="ttc" id="progress_8c_html_ad9dca3b2d400d41c3f7d255a9fedcf59"><div class="ttname"><a href="progress_8c.html#ad9dca3b2d400d41c3f7d255a9fedcf59">Curl_pgrsResetTransferSizes</a></div><div class="ttdeci">void Curl_pgrsResetTransferSizes(struct Curl_easy *data)</div><div class="ttdef"><b>Definition:</b> <a href="progress_8c_source.html#l00157">progress.c:157</a></div></div>
<div class="ttc" id="curl__memory_8h_html"><div class="ttname"><a href="curl__memory_8h.html">curl_memory.h</a></div></div>
<div class="ttc" id="struct_connect_bits_html_a92cc38ee21acd0ebfeb725f35ee9241b"><div class="ttname"><a href="struct_connect_bits.html#a92cc38ee21acd0ebfeb725f35ee9241b">ConnectBits::rewindaftersend</a></div><div class="ttdeci">bool rewindaftersend</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00413">urldata.h:413</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00458">curl.h:458</a></div></div>
<div class="ttc" id="speedcheck_8c_html_a9bb3788a8c28461af0215fc47308d36c"><div class="ttname"><a href="speedcheck_8c.html#a9bb3788a8c28461af0215fc47308d36c">Curl_speedcheck</a></div><div class="ttdeci">CURLcode Curl_speedcheck(struct Curl_easy *data, struct curltime now)</div><div class="ttdef"><b>Definition:</b> <a href="speedcheck_8c_source.html#l00039">speedcheck.c:39</a></div></div>
<div class="ttc" id="struct_curl__easy_html_abcc5aa61af150adc1388b1a3492c2599"><div class="ttname"><a href="struct_curl__easy.html#abcc5aa61af150adc1388b1a3492c2599">Curl_easy::set</a></div><div class="ttdeci">struct UserDefined set</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01788">urldata.h:1788</a></div></div>
<div class="ttc" id="urlapi_8h_html_a6a5b8d5c719d5d893048d2410d74d1de"><div class="ttname"><a href="urlapi_8h.html#a6a5b8d5c719d5d893048d2410d74d1de">CURLUcode</a></div><div class="ttdeci">CURLUcode</div><div class="ttdef"><b>Definition:</b> <a href="urlapi_8h_source.html#l00030">urlapi.h:30</a></div></div>
<div class="ttc" id="multiif_8h_html"><div class="ttname"><a href="multiif_8h.html">multiif.h</a></div></div>
<div class="ttc" id="sendf_8c_html_ad59954133649b7538b387f940b86024f"><div class="ttname"><a href="sendf_8c.html#ad59954133649b7538b387f940b86024f">Curl_client_write</a></div><div class="ttdeci">CURLcode Curl_client_write(struct connectdata *conn, int type, char *ptr, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="sendf_8c_source.html#l00651">sendf.c:651</a></div></div>
<div class="ttc" id="timeval_8c_html_a93ce3158c8838916ed817489c98e37c4"><div class="ttname"><a href="timeval_8c.html#a93ce3158c8838916ed817489c98e37c4">Curl_timediff</a></div><div class="ttdeci">timediff_t Curl_timediff(struct curltime newer, struct curltime older)</div><div class="ttdef"><b>Definition:</b> <a href="timeval_8c_source.html#l00181">timeval.c:181</a></div></div>
<div class="ttc" id="struct_connect_bits_html_aaf15319fba965e2d87ac0ac839ae8351"><div class="ttname"><a href="struct_connect_bits.html#aaf15319fba965e2d87ac0ac839ae8351">ConnectBits::close</a></div><div class="ttdeci">bool close</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00381">urldata.h:381</a></div></div>
<div class="ttc" id="_b_l_e_eddystone_u_r_l_8h_html_ad62c324cbfcc92532598792c6d0f6494"><div class="ttname"><a href="_b_l_e_eddystone_u_r_l_8h.html#ad62c324cbfcc92532598792c6d0f6494">url</a></div><div class="ttdeci">uint8_t url[16]</div><div class="ttdef"><b>Definition:</b> <a href="_b_l_e_eddystone_u_r_l_8h_source.html#l00037">BLEEddystoneURL.h:37</a></div></div>
<div class="ttc" id="memdebug_8h_html_a795660f73c902cc80ac0fe6cda0dbd1c"><div class="ttname"><a href="memdebug_8h.html#a795660f73c902cc80ac0fe6cda0dbd1c">Curl_safefree</a></div><div class="ttdeci">#define Curl_safefree(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="memdebug_8h_source.html#l00176">memdebug.h:176</a></div></div>
<div class="ttc" id="structconnectdata_html_a73d6d39e7554e4d764099ab3f1181a40"><div class="ttname"><a href="structconnectdata.html#a73d6d39e7554e4d764099ab3f1181a40">connectdata::writesockfd</a></div><div class="ttdeci">curl_socket_t writesockfd</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00920">urldata.h:920</a></div></div>
<div class="ttc" id="curl__setup_8h_html"><div class="ttname"><a href="curl__setup_8h.html">curl_setup.h</a></div></div>
<div class="ttc" id="smtp_8c_html_a46484575f5a9a0af2efdc95bf7ac7d90"><div class="ttname"><a href="smtp_8c.html#a46484575f5a9a0af2efdc95bf7ac7d90">Curl_smtp_escape_eob</a></div><div class="ttdeci">CURLcode Curl_smtp_escape_eob(struct connectdata *conn, const ssize_t nread)</div><div class="ttdef"><b>Definition:</b> <a href="smtp_8c_source.html#l01542">smtp.c:1542</a></div></div>
<div class="ttc" id="urldata_8h_html_a3bfbbdae2857443d0580fc5b5b4a0a5b"><div class="ttname"><a href="urldata_8h.html#a3bfbbdae2857443d0580fc5b5b4a0a5b">PROTOPT_NONETWORK</a></div><div class="ttdeci">#define PROTOPT_NONETWORK</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00714">urldata.h:714</a></div></div>
<div class="ttc" id="curl_8h_html_aed08c6203949f0b52a655e094f241920"><div class="ttname"><a href="curl_8h.html#aed08c6203949f0b52a655e094f241920">curlioerr</a></div><div class="ttdeci">curlioerr</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00398">curl.h:398</a></div></div>
<div class="ttc" id="structcurl__mimepart__s_html"><div class="ttname"><a href="structcurl__mimepart__s.html">curl_mimepart_s</a></div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00102">mime.h:102</a></div></div>
<div class="ttc" id="urldata_8h_html_ac67e77846b7b67d5808da8f1dfa2eab8ae4322de705c516b61756f9874183ef05"><div class="ttname"><a href="urldata_8h.html#ac67e77846b7b67d5808da8f1dfa2eab8ae4322de705c516b61756f9874183ef05">HTTPREQ_GET</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01134">urldata.h:1134</a></div></div>
<div class="ttc" id="curl_8h_html_a37f72557bd7b33a75cb3c3ab165e357e"><div class="ttname"><a href="curl_8h.html#a37f72557bd7b33a75cb3c3ab165e357e">CURL_READFUNC_ABORT</a></div><div class="ttdeci">#define CURL_READFUNC_ABORT</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00353">curl.h:353</a></div></div>
<div class="ttc" id="get_8d_html_a72405a3df7019c7ac95d2f3be7247548"><div class="ttname"><a href="get_8d.html#a72405a3df7019c7ac95d2f3be7247548">head</a></div><div class="ttdeci">Long this option will make all data specified with data binary or data urlencode to be used in an HTTP GET request instead of the POST request that otherwise would be used.The data will be appended to the URL with a separator.If used in combination with head</div><div class="ttdef"><b>Definition:</b> <a href="get_8d_source.html#l00005">get.d:5</a></div></div>
<div class="ttc" id="select_8c_html_a5c7e56fd4476c27a049314f502981f29"><div class="ttname"><a href="select_8c.html#a5c7e56fd4476c27a049314f502981f29">Curl_socket_check</a></div><div class="ttdeci">int Curl_socket_check(curl_socket_t readfd0, curl_socket_t readfd1, curl_socket_t writefd, time_t timeout_ms)</div><div class="ttdef"><b>Definition:</b> <a href="select_8c_source.html#l00145">select.c:145</a></div></div>
<div class="ttc" id="struct_single_request_html_a97c471abe695b617c7695de635b49440"><div class="ttname"><a href="struct_single_request.html#a97c471abe695b617c7695de635b49440">SingleRequest::header</a></div><div class="ttdeci">bool header</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00553">urldata.h:553</a></div></div>
<div class="ttc" id="struct_single_request_html_a5803af0f75195ad74badb6ced9b24b16"><div class="ttname"><a href="struct_single_request.html#a5803af0f75195ad74badb6ced9b24b16">SingleRequest::protop</a></div><div class="ttdeci">void * protop</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00619">urldata.h:619</a></div></div>
<div class="ttc" id="http_8c_html_a06db2840299ee6694923087317b8133a"><div class="ttname"><a href="http_8c.html#a06db2840299ee6694923087317b8133a">Curl_http_readwrite_headers</a></div><div class="ttdeci">CURLcode Curl_http_readwrite_headers(struct Curl_easy *data, struct connectdata *conn, ssize_t *nread, bool *stop_reading)</div><div class="ttdef"><b>Definition:</b> <a href="http_8c_source.html#l03131">http.c:3131</a></div></div>
<div class="ttc" id="urldata_8h_html_a5f72b40a5e27226c8993aaba303f0204"><div class="ttname"><a href="urldata_8h.html#a5f72b40a5e27226c8993aaba303f0204">KEEP_RECV_PAUSE</a></div><div class="ttdeci">#define KEEP_RECV_PAUSE</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00464">urldata.h:464</a></div></div>
<div class="ttc" id="urldata_8h_html_ac67e77846b7b67d5808da8f1dfa2eab8a4b328e0aa83f04505b21057059a9715f"><div class="ttname"><a href="urldata_8h.html#ac67e77846b7b67d5808da8f1dfa2eab8a4b328e0aa83f04505b21057059a9715f">HTTPREQ_PUT</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01138">urldata.h:1138</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951a1a9263421629452bb969e2aa901c11ed"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951a1a9263421629452bb969e2aa901c11ed">CURLE_SEND_FAIL_REWIND</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00537">curl.h:537</a></div></div>
<div class="ttc" id="non-ascii_8h_html"><div class="ttname"><a href="non-ascii_8h.html">non-ascii.h</a></div></div>
<div class="ttc" id="urldata_8h_html_aabb7db968656c3ee0555ea3d8784310da9ce9f2e0534f44e7777fac288d3c522a"><div class="ttname"><a href="urldata_8h.html#aabb7db968656c3ee0555ea3d8784310da9ce9f2e0534f44e7777fac288d3c522a">EXPIRE_100_TIMEOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01206">urldata.h:1206</a></div></div>
<div class="ttc" id="progress-bar_8d_html_ab8db689d5132c4523a63d67bedf23c8a"><div class="ttname"><a href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a></div><div class="ttdeci">Short more meter.This progress bar draws a single line of shows a percentage if the transfer size is known.For transfers without a known size</div><div class="ttdef"><b>Definition:</b> <a href="progress-bar_8d_source.html#l00006">progress-bar.d:6</a></div></div>
<div class="ttc" id="struct_single_request_html_aec6b44088a4ed23d680c294ec83443db"><div class="ttname"><a href="struct_single_request.html#aec6b44088a4ed23d680c294ec83443db">SingleRequest::getheader</a></div><div class="ttdeci">bool getheader</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00613">urldata.h:613</a></div></div>
<div class="ttc" id="netrc_8h_html"><div class="ttname"><a href="netrc_8h.html">netrc.h</a></div></div>
<div class="ttc" id="struct_curl__chunker_html_a537803528ee3bbc5a4928a2862f12b81"><div class="ttname"><a href="struct_curl__chunker.html#a537803528ee3bbc5a4928a2862f12b81">Curl_chunker::state</a></div><div class="ttdeci">ChunkyState state</div><div class="ttdef"><b>Definition:</b> <a href="http__chunks_8h_source.html#l00085">http_chunks.h:85</a></div></div>
<div class="ttc" id="curl_8h_html_a02bb343e31cce7e50c7623ced74e5d09"><div class="ttname"><a href="curl_8h.html#a02bb343e31cce7e50c7623ced74e5d09">CURL_REDIR_POST_302</a></div><div class="ttdeci">#define CURL_REDIR_POST_302</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l02009">curl.h:2009</a></div></div>
<div class="ttc" id="stdcheaders_8h_html_aae22dd41ebe1e64904429c5a31e7e642"><div class="ttname"><a href="stdcheaders_8h.html#aae22dd41ebe1e64904429c5a31e7e642">fread</a></div><div class="ttdeci">size_t fread(void *, size_t, size_t, FILE *)</div></div>
<div class="ttc" id="transfer_8c_html_a672d018ece26cc8a8f2da835cc68122f"><div class="ttname"><a href="transfer_8c.html#a672d018ece26cc8a8f2da835cc68122f">Curl_single_getsock</a></div><div class="ttdeci">int Curl_single_getsock(const struct connectdata *conn, curl_socket_t *sock, int numsocks)</div><div class="ttdef"><b>Definition:</b> <a href="transfer_8c_source.html#l01294">transfer.c:1294</a></div></div>
<div class="ttc" id="http2_8h_html"><div class="ttname"><a href="http2_8h.html">http2.h</a></div></div>
<div class="ttc" id="transfer_8c_html_a0dae98156f3b0dc5f703d4d19d15c137"><div class="ttname"><a href="transfer_8c.html#a0dae98156f3b0dc5f703d4d19d15c137">Curl_pretransfer</a></div><div class="ttdeci">CURLcode Curl_pretransfer(struct Curl_easy *data)</div><div class="ttdef"><b>Definition:</b> <a href="transfer_8c_source.html#l01353">transfer.c:1353</a></div></div>
<div class="ttc" id="transfer_8c_html_a0649a25288fefe787c7bedddadb8a31d"><div class="ttname"><a href="transfer_8c.html#a0649a25288fefe787c7bedddadb8a31d">Curl_checkheaders</a></div><div class="ttdeci">char * Curl_checkheaders(const struct connectdata *conn, const char *thisheader)</div><div class="ttdef"><b>Definition:</b> <a href="transfer_8c_source.html#l00093">transfer.c:93</a></div></div>
<div class="ttc" id="getpart_8c_html_a10c315f2ac084dfafd0508bd53868f21"><div class="ttname"><a href="getpart_8c.html#a10c315f2ac084dfafd0508bd53868f21">show</a></div><div class="ttdeci">#define show(x)</div><div class="ttdef"><b>Definition:</b> <a href="getpart_8c_source.html#l00049">getpart.c:49</a></div></div>
<div class="ttc" id="transfer_8c_html_a2d575b634fe05cd90230cc12d6b73f76"><div class="ttname"><a href="transfer_8c.html#a2d575b634fe05cd90230cc12d6b73f76">Curl_fillreadbuffer</a></div><div class="ttdeci">CURLcode Curl_fillreadbuffer(struct connectdata *conn, size_t bytes, size_t *nreadp)</div><div class="ttdef"><b>Definition:</b> <a href="transfer_8c_source.html#l00124">transfer.c:124</a></div></div>
<div class="ttc" id="config-win32_8h_html_a8af93bbb66534e14d651bbb0638ee796"><div class="ttname"><a href="config-win32_8h.html#a8af93bbb66534e14d651bbb0638ee796">ssize_t</a></div><div class="ttdeci">#define ssize_t</div><div class="ttdef"><b>Definition:</b> <a href="config-win32_8h_source.html#l00379">config-win32.h:379</a></div></div>
<div class="ttc" id="structconnectdata_html_a13cc2123ad38902e8ad44e67f10ed7aa"><div class="ttname"><a href="structconnectdata.html#a13cc2123ad38902e8ad44e67f10ed7aa">connectdata::sock</a></div><div class="ttdeci">curl_socket_t sock[2]</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00874">urldata.h:874</a></div></div>
<div class="ttc" id="struct_user_defined_html_af0beb9d3806fe92e90475ee9f13bbee9"><div class="ttname"><a href="struct_user_defined.html#af0beb9d3806fe92e90475ee9f13bbee9">UserDefined::http_ce_skip</a></div><div class="ttdeci">bool http_ce_skip</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01665">urldata.h:1665</a></div></div>
<div class="ttc" id="progress_8c_html_afd65889574fb7bde6ffcec48b0d8debb"><div class="ttname"><a href="progress_8c.html#afd65889574fb7bde6ffcec48b0d8debb">Curl_pgrsSetDownloadCounter</a></div><div class="ttdeci">void Curl_pgrsSetDownloadCounter(struct Curl_easy *data, curl_off_t size)</div><div class="ttdef"><b>Definition:</b> <a href="progress_8c_source.html#l00306">progress.c:306</a></div></div>
<div class="ttc" id="transfer_8c_html_a1718bf5edce26e06c21b7ad18e4b6956"><div class="ttname"><a href="transfer_8c.html#a1718bf5edce26e06c21b7ad18e4b6956">win_update_buffer_size</a></div><div class="ttdeci">#define win_update_buffer_size(x)</div><div class="ttdef"><b>Definition:</b> <a href="transfer_8c_source.html#l00905">transfer.c:905</a></div></div>
<div class="ttc" id="http2_8h_html_acc13c28304b7e874ac61ea2816c5a2ae"><div class="ttname"><a href="http2_8h.html#acc13c28304b7e874ac61ea2816c5a2ae">Curl_http2_done_sending</a></div><div class="ttdeci">#define Curl_http2_done_sending(x)</div><div class="ttdef"><b>Definition:</b> <a href="http2_8h_source.html#l00076">http2.h:76</a></div></div>
<div class="ttc" id="struct_single_request_html_a29a93742706b21aad3b169dffd1f611a"><div class="ttname"><a href="struct_single_request.html#a29a93742706b21aad3b169dffd1f611a">SingleRequest::upload_fromhere</a></div><div class="ttdeci">char * upload_fromhere</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00608">urldata.h:608</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951acaaed2faf20c957350e90a68282ae314"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951acaaed2faf20c957350e90a68282ae314">CURLE_WRITE_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00489">curl.h:489</a></div></div>
<div class="ttc" id="curl_8h_html_a3781556120d1f44d126ef1cf50019cf4a86fa94f83ce5f3a990ff26ea4a8b18ab"><div class="ttname"><a href="curl_8h.html#a3781556120d1f44d126ef1cf50019cf4a86fa94f83ce5f3a990ff26ea4a8b18ab">CURLIOCMD_RESTARTREAD</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00407">curl.h:407</a></div></div>
<div class="ttc" id="structconnectdata_html_ab3afce952fb3c7582192a976b3ff83ca"><div class="ttname"><a href="structconnectdata.html#ab3afce952fb3c7582192a976b3ff83ca">connectdata::read_pos</a></div><div class="ttdeci">size_t read_pos</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00969">urldata.h:969</a></div></div>
<div class="ttc" id="urldata_8h_html_a0a15328bccb6e0baf3d1c6150eb39449a9d3a27f37991e9aeea4443efd051f309"><div class="ttname"><a href="urldata_8h.html#a0a15328bccb6e0baf3d1c6150eb39449a9d3a27f37991e9aeea4443efd051f309">EXP100_AWAITING_CONTINUE</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00491">urldata.h:491</a></div></div>
<div class="ttc" id="unit1652_8c_html_a348cae967f89c4bad8fb37e45a469d1a"><div class="ttname"><a href="unit1652_8c.html#a348cae967f89c4bad8fb37e45a469d1a">msnprintf</a></div><div class="ttdeci">UNITTEST_START msnprintf(input, sizeof(input), &quot;Simple Test&quot;)</div></div>
<div class="ttc" id="unit1398_8c_html_aee5a1edd73e85934dcbe27ccbb1ef1ad"><div class="ttname"><a href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a></div><div class="ttdeci">char buf[3]</div><div class="ttdef"><b>Definition:</b> <a href="unit1398_8c_source.html#l00032">unit1398.c:32</a></div></div>
<div class="ttc" id="struct_single_request_html_a7bd7f9afc35050a31e496a08c5baaeb8"><div class="ttname"><a href="struct_single_request.html#a7bd7f9afc35050a31e496a08c5baaeb8">SingleRequest::bytecount</a></div><div class="ttdeci">curl_off_t bytecount</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00541">urldata.h:541</a></div></div>
<div class="ttc" id="struct_curl__handler_html_a2fc887b2697c63980406a19108b82a24"><div class="ttname"><a href="struct_curl__handler.html#a2fc887b2697c63980406a19108b82a24">Curl_handler::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00702">urldata.h:702</a></div></div>
<div class="ttc" id="struct_url_state_html_aa1236acc4e6fd67f22473a1a928c7af8"><div class="ttname"><a href="struct_url_state.html#aa1236acc4e6fd67f22473a1a928c7af8">UrlState::drain</a></div><div class="ttdeci">size_t drain</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01347">urldata.h:1347</a></div></div>
<div class="ttc" id="transfer_8h_html"><div class="ttname"><a href="transfer_8h.html">transfer.h</a></div></div>
<div class="ttc" id="struct_curl__handler_html_a4cb97489ff5e99482751b9cf94c4e3a0"><div class="ttname"><a href="struct_curl__handler.html#a4cb97489ff5e99482751b9cf94c4e3a0">Curl_handler::perform_getsock</a></div><div class="ttdeci">int(* perform_getsock)(const struct connectdata *conn, curl_socket_t *socks, int numsocks)</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00677">urldata.h:677</a></div></div>
<div class="ttc" id="sendf_8h_html_a0056494e05c065643a400059b9318270"><div class="ttname"><a href="sendf_8h.html#a0056494e05c065643a400059b9318270">infof</a></div><div class="ttdeci">#define infof</div><div class="ttdef"><b>Definition:</b> <a href="sendf_8h_source.html#l00044">sendf.h:44</a></div></div>
<div class="ttc" id="curl_8h_html_a8a6431fcced5944dec01685f14de2540"><div class="ttname"><a href="curl_8h.html#a8a6431fcced5944dec01685f14de2540">CURL_READFUNC_PAUSE</a></div><div class="ttdeci">#define CURL_READFUNC_PAUSE</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00356">curl.h:356</a></div></div>
<div class="ttc" id="curl_8h_html_a381b5af92e29a2b013413ae7e9cae096"><div class="ttname"><a href="curl_8h.html#a381b5af92e29a2b013413ae7e9cae096">CURL_REDIR_POST_303</a></div><div class="ttdeci">#define CURL_REDIR_POST_303</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l02010">curl.h:2010</a></div></div>
<div class="ttc" id="struct_h_t_t_p_html_aba0d54486cf031467f38895a0c29a5b3"><div class="ttname"><a href="struct_h_t_t_p.html#aba0d54486cf031467f38895a0c29a5b3">HTTP::writebytecount</a></div><div class="ttdeci">curl_off_t writebytecount</div><div class="ttdef"><b>Definition:</b> <a href="http_8h_source.html#l00140">http.h:140</a></div></div>
<div class="ttc" id="http__chunks_8c_html_a402dded2164e3980ea7916c05a8ad1d2"><div class="ttname"><a href="http__chunks_8c.html#a402dded2164e3980ea7916c05a8ad1d2">Curl_chunked_strerror</a></div><div class="ttdeci">const char * Curl_chunked_strerror(CHUNKcode code)</div><div class="ttdef"><b>Definition:</b> <a href="http__chunks_8c_source.html#l00331">http_chunks.c:331</a></div></div>
<div class="ttc" id="struct_single_request_html_a9342cccc08a1a935d26085f854a4a9ef"><div class="ttname"><a href="struct_single_request.html#a9342cccc08a1a935d26085f854a4a9ef">SingleRequest::buf</a></div><div class="ttdeci">char * buf</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00583">urldata.h:583</a></div></div>
<div class="ttc" id="urldata_8h_html_a34f8f0932e9fd37ba15b42607b219964"><div class="ttname"><a href="urldata_8h.html#a34f8f0932e9fd37ba15b42607b219964">PROTO_FAMILY_POP3</a></div><div class="ttdeci">#define PROTO_FAMILY_POP3</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00068">urldata.h:68</a></div></div>
<div class="ttc" id="urldata_8h_html_ac67e77846b7b67d5808da8f1dfa2eab8ae11eeb30f15276332563390b730fd389"><div class="ttname"><a href="urldata_8h.html#ac67e77846b7b67d5808da8f1dfa2eab8ae11eeb30f15276332563390b730fd389">HTTPREQ_POST_FORM</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01136">urldata.h:1136</a></div></div>
<div class="ttc" id="struct_single_request_html_ab39e7eb68cb5e6fc7f7ee241c0cb0ae2"><div class="ttname"><a href="struct_single_request.html#ab39e7eb68cb5e6fc7f7ee241c0cb0ae2">SingleRequest::bodywrites</a></div><div class="ttdeci">long bodywrites</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00581">urldata.h:581</a></div></div>
<div class="ttc" id="curl_8h_html_a9704d2633927f77efaa3e3c6f1c23a14a650f0c484d2be1b78af50ff3d5bf4ddc"><div class="ttname"><a href="curl_8h.html#a9704d2633927f77efaa3e3c6f1c23a14a650f0c484d2be1b78af50ff3d5bf4ddc">CURLINFO_DATA_OUT</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00437">curl.h:437</a></div></div>
<div class="ttc" id="structconnectdata_html_a90fee5026509bdba864f256eab51a77b"><div class="ttname"><a href="structconnectdata.html#a90fee5026509bdba864f256eab51a77b">connectdata::master_buffer</a></div><div class="ttdeci">char * master_buffer</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00967">urldata.h:967</a></div></div>
<div class="ttc" id="multi_8c_html_a759a3f675165554a5f5d6e784afa7fe0"><div class="ttname"><a href="multi_8c.html#a759a3f675165554a5f5d6e784afa7fe0">Curl_expire</a></div><div class="ttdeci">void Curl_expire(struct Curl_easy *data, time_t milli, expire_id id)</div><div class="ttdef"><b>Definition:</b> <a href="multi_8c_source.html#l02994">multi.c:2994</a></div></div>
<div class="ttc" id="urldata_8h_html"><div class="ttname"><a href="urldata_8h.html">urldata.h</a></div></div>
<div class="ttc" id="multi-debugcallback_8c_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition:</b> <a href="multi-debugcallback_8c_source.html#l00038">multi-debugcallback.c:38</a></div></div>
<div class="ttc" id="struct_h_t_t_p_html"><div class="ttname"><a href="struct_h_t_t_p.html">HTTP</a></div><div class="ttdef"><b>Definition:</b> <a href="http_8h_source.html#l00132">http.h:132</a></div></div>
<div class="ttc" id="struct_connect_bits_html_a895dbf934d6f1d6c48751228942caaaf"><div class="ttname"><a href="struct_connect_bits.html#a895dbf934d6f1d6c48751228942caaaf">ConnectBits::stream_was_rewound</a></div><div class="ttdeci">bool stream_was_rewound</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00427">urldata.h:427</a></div></div>
<div class="ttc" id="struct_connect_bits_html_a2abc75753ca4206fe82edfd27c1479c6"><div class="ttname"><a href="struct_connect_bits.html#a2abc75753ca4206fe82edfd27c1479c6">ConnectBits::retry</a></div><div class="ttdeci">bool retry</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00403">urldata.h:403</a></div></div>
<div class="ttc" id="struct_single_request_html_ab837cef7bb2e4d7e9fb5c734a6a8013d"><div class="ttname"><a href="struct_single_request.html#ab837cef7bb2e4d7e9fb5c734a6a8013d">SingleRequest::start100</a></div><div class="ttdeci">struct curltime start100</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00574">urldata.h:574</a></div></div>
<div class="ttc" id="hostip_8h_html"><div class="ttname"><a href="hostip_8h.html">hostip.h</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951ac6544fd7da6ddfd7893d74095b17a28d"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951ac6544fd7da6ddfd7893d74095b17a28d">CURLE_PARTIAL_FILE</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00484">curl.h:484</a></div></div>
<div class="ttc" id="memdebug_8h_html"><div class="ttname"><a href="memdebug_8h.html">memdebug.h</a></div></div>
<div class="ttc" id="struct_single_request_html_aa114fbb6f13e62c24d25799e6b8ab740"><div class="ttname"><a href="struct_single_request.html#aa114fbb6f13e62c24d25799e6b8ab740">SingleRequest::bytecountp</a></div><div class="ttdeci">curl_off_t * bytecountp</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00535">urldata.h:535</a></div></div>
<div class="ttc" id="curl_8h_html_adb5a46d02359d2379dc7e0904c987828"><div class="ttname"><a href="curl_8h.html#adb5a46d02359d2379dc7e0904c987828">curl_socket_t</a></div><div class="ttdeci">int curl_socket_t</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00130">curl.h:130</a></div></div>
<div class="ttc" id="struct_connect_bits_html_a72ceb38665fe6374e78ebb8ca8d5e33a"><div class="ttname"><a href="struct_connect_bits.html#a72ceb38665fe6374e78ebb8ca8d5e33a">ConnectBits::multiplex</a></div><div class="ttdeci">bool multiplex</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00436">urldata.h:436</a></div></div>
<div class="ttc" id="struct_single_request_html_acd41ba7d3b44e699dd1a46ec4754e151"><div class="ttname"><a href="struct_single_request.html#acd41ba7d3b44e699dd1a46ec4754e151">SingleRequest::badheader</a></div><div class="ttdeci">enum SingleRequest::@43 badheader</div></div>
<div class="ttc" id="struct_wildcard_data_html_aa312ae53f66b4fe3f10c3701c67abecf"><div class="ttname"><a href="struct_wildcard_data.html#aa312ae53f66b4fe3f10c3701c67abecf">WildcardData::state</a></div><div class="ttdeci">curl_wildcard_states state</div><div class="ttdef"><b>Definition:</b> <a href="wildcard_8h_source.html#l00047">wildcard.h:47</a></div></div>
<div class="ttc" id="curl_8h_html_a9704d2633927f77efaa3e3c6f1c23a14a415579b635fe7e73cfe18e013f9a7dd7"><div class="ttname"><a href="curl_8h.html#a9704d2633927f77efaa3e3c6f1c23a14a415579b635fe7e73cfe18e013f9a7dd7">CURLINFO_DATA_IN</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00436">curl.h:436</a></div></div>
<div class="ttc" id="url_8h_html"><div class="ttname"><a href="url_8h.html">url.h</a></div></div>
<div class="ttc" id="urldata_8h_html_a9d346cfcc0046f6c6ed206bde086ab2d"><div class="ttname"><a href="urldata_8h.html#a9d346cfcc0046f6c6ed206bde086ab2d">PROTO_FAMILY_HTTP</a></div><div class="ttdeci">#define PROTO_FAMILY_HTTP</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00066">urldata.h:66</a></div></div>
<div class="ttc" id="transfer_8h_html_a5d8d8c391641700d5c2f715193e27963a88a3c59ee1a6490b85dc50d0568e2603"><div class="ttname"><a href="transfer_8h.html#a5d8d8c391641700d5c2f715193e27963a88a3c59ee1a6490b85dc50d0568e2603">FOLLOW_REDIR</a></div><div class="ttdef"><b>Definition:</b> <a href="transfer_8h_source.html#l00041">transfer.h:41</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951a8933e6db041d3f4a94227e991d789745"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951a8933e6db041d3f4a94227e991d789745">CURLE_TOO_MANY_REDIRECTS</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00517">curl.h:517</a></div></div>
<div class="ttc" id="get_8d_html_a38b0ef81b65f2aee282c8c217a123176"><div class="ttname"><a href="get_8d.html#a38b0ef81b65f2aee282c8c217a123176">data</a></div><div class="ttdeci">Long this option will make all data specified with data</div><div class="ttdef"><b>Definition:</b> <a href="get_8d_source.html#l00005">get.d:5</a></div></div>
<div class="ttc" id="structconnectdata_html"><div class="ttname"><a href="structconnectdata.html">connectdata</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00782">urldata.h:782</a></div></div>
<div class="ttc" id="struct_single_request_html"><div class="ttname"><a href="struct_single_request.html">SingleRequest</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00533">urldata.h:533</a></div></div>
<div class="ttc" id="curl_8h_html_a845d262749bd413d724b58e26f713f25ab52a0e6ddf579f8f81b40d8a684155a6"><div class="ttname"><a href="curl_8h.html#a845d262749bd413d724b58e26f713f25ab52a0e6ddf579f8f81b40d8a684155a6">CURL_TIMECOND_IFUNMODSINCE</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l02018">curl.h:2018</a></div></div>
<div class="ttc" id="urldata_8h_html_a4b5d3a45e8003619df16c1a7c6ad7669"><div class="ttname"><a href="urldata_8h.html#a4b5d3a45e8003619df16c1a7c6ad7669">PROTO_FAMILY_SMTP</a></div><div class="ttdeci">#define PROTO_FAMILY_SMTP</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00070">urldata.h:70</a></div></div>
<div class="ttc" id="struct_single_request_html_a3018293fe5f120a8a4c77d16207ab5da"><div class="ttname"><a href="struct_single_request.html#a3018293fe5f120a8a4c77d16207ab5da">SingleRequest::chunk</a></div><div class="ttdeci">bool chunk</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00610">urldata.h:610</a></div></div>
<div class="ttc" id="getinfo_8h_html"><div class="ttname"><a href="getinfo_8h.html">getinfo.h</a></div></div>
<div class="ttc" id="structdata_html"><div class="ttname"><a href="structdata.html">data</a></div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00029">debug.c:29</a></div></div>
<div class="ttc" id="transfer_8c_html_a6315105ff113a2067916488c9cce4905"><div class="ttname"><a href="transfer_8c.html#a6315105ff113a2067916488c9cce4905">Curl_retry_request</a></div><div class="ttdeci">CURLcode Curl_retry_request(struct connectdata *conn, char **url)</div><div class="ttdef"><b>Definition:</b> <a href="transfer_8c_source.html#l01673">transfer.c:1673</a></div></div>
<div class="ttc" id="sendf_8c_html_a828e2a7d5a11a7682d78140d6a5cba63"><div class="ttname"><a href="sendf_8c.html#a828e2a7d5a11a7682d78140d6a5cba63">Curl_read</a></div><div class="ttdeci">CURLcode Curl_read(struct connectdata *conn, curl_socket_t sockfd, char *buf, size_t sizerequested, ssize_t *n)</div><div class="ttdef"><b>Definition:</b> <a href="sendf_8c_source.html#l00713">sendf.c:713</a></div></div>
<div class="ttc" id="struct_single_request_html_a7170a3761d03bcd51596bd54abc2a23c"><div class="ttname"><a href="struct_single_request.html#a7170a3761d03bcd51596bd54abc2a23c">SingleRequest::writer_stack</a></div><div class="ttdeci">struct contenc_writer_s * writer_stack</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00578">urldata.h:578</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951ab14492d4934da6ddd87b78ede328becd"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951ab14492d4934da6ddd87b78ede328becd">CURLE_RANGE_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00503">curl.h:503</a></div></div>
<div class="ttc" id="hostip_8c_html_a8b9544b1eed8e7a9680f3f06520c11e6"><div class="ttname"><a href="hostip_8c.html#a8b9544b1eed8e7a9680f3f06520c11e6">Curl_loadhostpairs</a></div><div class="ttdeci">CURLcode Curl_loadhostpairs(struct Curl_easy *data)</div><div class="ttdef"><b>Definition:</b> <a href="hostip_8c_source.html#l00869">hostip.c:869</a></div></div>
<div class="ttc" id="struct_curl__handler_html_a0d8fb7f012fa14459bf003c1e0d4a127"><div class="ttname"><a href="struct_curl__handler.html#a0d8fb7f012fa14459bf003c1e0d4a127">Curl_handler::readwrite</a></div><div class="ttdeci">CURLcode(* readwrite)(struct Curl_easy *data, struct connectdata *conn, ssize_t *nread, bool *readmore)</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00690">urldata.h:690</a></div></div>
<div class="ttc" id="timeval_8h_html_aeb19832fd3e7f11c8d047d6824300e87"><div class="ttname"><a href="timeval_8h.html#aeb19832fd3e7f11c8d047d6824300e87">timediff_t</a></div><div class="ttdeci">int timediff_t</div><div class="ttdef"><b>Definition:</b> <a href="timeval_8h_source.html#l00028">timeval.h:28</a></div></div>
<div class="ttc" id="curl__setup__once_8h_html_a805079d1643f348afa725659b45b6f87"><div class="ttname"><a href="curl__setup__once_8h.html#a805079d1643f348afa725659b45b6f87">DEBUGF</a></div><div class="ttdeci">#define DEBUGF(x)</div><div class="ttdef"><b>Definition:</b> <a href="curl__setup__once_8h_source.html#l00390">curl_setup_once.h:390</a></div></div>
<div class="ttc" id="structconnectdata_html_a3df7eee97914936f17a228eb2cf84eed"><div class="ttname"><a href="structconnectdata.html#a3df7eee97914936f17a228eb2cf84eed">connectdata::data</a></div><div class="ttdeci">struct Curl_easy * data</div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l00786">urldata.h:786</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_409f97388efe006bc3438b95e9edef48.html">components</a></li><li class="navelem"><a class="el" href="dir_e9014474357f0c50c4c87dd9066e36b7.html">curl</a></li><li class="navelem"><a class="el" href="dir_efb6013f246e7f8b3181c5014844a411.html">lib</a></li><li class="navelem"><a class="el" href="transfer_8c.html">transfer.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
