<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Plante: components/curl/lib/mime.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Plante
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('mime_8c_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">mime.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="mime_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/***************************************************************************</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *                                  _   _ ____  _</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *  Project                     ___| | | |  _ \| |</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *                             / __| | | | |_) | |</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *                            | (__| |_| |  _ &lt;| |___</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *                             \___|\___/|_| \_\_____|</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * Copyright (C) 1998 - 2018, Daniel Stenberg, &lt;daniel@haxx.se&gt;, et al.</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * This software is licensed as described in the file COPYING, which</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * you should have received as part of this distribution. The terms</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * are also available at https://curl.haxx.se/docs/copyright.html.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * You may opt to use, copy, modify, merge, publish, distribute and/or sell</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * copies of the Software, and permit persons to whom the Software is</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * furnished to do so, under the terms of the COPYING file.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * This software is distributed on an &quot;AS IS&quot; basis, WITHOUT WARRANTY OF ANY</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * KIND, either express or implied.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> ***************************************************************************/</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="curl__setup_8h.html">curl_setup.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="curl_8h.html">curl/curl.h</a>&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mime_8h.html">mime.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="non-ascii_8h.html">non-ascii.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="urldata_8h.html">urldata.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sendf_8h.html">sendf.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#if !defined(CURL_DISABLE_HTTP) || !defined(CURL_DISABLE_SMTP) || \</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">    !defined(CURL_DISABLE_IMAP)</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#if defined(HAVE_LIBGEN_H) &amp;&amp; defined(HAVE_BASENAME)</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;libgen.h&gt;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rand_8h.html">rand.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="slist_8h.html">slist.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="strcase_8h.html">strcase.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">/* The last 3 #include files should be in this order */</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="curl__printf_8h.html">curl_printf.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="curl__memory_8h.html">curl_memory.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="memdebug_8h.html">memdebug.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#ifdef WIN32</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor"># ifndef R_OK</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#  define R_OK 4</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor"># endif</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="mime_8c.html#ac41734365e76e2fcab439c31c28ea28c">   54</a></span>&#160;<span class="preprocessor">#define READ_ERROR                      ((size_t) -1)</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">/* Encoders. */</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> encoder_nop_read(<span class="keywordtype">char</span> *<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, <span class="keywordtype">size_t</span> <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>, <span class="keywordtype">bool</span> ateof,</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                                <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="keyword">static</span> <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> encoder_nop_size(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> encoder_7bit_read(<span class="keywordtype">char</span> *<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, <span class="keywordtype">size_t</span> <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>, <span class="keywordtype">bool</span> ateof,</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                                <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> encoder_base64_read(<span class="keywordtype">char</span> *<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, <span class="keywordtype">size_t</span> <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>, <span class="keywordtype">bool</span> ateof,</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                                <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keyword">static</span> <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> encoder_base64_size(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> encoder_qp_read(<span class="keywordtype">char</span> *<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, <span class="keywordtype">size_t</span> <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>, <span class="keywordtype">bool</span> ateof,</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                              <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="keyword">static</span> <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> encoder_qp_size(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structmime__encoder.html">mime_encoder</a> encoders[] = {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  {<span class="stringliteral">&quot;binary&quot;</span>, encoder_nop_read, encoder_nop_size},</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  {<span class="stringliteral">&quot;8bit&quot;</span>, encoder_nop_read, encoder_nop_size},</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  {<span class="stringliteral">&quot;7bit&quot;</span>, encoder_7bit_read, encoder_nop_size},</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  {<span class="stringliteral">&quot;base64&quot;</span>, encoder_base64_read, encoder_base64_size},</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  {<span class="stringliteral">&quot;quoted-printable&quot;</span>, encoder_qp_read, encoder_qp_size},</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  {<a class="code" href="curlx_8c.html#af6458f5d187f1d7c82fb9ea7ef634b44">ZERO_NULL</a>, <a class="code" href="curlx_8c.html#af6458f5d187f1d7c82fb9ea7ef634b44">ZERO_NULL</a>, <a class="code" href="curlx_8c.html#af6458f5d187f1d7c82fb9ea7ef634b44">ZERO_NULL</a>}</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;};</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">/* Base64 encoding table */</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> base64[] =</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="stringliteral">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&quot;</span>;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">/* Quoted-printable character class table.</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment"> * We cannot rely on ctype functions since quoted-printable input data</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment"> * is assumed to be ascii-compatible, even on non-ascii platforms. */</span></div><div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">   86</a></span>&#160;<span class="preprocessor">#define QP_OK           1       </span><span class="comment">/* Can be represented by itself. */</span><span class="preprocessor"></span></div><div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="mime_8c.html#af89041df2ff39c84bcf9bad6ec3388f4">   87</a></span>&#160;<span class="preprocessor">#define QP_SP           2       </span><span class="comment">/* Space or tab. */</span><span class="preprocessor"></span></div><div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="mime_8c.html#aa8c497008b5fa9afeec3716ece794513">   88</a></span>&#160;<span class="preprocessor">#define QP_CR           3       </span><span class="comment">/* Carriage return. */</span><span class="preprocessor"></span></div><div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="mime_8c.html#a5b87a3fc8bd5d005c1859665581775e1">   89</a></span>&#160;<span class="preprocessor">#define QP_LF           4       </span><span class="comment">/* Line-feed. */</span><span class="preprocessor"></span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> qp_class[] = {</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; 0,     0,     0,     0,     0,     0,     0,     0,            <span class="comment">/* 00 - 07 */</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; 0,     <a class="code" href="mime_8c.html#af89041df2ff39c84bcf9bad6ec3388f4">QP_SP</a>, <a class="code" href="mime_8c.html#a5b87a3fc8bd5d005c1859665581775e1">QP_LF</a>, 0,     0,     <a class="code" href="mime_8c.html#aa8c497008b5fa9afeec3716ece794513">QP_CR</a>, 0,     0,            <span class="comment">/* 08 - 0F */</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; 0,     0,     0,     0,     0,     0,     0,     0,            <span class="comment">/* 10 - 17 */</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; 0,     0,     0,     0,     0,     0,     0,     0,            <span class="comment">/* 18 - 1F */</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; <a class="code" href="mime_8c.html#af89041df2ff39c84bcf9bad6ec3388f4">QP_SP</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>,        <span class="comment">/* 20 - 27 */</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>,        <span class="comment">/* 28 - 2F */</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>,        <span class="comment">/* 30 - 37 */</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, 0    , <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>,        <span class="comment">/* 38 - 3F */</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>,        <span class="comment">/* 40 - 47 */</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>,        <span class="comment">/* 48 - 4F */</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>,        <span class="comment">/* 50 - 57 */</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>,        <span class="comment">/* 58 - 5F */</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>,        <span class="comment">/* 60 - 67 */</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>,        <span class="comment">/* 68 - 6F */</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>,        <span class="comment">/* 70 - 77 */</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>, 0,            <span class="comment">/* 78 - 7F */</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,                <span class="comment">/* 80 - 8F */</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,                <span class="comment">/* 90 - 9F */</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,                <span class="comment">/* A0 - AF */</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,                <span class="comment">/* B0 - BF */</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,                <span class="comment">/* C0 - CF */</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,                <span class="comment">/* D0 - DF */</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,                <span class="comment">/* E0 - EF */</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0                 <span class="comment">/* F0 - FF */</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;};</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">/* Binary --&gt; hexadecimal ASCII table. */</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> aschex[] =</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="stringliteral">&quot;\x30\x31\x32\x33\x34\x35\x36\x37\x38\x39\x41\x42\x43\x44\x45\x46&quot;</span>;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="preprocessor">#ifndef __VMS</span></div><div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="mime_8c.html#a6750c6bf3d5e493a9afbf0c278110187">  125</a></span>&#160;<span class="preprocessor">#define filesize(name, stat_data) (stat_data.st_size)</span></div><div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="mime_8c.html#a8ad2d6cfaf72770716c4baa3d766df1d">  126</a></span>&#160;<span class="preprocessor">#define fopen_read fopen</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="preprocessor">#include &lt;fabdef.h&gt;</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment"> * get_vms_file_size does what it takes to get the real size of the file</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment"> * For fixed files, find out the size of the EOF block and adjust.</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment"> * For all others, have to read the entire file in, discarding the contents.</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment"> * Most posted text files will be small, and binary files like zlib archives</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment"> * and CD/DVD images should be either a STREAM_LF format or a fixed format.</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> VmsRealFileSize(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>,</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                           <span class="keyword">const</span> <a class="code" href="curl__setup_8h.html#a1c6e64692c9b7c6e7dc70adb398b3115">struct_stat</a> *stat_buf)</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;{</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordtype">char</span> <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>[8192];</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> count;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keywordtype">int</span> ret_stat;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <a class="code" href="_console_8h.html#ae07e7f0f3d76ae1309217641da872eb2a9fc5887c030f7a3e19821ebec457e719">FILE</a> * <a class="code" href="config_8d.html#aea53e62b3bb322f5a6bf4ceb58066a37">file</a>;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <a class="code" href="config_8d.html#aea53e62b3bb322f5a6bf4ceb58066a37">file</a> = fopen(<a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>, <a class="code" href="curl__setup_8h.html#ac5301ec6857f338762bb9334473131ce">FOPEN_READTEXT</a>); <span class="comment">/* VMS */</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="config_8d.html#aea53e62b3bb322f5a6bf4ceb58066a37">file</a> == NULL)</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  count = 0;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  ret_stat = 1;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordflow">while</span>(ret_stat &gt; 0) {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    ret_stat = <a class="code" href="stdcheaders_8h.html#aae22dd41ebe1e64904429c5a31e7e642">fread</a>(<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, 1, <span class="keyword">sizeof</span>(<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>), <a class="code" href="config_8d.html#aea53e62b3bb322f5a6bf4ceb58066a37">file</a>);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">if</span>(ret_stat != 0)</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      count += ret_stat;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  }</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  fclose(<a class="code" href="config_8d.html#aea53e62b3bb322f5a6bf4ceb58066a37">file</a>);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordflow">return</span> count;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;}</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"> *  VmsSpecialSize checks to see if the stat st_size can be trusted and</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment"> *  if not to call a routine to get the correct size.</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="keyword">static</span> <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> VmsSpecialSize(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>,</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                                 <span class="keyword">const</span> <a class="code" href="curl__setup_8h.html#a1c6e64692c9b7c6e7dc70adb398b3115">struct_stat</a> *stat_buf)</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;{</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keywordflow">switch</span>(stat_buf-&gt;st_fab_rfm) {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keywordflow">case</span> FAB$C_VAR:</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="keywordflow">case</span> FAB$C_VFC:</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">return</span> VmsRealFileSize(<a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>, stat_buf);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="keywordflow">default</span>:</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">return</span> stat_buf-&gt;st_size;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  }</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor">#define filesize(name, stat_data) VmsSpecialSize(name, &amp;stat_data)</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment"> * vmsfopenread</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment"> * For upload to work as expected on VMS, different optional</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment"> * parameters must be added to the fopen command based on</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment"> * record format of the file.</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="keyword">static</span> <a class="code" href="_console_8h.html#ae07e7f0f3d76ae1309217641da872eb2a9fc5887c030f7a3e19821ebec457e719">FILE</a> * vmsfopenread(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="config_8d.html#aea53e62b3bb322f5a6bf4ceb58066a37">file</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *mode)</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;{</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <a class="code" href="curl__setup_8h.html#a1c6e64692c9b7c6e7dc70adb398b3115">struct_stat</a> statbuf;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="config-win32ce_8h.html#ad4ea824bd0fcae61733c900a5cab1e01">stat</a>(<a class="code" href="config_8d.html#aea53e62b3bb322f5a6bf4ceb58066a37">file</a>, &amp;statbuf);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="keywordflow">switch</span>(statbuf.st_fab_rfm) {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keywordflow">case</span> FAB$C_VAR:</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordflow">case</span> FAB$C_VFC:</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keywordflow">case</span> FAB$C_STMCR:</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">return</span> fopen(<a class="code" href="config_8d.html#aea53e62b3bb322f5a6bf4ceb58066a37">file</a>, <a class="code" href="curl__setup_8h.html#ac5301ec6857f338762bb9334473131ce">FOPEN_READTEXT</a>); <span class="comment">/* VMS */</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keywordflow">default</span>:</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">return</span> fopen(<a class="code" href="config_8d.html#aea53e62b3bb322f5a6bf4ceb58066a37">file</a>, <a class="code" href="curl__setup_8h.html#ac5301ec6857f338762bb9334473131ce">FOPEN_READTEXT</a>, <span class="stringliteral">&quot;rfm=stmlf&quot;</span>, <span class="stringliteral">&quot;ctx=stm&quot;</span>);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  }</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="preprocessor">#define fopen_read vmsfopenread</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="preprocessor">#ifndef HAVE_BASENAME</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">  (Quote from The Open Group Base Specifications Issue 6 IEEE Std 1003.1, 2004</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">  Edition)</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">  The basename() function shall take the pathname pointed to by path and</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">  return a pointer to the final component of the pathname, deleting any</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">  trailing &#39;/&#39; characters.</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">  If the string pointed to by path consists entirely of the &#39;/&#39; character,</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">  basename() shall return a pointer to the string &quot;/&quot;. If the string pointed</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">  to by path is exactly &quot;//&quot;, it is implementation-defined whether &#39;/&#39; or &quot;//&quot;</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">  is returned.</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">  If path is a null pointer or points to an empty string, basename() shall</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">  return a pointer to the string &quot;.&quot;.</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">  The basename() function may modify the string pointed to by path, and may</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">  return a pointer to static storage that may then be overwritten by a</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">  subsequent call to basename().</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">  The basename() function need not be reentrant. A function that is not</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">  required to be reentrant is not required to be thread-safe.</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *Curl_basename(<span class="keywordtype">char</span> *<a class="code" href="util_8c.html#a3b02c6de5c049804444a246f7fdf46b4">path</a>)</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;{</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="comment">/* Ignore all the details above for now and make a quick and simple</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">     implementation here */</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keywordtype">char</span> *s1;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordtype">char</span> *s2;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  s1 = strrchr(<a class="code" href="util_8c.html#a3b02c6de5c049804444a246f7fdf46b4">path</a>, <span class="charliteral">&#39;/&#39;</span>);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  s2 = strrchr(<a class="code" href="util_8c.html#a3b02c6de5c049804444a246f7fdf46b4">path</a>, <span class="charliteral">&#39;\\&#39;</span>);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordflow">if</span>(s1 &amp;&amp; s2) {</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="util_8c.html#a3b02c6de5c049804444a246f7fdf46b4">path</a> = (s1 &gt; s2? s1 : s2) + 1;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  }</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(s1)</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <a class="code" href="util_8c.html#a3b02c6de5c049804444a246f7fdf46b4">path</a> = s1 + 1;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(s2)</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="util_8c.html#a3b02c6de5c049804444a246f7fdf46b4">path</a> = s2 + 1;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="util_8c.html#a3b02c6de5c049804444a246f7fdf46b4">path</a>;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;}</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="mime_8c.html#a951d83a24c9938421fd427523a153540">  262</a></span>&#160;<span class="preprocessor">#define basename(x)  Curl_basename((x))</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">/* Set readback state. */</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> mimesetstate(<a class="code" href="structmime__state.html">mime_state</a> *<a class="code" href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a>, <span class="keyword">enum</span> <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30">mimestate</a> tok, <span class="keywordtype">void</span> *<a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a>)</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;{</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <a class="code" href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a>-&gt;state = tok;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <a class="code" href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a>-&gt;ptr = <a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a>;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <a class="code" href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a>-&gt;offset = 0;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;}</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">/* Escape header string into allocated memory. */</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *escape_string(<span class="keyword">const</span> <span class="keywordtype">char</span> *src)</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;{</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keywordtype">size_t</span> bytecount = 0;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordtype">char</span> *dst;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keywordflow">for</span>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0; src[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>]; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++)</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">if</span>(src[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>] == <span class="charliteral">&#39;&quot;&#39;</span> || src[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>] == <span class="charliteral">&#39;\\&#39;</span>)</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      bytecount++;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  bytecount += <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  dst = <a class="code" href="curl__memory_8h.html#a2eb0b03d1a9de9615a291b1205969069">malloc</a>(bytecount + 1);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordflow">if</span>(!dst)</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="keywordflow">for</span>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0; *src; src++) {</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">if</span>(*src == <span class="charliteral">&#39;&quot;&#39;</span> || *src == <span class="charliteral">&#39;\\&#39;</span>)</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      dst[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++] = <span class="charliteral">&#39;\\&#39;</span>;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    dst[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++] = *src;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  }</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  dst[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="keywordflow">return</span> dst;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;}</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">/* Check if header matches. */</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *match_header(<span class="keyword">struct</span> <a class="code" href="structcurl__slist.html">curl_slist</a> *hdr, <span class="keyword">const</span> <span class="keywordtype">char</span> *lbl, <span class="keywordtype">size_t</span> <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>)</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;{</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keywordtype">char</span> *<a class="code" href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a> = NULL;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="strcase_8h.html#a48c605aaef9b3681c41d91096b6baad0">strncasecompare</a>(hdr-&gt;<a class="code" href="structcurl__slist.html#a5fe4d926491a1c9b8b9a73c40505f601">data</a>, lbl, <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>) &amp;&amp; hdr-&gt;<a class="code" href="structcurl__slist.html#a5fe4d926491a1c9b8b9a73c40505f601">data</a>[<a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>] == <span class="charliteral">&#39;:&#39;</span>)</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a> = hdr-&gt;<a class="code" href="structcurl__slist.html#a5fe4d926491a1c9b8b9a73c40505f601">data</a> + <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> + 1; *<a class="code" href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a> == <span class="charliteral">&#39; &#39;</span>; <a class="code" href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a>++)</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      ;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a>;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;}</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">/* Get a header from an slist. */</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *search_header(<span class="keyword">struct</span> <a class="code" href="structcurl__slist.html">curl_slist</a> *hdrlist, <span class="keyword">const</span> <span class="keywordtype">char</span> *hdr)</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;{</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = strlen(hdr);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keywordtype">char</span> *<a class="code" href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a> = NULL;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keywordflow">for</span>(; !<a class="code" href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a> &amp;&amp; hdrlist; hdrlist = hdrlist-&gt;<a class="code" href="structcurl__slist.html#a56fcfc41d89a47865933c310d316a108">next</a>)</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <a class="code" href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a> = match_header(hdrlist, hdr, <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;}</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *strippath(<span class="keyword">const</span> <span class="keywordtype">char</span> *fullfile)</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;{</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keywordtype">char</span> *<a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keywordtype">char</span> *base;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a> = <a class="code" href="curl__memory_8h.html#aa3f578f8f1eaebf25b2e2313db31cb40">strdup</a>(fullfile); <span class="comment">/* duplicate since basename() may ruin the</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment">                                  buffer it works on */</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>)</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  base = <a class="code" href="curl__memory_8h.html#aa3f578f8f1eaebf25b2e2313db31cb40">strdup</a>(<a class="code" href="mime_8c.html#a951d83a24c9938421fd427523a153540">basename</a>(<a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>));</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <a class="code" href="curl__memory_8h.html#a9cc854374299a1dd933bf62029761768">free</a>(<a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>); <span class="comment">/* free temporary buffer */</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordflow">return</span> base; <span class="comment">/* returns an allocated string or NULL ! */</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;}</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">/* Initialize data encoder state. */</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> cleanup_encoder_state(<a class="code" href="structmime__encoder__state.html">mime_encoder_state</a> *<a class="code" href="unit1394_8c.html#a0fb9c3165f64b5b79f3928b404818be9">p</a>)</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;{</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <a class="code" href="unit1394_8c.html#a0fb9c3165f64b5b79f3928b404818be9">p</a>-&gt;pos = 0;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <a class="code" href="unit1394_8c.html#a0fb9c3165f64b5b79f3928b404818be9">p</a>-&gt;bufbeg = 0;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <a class="code" href="unit1394_8c.html#a0fb9c3165f64b5b79f3928b404818be9">p</a>-&gt;bufend = 0;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;}</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">/* Dummy encoder. This is used for 8bit and binary content encodings. */</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> encoder_nop_read(<span class="keywordtype">char</span> *<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, <span class="keywordtype">size_t</span> <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>, <span class="keywordtype">bool</span> ateof,</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                               <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;{</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <a class="code" href="structmime__encoder__state.html">mime_encoder_state</a> *st = &amp;<a class="code" href="structpart.html">part</a>-&gt;encstate;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="keywordtype">size_t</span> insize = st-&gt;<a class="code" href="structmime__encoder__state.html#a648137b0d19c885943492450644c5c2e">bufend</a> - st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a>;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  (void) ateof;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> &gt; insize)</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> = insize;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>)</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <a class="code" href="unit1304_8c.html#a82a69fcfe92d9db6dd585ccc532a2ab7">memcpy</a>(<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, st-&gt;<a class="code" href="structmime__encoder__state.html#a6db893fcae276ee6f67c6d0945a6b4e0">buf</a>, <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a> += <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;}</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="keyword">static</span> <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> encoder_nop_size(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;{</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="structpart.html">part</a>-&gt;datasize;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;}</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">/* 7bit encoder: the encoder is just a data validity check. */</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> encoder_7bit_read(<span class="keywordtype">char</span> *<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, <span class="keywordtype">size_t</span> <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>, <span class="keywordtype">bool</span> ateof,</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                                <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;{</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <a class="code" href="structmime__encoder__state.html">mime_encoder_state</a> *st = &amp;<a class="code" href="structpart.html">part</a>-&gt;encstate;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="keywordtype">size_t</span> cursize = st-&gt;<a class="code" href="structmime__encoder__state.html#a648137b0d19c885943492450644c5c2e">bufend</a> - st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a>;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  (void) ateof;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> &gt; cursize)</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> = cursize;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="keywordflow">for</span>(cursize = 0; cursize &lt; <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>; cursize++) {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    *<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a> = st-&gt;<a class="code" href="structmime__encoder__state.html#a6db893fcae276ee6f67c6d0945a6b4e0">buf</a>[st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a>];</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">if</span>(*<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>++ &amp; 0x80)</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <span class="keywordflow">return</span> cursize? cursize: <a class="code" href="mime_8c.html#ac41734365e76e2fcab439c31c28ea28c">READ_ERROR</a>;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a>++;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  }</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordflow">return</span> cursize;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;}</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">/* Base64 content encoder. */</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> encoder_base64_read(<span class="keywordtype">char</span> *<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, <span class="keywordtype">size_t</span> <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>, <span class="keywordtype">bool</span> ateof,</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                                <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;{</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <a class="code" href="structmime__encoder__state.html">mime_encoder_state</a> *st = &amp;<a class="code" href="structpart.html">part</a>-&gt;encstate;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="keywordtype">size_t</span> cursize = 0;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="keywordtype">char</span> *<a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a> = <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keywordflow">while</span>(st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a> &lt; st-&gt;<a class="code" href="structmime__encoder__state.html#a648137b0d19c885943492450644c5c2e">bufend</a>) {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="comment">/* Line full ? */</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">if</span>(st-&gt;<a class="code" href="structmime__encoder__state.html#a9de571d91a0bd1a9697dc544929d80ae">pos</a> &gt; <a class="code" href="mime_8h.html#a87cd972177607de17e317cf9272c1f02">MAX_ENCODED_LINE_LENGTH</a> - 4) {</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      <span class="comment">/* Yes, we need 2 characters for CRLF. */</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> &lt; 2)</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      *<a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a>++ = <span class="charliteral">&#39;\r&#39;</span>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      *<a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a>++ = <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      st-&gt;<a class="code" href="structmime__encoder__state.html#a9de571d91a0bd1a9697dc544929d80ae">pos</a> = 0;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      cursize += 2;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> -= 2;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    }</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="comment">/* Be sure there is enough space and input data for a base64 group. */</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">if</span>(size &lt; 4 || st-&gt;bufend - st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a> &lt; 3)</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="comment">/* Encode three bytes as four characters. */</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = st-&gt;<a class="code" href="structmime__encoder__state.html#a6db893fcae276ee6f67c6d0945a6b4e0">buf</a>[st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a>++] &amp; 0xFF;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = (<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &lt;&lt; 8) | (st-&gt;<a class="code" href="structmime__encoder__state.html#a6db893fcae276ee6f67c6d0945a6b4e0">buf</a>[st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a>++] &amp; 0xFF);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = (<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &lt;&lt; 8) | (st-&gt;<a class="code" href="structmime__encoder__state.html#a6db893fcae276ee6f67c6d0945a6b4e0">buf</a>[st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a>++] &amp; 0xFF);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    *<a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a>++ = base64[(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &gt;&gt; 18) &amp; 0x3F];</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    *<a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a>++ = base64[(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &gt;&gt; 12) &amp; 0x3F];</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    *<a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a>++ = base64[(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &gt;&gt; 6) &amp; 0x3F];</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    *<a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a>++ = base64[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &amp; 0x3F];</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    cursize += 4;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    st-&gt;<a class="code" href="structmime__encoder__state.html#a9de571d91a0bd1a9697dc544929d80ae">pos</a> += 4;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> -= 4;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  }</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="comment">/* If at eof, we have to flush the buffered data. */</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="keywordflow">if</span>(ateof &amp;&amp; <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> &gt;= 4) {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="comment">/* Buffered data size can only be 0, 1 or 2. */</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a>[2] = <a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a>[3] = <span class="charliteral">&#39;=&#39;</span>;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">switch</span>(st-&gt;<a class="code" href="structmime__encoder__state.html#a648137b0d19c885943492450644c5c2e">bufend</a> - st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a>) {</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = (st-&gt;<a class="code" href="structmime__encoder__state.html#a6db893fcae276ee6f67c6d0945a6b4e0">buf</a>[st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a> + 1] &amp; 0xFF) &lt;&lt; 8;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      <span class="comment">/* FALLTHROUGH */</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> |= (st-&gt;<a class="code" href="structmime__encoder__state.html#a6db893fcae276ee6f67c6d0945a6b4e0">buf</a>[st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a>] &amp; 0xFF) &lt;&lt; 16;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      <a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a>[0] = base64[(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &gt;&gt; 18) &amp; 0x3F];</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      <a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a>[1] = base64[(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &gt;&gt; 12) &amp; 0x3F];</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      <span class="keywordflow">if</span>(++st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a> != st-&gt;<a class="code" href="structmime__encoder__state.html#a648137b0d19c885943492450644c5c2e">bufend</a>) {</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a>[2] = base64[(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &gt;&gt; 6) &amp; 0x3F];</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a>++;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      }</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      cursize += 4;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      st-&gt;<a class="code" href="structmime__encoder__state.html#a9de571d91a0bd1a9697dc544929d80ae">pos</a> += 4;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    }</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  }</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="preprocessor">#ifdef CURL_DOES_CONVERSIONS</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="comment">/* This is now textual data, Convert character codes. */</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;easy &amp;&amp; cursize) {</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="non-ascii_8h.html#ab7de472e1367a01da556c8f5acad93bb">Curl_convert_to_network</a>(<a class="code" href="structpart.html">part</a>-&gt;easy, <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, cursize);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="mime_8c.html#ac41734365e76e2fcab439c31c28ea28c">READ_ERROR</a>;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  }</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="keywordflow">return</span> cursize;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;}</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="keyword">static</span> <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> encoder_base64_size(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;{</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> = <a class="code" href="structpart.html">part</a>-&gt;datasize;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> &lt;= 0)</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>;    <span class="comment">/* Unknown size or no data. */</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="comment">/* Compute base64 character count. */</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> = 4 * (1 + (<a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> - 1) / 3);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="comment">/* Effective character count must include CRLFs. */</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> + 2 * ((<a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> - 1) / <a class="code" href="mime_8h.html#a87cd972177607de17e317cf9272c1f02">MAX_ENCODED_LINE_LENGTH</a>);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;}</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">/* Quoted-printable lookahead.</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment"> * Check if a CRLF or end of data is in input buffer at current position + n.</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment"> * Return -1 if more data needed, 1 if CRLF or end of data, else 0.</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> qp_lookahead_eol(<a class="code" href="structmime__encoder__state.html">mime_encoder_state</a> *st, <span class="keywordtype">int</span> ateof, <span class="keywordtype">size_t</span> <a class="code" href="config_8d.html#a9fb4830d0cbef7d3cf48425ce59f580a">n</a>)</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;{</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <a class="code" href="config_8d.html#a9fb4830d0cbef7d3cf48425ce59f580a">n</a> += st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a>;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="config_8d.html#a9fb4830d0cbef7d3cf48425ce59f580a">n</a> &gt;= st-&gt;<a class="code" href="structmime__encoder__state.html#a648137b0d19c885943492450644c5c2e">bufend</a> &amp;&amp; ateof)</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="config_8d.html#a9fb4830d0cbef7d3cf48425ce59f580a">n</a> + 2 &gt; st-&gt;<a class="code" href="structmime__encoder__state.html#a648137b0d19c885943492450644c5c2e">bufend</a>)</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">return</span> ateof? 0: -1;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keywordflow">if</span>(qp_class[st-&gt;<a class="code" href="structmime__encoder__state.html#a6db893fcae276ee6f67c6d0945a6b4e0">buf</a>[<a class="code" href="config_8d.html#a9fb4830d0cbef7d3cf48425ce59f580a">n</a>] &amp; 0xFF] == <a class="code" href="mime_8c.html#aa8c497008b5fa9afeec3716ece794513">QP_CR</a> &amp;&amp;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;     qp_class[st-&gt;<a class="code" href="structmime__encoder__state.html#a6db893fcae276ee6f67c6d0945a6b4e0">buf</a>[<a class="code" href="config_8d.html#a9fb4830d0cbef7d3cf48425ce59f580a">n</a> + 1] &amp; 0xFF] == <a class="code" href="mime_8c.html#a5b87a3fc8bd5d005c1859665581775e1">QP_LF</a>)</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;}</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">/* Quoted-printable encoder. */</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> encoder_qp_read(<span class="keywordtype">char</span> *<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, <span class="keywordtype">size_t</span> <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>, <span class="keywordtype">bool</span> ateof,</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                              <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;{</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  <a class="code" href="structmime__encoder__state.html">mime_encoder_state</a> *st = &amp;<a class="code" href="structpart.html">part</a>-&gt;encstate;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="keywordtype">char</span> *<a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a> = <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="keywordtype">size_t</span> cursize = 0;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="keywordtype">int</span> softlinebreak;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <span class="keywordtype">char</span> <a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>[4];</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="comment">/* On all platforms, input is supposed to be ASCII compatible: for this</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">     reason, we use hexadecimal ASCII codes in this function rather than</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">     character constants that can be interpreted as non-ascii on some</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">     platforms. Preserve ASCII encoding on output too. */</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="keywordflow">while</span>(st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a> &lt; st-&gt;<a class="code" href="structmime__encoder__state.html#a648137b0d19c885943492450644c5c2e">bufend</a>) {</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = 1;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordtype">size_t</span> consumed = 1;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = st-&gt;<a class="code" href="structmime__encoder__state.html#a6db893fcae276ee6f67c6d0945a6b4e0">buf</a>[st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a>];</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>[0] = (char) <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>[1] = aschex[(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &gt;&gt; 4) &amp; 0xF];</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>[2] = aschex[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &amp; 0xF];</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">switch</span>(qp_class[st-&gt;<a class="code" href="structmime__encoder__state.html#a6db893fcae276ee6f67c6d0945a6b4e0">buf</a>[st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a>] &amp; 0xFF]) {</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a>:          <span class="comment">/* Not a special character. */</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mime_8c.html#af89041df2ff39c84bcf9bad6ec3388f4">QP_SP</a>:          <span class="comment">/* Space or tab. */</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <span class="comment">/* Spacing must be escaped if followed by CRLF. */</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <span class="keywordflow">switch</span>(qp_lookahead_eol(st, ateof, 1)) {</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <span class="keywordflow">case</span> -1:          <span class="comment">/* More input data needed. */</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="keywordflow">return</span> cursize;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      <span class="keywordflow">case</span> 0:           <span class="comment">/* No encoding needed. */</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      <span class="keywordflow">default</span>:          <span class="comment">/* CRLF after space or tab. */</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>[0] = <span class="stringliteral">&#39;\x3D&#39;</span>;    <span class="comment">/* &#39;=&#39; */</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = 3;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      }</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mime_8c.html#aa8c497008b5fa9afeec3716ece794513">QP_CR</a>:         <span class="comment">/* Carriage return. */</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      <span class="comment">/* If followed by a line-feed, output the CRLF pair.</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">         Else escape it. */</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <span class="keywordflow">switch</span>(qp_lookahead_eol(st, ateof, 0)) {</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      <span class="keywordflow">case</span> -1:          <span class="comment">/* Need more data. */</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        <span class="keywordflow">return</span> cursize;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <span class="keywordflow">case</span> 1:           <span class="comment">/* CRLF found. */</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        <a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>[<a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>++] = <span class="stringliteral">&#39;\x0A&#39;</span>;    <span class="comment">/* Append &#39;\n&#39;. */</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        consumed = 2;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      <span class="keywordflow">default</span>:          <span class="comment">/* Not followed by LF: escape. */</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>[0] = <span class="stringliteral">&#39;\x3D&#39;</span>;    <span class="comment">/* &#39;=&#39; */</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = 3;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      }</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keywordflow">default</span>:            <span class="comment">/* Character must be escaped. */</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>[0] = <span class="stringliteral">&#39;\x3D&#39;</span>;    <span class="comment">/* &#39;=&#39; */</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = 3;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    }</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="comment">/* Be sure the encoded character fits within maximum line length. */</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>[<a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> - 1] != <span class="stringliteral">&#39;\x0A&#39;</span>) {    <span class="comment">/* &#39;\n&#39; */</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      softlinebreak = st-&gt;<a class="code" href="structmime__encoder__state.html#a9de571d91a0bd1a9697dc544929d80ae">pos</a> + <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> &gt; <a class="code" href="mime_8h.html#a87cd972177607de17e317cf9272c1f02">MAX_ENCODED_LINE_LENGTH</a>;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <span class="keywordflow">if</span>(!softlinebreak &amp;&amp; st-&gt;<a class="code" href="structmime__encoder__state.html#a9de571d91a0bd1a9697dc544929d80ae">pos</a> + <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> == <a class="code" href="mime_8h.html#a87cd972177607de17e317cf9272c1f02">MAX_ENCODED_LINE_LENGTH</a>) {</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="comment">/* We may use the current line only if end of data or followed by</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">           a CRLF. */</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="keywordflow">switch</span>(qp_lookahead_eol(st, ateof, consumed)) {</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="keywordflow">case</span> -1:        <span class="comment">/* Need more data. */</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;          <span class="keywordflow">return</span> cursize;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <span class="keywordflow">case</span> 0:         <span class="comment">/* Not followed by a CRLF. */</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;          softlinebreak = 1;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        }</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      }</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <span class="keywordflow">if</span>(softlinebreak) {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        strcpy(<a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>, <span class="stringliteral">&quot;\x3D\x0D\x0A&quot;</span>);    <span class="comment">/* &quot;=\r\n&quot; */</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = 3;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        consumed = 0;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      }</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    }</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="comment">/* If the output buffer would overflow, do not store. */</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> &gt; <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>)</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="comment">/* Append to output buffer. */</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <a class="code" href="unit1304_8c.html#a82a69fcfe92d9db6dd585ccc532a2ab7">memcpy</a>(<a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a>, <a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>, <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    cursize += <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a> += <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> -= <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    st-&gt;<a class="code" href="structmime__encoder__state.html#a9de571d91a0bd1a9697dc544929d80ae">pos</a> += <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a>[<a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> - 1] == <span class="stringliteral">&#39;\x0A&#39;</span>)    <span class="comment">/* &#39;\n&#39; */</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      st-&gt;<a class="code" href="structmime__encoder__state.html#a9de571d91a0bd1a9697dc544929d80ae">pos</a> = 0;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a> += consumed;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  }</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="keywordflow">return</span> cursize;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;}</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="keyword">static</span> <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> encoder_qp_size(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;{</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="comment">/* Determining the size can only be done by reading the data: unless the</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">     data size is 0, we return it as unknown (-1). */</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="structpart.html">part</a>-&gt;datasize? -1: 0;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;}</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">/* In-memory data callbacks. */</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">/* Argument is a pointer to the mime part. */</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> mime_mem_read(<span class="keywordtype">char</span> *<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, <span class="keywordtype">size_t</span> <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>, <span class="keywordtype">size_t</span> nitems,</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                            <span class="keywordtype">void</span> *instream)</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;{</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a> = (<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *) instream;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="keywordtype">size_t</span> sz = (size_t) <a class="code" href="structpart.html">part</a>-&gt;datasize - <a class="code" href="structpart.html">part</a>-&gt;state.offset;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  (<span class="keywordtype">void</span>) <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>;   <span class="comment">/* Always 1.*/</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="keywordflow">if</span>(sz &gt; nitems)</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    sz = nitems;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <span class="keywordflow">if</span>(sz)</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <a class="code" href="unit1304_8c.html#a82a69fcfe92d9db6dd585ccc532a2ab7">memcpy</a>(<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, (<span class="keywordtype">char</span> *) &amp;<a class="code" href="structpart.html">part</a>-&gt;data[<a class="code" href="structpart.html">part</a>-&gt;state.offset], sz);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <a class="code" href="structpart.html">part</a>-&gt;state.offset += sz;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="keywordflow">return</span> sz;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;}</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> mime_mem_seek(<span class="keywordtype">void</span> *instream, <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> offset, <span class="keywordtype">int</span> whence)</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;{</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a> = (<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *) instream;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="keywordflow">switch</span>(whence) {</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="keywordflow">case</span> SEEK_CUR:</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    offset += <a class="code" href="structpart.html">part</a>-&gt;state.offset;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="keywordflow">case</span> SEEK_END:</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    offset += <a class="code" href="structpart.html">part</a>-&gt;datasize;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  }</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="keywordflow">if</span>(offset &lt; 0 || offset &gt; <a class="code" href="structpart.html">part</a>-&gt;datasize)</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#a7d210f0631e3de2ae352413b0eaf8226">CURL_SEEKFUNC_FAIL</a>;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <a class="code" href="structpart.html">part</a>-&gt;state.offset = (size_t) offset;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af7074ca58279ac7ad8f78b9954a31160">CURL_SEEKFUNC_OK</a>;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;}</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> mime_mem_free(<span class="keywordtype">void</span> *<a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a>)</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;{</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <a class="code" href="memdebug_8h.html#a795660f73c902cc80ac0fe6cda0dbd1c">Curl_safefree</a>(((<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *) <a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a>)-&gt;<a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;}</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">/* Named file callbacks. */</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">/* Argument is a pointer to the mime part. */</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> mime_open_file(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> * <a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;{</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="comment">/* Open a MIMEKIND_FILE part. */</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;fp)</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <a class="code" href="structpart.html">part</a>-&gt;fp = <a class="code" href="mime_8c.html#a8ad2d6cfaf72770716c4baa3d766df1d">fopen_read</a>(<a class="code" href="structpart.html">part</a>-&gt;data, <span class="stringliteral">&quot;rb&quot;</span>);</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="structpart.html">part</a>-&gt;fp? 0: -1;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;}</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> mime_file_read(<span class="keywordtype">char</span> *<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, <span class="keywordtype">size_t</span> <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>, <span class="keywordtype">size_t</span> nitems,</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                             <span class="keywordtype">void</span> *instream)</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;{</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a> = (<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *) instream;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="keywordflow">if</span>(mime_open_file(<a class="code" href="structpart.html">part</a>))</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mime_8c.html#ac41734365e76e2fcab439c31c28ea28c">READ_ERROR</a>;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="stdcheaders_8h.html#aae22dd41ebe1e64904429c5a31e7e642">fread</a>(<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>, nitems, <a class="code" href="structpart.html">part</a>-&gt;fp);</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;}</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> mime_file_seek(<span class="keywordtype">void</span> *instream, <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> offset, <span class="keywordtype">int</span> whence)</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;{</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a> = (<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *) instream;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <span class="keywordflow">if</span>(whence == SEEK_SET &amp;&amp; !offset &amp;&amp; !<a class="code" href="structpart.html">part</a>-&gt;fp)</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af7074ca58279ac7ad8f78b9954a31160">CURL_SEEKFUNC_OK</a>;   <span class="comment">/* Not open: implicitly already at BOF. */</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <span class="keywordflow">if</span>(mime_open_file(<a class="code" href="structpart.html">part</a>))</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#a7d210f0631e3de2ae352413b0eaf8226">CURL_SEEKFUNC_FAIL</a>;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="keywordflow">return</span> fseek(<a class="code" href="structpart.html">part</a>-&gt;fp, (<span class="keywordtype">long</span>) offset, whence)?</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;               <a class="code" href="curl_8h.html#a34eb017e0a29378f976becdaa94160d1">CURL_SEEKFUNC_CANTSEEK</a>: <a class="code" href="curl_8h.html#af7074ca58279ac7ad8f78b9954a31160">CURL_SEEKFUNC_OK</a>;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;}</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> mime_file_free(<span class="keywordtype">void</span> *<a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a>)</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;{</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a> = (<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *) <a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a>;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;fp) {</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    fclose(<a class="code" href="structpart.html">part</a>-&gt;fp);</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;fp = NULL;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  }</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <a class="code" href="memdebug_8h.html#a795660f73c902cc80ac0fe6cda0dbd1c">Curl_safefree</a>(<a class="code" href="structpart.html">part</a>-&gt;data);</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <a class="code" href="structpart.html">part</a>-&gt;data = NULL;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;}</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment">/* Subparts callbacks. */</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment">/* Argument is a pointer to the mime structure. */</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment">/* Readback a byte string segment. */</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> readback_bytes(<a class="code" href="structmime__state.html">mime_state</a> *<a class="code" href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a>,</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                             <span class="keywordtype">char</span> *<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, <span class="keywordtype">size_t</span> bufsize,</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                             <span class="keyword">const</span> <span class="keywordtype">char</span> *bytes, <span class="keywordtype">size_t</span> numbytes,</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                             <span class="keyword">const</span> <span class="keywordtype">char</span> *trail)</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;{</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="keywordtype">size_t</span> sz;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <span class="keywordflow">if</span>(numbytes &gt; <a class="code" href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a>-&gt;offset) {</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    sz = numbytes - <a class="code" href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a>-&gt;offset;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    bytes += <a class="code" href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a>-&gt;offset;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  }</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordtype">size_t</span> tsz = strlen(trail);</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    sz = <a class="code" href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a>-&gt;offset - numbytes;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordflow">if</span>(sz &gt;= tsz)</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    bytes = trail + sz;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    sz = tsz - sz;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  }</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="keywordflow">if</span>(sz &gt; bufsize)</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    sz = bufsize;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <a class="code" href="unit1304_8c.html#a82a69fcfe92d9db6dd585ccc532a2ab7">memcpy</a>(<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, bytes, sz);</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <a class="code" href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a>-&gt;offset += sz;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <span class="keywordflow">return</span> sz;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;}</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment">/* Read a non-encoded part content. */</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> read_part_content(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>,</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                                <span class="keywordtype">char</span> *<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, <span class="keywordtype">size_t</span> bufsize)</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;{</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="keywordtype">size_t</span> sz = 0;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;readfunc)</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    sz = <a class="code" href="structpart.html">part</a>-&gt;readfunc(<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, 1, bufsize, <a class="code" href="structpart.html">part</a>-&gt;arg);</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="keywordflow">return</span> sz;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;}</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment">/* Read and encode part content. */</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> read_encoded_part_content(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>,</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                                        <span class="keywordtype">char</span> *<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, <span class="keywordtype">size_t</span> bufsize)</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;{</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <a class="code" href="structmime__encoder__state.html">mime_encoder_state</a> *st = &amp;<a class="code" href="structpart.html">part</a>-&gt;encstate;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  <span class="keywordtype">size_t</span> cursize = 0;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <span class="keywordtype">size_t</span> sz;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="keywordtype">bool</span> ateof = <a class="code" href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <span class="keywordflow">while</span>(bufsize) {</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="keywordflow">if</span>(st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a> &lt; st-&gt;<a class="code" href="structmime__encoder__state.html#a648137b0d19c885943492450644c5c2e">bufend</a> || ateof) {</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      <span class="comment">/* Encode buffered data. */</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      sz = <a class="code" href="structpart.html">part</a>-&gt;encoder-&gt;encodefunc(<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, bufsize, ateof, <a class="code" href="structpart.html">part</a>);</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      <span class="keywordflow">switch</span>(sz) {</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <span class="keywordflow">if</span>(ateof)</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;          <span class="keywordflow">return</span> cursize;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="curl_8h.html#a37f72557bd7b33a75cb3c3ab165e357e">CURL_READFUNC_ABORT</a>:</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="curl_8h.html#a8a6431fcced5944dec01685f14de2540">CURL_READFUNC_PAUSE</a>:</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="mime_8c.html#ac41734365e76e2fcab439c31c28ea28c">READ_ERROR</a>:</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        <span class="keywordflow">return</span> cursize? cursize: sz;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        cursize += sz;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a> += sz;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        bufsize -= sz;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      }</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    }</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="comment">/* We need more data in input buffer. */</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="keywordflow">if</span>(st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a>) {</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      <span class="keywordtype">size_t</span> <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a> = st-&gt;<a class="code" href="structmime__encoder__state.html#a648137b0d19c885943492450644c5c2e">bufend</a> - st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a>;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>)</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        memmove(st-&gt;<a class="code" href="structmime__encoder__state.html#a6db893fcae276ee6f67c6d0945a6b4e0">buf</a>, st-&gt;<a class="code" href="structmime__encoder__state.html#a6db893fcae276ee6f67c6d0945a6b4e0">buf</a> + st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a>, <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>);</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      st-&gt;<a class="code" href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">bufbeg</a> = 0;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      st-&gt;<a class="code" href="structmime__encoder__state.html#a648137b0d19c885943492450644c5c2e">bufend</a> = <a class="code" href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a>;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    }</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="keywordflow">if</span>(st-&gt;<a class="code" href="structmime__encoder__state.html#a648137b0d19c885943492450644c5c2e">bufend</a> &gt;= <span class="keyword">sizeof</span>(st-&gt;<a class="code" href="structmime__encoder__state.html#a6db893fcae276ee6f67c6d0945a6b4e0">buf</a>))</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <span class="keywordflow">return</span> cursize? cursize: <a class="code" href="mime_8c.html#ac41734365e76e2fcab439c31c28ea28c">READ_ERROR</a>;    <span class="comment">/* Buffer full. */</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    sz = read_part_content(<a class="code" href="structpart.html">part</a>, st-&gt;<a class="code" href="structmime__encoder__state.html#a6db893fcae276ee6f67c6d0945a6b4e0">buf</a> + st-&gt;<a class="code" href="structmime__encoder__state.html#a648137b0d19c885943492450644c5c2e">bufend</a>,</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                           <span class="keyword">sizeof</span>(st-&gt;<a class="code" href="structmime__encoder__state.html#a6db893fcae276ee6f67c6d0945a6b4e0">buf</a>) - st-&gt;<a class="code" href="structmime__encoder__state.html#a648137b0d19c885943492450644c5c2e">bufend</a>);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keywordflow">switch</span>(sz) {</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      ateof = <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="curl_8h.html#a37f72557bd7b33a75cb3c3ab165e357e">CURL_READFUNC_ABORT</a>:</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="curl_8h.html#a8a6431fcced5944dec01685f14de2540">CURL_READFUNC_PAUSE</a>:</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mime_8c.html#ac41734365e76e2fcab439c31c28ea28c">READ_ERROR</a>:</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      <span class="keywordflow">return</span> cursize? cursize: sz;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      st-&gt;<a class="code" href="structmime__encoder__state.html#a648137b0d19c885943492450644c5c2e">bufend</a> += sz;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    }</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  }</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="keywordflow">return</span> cursize;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;}</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">/* Readback a mime part. */</span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> readback_part(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>,</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                            <span class="keywordtype">char</span> *<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, <span class="keywordtype">size_t</span> bufsize)</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;{</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <span class="keywordtype">size_t</span> cursize = 0;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="preprocessor">#ifdef CURL_DOES_CONVERSIONS</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="keywordtype">char</span> *convbuf = <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="comment">/* Readback from part. */</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="keywordflow">while</span>(bufsize) {</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keywordtype">size_t</span> sz = 0;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keyword">struct </span><a class="code" href="structcurl__slist.html">curl_slist</a> *hdr = (<span class="keyword">struct </span><a class="code" href="structcurl__slist.html">curl_slist</a> *) <a class="code" href="structpart.html">part</a>-&gt;state.ptr;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="keywordflow">switch</span>(<a class="code" href="structpart.html">part</a>-&gt;state.state) {</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30ae986dee840014a75ec576769fda3d31c">MIMESTATE_BEGIN</a>:</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      mimesetstate(&amp;<a class="code" href="structpart.html">part</a>-&gt;state, <a class="code" href="structpart.html">part</a>-&gt;flags &amp; <a class="code" href="mime_8h.html#ae6faa301cc4b37f4112e9acc984db066">MIME_BODY_ONLY</a>? <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a26f14961a9c8856beaf155b62a958145">MIMESTATE_BODY</a>:</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                                 <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a0fe3323e6cdcb2985a7f23f7038b927a">MIMESTATE_CURLHEADERS</a>, <a class="code" href="structpart.html">part</a>-&gt;curlheaders);</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a75222abd526c43d846a29d1dc7129f48">MIMESTATE_USERHEADERS</a>:</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      <span class="keywordflow">if</span>(!hdr) {</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        mimesetstate(&amp;<a class="code" href="structpart.html">part</a>-&gt;state, <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a6e1ee28103ed68ef48e14de419e20c02">MIMESTATE_EOH</a>, NULL);</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      }</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      <span class="keywordflow">if</span>(match_header(hdr, <span class="stringliteral">&quot;Content-Type&quot;</span>, 12)) {</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        mimesetstate(&amp;<a class="code" href="structpart.html">part</a>-&gt;state, <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a75222abd526c43d846a29d1dc7129f48">MIMESTATE_USERHEADERS</a>, hdr-&gt;<a class="code" href="structcurl__slist.html#a56fcfc41d89a47865933c310d316a108">next</a>);</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      }</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      <span class="comment">/* FALLTHROUGH */</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a0fe3323e6cdcb2985a7f23f7038b927a">MIMESTATE_CURLHEADERS</a>:</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      <span class="keywordflow">if</span>(!hdr)</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        mimesetstate(&amp;<a class="code" href="structpart.html">part</a>-&gt;state, <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a75222abd526c43d846a29d1dc7129f48">MIMESTATE_USERHEADERS</a>, <a class="code" href="structpart.html">part</a>-&gt;userheaders);</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        sz = readback_bytes(&amp;<a class="code" href="structpart.html">part</a>-&gt;state, <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, bufsize,</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                            hdr-&gt;<a class="code" href="structcurl__slist.html#a5fe4d926491a1c9b8b9a73c40505f601">data</a>, strlen(hdr-&gt;<a class="code" href="structcurl__slist.html#a5fe4d926491a1c9b8b9a73c40505f601">data</a>), <span class="stringliteral">&quot;\r\n&quot;</span>);</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        <span class="keywordflow">if</span>(!sz)</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;          mimesetstate(&amp;<a class="code" href="structpart.html">part</a>-&gt;state, <a class="code" href="structpart.html">part</a>-&gt;state.state, hdr-&gt;<a class="code" href="structcurl__slist.html#a56fcfc41d89a47865933c310d316a108">next</a>);</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      }</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a6e1ee28103ed68ef48e14de419e20c02">MIMESTATE_EOH</a>:</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      sz = readback_bytes(&amp;<a class="code" href="structpart.html">part</a>-&gt;state, <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, bufsize, <span class="stringliteral">&quot;\r\n&quot;</span>, 2, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      <span class="keywordflow">if</span>(!sz)</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        mimesetstate(&amp;<a class="code" href="structpart.html">part</a>-&gt;state, <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a26f14961a9c8856beaf155b62a958145">MIMESTATE_BODY</a>, NULL);</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a26f14961a9c8856beaf155b62a958145">MIMESTATE_BODY</a>:</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="preprocessor">#ifdef CURL_DOES_CONVERSIONS</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;easy &amp;&amp; convbuf &lt; <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>) {</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="non-ascii_8h.html#ab7de472e1367a01da556c8f5acad93bb">Curl_convert_to_network</a>(<a class="code" href="structpart.html">part</a>-&gt;easy, convbuf,</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                                                  <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a> - convbuf);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="mime_8c.html#ac41734365e76e2fcab439c31c28ea28c">READ_ERROR</a>;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        convbuf = <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      }</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      cleanup_encoder_state(&amp;<a class="code" href="structpart.html">part</a>-&gt;encstate);</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;      mimesetstate(&amp;<a class="code" href="structpart.html">part</a>-&gt;state, <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a0d49370eb200044ef0caf87f127bec91">MIMESTATE_CONTENT</a>, NULL);</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a0d49370eb200044ef0caf87f127bec91">MIMESTATE_CONTENT</a>:</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;encoder)</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        sz = read_encoded_part_content(<a class="code" href="structpart.html">part</a>, <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, bufsize);</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        sz = read_part_content(<a class="code" href="structpart.html">part</a>, <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, bufsize);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      <span class="keywordflow">switch</span>(sz) {</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        mimesetstate(&amp;<a class="code" href="structpart.html">part</a>-&gt;state, <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30af392f88ef7fd223144ee718ab32b22a2">MIMESTATE_END</a>, NULL);</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <span class="comment">/* Try sparing open file descriptors. */</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;kind == <a class="code" href="mime_8h.html#a3f7ea952d37b502d03fb5d8f8b9d7101ae008e417ccf479abfb3d3117c330df4b">MIMEKIND_FILE</a> &amp;&amp; <a class="code" href="structpart.html">part</a>-&gt;fp) {</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;          fclose(<a class="code" href="structpart.html">part</a>-&gt;fp);</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;          <a class="code" href="structpart.html">part</a>-&gt;fp = NULL;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        }</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <span class="comment">/* FALLTHROUGH */</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="curl_8h.html#a37f72557bd7b33a75cb3c3ab165e357e">CURL_READFUNC_ABORT</a>:</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="curl_8h.html#a8a6431fcced5944dec01685f14de2540">CURL_READFUNC_PAUSE</a>:</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="mime_8c.html#ac41734365e76e2fcab439c31c28ea28c">READ_ERROR</a>:</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <span class="keywordflow">return</span> cursize? cursize: sz;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;      }</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30af392f88ef7fd223144ee718ab32b22a2">MIMESTATE_END</a>:</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      <span class="keywordflow">return</span> cursize;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      <span class="keywordflow">break</span>;    <span class="comment">/* Other values not in part state. */</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    }</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="comment">/* Bump buffer and counters according to read size. */</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    cursize += sz;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a> += sz;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    bufsize -= sz;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  }</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="preprocessor">#ifdef CURL_DOES_CONVERSIONS</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;easy &amp;&amp; convbuf &lt; <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a> &amp;&amp;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;         <a class="code" href="structpart.html">part</a>-&gt;state.state &lt; <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a26f14961a9c8856beaf155b62a958145">MIMESTATE_BODY</a>) {</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="non-ascii_8h.html#ab7de472e1367a01da556c8f5acad93bb">Curl_convert_to_network</a>(<a class="code" href="structpart.html">part</a>-&gt;easy, convbuf,</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                                                  <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a> - convbuf);</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="mime_8c.html#ac41734365e76e2fcab439c31c28ea28c">READ_ERROR</a>;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;      }</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <span class="keywordflow">return</span> cursize;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;}</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="comment">/* Readback from mime. */</span></div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> mime_subparts_read(<span class="keywordtype">char</span> *<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, <span class="keywordtype">size_t</span> <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>, <span class="keywordtype">size_t</span> nitems,</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                                 <span class="keywordtype">void</span> *instream)</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;{</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <a class="code" href="structcurl__mime__s.html">curl_mime</a> *mime = (<a class="code" href="structcurl__mime__s.html">curl_mime</a> *) instream;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <span class="keywordtype">size_t</span> cursize = 0;</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="preprocessor">#ifdef CURL_DOES_CONVERSIONS</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  <span class="keywordtype">char</span> *convbuf = <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  (void) <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>;   <span class="comment">/* Always 1. */</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="keywordflow">while</span>(nitems) {</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keywordtype">size_t</span> sz = 0;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a> = mime-&gt;<a class="code" href="structcurl__mime__s.html#a6d359bcee78c99535224d7c09fc25334">state</a>.<a class="code" href="structmime__state.html#ad367d9eabdfe1f28c7a3efdb349abeed">ptr</a>;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="keywordflow">switch</span>(mime-&gt;<a class="code" href="structcurl__mime__s.html#a6d359bcee78c99535224d7c09fc25334">state</a>.<a class="code" href="structmime__state.html#aebcf0f37d17920f4df99f0f76840c2d1">state</a>) {</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30ae986dee840014a75ec576769fda3d31c">MIMESTATE_BEGIN</a>:</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a26f14961a9c8856beaf155b62a958145">MIMESTATE_BODY</a>:</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;<span class="preprocessor">#ifdef CURL_DOES_CONVERSIONS</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      convbuf = <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      mimesetstate(&amp;mime-&gt;<a class="code" href="structcurl__mime__s.html#a6d359bcee78c99535224d7c09fc25334">state</a>, <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30ad253a9d2d1bd2c40cf1ea26fe42ae563">MIMESTATE_BOUNDARY1</a>, mime-&gt;<a class="code" href="structcurl__mime__s.html#accd1697ef1449ff2692cc9c1cc9e40da">firstpart</a>);</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;      <span class="comment">/* The first boundary always follows the header termination empty line,</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="comment">         so is always preceded by a CRLK. We can then spare 2 characters</span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;<span class="comment">         by skipping the leading CRLF in boundary. */</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      mime-&gt;<a class="code" href="structcurl__mime__s.html#a6d359bcee78c99535224d7c09fc25334">state</a>.<a class="code" href="structmime__state.html#a078e72c648ad6d0b13942014f0147fa2">offset</a> += 2;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30ad253a9d2d1bd2c40cf1ea26fe42ae563">MIMESTATE_BOUNDARY1</a>:</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;      sz = readback_bytes(&amp;mime-&gt;<a class="code" href="structcurl__mime__s.html#a6d359bcee78c99535224d7c09fc25334">state</a>, <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, nitems, <span class="stringliteral">&quot;\r\n--&quot;</span>, 4, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      <span class="keywordflow">if</span>(!sz)</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        mimesetstate(&amp;mime-&gt;<a class="code" href="structcurl__mime__s.html#a6d359bcee78c99535224d7c09fc25334">state</a>, <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a38e49688e71df767cd2f1c2261faead7">MIMESTATE_BOUNDARY2</a>, <a class="code" href="structpart.html">part</a>);</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a38e49688e71df767cd2f1c2261faead7">MIMESTATE_BOUNDARY2</a>:</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      sz = readback_bytes(&amp;mime-&gt;<a class="code" href="structcurl__mime__s.html#a6d359bcee78c99535224d7c09fc25334">state</a>, <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, nitems, mime-&gt;<a class="code" href="structcurl__mime__s.html#a03efea9568d372b7b02f079963cbdb31">boundary</a>,</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                          strlen(mime-&gt;<a class="code" href="structcurl__mime__s.html#a03efea9568d372b7b02f079963cbdb31">boundary</a>), <a class="code" href="structpart.html">part</a>? <span class="stringliteral">&quot;\r\n&quot;</span>: <span class="stringliteral">&quot;--\r\n&quot;</span>);</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      <span class="keywordflow">if</span>(!sz) {</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="preprocessor">#ifdef CURL_DOES_CONVERSIONS</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        <span class="keywordflow">if</span>(mime-&gt;<a class="code" href="structcurl__mime__s.html#a2bbcc6173ba4d6c08503a26aafec008c">easy</a> &amp;&amp; convbuf &lt; <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>) {</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;          <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="non-ascii_8h.html#ab7de472e1367a01da556c8f5acad93bb">Curl_convert_to_network</a>(mime-&gt;<a class="code" href="structcurl__mime__s.html#a2bbcc6173ba4d6c08503a26aafec008c">easy</a>, convbuf,</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                                                    <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a> - convbuf);</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;          <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="mime_8c.html#ac41734365e76e2fcab439c31c28ea28c">READ_ERROR</a>;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;          convbuf = <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        }</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        mimesetstate(&amp;mime-&gt;<a class="code" href="structcurl__mime__s.html#a6d359bcee78c99535224d7c09fc25334">state</a>, <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a0d49370eb200044ef0caf87f127bec91">MIMESTATE_CONTENT</a>, <a class="code" href="structpart.html">part</a>);</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      }</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a0d49370eb200044ef0caf87f127bec91">MIMESTATE_CONTENT</a>:</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      <span class="keywordflow">if</span>(!<a class="code" href="structpart.html">part</a>) {</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        mimesetstate(&amp;mime-&gt;<a class="code" href="structcurl__mime__s.html#a6d359bcee78c99535224d7c09fc25334">state</a>, <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30af392f88ef7fd223144ee718ab32b22a2">MIMESTATE_END</a>, NULL);</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;      }</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      sz = readback_part(<a class="code" href="structpart.html">part</a>, <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, nitems);</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      <span class="keywordflow">switch</span>(sz) {</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="curl_8h.html#a37f72557bd7b33a75cb3c3ab165e357e">CURL_READFUNC_ABORT</a>:</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="curl_8h.html#a8a6431fcced5944dec01685f14de2540">CURL_READFUNC_PAUSE</a>:</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="mime_8c.html#ac41734365e76e2fcab439c31c28ea28c">READ_ERROR</a>:</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        <span class="keywordflow">return</span> cursize? cursize: sz;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;      <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="preprocessor">#ifdef CURL_DOES_CONVERSIONS</span></div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        convbuf = <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        mimesetstate(&amp;mime-&gt;<a class="code" href="structcurl__mime__s.html#a6d359bcee78c99535224d7c09fc25334">state</a>, <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30ad253a9d2d1bd2c40cf1ea26fe42ae563">MIMESTATE_BOUNDARY1</a>, <a class="code" href="structpart.html">part</a>-&gt;nextpart);</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      }</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30af392f88ef7fd223144ee718ab32b22a2">MIMESTATE_END</a>:</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      <span class="keywordflow">return</span> cursize;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      <span class="keywordflow">break</span>;    <span class="comment">/* other values not used in mime state. */</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    }</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="comment">/* Bump buffer and counters according to read size. */</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    cursize += sz;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a> += sz;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    nitems -= sz;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  }</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="preprocessor">#ifdef CURL_DOES_CONVERSIONS</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      <span class="keywordflow">if</span>(mime-&gt;<a class="code" href="structcurl__mime__s.html#a2bbcc6173ba4d6c08503a26aafec008c">easy</a> &amp;&amp; convbuf &lt; <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a> &amp;&amp;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;         mime-&gt;<a class="code" href="structcurl__mime__s.html#a6d359bcee78c99535224d7c09fc25334">state</a>.<a class="code" href="structmime__state.html#aebcf0f37d17920f4df99f0f76840c2d1">state</a> &lt;= <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a0d49370eb200044ef0caf87f127bec91">MIMESTATE_CONTENT</a>) {</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="non-ascii_8h.html#ab7de472e1367a01da556c8f5acad93bb">Curl_convert_to_network</a>(mime-&gt;<a class="code" href="structcurl__mime__s.html#a2bbcc6173ba4d6c08503a26aafec008c">easy</a>, convbuf,</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                                                  <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a> - convbuf);</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>)</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="mime_8c.html#ac41734365e76e2fcab439c31c28ea28c">READ_ERROR</a>;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      }</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="keywordflow">return</span> cursize;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;}</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> mime_part_rewind(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;{</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="keywordtype">int</span> res = <a class="code" href="curl_8h.html#af7074ca58279ac7ad8f78b9954a31160">CURL_SEEKFUNC_OK</a>;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="keyword">enum</span> <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30">mimestate</a> targetstate = <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30ae986dee840014a75ec576769fda3d31c">MIMESTATE_BEGIN</a>;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;flags &amp; <a class="code" href="mime_8h.html#ae6faa301cc4b37f4112e9acc984db066">MIME_BODY_ONLY</a>)</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    targetstate = <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a26f14961a9c8856beaf155b62a958145">MIMESTATE_BODY</a>;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  cleanup_encoder_state(&amp;<a class="code" href="structpart.html">part</a>-&gt;encstate);</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;state.state &gt; targetstate) {</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    res = <a class="code" href="curl_8h.html#a34eb017e0a29378f976becdaa94160d1">CURL_SEEKFUNC_CANTSEEK</a>;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;seekfunc) {</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      res = <a class="code" href="structpart.html">part</a>-&gt;seekfunc(<a class="code" href="structpart.html">part</a>-&gt;arg, (<a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a>) 0, SEEK_SET);</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;      <span class="keywordflow">switch</span>(res) {</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="curl_8h.html#af7074ca58279ac7ad8f78b9954a31160">CURL_SEEKFUNC_OK</a>:</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="curl_8h.html#a7d210f0631e3de2ae352413b0eaf8226">CURL_SEEKFUNC_FAIL</a>:</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="curl_8h.html#a34eb017e0a29378f976becdaa94160d1">CURL_SEEKFUNC_CANTSEEK</a>:</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      <span class="keywordflow">case</span> -1:    <span class="comment">/* For fseek() error. */</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        res = <a class="code" href="curl_8h.html#a34eb017e0a29378f976becdaa94160d1">CURL_SEEKFUNC_CANTSEEK</a>;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        res = <a class="code" href="curl_8h.html#a7d210f0631e3de2ae352413b0eaf8226">CURL_SEEKFUNC_FAIL</a>;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;      }</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    }</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  }</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <span class="keywordflow">if</span>(res == <a class="code" href="curl_8h.html#af7074ca58279ac7ad8f78b9954a31160">CURL_SEEKFUNC_OK</a>)</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    mimesetstate(&amp;<a class="code" href="structpart.html">part</a>-&gt;state, targetstate, NULL);</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;}</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> mime_subparts_seek(<span class="keywordtype">void</span> *instream, <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> offset, <span class="keywordtype">int</span> whence)</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;{</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <a class="code" href="structcurl__mime__s.html">curl_mime</a> *mime = (<a class="code" href="structcurl__mime__s.html">curl_mime</a> *) instream;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="curl_8h.html#af7074ca58279ac7ad8f78b9954a31160">CURL_SEEKFUNC_OK</a>;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  <span class="keywordflow">if</span>(whence != SEEK_SET || offset)</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#a34eb017e0a29378f976becdaa94160d1">CURL_SEEKFUNC_CANTSEEK</a>;    <span class="comment">/* Only support full rewind. */</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <span class="keywordflow">if</span>(mime-&gt;<a class="code" href="structcurl__mime__s.html#a6d359bcee78c99535224d7c09fc25334">state</a>.<a class="code" href="structmime__state.html#aebcf0f37d17920f4df99f0f76840c2d1">state</a> == <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30ae986dee840014a75ec576769fda3d31c">MIMESTATE_BEGIN</a>)</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af7074ca58279ac7ad8f78b9954a31160">CURL_SEEKFUNC_OK</a>;           <span class="comment">/* Already rewound. */</span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  <span class="keywordflow">for</span>(<a class="code" href="structpart.html">part</a> = mime-&gt;<a class="code" href="structcurl__mime__s.html#accd1697ef1449ff2692cc9c1cc9e40da">firstpart</a>; <a class="code" href="structpart.html">part</a>; <a class="code" href="structpart.html">part</a> = <a class="code" href="structpart.html">part</a>-&gt;nextpart) {</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keywordtype">int</span> res = mime_part_rewind(<a class="code" href="structpart.html">part</a>);</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <span class="keywordflow">if</span>(res != <a class="code" href="curl_8h.html#af7074ca58279ac7ad8f78b9954a31160">CURL_SEEKFUNC_OK</a>)</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = res;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  }</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> == <a class="code" href="curl_8h.html#af7074ca58279ac7ad8f78b9954a31160">CURL_SEEKFUNC_OK</a>)</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    mimesetstate(&amp;mime-&gt;<a class="code" href="structcurl__mime__s.html#a6d359bcee78c99535224d7c09fc25334">state</a>, <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30ae986dee840014a75ec576769fda3d31c">MIMESTATE_BEGIN</a>, NULL);</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;}</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="comment">/* Release part content. */</span></div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> cleanup_part_content(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;{</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;freefunc)</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;freefunc(<a class="code" href="structpart.html">part</a>-&gt;arg);</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <a class="code" href="structpart.html">part</a>-&gt;readfunc = NULL;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <a class="code" href="structpart.html">part</a>-&gt;seekfunc = NULL;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <a class="code" href="structpart.html">part</a>-&gt;freefunc = NULL;</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <a class="code" href="structpart.html">part</a>-&gt;arg = (<span class="keywordtype">void</span> *) <a class="code" href="structpart.html">part</a>;          <span class="comment">/* Defaults to part itself. */</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  <a class="code" href="structpart.html">part</a>-&gt;data = NULL;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  <a class="code" href="structpart.html">part</a>-&gt;fp = NULL;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  <a class="code" href="structpart.html">part</a>-&gt;datasize = (<a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a>) 0;    <span class="comment">/* No size yet. */</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  cleanup_encoder_state(&amp;<a class="code" href="structpart.html">part</a>-&gt;encstate);</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  <a class="code" href="structpart.html">part</a>-&gt;kind = <a class="code" href="mime_8h.html#a3f7ea952d37b502d03fb5d8f8b9d7101abe93c496b53ded1073ef46824c2e260b">MIMEKIND_NONE</a>;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;}</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> mime_subparts_free(<span class="keywordtype">void</span> *<a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a>)</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;{</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  <a class="code" href="structcurl__mime__s.html">curl_mime</a> *mime = (<a class="code" href="structcurl__mime__s.html">curl_mime</a> *) <a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a>;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <span class="keywordflow">if</span>(mime &amp;&amp; mime-&gt;<a class="code" href="structcurl__mime__s.html#a4f83c49c822bfb426b2d779c7aa426db">parent</a>) {</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    mime-&gt;<a class="code" href="structcurl__mime__s.html#a4f83c49c822bfb426b2d779c7aa426db">parent</a>-&gt;<a class="code" href="structcurl__mimepart__s.html#ac322a51dc312c445204580899f35c758">freefunc</a> = NULL;  <span class="comment">/* Be sure we won&#39;t be called again. */</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    cleanup_part_content(mime-&gt;<a class="code" href="structcurl__mime__s.html#a4f83c49c822bfb426b2d779c7aa426db">parent</a>);  <span class="comment">/* Avoid dangling pointer in part. */</span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  }</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <a class="code" href="mime_8c.html#aea3a0f9a996315bcf17cce4ec0b378a2">curl_mime_free</a>(mime);</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;}</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="comment">/* Do not free subparts: unbind them. This is used for the top level only. */</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> mime_subparts_unbind(<span class="keywordtype">void</span> *<a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a>)</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;{</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  <a class="code" href="structcurl__mime__s.html">curl_mime</a> *mime = (<a class="code" href="structcurl__mime__s.html">curl_mime</a> *) <a class="code" href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a>;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <span class="keywordflow">if</span>(mime &amp;&amp; mime-&gt;<a class="code" href="structcurl__mime__s.html#a4f83c49c822bfb426b2d779c7aa426db">parent</a>) {</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    mime-&gt;<a class="code" href="structcurl__mime__s.html#a4f83c49c822bfb426b2d779c7aa426db">parent</a>-&gt;<a class="code" href="structcurl__mimepart__s.html#ac322a51dc312c445204580899f35c758">freefunc</a> = NULL;  <span class="comment">/* Be sure we won&#39;t be called again. */</span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    cleanup_part_content(mime-&gt;<a class="code" href="structcurl__mime__s.html#a4f83c49c822bfb426b2d779c7aa426db">parent</a>);  <span class="comment">/* Avoid dangling pointer in part. */</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    mime-&gt;<a class="code" href="structcurl__mime__s.html#a4f83c49c822bfb426b2d779c7aa426db">parent</a> = NULL;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  }</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;}</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;</div><div class="line"><a name="l01100"></a><span class="lineno"><a class="line" href="mime_8h.html#a3295a1b4557da56cd25b0a5217183118"> 1100</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="mime_8c.html#a3295a1b4557da56cd25b0a5217183118">Curl_mime_cleanpart</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;{</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  cleanup_part_content(<a class="code" href="structpart.html">part</a>);</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <a class="code" href="curl_8h.html#a3a28c84e40db0ef30859b680281c9d36">curl_slist_free_all</a>(<a class="code" href="structpart.html">part</a>-&gt;curlheaders);</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;flags &amp; <a class="code" href="mime_8h.html#ac54b8e877d304c4fec36c1f8be0f02f1">MIME_USERHEADERS_OWNER</a>)</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <a class="code" href="curl_8h.html#a3a28c84e40db0ef30859b680281c9d36">curl_slist_free_all</a>(<a class="code" href="structpart.html">part</a>-&gt;userheaders);</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  <a class="code" href="memdebug_8h.html#a795660f73c902cc80ac0fe6cda0dbd1c">Curl_safefree</a>(<a class="code" href="structpart.html">part</a>-&gt;mimetype);</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <a class="code" href="memdebug_8h.html#a795660f73c902cc80ac0fe6cda0dbd1c">Curl_safefree</a>(<a class="code" href="structpart.html">part</a>-&gt;<a class="code" href="structpart.html#adc3bca90b1a43ee068aabda0e2553ef7">name</a>);</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  <a class="code" href="memdebug_8h.html#a795660f73c902cc80ac0fe6cda0dbd1c">Curl_safefree</a>(<a class="code" href="structpart.html">part</a>-&gt;filename);</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <a class="code" href="mime_8c.html#a26e5fb189d0937d27da11d1c10c09565">Curl_mime_initpart</a>(<a class="code" href="structpart.html">part</a>, <a class="code" href="structpart.html">part</a>-&gt;easy);</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;}</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment">/* Recursively delete a mime handle and its parts. */</span></div><div class="line"><a name="l01113"></a><span class="lineno"><a class="line" href="mime_8c.html#aea3a0f9a996315bcf17cce4ec0b378a2"> 1113</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="mime_8c.html#aea3a0f9a996315bcf17cce4ec0b378a2">curl_mime_free</a>(<a class="code" href="structcurl__mime__s.html">curl_mime</a> *mime)</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;{</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="keywordflow">if</span>(mime) {</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    mime_subparts_unbind(mime);  <span class="comment">/* Be sure it&#39;s not referenced anymore. */</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="keywordflow">while</span>(mime-&gt;<a class="code" href="structcurl__mime__s.html#accd1697ef1449ff2692cc9c1cc9e40da">firstpart</a>) {</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;      <a class="code" href="structpart.html">part</a> = mime-&gt;<a class="code" href="structcurl__mime__s.html#accd1697ef1449ff2692cc9c1cc9e40da">firstpart</a>;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      mime-&gt;<a class="code" href="structcurl__mime__s.html#accd1697ef1449ff2692cc9c1cc9e40da">firstpart</a> = <a class="code" href="structpart.html">part</a>-&gt;nextpart;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;      <a class="code" href="mime_8c.html#a3295a1b4557da56cd25b0a5217183118">Curl_mime_cleanpart</a>(<a class="code" href="structpart.html">part</a>);</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      <a class="code" href="curl__memory_8h.html#a9cc854374299a1dd933bf62029761768">free</a>(<a class="code" href="structpart.html">part</a>);</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    }</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <a class="code" href="curl__memory_8h.html#a9cc854374299a1dd933bf62029761768">free</a>(mime-&gt;<a class="code" href="structcurl__mime__s.html#a03efea9568d372b7b02f079963cbdb31">boundary</a>);</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <a class="code" href="curl__memory_8h.html#a9cc854374299a1dd933bf62029761768">free</a>(mime);</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  }</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;}</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;</div><div class="line"><a name="l01131"></a><span class="lineno"><a class="line" href="mime_8h.html#a5277ce27b3802d3e11c47ec2040e0a0f"> 1131</a></span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#a5277ce27b3802d3e11c47ec2040e0a0f">Curl_mime_duppart</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *dst, <span class="keyword">const</span> <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *src)</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;{</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  <a class="code" href="structcurl__mime__s.html">curl_mime</a> *mime;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *d;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <span class="keyword">const</span> <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *s;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> res = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <span class="comment">/* Duplicate content. */</span></div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <span class="keywordflow">switch</span>(src-&gt;<a class="code" href="structcurl__mimepart__s.html#a22079fe812eba3e01a075941c228643f">kind</a>) {</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="mime_8h.html#a3f7ea952d37b502d03fb5d8f8b9d7101abe93c496b53ded1073ef46824c2e260b">MIMEKIND_NONE</a>:</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="mime_8h.html#a3f7ea952d37b502d03fb5d8f8b9d7101a3fa11ee93428c5cb981af0dbc5ff745a">MIMEKIND_DATA</a>:</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    res = <a class="code" href="mime_8c.html#aaedcbf6141c28fcbf6405460b302a50c">curl_mime_data</a>(dst, src-&gt;<a class="code" href="structcurl__mimepart__s.html#adbbdff45c27bc50e6dbbb0d06b40a111">data</a>, (<span class="keywordtype">size_t</span>) src-&gt;<a class="code" href="structcurl__mimepart__s.html#a42982347c730039d3f9a131a80e0b80b">datasize</a>);</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="mime_8h.html#a3f7ea952d37b502d03fb5d8f8b9d7101ae008e417ccf479abfb3d3117c330df4b">MIMEKIND_FILE</a>:</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    res = <a class="code" href="mime_8c.html#a613174d8e80cad9b0f473e4a7631c81a">curl_mime_filedata</a>(dst, src-&gt;<a class="code" href="structcurl__mimepart__s.html#adbbdff45c27bc50e6dbbb0d06b40a111">data</a>);</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="comment">/* Do not abort duplication if file is not readable. */</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <span class="keywordflow">if</span>(res == <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951adaff0cec927d10c0ec5059ee0104ef62">CURLE_READ_ERROR</a>)</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;      res = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="mime_8h.html#a3f7ea952d37b502d03fb5d8f8b9d7101a73ab828a446b18e6c64cf58121c2876c">MIMEKIND_CALLBACK</a>:</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    res = <a class="code" href="mime_8c.html#adf1d3c4b90945af1e81e77a806a30eea">curl_mime_data_cb</a>(dst, src-&gt;<a class="code" href="structcurl__mimepart__s.html#a42982347c730039d3f9a131a80e0b80b">datasize</a>, src-&gt;<a class="code" href="structcurl__mimepart__s.html#ad86eb5784188eb06ffd6bdb99333652b">readfunc</a>,</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;                            src-&gt;<a class="code" href="structcurl__mimepart__s.html#ae134148c256da12f84f88206f3877dff">seekfunc</a>, src-&gt;<a class="code" href="structcurl__mimepart__s.html#ac322a51dc312c445204580899f35c758">freefunc</a>, src-&gt;<a class="code" href="structcurl__mimepart__s.html#ab141edbb310a7bdcd1edc0cb53cd946c">arg</a>);</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="mime_8h.html#a3f7ea952d37b502d03fb5d8f8b9d7101a6167535771a4ad417b9d4cb82be44fe2">MIMEKIND_MULTIPART</a>:</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="comment">/* No one knows about the cloned subparts, thus always attach ownership</span></div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;<span class="comment">       to the part. */</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    mime = <a class="code" href="mime_8c.html#a62f8ea9d0ecba38e9ea6f78684d4a662">curl_mime_init</a>(dst-&gt;<a class="code" href="structcurl__mimepart__s.html#a7994120e4461b2edffe79a1098a74680">easy</a>);</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    res = mime? <a class="code" href="mime_8c.html#a1c0916f106b9a5ebbe6258a8e1e58cb8">curl_mime_subparts</a>(dst, mime): <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951aba5a22c9f705ed27933344be221fe937">CURLE_OUT_OF_MEMORY</a>;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <span class="comment">/* Duplicate subparts. */</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="keywordflow">for</span>(s = ((<a class="code" href="structcurl__mime__s.html">curl_mime</a> *) src-&gt;<a class="code" href="structcurl__mimepart__s.html#ab141edbb310a7bdcd1edc0cb53cd946c">arg</a>)-&gt;firstpart; !res &amp;&amp; s; s = s-&gt;<a class="code" href="structcurl__mimepart__s.html#a42c16160977da930d61ab37025adca44">nextpart</a>) {</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      d = <a class="code" href="mime_8c.html#a4cb7d1f698ce64968affeb42c051d339">curl_mime_addpart</a>(mime);</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;      res = d? <a class="code" href="mime_8c.html#a5277ce27b3802d3e11c47ec2040e0a0f">Curl_mime_duppart</a>(d, s): <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951aba5a22c9f705ed27933344be221fe937">CURLE_OUT_OF_MEMORY</a>;</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    }</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="keywordflow">default</span>:  <span class="comment">/* Invalid kind: should not occur. */</span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    res = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a0e5145164e8e2a9d6eb43eef1c71f1af">CURLE_BAD_FUNCTION_ARGUMENT</a>;  <span class="comment">/* Internal error? */</span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  }</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  <span class="comment">/* Duplicate headers. */</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="keywordflow">if</span>(!res &amp;&amp; src-&gt;<a class="code" href="structcurl__mimepart__s.html#aad2b3222f2f3fc96225783d81ddcf7a6">userheaders</a>) {</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="keyword">struct </span><a class="code" href="structcurl__slist.html">curl_slist</a> *hdrs = <a class="code" href="slist_8c.html#a2afaf12410051438ab54ee4c404d541d">Curl_slist_duplicate</a>(src-&gt;<a class="code" href="structcurl__mimepart__s.html#aad2b3222f2f3fc96225783d81ddcf7a6">userheaders</a>);</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="keywordflow">if</span>(!hdrs)</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      res = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951aba5a22c9f705ed27933344be221fe937">CURLE_OUT_OF_MEMORY</a>;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      <span class="comment">/* No one but this procedure knows about the new header list,</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;<span class="comment">         so always take ownership. */</span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;      res = <a class="code" href="mime_8c.html#ac305b8d2c653ca50fa292823795d5f68">curl_mime_headers</a>(dst, hdrs, <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;      <span class="keywordflow">if</span>(res)</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        <a class="code" href="curl_8h.html#a3a28c84e40db0ef30859b680281c9d36">curl_slist_free_all</a>(hdrs);</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    }</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  }</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <span class="comment">/* Duplicate other fields. */</span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  <span class="keywordflow">if</span>(dst != NULL)</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    dst-&gt;<a class="code" href="structcurl__mimepart__s.html#a3b1a7b335221d5a6c4830a46896ef36e">encoder</a> = src-&gt;<a class="code" href="structcurl__mimepart__s.html#a3b1a7b335221d5a6c4830a46896ef36e">encoder</a>;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    res = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951acaaed2faf20c957350e90a68282ae314">CURLE_WRITE_ERROR</a>;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  <span class="keywordflow">if</span>(!res)</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    res = <a class="code" href="mime_8c.html#ab38cb1943e27dfc0e25075e8b7fd7b34">curl_mime_type</a>(dst, src-&gt;<a class="code" href="structcurl__mimepart__s.html#a6e35c1228d45569bcc924f3a9685710a">mimetype</a>);</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <span class="keywordflow">if</span>(!res)</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    res = <a class="code" href="mime_8c.html#a3cece1dbf7ba3028321c1bf4fb771e89">curl_mime_name</a>(dst, src-&gt;<a class="code" href="structcurl__mimepart__s.html#a2c4a5e545de8e8c6a342d8c824519ca2">name</a>);</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="keywordflow">if</span>(!res)</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    res = <a class="code" href="mime_8c.html#a2e713ad6004608b944d65cfe2c42d326">curl_mime_filename</a>(dst, src-&gt;<a class="code" href="structcurl__mimepart__s.html#a91f8eaefebb5082e751957a619f371db">filename</a>);</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <span class="comment">/* If an error occurred, rollback. */</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <span class="keywordflow">if</span>(res &amp;&amp; dst)</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <a class="code" href="mime_8c.html#a3295a1b4557da56cd25b0a5217183118">Curl_mime_cleanpart</a>(dst);</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;}</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;<span class="comment"> * Mime build functions.</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;<span class="comment">/* Create a mime handle. */</span></div><div class="line"><a name="l01211"></a><span class="lineno"><a class="line" href="mime_8c.html#a62f8ea9d0ecba38e9ea6f78684d4a662"> 1211</a></span>&#160;<a class="code" href="structcurl__mime__s.html">curl_mime</a> *<a class="code" href="mime_8c.html#a62f8ea9d0ecba38e9ea6f78684d4a662">curl_mime_init</a>(<span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="unit1608_8c.html#a8e67ff5c12b8bbb5baf741515fa674bb">easy</a>)</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;{</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <a class="code" href="structcurl__mime__s.html">curl_mime</a> *mime;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  mime = (<a class="code" href="structcurl__mime__s.html">curl_mime</a> *) <a class="code" href="curl__memory_8h.html#a2eb0b03d1a9de9615a291b1205969069">malloc</a>(<span class="keyword">sizeof</span>(*mime));</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <span class="keywordflow">if</span>(mime) {</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    mime-&gt;<a class="code" href="structcurl__mime__s.html#a2bbcc6173ba4d6c08503a26aafec008c">easy</a> = <a class="code" href="unit1608_8c.html#a8e67ff5c12b8bbb5baf741515fa674bb">easy</a>;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    mime-&gt;<a class="code" href="structcurl__mime__s.html#a4f83c49c822bfb426b2d779c7aa426db">parent</a> = NULL;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    mime-&gt;<a class="code" href="structcurl__mime__s.html#accd1697ef1449ff2692cc9c1cc9e40da">firstpart</a> = NULL;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    mime-&gt;<a class="code" href="structcurl__mime__s.html#ac3b95a42477f9be5f2e3743d642ea95b">lastpart</a> = NULL;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <span class="comment">/* Get a part boundary. */</span></div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    mime-&gt;<a class="code" href="structcurl__mime__s.html#a03efea9568d372b7b02f079963cbdb31">boundary</a> = <a class="code" href="curl__memory_8h.html#a2eb0b03d1a9de9615a291b1205969069">malloc</a>(24 + <a class="code" href="mime_8h.html#ae00bf7b30ba982a8ea1742f71a62e656">MIME_RAND_BOUNDARY_CHARS</a> + 1);</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="keywordflow">if</span>(!mime-&gt;<a class="code" href="structcurl__mime__s.html#a03efea9568d372b7b02f079963cbdb31">boundary</a>) {</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;      <a class="code" href="curl__memory_8h.html#a9cc854374299a1dd933bf62029761768">free</a>(mime);</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    }</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <a class="code" href="unit1652_8c.html#a1d19b0eef3b3acd31be88886a0277c2e">memset</a>(mime-&gt;<a class="code" href="structcurl__mime__s.html#a03efea9568d372b7b02f079963cbdb31">boundary</a>, <span class="charliteral">&#39;-&#39;</span>, 24);</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="rand_8c.html#ae4bd86089b91201bafb73ad067d81f79">Curl_rand_hex</a>(<a class="code" href="unit1608_8c.html#a8e67ff5c12b8bbb5baf741515fa674bb">easy</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) mime-&gt;<a class="code" href="structcurl__mime__s.html#a03efea9568d372b7b02f079963cbdb31">boundary</a> + 24,</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                     <a class="code" href="mime_8h.html#ae00bf7b30ba982a8ea1742f71a62e656">MIME_RAND_BOUNDARY_CHARS</a> + 1)) {</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;      <span class="comment">/* failed to get random separator, bail out */</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;      <a class="code" href="curl__memory_8h.html#a9cc854374299a1dd933bf62029761768">free</a>(mime-&gt;<a class="code" href="structcurl__mime__s.html#a03efea9568d372b7b02f079963cbdb31">boundary</a>);</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;      <a class="code" href="curl__memory_8h.html#a9cc854374299a1dd933bf62029761768">free</a>(mime);</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    }</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    mimesetstate(&amp;mime-&gt;<a class="code" href="structcurl__mime__s.html#a6d359bcee78c99535224d7c09fc25334">state</a>, <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30ae986dee840014a75ec576769fda3d31c">MIMESTATE_BEGIN</a>, NULL);</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  }</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <span class="keywordflow">return</span> mime;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;}</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;<span class="comment">/* Initialize a mime part. */</span></div><div class="line"><a name="l01245"></a><span class="lineno"><a class="line" href="mime_8h.html#a26e5fb189d0937d27da11d1c10c09565"> 1245</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="mime_8c.html#a26e5fb189d0937d27da11d1c10c09565">Curl_mime_initpart</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>, <span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="unit1608_8c.html#a8e67ff5c12b8bbb5baf741515fa674bb">easy</a>)</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;{</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  <a class="code" href="unit1652_8c.html#a1d19b0eef3b3acd31be88886a0277c2e">memset</a>((<span class="keywordtype">char</span> *) <a class="code" href="structpart.html">part</a>, 0, <span class="keyword">sizeof</span>(*<a class="code" href="structpart.html">part</a>));</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  <a class="code" href="structpart.html">part</a>-&gt;easy = <a class="code" href="unit1608_8c.html#a8e67ff5c12b8bbb5baf741515fa674bb">easy</a>;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  mimesetstate(&amp;<a class="code" href="structpart.html">part</a>-&gt;state, <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30ae986dee840014a75ec576769fda3d31c">MIMESTATE_BEGIN</a>, NULL);</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;}</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;<span class="comment">/* Create a mime part and append it to a mime handle&#39;s part list. */</span></div><div class="line"><a name="l01253"></a><span class="lineno"><a class="line" href="mime_8c.html#a4cb7d1f698ce64968affeb42c051d339"> 1253</a></span>&#160;<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="mime_8c.html#a4cb7d1f698ce64968affeb42c051d339">curl_mime_addpart</a>(<a class="code" href="structcurl__mime__s.html">curl_mime</a> *mime)</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;{</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  <span class="keywordflow">if</span>(!mime)</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <a class="code" href="structpart.html">part</a> = (<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *) <a class="code" href="curl__memory_8h.html#a2eb0b03d1a9de9615a291b1205969069">malloc</a>(<span class="keyword">sizeof</span>(*<a class="code" href="structpart.html">part</a>));</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>) {</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <a class="code" href="mime_8c.html#a26e5fb189d0937d27da11d1c10c09565">Curl_mime_initpart</a>(<a class="code" href="structpart.html">part</a>, mime-&gt;<a class="code" href="structcurl__mime__s.html#a2bbcc6173ba4d6c08503a26aafec008c">easy</a>);</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;parent = mime;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <span class="keywordflow">if</span>(mime-&gt;<a class="code" href="structcurl__mime__s.html#ac3b95a42477f9be5f2e3743d642ea95b">lastpart</a>)</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      mime-&gt;<a class="code" href="structcurl__mime__s.html#ac3b95a42477f9be5f2e3743d642ea95b">lastpart</a>-&gt;<a class="code" href="structcurl__mimepart__s.html#a42c16160977da930d61ab37025adca44">nextpart</a> = <a class="code" href="structpart.html">part</a>;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      mime-&gt;<a class="code" href="structcurl__mime__s.html#accd1697ef1449ff2692cc9c1cc9e40da">firstpart</a> = <a class="code" href="structpart.html">part</a>;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    mime-&gt;<a class="code" href="structcurl__mime__s.html#ac3b95a42477f9be5f2e3743d642ea95b">lastpart</a> = <a class="code" href="structpart.html">part</a>;</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;  }</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="structpart.html">part</a>;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;}</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;<span class="comment">/* Set mime part name. */</span></div><div class="line"><a name="l01278"></a><span class="lineno"><a class="line" href="mime_8c.html#a3cece1dbf7ba3028321c1bf4fb771e89"> 1278</a></span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#a3cece1dbf7ba3028321c1bf4fb771e89">curl_mime_name</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>)</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;{</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a0e5145164e8e2a9d6eb43eef1c71f1af">CURLE_BAD_FUNCTION_ARGUMENT</a>;</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;  <a class="code" href="memdebug_8h.html#a795660f73c902cc80ac0fe6cda0dbd1c">Curl_safefree</a>(<a class="code" href="structpart.html">part</a>-&gt;<a class="code" href="structpart.html#adc3bca90b1a43ee068aabda0e2553ef7">name</a>);</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;  <a class="code" href="structpart.html">part</a>-&gt;<a class="code" href="structpart.html#adc3bca90b1a43ee068aabda0e2553ef7">name</a> = NULL;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>) {</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;<a class="code" href="structpart.html#adc3bca90b1a43ee068aabda0e2553ef7">name</a> = <a class="code" href="curl__memory_8h.html#aa3f578f8f1eaebf25b2e2313db31cb40">strdup</a>(<a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>);</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="structpart.html">part</a>-&gt;<a class="code" href="structpart.html#adc3bca90b1a43ee068aabda0e2553ef7">name</a>)</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951aba5a22c9f705ed27933344be221fe937">CURLE_OUT_OF_MEMORY</a>;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  }</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;}</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;<span class="comment">/* Set mime part remote file name. */</span></div><div class="line"><a name="l01296"></a><span class="lineno"><a class="line" href="mime_8c.html#a2e713ad6004608b944d65cfe2c42d326"> 1296</a></span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#a2e713ad6004608b944d65cfe2c42d326">curl_mime_filename</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>)</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;{</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a0e5145164e8e2a9d6eb43eef1c71f1af">CURLE_BAD_FUNCTION_ARGUMENT</a>;</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;  <a class="code" href="memdebug_8h.html#a795660f73c902cc80ac0fe6cda0dbd1c">Curl_safefree</a>(<a class="code" href="structpart.html">part</a>-&gt;filename);</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  <a class="code" href="structpart.html">part</a>-&gt;filename = NULL;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>) {</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;filename = <a class="code" href="curl__memory_8h.html#aa3f578f8f1eaebf25b2e2313db31cb40">strdup</a>(<a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>);</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="structpart.html">part</a>-&gt;filename)</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951aba5a22c9f705ed27933344be221fe937">CURLE_OUT_OF_MEMORY</a>;</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  }</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;}</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;<span class="comment">/* Set mime part content from memory data. */</span></div><div class="line"><a name="l01314"></a><span class="lineno"><a class="line" href="mime_8c.html#aaedcbf6141c28fcbf6405460b302a50c"> 1314</a></span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#aaedcbf6141c28fcbf6405460b302a50c">curl_mime_data</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>,</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structdata.html">data</a>, <span class="keywordtype">size_t</span> datasize)</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;{</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a0e5145164e8e2a9d6eb43eef1c71f1af">CURLE_BAD_FUNCTION_ARGUMENT</a>;</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  cleanup_part_content(<a class="code" href="structpart.html">part</a>);</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structdata.html">data</a>) {</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <span class="keywordflow">if</span>(datasize == <a class="code" href="curl_8h.html#a66f815e87e631a890391a725fb060456">CURL_ZERO_TERMINATED</a>)</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;      datasize = strlen(<a class="code" href="structdata.html">data</a>);</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;data = <a class="code" href="curl__memory_8h.html#a2eb0b03d1a9de9615a291b1205969069">malloc</a>(datasize + 1);</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="structpart.html">part</a>-&gt;data)</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951aba5a22c9f705ed27933344be221fe937">CURLE_OUT_OF_MEMORY</a>;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;datasize = datasize;</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    <span class="keywordflow">if</span>(datasize)</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;      <a class="code" href="unit1304_8c.html#a82a69fcfe92d9db6dd585ccc532a2ab7">memcpy</a>(<a class="code" href="structpart.html">part</a>-&gt;data, <a class="code" href="structdata.html">data</a>, datasize);</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;data[datasize] = <span class="charliteral">&#39;\0&#39;</span>;    <span class="comment">/* Set a nul terminator as sentinel. */</span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;readfunc = mime_mem_read;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;seekfunc = mime_mem_seek;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;freefunc = mime_mem_free;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;kind = <a class="code" href="mime_8h.html#a3f7ea952d37b502d03fb5d8f8b9d7101a3fa11ee93428c5cb981af0dbc5ff745a">MIMEKIND_DATA</a>;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;  }</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;}</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;<span class="comment">/* Set mime part content from named local file. */</span></div><div class="line"><a name="l01346"></a><span class="lineno"><a class="line" href="mime_8c.html#a613174d8e80cad9b0f473e4a7631c81a"> 1346</a></span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#a613174d8e80cad9b0f473e4a7631c81a">curl_mime_filedata</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>)</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;{</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a0e5145164e8e2a9d6eb43eef1c71f1af">CURLE_BAD_FUNCTION_ARGUMENT</a>;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  cleanup_part_content(<a class="code" href="structpart.html">part</a>);</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>) {</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="keywordtype">char</span> *base;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <a class="code" href="curl__setup_8h.html#a1c6e64692c9b7c6e7dc70adb398b3115">struct_stat</a> sbuf;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="config-win32ce_8h.html#ad4ea824bd0fcae61733c900a5cab1e01">stat</a>(<a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>, &amp;sbuf) || <a class="code" href="posix__shims_8c.html#aa918cf234c33e52741d038f62d41897d">access</a>(<a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>, R_OK))</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951adaff0cec927d10c0ec5059ee0104ef62">CURLE_READ_ERROR</a>;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;data = <a class="code" href="curl__memory_8h.html#aa3f578f8f1eaebf25b2e2313db31cb40">strdup</a>(<a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>);</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="structpart.html">part</a>-&gt;data)</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951aba5a22c9f705ed27933344be221fe937">CURLE_OUT_OF_MEMORY</a>;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;datasize = -1;</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> &amp;&amp; S_ISREG(sbuf.st_mode)) {</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;      <a class="code" href="structpart.html">part</a>-&gt;datasize = <a class="code" href="mime_8c.html#a6750c6bf3d5e493a9afbf0c278110187">filesize</a>(<a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>, sbuf);</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;      <a class="code" href="structpart.html">part</a>-&gt;seekfunc = mime_file_seek;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    }</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;readfunc = mime_file_read;</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;freefunc = mime_file_free;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;kind = <a class="code" href="mime_8h.html#a3f7ea952d37b502d03fb5d8f8b9d7101ae008e417ccf479abfb3d3117c330df4b">MIMEKIND_FILE</a>;</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <span class="comment">/* As a side effect, set the filename to the current file&#39;s base name.</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="comment">       It is possible to withdraw this by explicitly calling</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="comment">       curl_mime_filename() with a NULL filename argument after the current</span></div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="comment">       call. */</span></div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    base = strippath(<a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>);</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    <span class="keywordflow">if</span>(!base)</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951aba5a22c9f705ed27933344be221fe937">CURLE_OUT_OF_MEMORY</a>;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <span class="keywordflow">else</span> {</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;      <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> res = <a class="code" href="mime_8c.html#a2e713ad6004608b944d65cfe2c42d326">curl_mime_filename</a>(<a class="code" href="structpart.html">part</a>, base);</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;      <span class="keywordflow">if</span>(res)</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = res;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;      <a class="code" href="curl__memory_8h.html#a9cc854374299a1dd933bf62029761768">free</a>(base);</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    }</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  }</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;}</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;<span class="comment">/* Set mime part type. */</span></div><div class="line"><a name="l01395"></a><span class="lineno"><a class="line" href="mime_8c.html#ab38cb1943e27dfc0e25075e8b7fd7b34"> 1395</a></span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#ab38cb1943e27dfc0e25075e8b7fd7b34">curl_mime_type</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *mimetype)</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;{</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a0e5145164e8e2a9d6eb43eef1c71f1af">CURLE_BAD_FUNCTION_ARGUMENT</a>;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  <a class="code" href="memdebug_8h.html#a795660f73c902cc80ac0fe6cda0dbd1c">Curl_safefree</a>(<a class="code" href="structpart.html">part</a>-&gt;mimetype);</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  <a class="code" href="structpart.html">part</a>-&gt;mimetype = NULL;</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  <span class="keywordflow">if</span>(mimetype) {</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;mimetype = <a class="code" href="curl__memory_8h.html#aa3f578f8f1eaebf25b2e2313db31cb40">strdup</a>(mimetype);</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="structpart.html">part</a>-&gt;mimetype)</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951aba5a22c9f705ed27933344be221fe937">CURLE_OUT_OF_MEMORY</a>;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;  }</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;}</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;<span class="comment">/* Set mime data transfer encoder. */</span></div><div class="line"><a name="l01413"></a><span class="lineno"><a class="line" href="mime_8c.html#a86970249ebfb59b6d0989f10e7a64b3b"> 1413</a></span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#a86970249ebfb59b6d0989f10e7a64b3b">curl_mime_encoder</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="compressed_8d.html#a6c2ffb0bf7f4a1f29bfe33d42329479b">encoding</a>)</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;{</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a0e5145164e8e2a9d6eb43eef1c71f1af">CURLE_BAD_FUNCTION_ARGUMENT</a>;</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  <span class="keyword">const</span> <a class="code" href="structmime__encoder.html">mime_encoder</a> *mep;</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  <a class="code" href="structpart.html">part</a>-&gt;encoder = NULL;</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="compressed_8d.html#a6c2ffb0bf7f4a1f29bfe33d42329479b">encoding</a>)</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;    <span class="comment">/* Removing current encoder. */</span></div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  <span class="keywordflow">for</span>(mep = encoders; mep-&gt;<a class="code" href="structmime__encoder.html#abaab4586c414ec775deddae5978fa07a">name</a>; mep++)</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="strcase_8h.html#a4b6a8324b9a93ddfa5413308a22bfa44">strcasecompare</a>(<a class="code" href="compressed_8d.html#a6c2ffb0bf7f4a1f29bfe33d42329479b">encoding</a>, mep-&gt;<a class="code" href="structmime__encoder.html#abaab4586c414ec775deddae5978fa07a">name</a>)) {</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;      <a class="code" href="structpart.html">part</a>-&gt;encoder = mep;</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;      <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a> = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    }</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a>;</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;}</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;<span class="comment">/* Set mime part headers. */</span></div><div class="line"><a name="l01436"></a><span class="lineno"><a class="line" href="mime_8c.html#ac305b8d2c653ca50fa292823795d5f68"> 1436</a></span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#ac305b8d2c653ca50fa292823795d5f68">curl_mime_headers</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>,</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;                           <span class="keyword">struct</span> <a class="code" href="structcurl__slist.html">curl_slist</a> *<a class="code" href="anyauth_8d.html#a076c285cdc160cc073b20f7cf28ef85f">headers</a>, <span class="keywordtype">int</span> take_ownership)</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;{</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a0e5145164e8e2a9d6eb43eef1c71f1af">CURLE_BAD_FUNCTION_ARGUMENT</a>;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;flags &amp; <a class="code" href="mime_8h.html#ac54b8e877d304c4fec36c1f8be0f02f1">MIME_USERHEADERS_OWNER</a>) {</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;userheaders != <a class="code" href="anyauth_8d.html#a076c285cdc160cc073b20f7cf28ef85f">headers</a>)  <span class="comment">/* Allow setting twice the same list. */</span></div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;      <a class="code" href="curl_8h.html#a3a28c84e40db0ef30859b680281c9d36">curl_slist_free_all</a>(<a class="code" href="structpart.html">part</a>-&gt;userheaders);</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;flags &amp;= ~<a class="code" href="mime_8h.html#ac54b8e877d304c4fec36c1f8be0f02f1">MIME_USERHEADERS_OWNER</a>;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  }</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  <a class="code" href="structpart.html">part</a>-&gt;userheaders = <a class="code" href="anyauth_8d.html#a076c285cdc160cc073b20f7cf28ef85f">headers</a>;</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="anyauth_8d.html#a076c285cdc160cc073b20f7cf28ef85f">headers</a> &amp;&amp; take_ownership)</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;flags |= <a class="code" href="mime_8h.html#ac54b8e877d304c4fec36c1f8be0f02f1">MIME_USERHEADERS_OWNER</a>;</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;}</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;<span class="comment">/* Set mime part content from callback. */</span></div><div class="line"><a name="l01454"></a><span class="lineno"><a class="line" href="mime_8c.html#adf1d3c4b90945af1e81e77a806a30eea"> 1454</a></span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#adf1d3c4b90945af1e81e77a806a30eea">curl_mime_data_cb</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>, <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> datasize,</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;                           <a class="code" href="curl_8h.html#a7516630ec17f247697dd3272be7ada74">curl_read_callback</a> readfunc,</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                           <a class="code" href="curl_8h.html#a8ea5d0b350bebdf47cfb237e7caac14a">curl_seek_callback</a> seekfunc,</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;                           <a class="code" href="curl_8h.html#ad7ff72bc35b39df6cca31d944c585add">curl_free_callback</a> freefunc, <span class="keywordtype">void</span> *arg)</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;{</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a0e5145164e8e2a9d6eb43eef1c71f1af">CURLE_BAD_FUNCTION_ARGUMENT</a>;</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  cleanup_part_content(<a class="code" href="structpart.html">part</a>);</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;  <span class="keywordflow">if</span>(readfunc) {</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;readfunc = readfunc;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;seekfunc = seekfunc;</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;freefunc = freefunc;</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;arg = arg;</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;datasize = datasize;</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;kind = <a class="code" href="mime_8h.html#a3f7ea952d37b502d03fb5d8f8b9d7101a73ab828a446b18e6c64cf58121c2876c">MIMEKIND_CALLBACK</a>;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  }</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;}</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;<span class="comment">/* Set mime part content from subparts. */</span></div><div class="line"><a name="l01477"></a><span class="lineno"><a class="line" href="mime_8h.html#aa7e20c5da987772b1867070180844105"> 1477</a></span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#aa7e20c5da987772b1867070180844105">Curl_mime_set_subparts</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>,</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;                                <a class="code" href="structcurl__mime__s.html">curl_mime</a> *subparts, <span class="keywordtype">int</span> take_ownership)</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;{</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  <a class="code" href="structcurl__mime__s.html">curl_mime</a> *<a class="code" href="unit1309_8c.html#ab4b8daf4b8ea9d39568719e1e320076f">root</a>;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a0e5145164e8e2a9d6eb43eef1c71f1af">CURLE_BAD_FUNCTION_ARGUMENT</a>;</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;  <span class="comment">/* Accept setting twice the same subparts. */</span></div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;kind == <a class="code" href="mime_8h.html#a3f7ea952d37b502d03fb5d8f8b9d7101a6167535771a4ad417b9d4cb82be44fe2">MIMEKIND_MULTIPART</a> &amp;&amp; <a class="code" href="structpart.html">part</a>-&gt;arg == subparts)</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  cleanup_part_content(<a class="code" href="structpart.html">part</a>);</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  <span class="keywordflow">if</span>(subparts) {</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <span class="comment">/* Must belong to the same data handle. */</span></div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;easy &amp;&amp; subparts-&gt;<a class="code" href="structcurl__mime__s.html#a2bbcc6173ba4d6c08503a26aafec008c">easy</a> &amp;&amp; <a class="code" href="structpart.html">part</a>-&gt;easy != subparts-&gt;<a class="code" href="structcurl__mime__s.html#a2bbcc6173ba4d6c08503a26aafec008c">easy</a>)</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a0e5145164e8e2a9d6eb43eef1c71f1af">CURLE_BAD_FUNCTION_ARGUMENT</a>;</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <span class="comment">/* Should not have been attached already. */</span></div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    <span class="keywordflow">if</span>(subparts-&gt;<a class="code" href="structcurl__mime__s.html#a4f83c49c822bfb426b2d779c7aa426db">parent</a>)</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a0e5145164e8e2a9d6eb43eef1c71f1af">CURLE_BAD_FUNCTION_ARGUMENT</a>;</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="comment">/* Should not be the part&#39;s root. */</span></div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <a class="code" href="unit1309_8c.html#ab4b8daf4b8ea9d39568719e1e320076f">root</a> = <a class="code" href="structpart.html">part</a>-&gt;parent;</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="unit1309_8c.html#ab4b8daf4b8ea9d39568719e1e320076f">root</a>) {</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      <span class="keywordflow">while</span>(<a class="code" href="unit1309_8c.html#ab4b8daf4b8ea9d39568719e1e320076f">root</a>-&gt;parent &amp;&amp; <a class="code" href="unit1309_8c.html#ab4b8daf4b8ea9d39568719e1e320076f">root</a>-&gt;parent-&gt;parent)</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;        <a class="code" href="unit1309_8c.html#ab4b8daf4b8ea9d39568719e1e320076f">root</a> = <a class="code" href="unit1309_8c.html#ab4b8daf4b8ea9d39568719e1e320076f">root</a>-&gt;parent-&gt;parent;</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;      <span class="keywordflow">if</span>(subparts == <a class="code" href="unit1309_8c.html#ab4b8daf4b8ea9d39568719e1e320076f">root</a>) {</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;easy)</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;          <a class="code" href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a>(<a class="code" href="structpart.html">part</a>-&gt;easy, <span class="stringliteral">&quot;Can&#39;t add itself as a subpart!&quot;</span>);</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a0e5145164e8e2a9d6eb43eef1c71f1af">CURLE_BAD_FUNCTION_ARGUMENT</a>;</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      }</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    }</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    subparts-&gt;<a class="code" href="structcurl__mime__s.html#a4f83c49c822bfb426b2d779c7aa426db">parent</a> = <a class="code" href="structpart.html">part</a>;</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;readfunc = mime_subparts_read;</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;seekfunc = mime_subparts_seek;</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;freefunc = take_ownership? mime_subparts_free: mime_subparts_unbind;</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;arg = subparts;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;datasize = -1;</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;kind = <a class="code" href="mime_8h.html#a3f7ea952d37b502d03fb5d8f8b9d7101a6167535771a4ad417b9d4cb82be44fe2">MIMEKIND_MULTIPART</a>;</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  }</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;}</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;</div><div class="line"><a name="l01524"></a><span class="lineno"><a class="line" href="mime_8c.html#a1c0916f106b9a5ebbe6258a8e1e58cb8"> 1524</a></span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#a1c0916f106b9a5ebbe6258a8e1e58cb8">curl_mime_subparts</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>, <a class="code" href="structcurl__mime__s.html">curl_mime</a> *subparts)</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;{</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="mime_8c.html#aa7e20c5da987772b1867070180844105">Curl_mime_set_subparts</a>(<a class="code" href="structpart.html">part</a>, subparts, <a class="code" href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;}</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;<span class="comment">/* Readback from top mime. */</span></div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;<span class="comment">/* Argument is the dummy top part. */</span></div><div class="line"><a name="l01532"></a><span class="lineno"><a class="line" href="mime_8h.html#a421afd16d330a7d51f13ec1aecca05be"> 1532</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="mime_8c.html#a421afd16d330a7d51f13ec1aecca05be">Curl_mime_read</a>(<span class="keywordtype">char</span> *<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, <span class="keywordtype">size_t</span> <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>, <span class="keywordtype">size_t</span> nitems, <span class="keywordtype">void</span> *instream)</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;{</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a> = (<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *) instream;</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  (void) <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>;   <span class="comment">/* Always 1. */</span></div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  <span class="keywordflow">return</span> readback_part(<a class="code" href="structpart.html">part</a>, <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, nitems);</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;}</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;<span class="comment">/* Rewind mime stream. */</span></div><div class="line"><a name="l01541"></a><span class="lineno"><a class="line" href="mime_8h.html#a16da9e4dbf38be0096a6c63bd408c39c"> 1541</a></span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#a16da9e4dbf38be0096a6c63bd408c39c">Curl_mime_rewind</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;{</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  <span class="keywordflow">return</span> mime_part_rewind(<a class="code" href="structpart.html">part</a>) == <a class="code" href="curl_8h.html#af7074ca58279ac7ad8f78b9954a31160">CURL_SEEKFUNC_OK</a>?</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;         <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>: <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951a1a9263421629452bb969e2aa901c11ed">CURLE_SEND_FAIL_REWIND</a>;</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;}</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;<span class="comment">/* Compute header list size. */</span></div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> slist_size(<span class="keyword">struct</span> <a class="code" href="structcurl__slist.html">curl_slist</a> *s,</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;                         <span class="keywordtype">size_t</span> overhead, <span class="keyword">const</span> <span class="keywordtype">char</span> *skip)</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;{</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> = 0;</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  <span class="keywordtype">size_t</span> skiplen = skip? strlen(skip): 0;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <span class="keywordflow">for</span>(; s; s = s-&gt;<a class="code" href="structcurl__slist.html#a56fcfc41d89a47865933c310d316a108">next</a>)</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <span class="keywordflow">if</span>(!skip || !match_header(s, skip, skiplen))</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;      <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> += strlen(s-&gt;<a class="code" href="structcurl__slist.html#a5fe4d926491a1c9b8b9a73c40505f601">data</a>) + overhead;</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>;</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;}</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;<span class="comment">/* Get/compute multipart size. */</span></div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;<span class="keyword">static</span> <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> multipart_size(<a class="code" href="structcurl__mime__s.html">curl_mime</a> *mime)</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;{</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>;</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  <span class="keywordtype">size_t</span> boundarysize;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;  <span class="keywordflow">if</span>(!mime)</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    <span class="keywordflow">return</span> 0;           <span class="comment">/* Not present -&gt; empty. */</span></div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;  boundarysize = 4 + strlen(mime-&gt;<a class="code" href="structcurl__mime__s.html#a03efea9568d372b7b02f079963cbdb31">boundary</a>) + 2;</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;  <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> = boundarysize;  <span class="comment">/* Final boundary - CRLF after headers. */</span></div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;  <span class="keywordflow">for</span>(<a class="code" href="structpart.html">part</a> = mime-&gt;<a class="code" href="structcurl__mime__s.html#accd1697ef1449ff2692cc9c1cc9e40da">firstpart</a>; <a class="code" href="structpart.html">part</a>; <a class="code" href="structpart.html">part</a> = <a class="code" href="structpart.html">part</a>-&gt;nextpart) {</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> sz = <a class="code" href="mime_8c.html#a5d447429cc681c949f0a2b9c60bebdae">Curl_mime_size</a>(<a class="code" href="structpart.html">part</a>);</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <span class="keywordflow">if</span>(sz &lt; 0)</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;      <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> = sz;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> &gt;= 0)</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;      <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> += boundarysize + sz;</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  }</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>;</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;}</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;<span class="comment">/* Get/compute mime size. */</span></div><div class="line"><a name="l01587"></a><span class="lineno"><a class="line" href="mime_8h.html#a5d447429cc681c949f0a2b9c60bebdae"> 1587</a></span>&#160;<a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> <a class="code" href="mime_8c.html#a5d447429cc681c949f0a2b9c60bebdae">Curl_mime_size</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;{</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;  <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>;</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;kind == <a class="code" href="mime_8h.html#a3f7ea952d37b502d03fb5d8f8b9d7101a6167535771a4ad417b9d4cb82be44fe2">MIMEKIND_MULTIPART</a>)</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    <a class="code" href="structpart.html">part</a>-&gt;datasize = multipart_size(<a class="code" href="structpart.html">part</a>-&gt;arg);</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> = <a class="code" href="structpart.html">part</a>-&gt;datasize;</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;encoder)</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> = <a class="code" href="structpart.html">part</a>-&gt;encoder-&gt;sizefunc(<a class="code" href="structpart.html">part</a>);</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> &gt;= 0 &amp;&amp; !(<a class="code" href="structpart.html">part</a>-&gt;flags &amp; <a class="code" href="mime_8h.html#ae6faa301cc4b37f4112e9acc984db066">MIME_BODY_ONLY</a>)) {</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="comment">/* Compute total part size. */</span></div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> += slist_size(<a class="code" href="structpart.html">part</a>-&gt;curlheaders, 2, NULL);</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> += slist_size(<a class="code" href="structpart.html">part</a>-&gt;userheaders, 2, <span class="stringliteral">&quot;Content-Type&quot;</span>);</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a> += 2;    <span class="comment">/* CRLF after headers. */</span></div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  }</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>;</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;}</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;<span class="comment">/* Add a header. */</span></div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;<span class="comment">/* VARARGS2 */</span></div><div class="line"><a name="l01610"></a><span class="lineno"><a class="line" href="mime_8h.html#a18951691569e3c259cba64edf1d3bd4b"> 1610</a></span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#a18951691569e3c259cba64edf1d3bd4b">Curl_mime_add_header</a>(<span class="keyword">struct</span> <a class="code" href="structcurl__slist.html">curl_slist</a> **slp, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...)</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;{</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  <span class="keyword">struct </span><a class="code" href="structcurl__slist.html">curl_slist</a> *hdr = NULL;</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;  <span class="keywordtype">char</span> *s = NULL;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  va_list ap;</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;  va_start(ap, fmt);</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;  s = <a class="code" href="mprintf_8h.html#a261c9a5d90b67ece71b5a1b358524d2e">curl_mvaprintf</a>(fmt, ap);</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;  va_end(ap);</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;  <span class="keywordflow">if</span>(s) {</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    hdr = <a class="code" href="slist_8c.html#a7982a92d1abe5dcce03e879a402c809b">Curl_slist_append_nodup</a>(*slp, s);</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    <span class="keywordflow">if</span>(hdr)</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;      *slp = hdr;</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;      <a class="code" href="curl__memory_8h.html#a9cc854374299a1dd933bf62029761768">free</a>(s);</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  }</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;  <span class="keywordflow">return</span> hdr? <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>: <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951aba5a22c9f705ed27933344be221fe937">CURLE_OUT_OF_MEMORY</a>;</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;}</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;<span class="comment">/* Add a content type header. */</span></div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;<span class="keyword">static</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> add_content_type(<span class="keyword">struct</span> <a class="code" href="structcurl__slist.html">curl_slist</a> **slp,</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;                                 <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="form_8d.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *boundary)</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;{</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="mime_8c.html#a18951691569e3c259cba64edf1d3bd4b">Curl_mime_add_header</a>(slp, <span class="stringliteral">&quot;Content-Type: %s%s%s&quot;</span>, <a class="code" href="form_8d.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>,</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;                              boundary? <span class="stringliteral">&quot;; boundary=&quot;</span>: <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;                              boundary? boundary: <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;}</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;</div><div class="line"><a name="l01640"></a><span class="lineno"><a class="line" href="mime_8h.html#aa02fd78d6c0afac9cffdd3ef6d109e24"> 1640</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="mime_8c.html#aa02fd78d6c0afac9cffdd3ef6d109e24">Curl_mime_contenttype</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>)</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;{</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;<span class="comment">   * If no content type was specified, we scan through a few well-known</span></div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;<span class="comment">   * extensions and pick the first we match!</span></div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  <span class="keyword">struct </span>ContentType {</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *extension;</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="form_8d.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a>;</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;  };</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span>ContentType ctts[] = {</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    {<span class="stringliteral">&quot;.gif&quot;</span>,  <span class="stringliteral">&quot;image/gif&quot;</span>},</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    {<span class="stringliteral">&quot;.jpg&quot;</span>,  <span class="stringliteral">&quot;image/jpeg&quot;</span>},</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    {<span class="stringliteral">&quot;.jpeg&quot;</span>, <span class="stringliteral">&quot;image/jpeg&quot;</span>},</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    {<span class="stringliteral">&quot;.png&quot;</span>,  <span class="stringliteral">&quot;image/png&quot;</span>},</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    {<span class="stringliteral">&quot;.svg&quot;</span>,  <span class="stringliteral">&quot;image/svg+xml&quot;</span>},</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    {<span class="stringliteral">&quot;.txt&quot;</span>,  <span class="stringliteral">&quot;text/plain&quot;</span>},</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    {<span class="stringliteral">&quot;.htm&quot;</span>,  <span class="stringliteral">&quot;text/html&quot;</span>},</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    {<span class="stringliteral">&quot;.html&quot;</span>, <span class="stringliteral">&quot;text/html&quot;</span>},</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    {<span class="stringliteral">&quot;.pdf&quot;</span>,  <span class="stringliteral">&quot;application/pdf&quot;</span>},</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    {<span class="stringliteral">&quot;.xml&quot;</span>,  <span class="stringliteral">&quot;application/xml&quot;</span>}</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;  };</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>) {</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    <span class="keywordtype">size_t</span> len1 = strlen(<a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>);</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *nameend = <a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a> + len1;</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = 0; <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &lt; <span class="keyword">sizeof</span>(ctts) / <span class="keyword">sizeof</span>(ctts[0]); <a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++) {</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;      <span class="keywordtype">size_t</span> len2 = strlen(ctts[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].extension);</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;      <span class="keywordflow">if</span>(len1 &gt;= len2 &amp;&amp; <a class="code" href="strcase_8h.html#a4b6a8324b9a93ddfa5413308a22bfa44">strcasecompare</a>(nameend - len2, ctts[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].extension))</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;          <span class="keywordflow">return</span> ctts[<a class="code" href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].type;</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    }</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;  }</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;  <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;}</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;</div><div class="line"><a name="l01678"></a><span class="lineno"><a class="line" href="mime_8h.html#aa3774f4f669549973a0ff85d5372dc8f"> 1678</a></span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#aa3774f4f669549973a0ff85d5372dc8f">Curl_mime_prepare_headers</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>,</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;                                   <span class="keyword">const</span> <span class="keywordtype">char</span> *contenttype,</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;                                   <span class="keyword">const</span> <span class="keywordtype">char</span> *disposition,</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;                                   <span class="keyword">enum</span> <a class="code" href="mime_8h.html#afdc5138da8e131f5e919d4f8e67ae172">mimestrategy</a> strategy)</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;{</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;  <a class="code" href="structcurl__mime__s.html">curl_mime</a> *mime = NULL;</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *boundary = NULL;</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;  <span class="keywordtype">char</span> *customct;</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *cte = NULL;</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;  <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> ret = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;  <span class="comment">/* Get rid of previously prepared headers. */</span></div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;  <a class="code" href="curl_8h.html#a3a28c84e40db0ef30859b680281c9d36">curl_slist_free_all</a>(<a class="code" href="structpart.html">part</a>-&gt;curlheaders);</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;  <a class="code" href="structpart.html">part</a>-&gt;curlheaders = NULL;</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;  <span class="comment">/* Be sure we won&#39;t access old headers later. */</span></div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;state.state == <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a0fe3323e6cdcb2985a7f23f7038b927a">MIMESTATE_CURLHEADERS</a>)</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    mimesetstate(&amp;<a class="code" href="structpart.html">part</a>-&gt;state, <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a0fe3323e6cdcb2985a7f23f7038b927a">MIMESTATE_CURLHEADERS</a>, NULL);</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  <span class="comment">/* Check if content type is specified. */</span></div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;  customct = <a class="code" href="structpart.html">part</a>-&gt;mimetype;</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;  <span class="keywordflow">if</span>(!customct)</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    customct = search_header(<a class="code" href="structpart.html">part</a>-&gt;userheaders, <span class="stringliteral">&quot;Content-Type&quot;</span>);</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;  <span class="keywordflow">if</span>(customct)</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    contenttype = customct;</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;  <span class="comment">/* If content type is not specified, try to determine it. */</span></div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;  <span class="keywordflow">if</span>(!contenttype) {</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    <span class="keywordflow">switch</span>(<a class="code" href="structpart.html">part</a>-&gt;kind) {</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mime_8h.html#a3f7ea952d37b502d03fb5d8f8b9d7101a6167535771a4ad417b9d4cb82be44fe2">MIMEKIND_MULTIPART</a>:</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;      contenttype = <a class="code" href="mime_8h.html#aaebb2a8b4bf26dfb612ce460b4328c85">MULTIPART_CONTENTTYPE_DEFAULT</a>;</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mime_8h.html#a3f7ea952d37b502d03fb5d8f8b9d7101ae008e417ccf479abfb3d3117c330df4b">MIMEKIND_FILE</a>:</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;      contenttype = <a class="code" href="mime_8c.html#aa02fd78d6c0afac9cffdd3ef6d109e24">Curl_mime_contenttype</a>(<a class="code" href="structpart.html">part</a>-&gt;filename);</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;      <span class="keywordflow">if</span>(!contenttype)</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;        contenttype = <a class="code" href="mime_8c.html#aa02fd78d6c0afac9cffdd3ef6d109e24">Curl_mime_contenttype</a>(<a class="code" href="structpart.html">part</a>-&gt;data);</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;      <span class="keywordflow">if</span>(!contenttype &amp;&amp; <a class="code" href="structpart.html">part</a>-&gt;filename)</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;        contenttype = <a class="code" href="mime_8h.html#ab2a72961faaa6c0ce26963a8013fed2e">FILE_CONTENTTYPE_DEFAULT</a>;</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;      contenttype = <a class="code" href="mime_8c.html#aa02fd78d6c0afac9cffdd3ef6d109e24">Curl_mime_contenttype</a>(<a class="code" href="structpart.html">part</a>-&gt;filename);</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    }</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;  }</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;kind == <a class="code" href="mime_8h.html#a3f7ea952d37b502d03fb5d8f8b9d7101a6167535771a4ad417b9d4cb82be44fe2">MIMEKIND_MULTIPART</a>) {</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    mime = (<a class="code" href="structcurl__mime__s.html">curl_mime</a> *) <a class="code" href="structpart.html">part</a>-&gt;arg;</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;    <span class="keywordflow">if</span>(mime)</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;      boundary = mime-&gt;<a class="code" href="structcurl__mime__s.html#a03efea9568d372b7b02f079963cbdb31">boundary</a>;</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;  }</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(contenttype &amp;&amp; !customct &amp;&amp;</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;          <a class="code" href="strcase_8h.html#a4b6a8324b9a93ddfa5413308a22bfa44">strcasecompare</a>(contenttype, <span class="stringliteral">&quot;text/plain&quot;</span>))</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    <span class="keywordflow">if</span>(strategy == <a class="code" href="mime_8h.html#afdc5138da8e131f5e919d4f8e67ae172a52e324a18fd8b30fa3c3801991ecbded">MIMESTRATEGY_MAIL</a> || !<a class="code" href="structpart.html">part</a>-&gt;filename)</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      contenttype = NULL;</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;  <span class="comment">/* Issue content-disposition header only if not already set by caller. */</span></div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;  <span class="keywordflow">if</span>(!search_header(<a class="code" href="structpart.html">part</a>-&gt;userheaders, <span class="stringliteral">&quot;Content-Disposition&quot;</span>)) {</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    <span class="keywordflow">if</span>(!disposition)</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;filename || <a class="code" href="structpart.html">part</a>-&gt;<a class="code" href="structpart.html#adc3bca90b1a43ee068aabda0e2553ef7">name</a> ||</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;        (contenttype &amp;&amp; !<a class="code" href="strcase_8h.html#a48c605aaef9b3681c41d91096b6baad0">strncasecompare</a>(contenttype, <span class="stringliteral">&quot;multipart/&quot;</span>, 10)))</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;          disposition = <a class="code" href="mime_8h.html#aa5c7e54854ee53fcaeef2e3d826f15e6">DISPOSITION_DEFAULT</a>;</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    <span class="keywordflow">if</span>(disposition &amp;&amp; <a class="code" href="curl_8h.html#acf9429c7036e44c7701a55dc0344f9f0">curl_strequal</a>(disposition, <span class="stringliteral">&quot;attachment&quot;</span>) &amp;&amp;</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;     !<a class="code" href="structpart.html">part</a>-&gt;<a class="code" href="structpart.html#adc3bca90b1a43ee068aabda0e2553ef7">name</a> &amp;&amp; !<a class="code" href="structpart.html">part</a>-&gt;filename)</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;      disposition = NULL;</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    <span class="keywordflow">if</span>(disposition) {</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a> = NULL;</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a> = NULL;</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;<a class="code" href="structpart.html#adc3bca90b1a43ee068aabda0e2553ef7">name</a>) {</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;        <a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a> = escape_string(<a class="code" href="structpart.html">part</a>-&gt;<a class="code" href="structpart.html#adc3bca90b1a43ee068aabda0e2553ef7">name</a>);</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>)</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;          ret = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951aba5a22c9f705ed27933344be221fe937">CURLE_OUT_OF_MEMORY</a>;</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;      }</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;      <span class="keywordflow">if</span>(!ret &amp;&amp; <a class="code" href="structpart.html">part</a>-&gt;filename) {</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        <a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a> = escape_string(<a class="code" href="structpart.html">part</a>-&gt;filename);</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>)</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;          ret = <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951aba5a22c9f705ed27933344be221fe937">CURLE_OUT_OF_MEMORY</a>;</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;      }</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;      <span class="keywordflow">if</span>(!ret)</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;        ret = <a class="code" href="mime_8c.html#a18951691569e3c259cba64edf1d3bd4b">Curl_mime_add_header</a>(&amp;<a class="code" href="structpart.html">part</a>-&gt;curlheaders,</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;                                   <span class="stringliteral">&quot;Content-Disposition: %s%s%s%s%s%s%s&quot;</span>,</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;                                   disposition,</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;                                   <a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>? <span class="stringliteral">&quot;; name=\&quot;&quot;</span>: <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;                                   <a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>? <a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>: <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;                                   <a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>? <span class="stringliteral">&quot;\&quot;&quot;</span>: <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;                                   <a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>? <span class="stringliteral">&quot;; filename=\&quot;&quot;</span>: <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;                                   <a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>? <a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>: <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;                                   <a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>? <span class="stringliteral">&quot;\&quot;&quot;</span>: <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;      <a class="code" href="memdebug_8h.html#a795660f73c902cc80ac0fe6cda0dbd1c">Curl_safefree</a>(<a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>);</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;      <a class="code" href="memdebug_8h.html#a795660f73c902cc80ac0fe6cda0dbd1c">Curl_safefree</a>(<a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>);</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;      <span class="keywordflow">if</span>(ret)</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;      }</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    }</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;  <span class="comment">/* Issue Content-Type header. */</span></div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;  <span class="keywordflow">if</span>(contenttype) {</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;    ret = add_content_type(&amp;<a class="code" href="structpart.html">part</a>-&gt;curlheaders, contenttype, boundary);</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    <span class="keywordflow">if</span>(ret)</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;      <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;  }</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;  <span class="comment">/* Content-Transfer-Encoding header. */</span></div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;  <span class="keywordflow">if</span>(!search_header(<a class="code" href="structpart.html">part</a>-&gt;userheaders, <span class="stringliteral">&quot;Content-Transfer-Encoding&quot;</span>)) {</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;encoder)</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;      cte = <a class="code" href="structpart.html">part</a>-&gt;encoder-&gt;<a class="code" href="structpart.html#adc3bca90b1a43ee068aabda0e2553ef7">name</a>;</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(contenttype &amp;&amp; strategy == <a class="code" href="mime_8h.html#afdc5138da8e131f5e919d4f8e67ae172a52e324a18fd8b30fa3c3801991ecbded">MIMESTRATEGY_MAIL</a> &amp;&amp;</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;     <a class="code" href="structpart.html">part</a>-&gt;kind != <a class="code" href="mime_8h.html#a3f7ea952d37b502d03fb5d8f8b9d7101a6167535771a4ad417b9d4cb82be44fe2">MIMEKIND_MULTIPART</a>)</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;      cte = <span class="stringliteral">&quot;8bit&quot;</span>;</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    <span class="keywordflow">if</span>(cte) {</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;      ret = <a class="code" href="mime_8c.html#a18951691569e3c259cba64edf1d3bd4b">Curl_mime_add_header</a>(&amp;<a class="code" href="structpart.html">part</a>-&gt;curlheaders,</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;                                 <span class="stringliteral">&quot;Content-Transfer-Encoding: %s&quot;</span>, cte);</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;      <span class="keywordflow">if</span>(ret)</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    }</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;  }</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;  <span class="comment">/* If we were reading curl-generated headers, restart with new ones (this</span></div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;<span class="comment">     should not occur). */</span></div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;state.state == <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a0fe3323e6cdcb2985a7f23f7038b927a">MIMESTATE_CURLHEADERS</a>)</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    mimesetstate(&amp;<a class="code" href="structpart.html">part</a>-&gt;state, <a class="code" href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a0fe3323e6cdcb2985a7f23f7038b927a">MIMESTATE_CURLHEADERS</a>, <a class="code" href="structpart.html">part</a>-&gt;curlheaders);</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;  <span class="comment">/* Process subparts. */</span></div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="structpart.html">part</a>-&gt;kind == <a class="code" href="mime_8h.html#a3f7ea952d37b502d03fb5d8f8b9d7101a6167535771a4ad417b9d4cb82be44fe2">MIMEKIND_MULTIPART</a> &amp;&amp; mime) {</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;    <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *subpart;</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    disposition = NULL;</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="strcase_8h.html#a4b6a8324b9a93ddfa5413308a22bfa44">strcasecompare</a>(contenttype, <span class="stringliteral">&quot;multipart/form-data&quot;</span>))</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;      disposition = <span class="stringliteral">&quot;form-data&quot;</span>;</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    <span class="keywordflow">for</span>(subpart = mime-&gt;<a class="code" href="structcurl__mime__s.html#accd1697ef1449ff2692cc9c1cc9e40da">firstpart</a>; subpart; subpart = subpart-&gt;<a class="code" href="structcurl__mimepart__s.html#a42c16160977da930d61ab37025adca44">nextpart</a>) {</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;      ret = <a class="code" href="mime_8c.html#aa3774f4f669549973a0ff85d5372dc8f">Curl_mime_prepare_headers</a>(subpart, NULL, disposition, strategy);</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;      <span class="keywordflow">if</span>(ret)</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;        <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    }</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;  }</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;}</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* !CURL_DISABLE_HTTP || !CURL_DISABLE_SMTP || !CURL_DISABLE_IMAP */</span><span class="preprocessor"></span></div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;<span class="comment">/* Mime not compiled in: define stubs for externally-referenced functions. */</span></div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;<a class="code" href="structcurl__mime__s.html">curl_mime</a> *<a class="code" href="mime_8c.html#a62f8ea9d0ecba38e9ea6f78684d4a662">curl_mime_init</a>(<a class="code" href="curl_8h.html#ace655e3633b6533591283994d6b5cdda">CURL</a> *<a class="code" href="unit1608_8c.html#a8e67ff5c12b8bbb5baf741515fa674bb">easy</a>)</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;{</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;  (void) <a class="code" href="unit1608_8c.html#a8e67ff5c12b8bbb5baf741515fa674bb">easy</a>;</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;  <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;}</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mime_8c.html#aea3a0f9a996315bcf17cce4ec0b378a2">curl_mime_free</a>(<a class="code" href="structcurl__mime__s.html">curl_mime</a> *mime)</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;{</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;  (void) mime;</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;}</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="mime_8c.html#a4cb7d1f698ce64968affeb42c051d339">curl_mime_addpart</a>(<a class="code" href="structcurl__mime__s.html">curl_mime</a> *mime)</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;{</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;  (void) mime;</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;  <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;}</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#a3cece1dbf7ba3028321c1bf4fb771e89">curl_mime_name</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>)</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;{</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;  (void) <a class="code" href="structpart.html">part</a>;</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;  (void) <a class="code" href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a>;</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951ac92786e19b828c0c4a8fa5f7d6b1e01e">CURLE_NOT_BUILT_IN</a>;</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;}</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#a2e713ad6004608b944d65cfe2c42d326">curl_mime_filename</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>)</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;{</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;  (void) <a class="code" href="structpart.html">part</a>;</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  (void) <a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>;</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951ac92786e19b828c0c4a8fa5f7d6b1e01e">CURLE_NOT_BUILT_IN</a>;</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;}</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#ab38cb1943e27dfc0e25075e8b7fd7b34">curl_mime_type</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *mimetype)</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;{</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;  (void) <a class="code" href="structpart.html">part</a>;</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;  (void) mimetype;</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951ac92786e19b828c0c4a8fa5f7d6b1e01e">CURLE_NOT_BUILT_IN</a>;</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;}</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#a86970249ebfb59b6d0989f10e7a64b3b">curl_mime_encoder</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="compressed_8d.html#a6c2ffb0bf7f4a1f29bfe33d42329479b">encoding</a>)</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;{</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;  (void) <a class="code" href="structpart.html">part</a>;</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  (void) <a class="code" href="compressed_8d.html#a6c2ffb0bf7f4a1f29bfe33d42329479b">encoding</a>;</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951ac92786e19b828c0c4a8fa5f7d6b1e01e">CURLE_NOT_BUILT_IN</a>;</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;}</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#aaedcbf6141c28fcbf6405460b302a50c">curl_mime_data</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>,</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structdata.html">data</a>, <span class="keywordtype">size_t</span> datasize)</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;{</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;  (void) <a class="code" href="structpart.html">part</a>;</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;  (void) <a class="code" href="structdata.html">data</a>;</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;  (void) datasize;</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951ac92786e19b828c0c4a8fa5f7d6b1e01e">CURLE_NOT_BUILT_IN</a>;</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;}</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#a613174d8e80cad9b0f473e4a7631c81a">curl_mime_filedata</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>)</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;{</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;  (void) <a class="code" href="structpart.html">part</a>;</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;  (void) <a class="code" href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>;</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951ac92786e19b828c0c4a8fa5f7d6b1e01e">CURLE_NOT_BUILT_IN</a>;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;}</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#adf1d3c4b90945af1e81e77a806a30eea">curl_mime_data_cb</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>,</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;                           <a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> datasize,</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;                           <a class="code" href="curl_8h.html#a7516630ec17f247697dd3272be7ada74">curl_read_callback</a> readfunc,</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;                           <a class="code" href="curl_8h.html#a8ea5d0b350bebdf47cfb237e7caac14a">curl_seek_callback</a> seekfunc,</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;                           <a class="code" href="curl_8h.html#ad7ff72bc35b39df6cca31d944c585add">curl_free_callback</a> freefunc,</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;                           <span class="keywordtype">void</span> *arg)</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;{</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;  (void) <a class="code" href="structpart.html">part</a>;</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;  (void) datasize;</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;  (void) readfunc;</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;  (void) seekfunc;</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;  (void) freefunc;</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;  (void) arg;</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951ac92786e19b828c0c4a8fa5f7d6b1e01e">CURLE_NOT_BUILT_IN</a>;</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;}</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#a1c0916f106b9a5ebbe6258a8e1e58cb8">curl_mime_subparts</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>, <a class="code" href="structcurl__mime__s.html">curl_mime</a> *subparts)</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;{</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;  (void) <a class="code" href="structpart.html">part</a>;</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;  (void) subparts;</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951ac92786e19b828c0c4a8fa5f7d6b1e01e">CURLE_NOT_BUILT_IN</a>;</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;}</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#ac305b8d2c653ca50fa292823795d5f68">curl_mime_headers</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>,</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;                           <span class="keyword">struct</span> <a class="code" href="structcurl__slist.html">curl_slist</a> *<a class="code" href="anyauth_8d.html#a076c285cdc160cc073b20f7cf28ef85f">headers</a>, <span class="keywordtype">int</span> take_ownership)</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;{</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;  (void) <a class="code" href="structpart.html">part</a>;</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;  (void) <a class="code" href="anyauth_8d.html#a076c285cdc160cc073b20f7cf28ef85f">headers</a>;</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;  (void) take_ownership;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951ac92786e19b828c0c4a8fa5f7d6b1e01e">CURLE_NOT_BUILT_IN</a>;</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;}</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mime_8c.html#a26e5fb189d0937d27da11d1c10c09565">Curl_mime_initpart</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>, <span class="keyword">struct</span> <a class="code" href="struct_curl__easy.html">Curl_easy</a> *<a class="code" href="unit1608_8c.html#a8e67ff5c12b8bbb5baf741515fa674bb">easy</a>)</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;{</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;  (void) <a class="code" href="structpart.html">part</a>;</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;  (void) <a class="code" href="unit1608_8c.html#a8e67ff5c12b8bbb5baf741515fa674bb">easy</a>;</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;}</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;<span class="keywordtype">void</span> <a class="code" href="mime_8c.html#a3295a1b4557da56cd25b0a5217183118">Curl_mime_cleanpart</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;{</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  (void) <a class="code" href="structpart.html">part</a>;</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;}</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#a5277ce27b3802d3e11c47ec2040e0a0f">Curl_mime_duppart</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *dst, <span class="keyword">const</span> <a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *src)</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;{</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;  (void) dst;</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;  (void) src;</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a>;    <span class="comment">/* Nothing to duplicate: always succeed. */</span></div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;}</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#aa7e20c5da987772b1867070180844105">Curl_mime_set_subparts</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>,</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;                                <a class="code" href="structcurl__mime__s.html">curl_mime</a> *subparts, <span class="keywordtype">int</span> take_ownership)</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;{</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;  (void) <a class="code" href="structpart.html">part</a>;</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;  (void) subparts;</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;  (void) take_ownership;</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951ac92786e19b828c0c4a8fa5f7d6b1e01e">CURLE_NOT_BUILT_IN</a>;</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;}</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#aa3774f4f669549973a0ff85d5372dc8f">Curl_mime_prepare_headers</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>,</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;                                   <span class="keyword">const</span> <span class="keywordtype">char</span> *contenttype,</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;                                   <span class="keyword">const</span> <span class="keywordtype">char</span> *disposition,</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;                                   <span class="keyword">enum</span> <a class="code" href="mime_8h.html#afdc5138da8e131f5e919d4f8e67ae172">mimestrategy</a> strategy)</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;{</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;  (void) <a class="code" href="structpart.html">part</a>;</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;  (void) contenttype;</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;  (void) disposition;</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;  (void) strategy;</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951ac92786e19b828c0c4a8fa5f7d6b1e01e">CURLE_NOT_BUILT_IN</a>;</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;}</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;<a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a> <a class="code" href="mime_8c.html#a5d447429cc681c949f0a2b9c60bebdae">Curl_mime_size</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;{</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;  (void) <a class="code" href="structpart.html">part</a>;</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a>) -1;</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;}</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="mime_8c.html#a421afd16d330a7d51f13ec1aecca05be">Curl_mime_read</a>(<span class="keywordtype">char</span> *<a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>, <span class="keywordtype">size_t</span> <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>, <span class="keywordtype">size_t</span> nitems, <span class="keywordtype">void</span> *instream)</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;{</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;  (void) <a class="code" href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a>;</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;  (void) <a class="code" href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a>;</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;  (void) nitems;</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;  (void) instream;</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;  <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;}</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#a16da9e4dbf38be0096a6c63bd408c39c">Curl_mime_rewind</a>(<a class="code" href="structcurl__mimepart__s.html">curl_mimepart</a> *<a class="code" href="structpart.html">part</a>)</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;{</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;  (void) <a class="code" href="structpart.html">part</a>;</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951ac92786e19b828c0c4a8fa5f7d6b1e01e">CURLE_NOT_BUILT_IN</a>;</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;}</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;<span class="comment">/* VARARGS2 */</span></div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;<a class="code" href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a> <a class="code" href="mime_8c.html#a18951691569e3c259cba64edf1d3bd4b">Curl_mime_add_header</a>(<span class="keyword">struct</span> <a class="code" href="structcurl__slist.html">curl_slist</a> **slp, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...)</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;{</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;  (void) slp;</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;  (void) fmt;</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="curl_8h.html#af0691941698240652e0a391394217951ac92786e19b828c0c4a8fa5f7d6b1e01e">CURLE_NOT_BUILT_IN</a>;</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;}</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !CURL_DISABLE_HTTP || !CURL_DISABLE_SMTP || !CURL_DISABLE_IMAP */</span><span class="preprocessor"></span></div><div class="ttc" id="curl__memory_8h_html_a9cc854374299a1dd933bf62029761768"><div class="ttname"><a href="curl__memory_8h.html#a9cc854374299a1dd933bf62029761768">free</a></div><div class="ttdeci">#define free(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="curl__memory_8h_source.html#l00130">curl_memory.h:130</a></div></div>
<div class="ttc" id="ftp_8c_html_a77812d4945cd21094debbd06962f0f01"><div class="ttname"><a href="ftp_8c.html#a77812d4945cd21094debbd06962f0f01">state</a></div><div class="ttdeci">#define state(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="ftp_8c_source.html#l00101">ftp.c:101</a></div></div>
<div class="ttc" id="mime_8h_html_ae00bf7b30ba982a8ea1742f71a62e656"><div class="ttname"><a href="mime_8h.html#ae00bf7b30ba982a8ea1742f71a62e656">MIME_RAND_BOUNDARY_CHARS</a></div><div class="ttdeci">#define MIME_RAND_BOUNDARY_CHARS</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00025">mime.h:25</a></div></div>
<div class="ttc" id="curl_8h_html_af7074ca58279ac7ad8f78b9954a31160"><div class="ttname"><a href="curl_8h.html#af7074ca58279ac7ad8f78b9954a31160">CURL_SEEKFUNC_OK</a></div><div class="ttdeci">#define CURL_SEEKFUNC_OK</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00343">curl.h:343</a></div></div>
<div class="ttc" id="struct_curl__easy_html"><div class="ttname"><a href="struct_curl__easy.html">Curl_easy</a></div><div class="ttdef"><b>Definition:</b> <a href="urldata_8h_source.html#l01755">urldata.h:1755</a></div></div>
<div class="ttc" id="mime_8h_html_aa435b43174844a5636586eb1393ebf30ad253a9d2d1bd2c40cf1ea26fe42ae563"><div class="ttname"><a href="mime_8h.html#aa435b43174844a5636586eb1393ebf30ad253a9d2d1bd2c40cf1ea26fe42ae563">MIMESTATE_BOUNDARY1</a></div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00054">mime.h:54</a></div></div>
<div class="ttc" id="mime_8h_html_afdc5138da8e131f5e919d4f8e67ae172a52e324a18fd8b30fa3c3801991ecbded"><div class="ttname"><a href="mime_8h.html#afdc5138da8e131f5e919d4f8e67ae172a52e324a18fd8b30fa3c3801991ecbded">MIMESTRATEGY_MAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00063">mime.h:63</a></div></div>
<div class="ttc" id="mime_8c_html_a6750c6bf3d5e493a9afbf0c278110187"><div class="ttname"><a href="mime_8c.html#a6750c6bf3d5e493a9afbf0c278110187">filesize</a></div><div class="ttdeci">#define filesize(name, stat_data)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l00125">mime.c:125</a></div></div>
<div class="ttc" id="strcase_8h_html"><div class="ttname"><a href="strcase_8h.html">strcase.h</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951a0e5145164e8e2a9d6eb43eef1c71f1af"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951a0e5145164e8e2a9d6eb43eef1c71f1af">CURLE_BAD_FUNCTION_ARGUMENT</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00513">curl.h:513</a></div></div>
<div class="ttc" id="structcurl__slist_html"><div class="ttname"><a href="structcurl__slist.html">curl_slist</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l02394">curl.h:2394</a></div></div>
<div class="ttc" id="config-win32ce_8h_html_ad4ea824bd0fcae61733c900a5cab1e01"><div class="ttname"><a href="config-win32ce_8h.html#ad4ea824bd0fcae61733c900a5cab1e01">stat</a></div><div class="ttdeci">int stat(const char *path, struct stat *buffer)</div></div>
<div class="ttc" id="slist_8c_html_a7982a92d1abe5dcce03e879a402c809b"><div class="ttname"><a href="slist_8c.html#a7982a92d1abe5dcce03e879a402c809b">Curl_slist_append_nodup</a></div><div class="ttdeci">struct curl_slist * Curl_slist_append_nodup(struct curl_slist *list, char *data)</div><div class="ttdef"><b>Definition:</b> <a href="slist_8c_source.html#l00059">slist.c:59</a></div></div>
<div class="ttc" id="mime_8h_html_aa435b43174844a5636586eb1393ebf30a26f14961a9c8856beaf155b62a958145"><div class="ttname"><a href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a26f14961a9c8856beaf155b62a958145">MIMESTATE_BODY</a></div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00053">mime.h:53</a></div></div>
<div class="ttc" id="mime_8h_html_a3f7ea952d37b502d03fb5d8f8b9d7101abe93c496b53ded1073ef46824c2e260b"><div class="ttname"><a href="mime_8h.html#a3f7ea952d37b502d03fb5d8f8b9d7101abe93c496b53ded1073ef46824c2e260b">MIMEKIND_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00039">mime.h:39</a></div></div>
<div class="ttc" id="curl_8h_html_a34eb017e0a29378f976becdaa94160d1"><div class="ttname"><a href="curl_8h.html#a34eb017e0a29378f976becdaa94160d1">CURL_SEEKFUNC_CANTSEEK</a></div><div class="ttdeci">#define CURL_SEEKFUNC_CANTSEEK</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00345">curl.h:345</a></div></div>
<div class="ttc" id="mime_8c_html_a3295a1b4557da56cd25b0a5217183118"><div class="ttname"><a href="mime_8c.html#a3295a1b4557da56cd25b0a5217183118">Curl_mime_cleanpart</a></div><div class="ttdeci">void Curl_mime_cleanpart(curl_mimepart *part)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l01100">mime.c:1100</a></div></div>
<div class="ttc" id="structcurl__mimepart__s_html_a91f8eaefebb5082e751957a619f371db"><div class="ttname"><a href="structcurl__mimepart__s.html#a91f8eaefebb5082e751957a619f371db">curl_mimepart_s::filename</a></div><div class="ttdeci">char * filename</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00116">mime.h:116</a></div></div>
<div class="ttc" id="sendf_8h_html_ae8e06000059e436c9c404603126718d6"><div class="ttname"><a href="sendf_8h.html#ae8e06000059e436c9c404603126718d6">failf</a></div><div class="ttdeci">#define failf</div><div class="ttdef"><b>Definition:</b> <a href="sendf_8h_source.html#l00048">sendf.h:48</a></div></div>
<div class="ttc" id="structcurl__slist_html_a5fe4d926491a1c9b8b9a73c40505f601"><div class="ttname"><a href="structcurl__slist.html#a5fe4d926491a1c9b8b9a73c40505f601">curl_slist::data</a></div><div class="ttdeci">char * data</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l02395">curl.h:2395</a></div></div>
<div class="ttc" id="sendf_8h_html"><div class="ttname"><a href="sendf_8h.html">sendf.h</a></div></div>
<div class="ttc" id="curl__memory_8h_html_aa3f578f8f1eaebf25b2e2313db31cb40"><div class="ttname"><a href="curl__memory_8h.html#aa3f578f8f1eaebf25b2e2313db31cb40">strdup</a></div><div class="ttdeci">#define strdup(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="curl__memory_8h_source.html#l00122">curl_memory.h:122</a></div></div>
<div class="ttc" id="structcurl__mime__s_html"><div class="ttname"><a href="structcurl__mime__s.html">curl_mime_s</a></div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00092">mime.h:92</a></div></div>
<div class="ttc" id="mime_8h_html_afdc5138da8e131f5e919d4f8e67ae172"><div class="ttname"><a href="mime_8h.html#afdc5138da8e131f5e919d4f8e67ae172">mimestrategy</a></div><div class="ttdeci">mimestrategy</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00062">mime.h:62</a></div></div>
<div class="ttc" id="unit1330_8c_html_a367d241c5c363105ee629417d1dfba75"><div class="ttname"><a href="unit1330_8c.html#a367d241c5c363105ee629417d1dfba75">ptr</a></div><div class="ttdeci">UNITTEST_START char * ptr</div><div class="ttdef"><b>Definition:</b> <a href="unit1330_8c_source.html#l00038">unit1330.c:38</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951">CURLcode</a></div><div class="ttdeci">CURLcode</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00457">curl.h:457</a></div></div>
<div class="ttc" id="structmime__state_html_a078e72c648ad6d0b13942014f0147fa2"><div class="ttname"><a href="structmime__state.html#a078e72c648ad6d0b13942014f0147fa2">mime_state::offset</a></div><div class="ttdeci">size_t offset</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00088">mime.h:88</a></div></div>
<div class="ttc" id="curl_8h_html_a7d210f0631e3de2ae352413b0eaf8226"><div class="ttname"><a href="curl_8h.html#a7d210f0631e3de2ae352413b0eaf8226">CURL_SEEKFUNC_FAIL</a></div><div class="ttdeci">#define CURL_SEEKFUNC_FAIL</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00344">curl.h:344</a></div></div>
<div class="ttc" id="structcurl__mimepart__s_html_a2c4a5e545de8e8c6a342d8c824519ca2"><div class="ttname"><a href="structcurl__mimepart__s.html#a2c4a5e545de8e8c6a342d8c824519ca2">curl_mimepart_s::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00117">mime.h:117</a></div></div>
<div class="ttc" id="structmime__encoder__state_html"><div class="ttname"><a href="structmime__encoder__state.html">mime_encoder_state</a></div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00077">mime.h:77</a></div></div>
<div class="ttc" id="structmime__state_html_ad367d9eabdfe1f28c7a3efdb349abeed"><div class="ttname"><a href="structmime__state.html#ad367d9eabdfe1f28c7a3efdb349abeed">mime_state::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00087">mime.h:87</a></div></div>
<div class="ttc" id="mime_8c_html_a3cece1dbf7ba3028321c1bf4fb771e89"><div class="ttname"><a href="mime_8c.html#a3cece1dbf7ba3028321c1bf4fb771e89">curl_mime_name</a></div><div class="ttdeci">CURLcode curl_mime_name(curl_mimepart *part, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l01278">mime.c:1278</a></div></div>
<div class="ttc" id="mime_8h_html_ae6faa301cc4b37f4112e9acc984db066"><div class="ttname"><a href="mime_8h.html#ae6faa301cc4b37f4112e9acc984db066">MIME_BODY_ONLY</a></div><div class="ttdeci">#define MIME_BODY_ONLY</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00031">mime.h:31</a></div></div>
<div class="ttc" id="structcurl__mimepart__s_html_a22079fe812eba3e01a075941c228643f"><div class="ttname"><a href="structcurl__mimepart__s.html#a22079fe812eba3e01a075941c228643f">curl_mimepart_s::kind</a></div><div class="ttdeci">enum mimekind kind</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00106">mime.h:106</a></div></div>
<div class="ttc" id="mime_8h_html_aa435b43174844a5636586eb1393ebf30a75222abd526c43d846a29d1dc7129f48"><div class="ttname"><a href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a75222abd526c43d846a29d1dc7129f48">MIMESTATE_USERHEADERS</a></div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00051">mime.h:51</a></div></div>
<div class="ttc" id="mime_8h_html_aa435b43174844a5636586eb1393ebf30a38e49688e71df767cd2f1c2261faead7"><div class="ttname"><a href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a38e49688e71df767cd2f1c2261faead7">MIMESTATE_BOUNDARY2</a></div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00055">mime.h:55</a></div></div>
<div class="ttc" id="mime_8c_html_aa3774f4f669549973a0ff85d5372dc8f"><div class="ttname"><a href="mime_8c.html#aa3774f4f669549973a0ff85d5372dc8f">Curl_mime_prepare_headers</a></div><div class="ttdeci">CURLcode Curl_mime_prepare_headers(curl_mimepart *part, const char *contenttype, const char *disposition, enum mimestrategy strategy)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l01678">mime.c:1678</a></div></div>
<div class="ttc" id="structcurl__mimepart__s_html_adbbdff45c27bc50e6dbbb0d06b40a111"><div class="ttname"><a href="structcurl__mimepart__s.html#adbbdff45c27bc50e6dbbb0d06b40a111">curl_mimepart_s::data</a></div><div class="ttdeci">char * data</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00107">mime.h:107</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951ac92786e19b828c0c4a8fa5f7d6b1e01e"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951ac92786e19b828c0c4a8fa5f7d6b1e01e">CURLE_NOT_BUILT_IN</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00462">curl.h:462</a></div></div>
<div class="ttc" id="unit1608_8c_html_a8e67ff5c12b8bbb5baf741515fa674bb"><div class="ttname"><a href="unit1608_8c.html#a8e67ff5c12b8bbb5baf741515fa674bb">easy</a></div><div class="ttdeci">struct Curl_easy * easy</div><div class="ttdef"><b>Definition:</b> <a href="unit1608_8c_source.html#l00050">unit1608.c:50</a></div></div>
<div class="ttc" id="structcurl__mimepart__s_html_a7994120e4461b2edffe79a1098a74680"><div class="ttname"><a href="structcurl__mimepart__s.html#a7994120e4461b2edffe79a1098a74680">curl_mimepart_s::easy</a></div><div class="ttdeci">struct Curl_easy * easy</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00103">mime.h:103</a></div></div>
<div class="ttc" id="curl_8h_html"><div class="ttname"><a href="curl_8h.html">curl.h</a></div></div>
<div class="ttc" id="structmime__state_html"><div class="ttname"><a href="structmime__state.html">mime_state</a></div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00085">mime.h:85</a></div></div>
<div class="ttc" id="mime_8h_html_aa435b43174844a5636586eb1393ebf30"><div class="ttname"><a href="mime_8h.html#aa435b43174844a5636586eb1393ebf30">mimestate</a></div><div class="ttdeci">mimestate</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00048">mime.h:48</a></div></div>
<div class="ttc" id="rand_8h_html"><div class="ttname"><a href="rand_8h.html">rand.h</a></div></div>
<div class="ttc" id="strcase_8h_html_a4b6a8324b9a93ddfa5413308a22bfa44"><div class="ttname"><a href="strcase_8h.html#a4b6a8324b9a93ddfa5413308a22bfa44">strcasecompare</a></div><div class="ttdeci">#define strcasecompare(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="strcase_8h_source.html#l00035">strcase.h:35</a></div></div>
<div class="ttc" id="mime_8c_html_ab5d8f83cf501dddcae5394c1661131a0"><div class="ttname"><a href="mime_8c.html#ab5d8f83cf501dddcae5394c1661131a0">QP_OK</a></div><div class="ttdeci">#define QP_OK</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l00086">mime.c:86</a></div></div>
<div class="ttc" id="curl__memory_8h_html_a2eb0b03d1a9de9615a291b1205969069"><div class="ttname"><a href="curl__memory_8h.html#a2eb0b03d1a9de9615a291b1205969069">malloc</a></div><div class="ttdeci">#define malloc(size)</div><div class="ttdef"><b>Definition:</b> <a href="curl__memory_8h_source.html#l00124">curl_memory.h:124</a></div></div>
<div class="ttc" id="mime_8h_html_aa435b43174844a5636586eb1393ebf30af392f88ef7fd223144ee718ab32b22a2"><div class="ttname"><a href="mime_8h.html#aa435b43174844a5636586eb1393ebf30af392f88ef7fd223144ee718ab32b22a2">MIMESTATE_END</a></div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00057">mime.h:57</a></div></div>
<div class="ttc" id="compressed_8d_html_a6c2ffb0bf7f4a1f29bfe33d42329479b"><div class="ttname"><a href="compressed_8d.html#a6c2ffb0bf7f4a1f29bfe33d42329479b">encoding</a></div><div class="ttdeci">Long and save the uncompressed document.If this option is used and the server sends an unsupported encoding</div><div class="ttdef"><b>Definition:</b> <a href="compressed_8d_source.html#l00005">compressed.d:5</a></div></div>
<div class="ttc" id="unit1304_8c_html_a937d4dd628a8858b443a399410d2600b"><div class="ttname"><a href="unit1304_8c.html#a937d4dd628a8858b443a399410d2600b">result</a></div><div class="ttdeci">UNITTEST_START int result</div><div class="ttdef"><b>Definition:</b> <a href="unit1304_8c_source.html#l00049">unit1304.c:49</a></div></div>
<div class="ttc" id="unit1394_8c_html_a0fb9c3165f64b5b79f3928b404818be9"><div class="ttname"><a href="unit1394_8c.html#a0fb9c3165f64b5b79f3928b404818be9">p</a></div><div class="ttdeci">const char ** p</div><div class="ttdef"><b>Definition:</b> <a href="unit1394_8c_source.html#l00079">unit1394.c:79</a></div></div>
<div class="ttc" id="structcurl__mimepart__s_html_ad86eb5784188eb06ffd6bdb99333652b"><div class="ttname"><a href="structcurl__mimepart__s.html#ad86eb5784188eb06ffd6bdb99333652b">curl_mimepart_s::readfunc</a></div><div class="ttdeci">curl_read_callback readfunc</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00108">mime.h:108</a></div></div>
<div class="ttc" id="unit1308_8c_html_a70a830d3039f37216dde9bcf2460aec2"><div class="ttname"><a href="unit1308_8c.html#a70a830d3039f37216dde9bcf2460aec2">buffer</a></div><div class="ttdeci">char buffer[]</div><div class="ttdef"><b>Definition:</b> <a href="unit1308_8c_source.html#l00048">unit1308.c:48</a></div></div>
<div class="ttc" id="curl_8h_html_a8ea5d0b350bebdf47cfb237e7caac14a"><div class="ttname"><a href="curl_8h.html#a8ea5d0b350bebdf47cfb237e7caac14a">curl_seek_callback</a></div><div class="ttdeci">int(* curl_seek_callback)(void *instream, curl_off_t offset, int origin)</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00347">curl.h:347</a></div></div>
<div class="ttc" id="components_2curl_2include_2curl_2_system_8h_html_a494e2b4279dc064f7ed1d0abd602b28d"><div class="ttname"><a href="components_2curl_2include_2curl_2_system_8h.html#a494e2b4279dc064f7ed1d0abd602b28d">curl_off_t</a></div><div class="ttdeci">CURL_TYPEOF_CURL_OFF_T curl_off_t</div><div class="ttdef"><b>Definition:</b> <a href="components_2curl_2include_2curl_2_system_8h_source.html#l00442">system.h:442</a></div></div>
<div class="ttc" id="mime_8c_html_a86970249ebfb59b6d0989f10e7a64b3b"><div class="ttname"><a href="mime_8c.html#a86970249ebfb59b6d0989f10e7a64b3b">curl_mime_encoder</a></div><div class="ttdeci">CURLcode curl_mime_encoder(curl_mimepart *part, const char *encoding)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l01413">mime.c:1413</a></div></div>
<div class="ttc" id="unit1303_8c_html_ac8936188af0c1d2f8b9d0cd25fde43b2"><div class="ttname"><a href="unit1303_8c.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a></div><div class="ttdeci">unsigned int i</div><div class="ttdef"><b>Definition:</b> <a href="unit1303_8c_source.html#l00078">unit1303.c:78</a></div></div>
<div class="ttc" id="mime_8h_html_a3f7ea952d37b502d03fb5d8f8b9d7101a6167535771a4ad417b9d4cb82be44fe2"><div class="ttname"><a href="mime_8h.html#a3f7ea952d37b502d03fb5d8f8b9d7101a6167535771a4ad417b9d4cb82be44fe2">MIMEKIND_MULTIPART</a></div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00043">mime.h:43</a></div></div>
<div class="ttc" id="form_8d_html_a2ff994e16bf9521154de4cf659a3b689"><div class="ttname"><a href="form_8d.html#a2ff994e16bf9521154de4cf659a3b689">filename</a></div><div class="ttdeci">filename</div><div class="ttdef"><b>Definition:</b> <a href="form_8d_source.html#l00057">form.d:57</a></div></div>
<div class="ttc" id="curl__setup_8h_html_ac5301ec6857f338762bb9334473131ce"><div class="ttname"><a href="curl__setup_8h.html#ac5301ec6857f338762bb9334473131ce">FOPEN_READTEXT</a></div><div class="ttdeci">#define FOPEN_READTEXT</div><div class="ttdef"><b>Definition:</b> <a href="curl__setup_8h_source.html#l00771">curl_setup.h:771</a></div></div>
<div class="ttc" id="curl__sasl_8c_html_a7360b55975153b822efc5217b7734e6a"><div class="ttname"><a href="curl__sasl_8c.html#a7360b55975153b822efc5217b7734e6a">len</a></div><div class="ttdeci">size_t len</div><div class="ttdef"><b>Definition:</b> <a href="curl__sasl_8c_source.html#l00055">curl_sasl.c:55</a></div></div>
<div class="ttc" id="curl__printf_8h_html"><div class="ttname"><a href="curl__printf_8h.html">curl_printf.h</a></div></div>
<div class="ttc" id="structcurl__mime__s_html_a03efea9568d372b7b02f079963cbdb31"><div class="ttname"><a href="structcurl__mime__s.html#a03efea9568d372b7b02f079963cbdb31">curl_mime_s::boundary</a></div><div class="ttdeci">char * boundary</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00097">mime.h:97</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951adaff0cec927d10c0ec5059ee0104ef62"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951adaff0cec927d10c0ec5059ee0104ef62">CURLE_READ_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00492">curl.h:492</a></div></div>
<div class="ttc" id="unit1304_8c_html_a82a69fcfe92d9db6dd585ccc532a2ab7"><div class="ttname"><a href="unit1304_8c.html#a82a69fcfe92d9db6dd585ccc532a2ab7">memcpy</a></div><div class="ttdeci">memcpy(filename, filename1, strlen(filename1))</div></div>
<div class="ttc" id="anyauth_8d_html_a076c285cdc160cc073b20f7cf28ef85f"><div class="ttname"><a href="anyauth_8d.html#a076c285cdc160cc073b20f7cf28ef85f">headers</a></div><div class="ttdeci">Long and use the most secure one the remote site claims to support.This is done by first doing a request and checking the response headers</div><div class="ttdef"><b>Definition:</b> <a href="anyauth_8d_source.html#l00006">anyauth.d:6</a></div></div>
<div class="ttc" id="form_8d_html_a7aead736a07eaf25623ad7bfa1f0ee2d"><div class="ttname"><a href="form_8d.html#a7aead736a07eaf25623ad7bfa1f0ee2d">type</a></div><div class="ttdeci">type</div><div class="ttdef"><b>Definition:</b> <a href="form_8d_source.html#l00048">form.d:48</a></div></div>
<div class="ttc" id="mime_8c_html_a613174d8e80cad9b0f473e4a7631c81a"><div class="ttname"><a href="mime_8c.html#a613174d8e80cad9b0f473e4a7631c81a">curl_mime_filedata</a></div><div class="ttdeci">CURLcode curl_mime_filedata(curl_mimepart *part, const char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l01346">mime.c:1346</a></div></div>
<div class="ttc" id="mime_8c_html_a421afd16d330a7d51f13ec1aecca05be"><div class="ttname"><a href="mime_8c.html#a421afd16d330a7d51f13ec1aecca05be">Curl_mime_read</a></div><div class="ttdeci">size_t Curl_mime_read(char *buffer, size_t size, size_t nitems, void *instream)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l01532">mime.c:1532</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951aba5a22c9f705ed27933344be221fe937"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951aba5a22c9f705ed27933344be221fe937">CURLE_OUT_OF_MEMORY</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00493">curl.h:493</a></div></div>
<div class="ttc" id="curlx_8c_html_af6458f5d187f1d7c82fb9ea7ef634b44"><div class="ttname"><a href="curlx_8c.html#af6458f5d187f1d7c82fb9ea7ef634b44">ZERO_NULL</a></div><div class="ttdeci">#define ZERO_NULL</div><div class="ttdef"><b>Definition:</b> <a href="curlx_8c_source.html#l00131">curlx.c:131</a></div></div>
<div class="ttc" id="mime_8c_html_aaedcbf6141c28fcbf6405460b302a50c"><div class="ttname"><a href="mime_8c.html#aaedcbf6141c28fcbf6405460b302a50c">curl_mime_data</a></div><div class="ttdeci">CURLcode curl_mime_data(curl_mimepart *part, const char *data, size_t datasize)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l01314">mime.c:1314</a></div></div>
<div class="ttc" id="curl__setup__once_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="curl__setup__once_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> <a href="curl__setup__once_8h_source.html#l00327">curl_setup_once.h:327</a></div></div>
<div class="ttc" id="mime_8c_html_a18951691569e3c259cba64edf1d3bd4b"><div class="ttname"><a href="mime_8c.html#a18951691569e3c259cba64edf1d3bd4b">Curl_mime_add_header</a></div><div class="ttdeci">CURLcode Curl_mime_add_header(struct curl_slist **slp, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l01610">mime.c:1610</a></div></div>
<div class="ttc" id="config_8d_html_aea53e62b3bb322f5a6bf4ceb58066a37"><div class="ttname"><a href="config_8d.html#aea53e62b3bb322f5a6bf4ceb58066a37">file</a></div><div class="ttdeci">Long separated by or the equals sign.Long option names can optionally be given in the config file without the initial double dashes and if the colon or equals characters can be used as separators.If the option is specified with one or two there can be no colon or equals character between the option and its parameter.If the parameter is to contain the parameter must be enclosed within quotes.Within double the following escape sequences are r and v.A backslash preceding any other letter is ignored.If the first column of a config line is a the rest of the line will be treated as a comment.Only write one option per physical line in the config file.Specify the filename to config as to make curl read the file from stdin.Note that to be able to specify a URL in the config file</div><div class="ttdef"><b>Definition:</b> <a href="config_8d_source.html#l00011">config.d:11</a></div></div>
<div class="ttc" id="mime_8h_html"><div class="ttname"><a href="mime_8h.html">mime.h</a></div></div>
<div class="ttc" id="mime_8c_html_a16da9e4dbf38be0096a6c63bd408c39c"><div class="ttname"><a href="mime_8c.html#a16da9e4dbf38be0096a6c63bd408c39c">Curl_mime_rewind</a></div><div class="ttdeci">CURLcode Curl_mime_rewind(curl_mimepart *part)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l01541">mime.c:1541</a></div></div>
<div class="ttc" id="config_8d_html_a9fb4830d0cbef7d3cf48425ce59f580a"><div class="ttname"><a href="config_8d.html#a9fb4830d0cbef7d3cf48425ce59f580a">n</a></div><div class="ttdeci">Long separated by or the equals sign.Long option names can optionally be given in the config file without the initial double dashes and if the colon or equals characters can be used as separators.If the option is specified with one or two there can be no colon or equals character between the option and its parameter.If the parameter is to contain the parameter must be enclosed within quotes.Within double the following escape sequences are n</div><div class="ttdef"><b>Definition:</b> <a href="config_8d_source.html#l00011">config.d:11</a></div></div>
<div class="ttc" id="structcurl__slist_html_a56fcfc41d89a47865933c310d316a108"><div class="ttname"><a href="structcurl__slist.html#a56fcfc41d89a47865933c310d316a108">curl_slist::next</a></div><div class="ttdeci">struct curl_slist * next</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l02396">curl.h:2396</a></div></div>
<div class="ttc" id="mime_8h_html_ac54b8e877d304c4fec36c1f8be0f02f1"><div class="ttname"><a href="mime_8h.html#ac54b8e877d304c4fec36c1f8be0f02f1">MIME_USERHEADERS_OWNER</a></div><div class="ttdeci">#define MIME_USERHEADERS_OWNER</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00030">mime.h:30</a></div></div>
<div class="ttc" id="rand_8c_html_ae4bd86089b91201bafb73ad067d81f79"><div class="ttname"><a href="rand_8c.html#ae4bd86089b91201bafb73ad067d81f79">Curl_rand_hex</a></div><div class="ttdeci">CURLcode Curl_rand_hex(struct Curl_easy *data, unsigned char *rnd, size_t num)</div><div class="ttdef"><b>Definition:</b> <a href="rand_8c_source.html#l00151">rand.c:151</a></div></div>
<div class="ttc" id="structmime__state_html_aebcf0f37d17920f4df99f0f76840c2d1"><div class="ttname"><a href="structmime__state.html#aebcf0f37d17920f4df99f0f76840c2d1">mime_state::state</a></div><div class="ttdeci">enum mimestate state</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00086">mime.h:86</a></div></div>
<div class="ttc" id="structpart_html_adc3bca90b1a43ee068aabda0e2553ef7"><div class="ttname"><a href="structpart.html#adc3bca90b1a43ee068aabda0e2553ef7">part::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="lib1560_8c_source.html#l00039">lib1560.c:39</a></div></div>
<div class="ttc" id="strcase_8h_html_a48c605aaef9b3681c41d91096b6baad0"><div class="ttname"><a href="strcase_8h.html#a48c605aaef9b3681c41d91096b6baad0">strncasecompare</a></div><div class="ttdeci">#define strncasecompare(a, b, c)</div><div class="ttdef"><b>Definition:</b> <a href="strcase_8h_source.html#l00036">strcase.h:36</a></div></div>
<div class="ttc" id="mime_8h_html_aa435b43174844a5636586eb1393ebf30ae986dee840014a75ec576769fda3d31c"><div class="ttname"><a href="mime_8h.html#aa435b43174844a5636586eb1393ebf30ae986dee840014a75ec576769fda3d31c">MIMESTATE_BEGIN</a></div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00049">mime.h:49</a></div></div>
<div class="ttc" id="remote-name_8d_html_aa335f8bb20424b03700f57b150bf0aa6"><div class="ttname"><a href="remote-name_8d.html#aa335f8bb20424b03700f57b150bf0aa6">name</a></div><div class="ttdeci">Long the path is cut off.The file will be saved in the current working directory.If you want the file saved in a different make sure you change the current working directory before invoking curl with this option.The remote file name to use for saving is extracted from the given nothing and if it already exists it will be overwritten.If you want the server to be able to choose the file name refer to remote header name which can be used in addition to this option.If the server chooses a file name and that name already exists it will not be overwritten.There is no URL decoding done on the file name.If it has or other URL encoded parts of the name</div><div class="ttdef"><b>Definition:</b> <a href="remote-name_8d_source.html#l00006">remote-name.d:6</a></div></div>
<div class="ttc" id="mime_8h_html_aa435b43174844a5636586eb1393ebf30a0d49370eb200044ef0caf87f127bec91"><div class="ttname"><a href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a0d49370eb200044ef0caf87f127bec91">MIMESTATE_CONTENT</a></div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00056">mime.h:56</a></div></div>
<div class="ttc" id="mime_8c_html_aa8c497008b5fa9afeec3716ece794513"><div class="ttname"><a href="mime_8c.html#aa8c497008b5fa9afeec3716ece794513">QP_CR</a></div><div class="ttdeci">#define QP_CR</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l00088">mime.c:88</a></div></div>
<div class="ttc" id="structcurl__mimepart__s_html_a6e35c1228d45569bcc924f3a9685710a"><div class="ttname"><a href="structcurl__mimepart__s.html#a6e35c1228d45569bcc924f3a9685710a">curl_mimepart_s::mimetype</a></div><div class="ttdeci">char * mimetype</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00115">mime.h:115</a></div></div>
<div class="ttc" id="structmime__encoder__state_html_a6db893fcae276ee6f67c6d0945a6b4e0"><div class="ttname"><a href="structmime__encoder__state.html#a6db893fcae276ee6f67c6d0945a6b4e0">mime_encoder_state::buf</a></div><div class="ttdeci">char buf[ENCODING_BUFFER_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00081">mime.h:81</a></div></div>
<div class="ttc" id="non-ascii_8h_html_ab7de472e1367a01da556c8f5acad93bb"><div class="ttname"><a href="non-ascii_8h.html#ab7de472e1367a01da556c8f5acad93bb">Curl_convert_to_network</a></div><div class="ttdeci">#define Curl_convert_to_network(a, b, c)</div><div class="ttdef"><b>Definition:</b> <a href="non-ascii_8h_source.html#l00056">non-ascii.h:56</a></div></div>
<div class="ttc" id="structcurl__mimepart__s_html_ac322a51dc312c445204580899f35c758"><div class="ttname"><a href="structcurl__mimepart__s.html#ac322a51dc312c445204580899f35c758">curl_mimepart_s::freefunc</a></div><div class="ttdeci">curl_free_callback freefunc</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00110">mime.h:110</a></div></div>
<div class="ttc" id="structcurl__mimepart__s_html_ae134148c256da12f84f88206f3877dff"><div class="ttname"><a href="structcurl__mimepart__s.html#ae134148c256da12f84f88206f3877dff">curl_mimepart_s::seekfunc</a></div><div class="ttdeci">curl_seek_callback seekfunc</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00109">mime.h:109</a></div></div>
<div class="ttc" id="structmime__encoder__state_html_a9de571d91a0bd1a9697dc544929d80ae"><div class="ttname"><a href="structmime__encoder__state.html#a9de571d91a0bd1a9697dc544929d80ae">mime_encoder_state::pos</a></div><div class="ttdeci">size_t pos</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00078">mime.h:78</a></div></div>
<div class="ttc" id="curl_8h_html_a7516630ec17f247697dd3272be7ada74"><div class="ttname"><a href="curl_8h.html#a7516630ec17f247697dd3272be7ada74">curl_read_callback</a></div><div class="ttdeci">size_t(* curl_read_callback)(char *buffer, size_t size, size_t nitems, void *instream)</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00358">curl.h:358</a></div></div>
<div class="ttc" id="structcurl__mime__s_html_a6d359bcee78c99535224d7c09fc25334"><div class="ttname"><a href="structcurl__mime__s.html#a6d359bcee78c99535224d7c09fc25334">curl_mime_s::state</a></div><div class="ttdeci">mime_state state</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00098">mime.h:98</a></div></div>
<div class="ttc" id="curl__memory_8h_html"><div class="ttname"><a href="curl__memory_8h.html">curl_memory.h</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951af2fb280cf805aa199f6b63a2a27c318b">CURLE_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00458">curl.h:458</a></div></div>
<div class="ttc" id="curl_8h_html_acf9429c7036e44c7701a55dc0344f9f0"><div class="ttname"><a href="curl_8h.html#acf9429c7036e44c7701a55dc0344f9f0">curl_strequal</a></div><div class="ttdeci">CURL_EXTERN int curl_strequal(const char *s1, const char *s2)</div><div class="ttdef"><b>Definition:</b> <a href="strcase_8c_source.html#l00170">strcase.c:170</a></div></div>
<div class="ttc" id="mime_8c_html_a4cb7d1f698ce64968affeb42c051d339"><div class="ttname"><a href="mime_8c.html#a4cb7d1f698ce64968affeb42c051d339">curl_mime_addpart</a></div><div class="ttdeci">curl_mimepart * curl_mime_addpart(curl_mime *mime)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l01253">mime.c:1253</a></div></div>
<div class="ttc" id="structcurl__mime__s_html_accd1697ef1449ff2692cc9c1cc9e40da"><div class="ttname"><a href="structcurl__mime__s.html#accd1697ef1449ff2692cc9c1cc9e40da">curl_mime_s::firstpart</a></div><div class="ttdeci">curl_mimepart * firstpart</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00095">mime.h:95</a></div></div>
<div class="ttc" id="mime_8h_html_ab2a72961faaa6c0ce26963a8013fed2e"><div class="ttname"><a href="mime_8h.html#ab2a72961faaa6c0ce26963a8013fed2e">FILE_CONTENTTYPE_DEFAULT</a></div><div class="ttdeci">#define FILE_CONTENTTYPE_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00033">mime.h:33</a></div></div>
<div class="ttc" id="unit1309_8c_html_ab4b8daf4b8ea9d39568719e1e320076f"><div class="ttname"><a href="unit1309_8c.html#ab4b8daf4b8ea9d39568719e1e320076f">root</a></div><div class="ttdeci">struct Curl_tree * root</div><div class="ttdef"><b>Definition:</b> <a href="unit1309_8c_source.html#l00074">unit1309.c:74</a></div></div>
<div class="ttc" id="memdebug_8h_html_a795660f73c902cc80ac0fe6cda0dbd1c"><div class="ttname"><a href="memdebug_8h.html#a795660f73c902cc80ac0fe6cda0dbd1c">Curl_safefree</a></div><div class="ttdeci">#define Curl_safefree(ptr)</div><div class="ttdef"><b>Definition:</b> <a href="memdebug_8h_source.html#l00176">memdebug.h:176</a></div></div>
<div class="ttc" id="curl__setup_8h_html"><div class="ttname"><a href="curl__setup_8h.html">curl_setup.h</a></div></div>
<div class="ttc" id="mime_8h_html_aa435b43174844a5636586eb1393ebf30a6e1ee28103ed68ef48e14de419e20c02"><div class="ttname"><a href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a6e1ee28103ed68ef48e14de419e20c02">MIMESTATE_EOH</a></div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00052">mime.h:52</a></div></div>
<div class="ttc" id="posix__shims_8c_html_aa918cf234c33e52741d038f62d41897d"><div class="ttname"><a href="posix__shims_8c.html#aa918cf234c33e52741d038f62d41897d">access</a></div><div class="ttdeci">int access(const char *pathname, int mode)</div><div class="ttdoc">Provide a shim for the Posix access(2) function. </div><div class="ttdef"><b>Definition:</b> <a href="posix__shims_8c_source.html#l00011">posix_shims.c:11</a></div></div>
<div class="ttc" id="mime_8c_html_a1c0916f106b9a5ebbe6258a8e1e58cb8"><div class="ttname"><a href="mime_8c.html#a1c0916f106b9a5ebbe6258a8e1e58cb8">curl_mime_subparts</a></div><div class="ttdeci">CURLcode curl_mime_subparts(curl_mimepart *part, curl_mime *subparts)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l01524">mime.c:1524</a></div></div>
<div class="ttc" id="mime_8c_html_a5d447429cc681c949f0a2b9c60bebdae"><div class="ttname"><a href="mime_8c.html#a5d447429cc681c949f0a2b9c60bebdae">Curl_mime_size</a></div><div class="ttdeci">curl_off_t Curl_mime_size(curl_mimepart *part)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l01587">mime.c:1587</a></div></div>
<div class="ttc" id="structcurl__mimepart__s_html"><div class="ttname"><a href="structcurl__mimepart__s.html">curl_mimepart_s</a></div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00102">mime.h:102</a></div></div>
<div class="ttc" id="unit1652_8c_html_a1d19b0eef3b3acd31be88886a0277c2e"><div class="ttname"><a href="unit1652_8c.html#a1d19b0eef3b3acd31be88886a0277c2e">memset</a></div><div class="ttdeci">memset(input, '\0', sizeof(input))</div></div>
<div class="ttc" id="curl_8h_html_a37f72557bd7b33a75cb3c3ab165e357e"><div class="ttname"><a href="curl_8h.html#a37f72557bd7b33a75cb3c3ab165e357e">CURL_READFUNC_ABORT</a></div><div class="ttdeci">#define CURL_READFUNC_ABORT</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00353">curl.h:353</a></div></div>
<div class="ttc" id="mime_8h_html_a3f7ea952d37b502d03fb5d8f8b9d7101a73ab828a446b18e6c64cf58121c2876c"><div class="ttname"><a href="mime_8h.html#a3f7ea952d37b502d03fb5d8f8b9d7101a73ab828a446b18e6c64cf58121c2876c">MIMEKIND_CALLBACK</a></div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00042">mime.h:42</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951a1a9263421629452bb969e2aa901c11ed"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951a1a9263421629452bb969e2aa901c11ed">CURLE_SEND_FAIL_REWIND</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00537">curl.h:537</a></div></div>
<div class="ttc" id="non-ascii_8h_html"><div class="ttname"><a href="non-ascii_8h.html">non-ascii.h</a></div></div>
<div class="ttc" id="mime_8h_html_a87cd972177607de17e317cf9272c1f02"><div class="ttname"><a href="mime_8h.html#a87cd972177607de17e317cf9272c1f02">MAX_ENCODED_LINE_LENGTH</a></div><div class="ttdeci">#define MAX_ENCODED_LINE_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00026">mime.h:26</a></div></div>
<div class="ttc" id="mime_8c_html_a2e713ad6004608b944d65cfe2c42d326"><div class="ttname"><a href="mime_8c.html#a2e713ad6004608b944d65cfe2c42d326">curl_mime_filename</a></div><div class="ttdeci">CURLcode curl_mime_filename(curl_mimepart *part, const char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l01296">mime.c:1296</a></div></div>
<div class="ttc" id="progress-bar_8d_html_ab8db689d5132c4523a63d67bedf23c8a"><div class="ttname"><a href="progress-bar_8d.html#ab8db689d5132c4523a63d67bedf23c8a">size</a></div><div class="ttdeci">Short more meter.This progress bar draws a single line of shows a percentage if the transfer size is known.For transfers without a known size</div><div class="ttdef"><b>Definition:</b> <a href="progress-bar_8d_source.html#l00006">progress-bar.d:6</a></div></div>
<div class="ttc" id="stdcheaders_8h_html_aae22dd41ebe1e64904429c5a31e7e642"><div class="ttname"><a href="stdcheaders_8h.html#aae22dd41ebe1e64904429c5a31e7e642">fread</a></div><div class="ttdeci">size_t fread(void *, size_t, size_t, FILE *)</div></div>
<div class="ttc" id="_console_8h_html_ae07e7f0f3d76ae1309217641da872eb2a9fc5887c030f7a3e19821ebec457e719"><div class="ttname"><a href="_console_8h.html#ae07e7f0f3d76ae1309217641da872eb2a9fc5887c030f7a3e19821ebec457e719">ArgType_t::FILE</a></div></div>
<div class="ttc" id="structcurl__mime__s_html_a4f83c49c822bfb426b2d779c7aa426db"><div class="ttname"><a href="structcurl__mime__s.html#a4f83c49c822bfb426b2d779c7aa426db">curl_mime_s::parent</a></div><div class="ttdeci">curl_mimepart * parent</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00094">mime.h:94</a></div></div>
<div class="ttc" id="mime_8h_html_a3f7ea952d37b502d03fb5d8f8b9d7101a3fa11ee93428c5cb981af0dbc5ff745a"><div class="ttname"><a href="mime_8h.html#a3f7ea952d37b502d03fb5d8f8b9d7101a3fa11ee93428c5cb981af0dbc5ff745a">MIMEKIND_DATA</a></div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00040">mime.h:40</a></div></div>
<div class="ttc" id="mime_8c_html_a951d83a24c9938421fd427523a153540"><div class="ttname"><a href="mime_8c.html#a951d83a24c9938421fd427523a153540">basename</a></div><div class="ttdeci">#define basename(x)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l00262">mime.c:262</a></div></div>
<div class="ttc" id="mime_8c_html_adf1d3c4b90945af1e81e77a806a30eea"><div class="ttname"><a href="mime_8c.html#adf1d3c4b90945af1e81e77a806a30eea">curl_mime_data_cb</a></div><div class="ttdeci">CURLcode curl_mime_data_cb(curl_mimepart *part, curl_off_t datasize, curl_read_callback readfunc, curl_seek_callback seekfunc, curl_free_callback freefunc, void *arg)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l01454">mime.c:1454</a></div></div>
<div class="ttc" id="structcurl__mimepart__s_html_a42c16160977da930d61ab37025adca44"><div class="ttname"><a href="structcurl__mimepart__s.html#a42c16160977da930d61ab37025adca44">curl_mimepart_s::nextpart</a></div><div class="ttdeci">curl_mimepart * nextpart</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00105">mime.h:105</a></div></div>
<div class="ttc" id="structmime__encoder__state_html_a9c2e9a4785a813fde7fc20659a5b1200"><div class="ttname"><a href="structmime__encoder__state.html#a9c2e9a4785a813fde7fc20659a5b1200">mime_encoder_state::bufbeg</a></div><div class="ttdeci">size_t bufbeg</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00079">mime.h:79</a></div></div>
<div class="ttc" id="mime_8c_html_ab38cb1943e27dfc0e25075e8b7fd7b34"><div class="ttname"><a href="mime_8c.html#ab38cb1943e27dfc0e25075e8b7fd7b34">curl_mime_type</a></div><div class="ttdeci">CURLcode curl_mime_type(curl_mimepart *part, const char *mimetype)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l01395">mime.c:1395</a></div></div>
<div class="ttc" id="mime_8c_html_a26e5fb189d0937d27da11d1c10c09565"><div class="ttname"><a href="mime_8c.html#a26e5fb189d0937d27da11d1c10c09565">Curl_mime_initpart</a></div><div class="ttdeci">void Curl_mime_initpart(curl_mimepart *part, struct Curl_easy *easy)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l01245">mime.c:1245</a></div></div>
<div class="ttc" id="mime_8c_html_af89041df2ff39c84bcf9bad6ec3388f4"><div class="ttname"><a href="mime_8c.html#af89041df2ff39c84bcf9bad6ec3388f4">QP_SP</a></div><div class="ttdeci">#define QP_SP</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l00087">mime.c:87</a></div></div>
<div class="ttc" id="structmime__encoder_html_abaab4586c414ec775deddae5978fa07a"><div class="ttname"><a href="structmime__encoder.html#abaab4586c414ec775deddae5978fa07a">mime_encoder::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00070">mime.h:70</a></div></div>
<div class="ttc" id="curl_8h_html_af0691941698240652e0a391394217951acaaed2faf20c957350e90a68282ae314"><div class="ttname"><a href="curl_8h.html#af0691941698240652e0a391394217951acaaed2faf20c957350e90a68282ae314">CURLE_WRITE_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00489">curl.h:489</a></div></div>
<div class="ttc" id="mime_8h_html_aa435b43174844a5636586eb1393ebf30a0fe3323e6cdcb2985a7f23f7038b927a"><div class="ttname"><a href="mime_8h.html#aa435b43174844a5636586eb1393ebf30a0fe3323e6cdcb2985a7f23f7038b927a">MIMESTATE_CURLHEADERS</a></div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00050">mime.h:50</a></div></div>
<div class="ttc" id="mime_8c_html_a62f8ea9d0ecba38e9ea6f78684d4a662"><div class="ttname"><a href="mime_8c.html#a62f8ea9d0ecba38e9ea6f78684d4a662">curl_mime_init</a></div><div class="ttdeci">curl_mime * curl_mime_init(struct Curl_easy *easy)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l01211">mime.c:1211</a></div></div>
<div class="ttc" id="slist_8h_html"><div class="ttname"><a href="slist_8h.html">slist.h</a></div></div>
<div class="ttc" id="unit1398_8c_html_aee5a1edd73e85934dcbe27ccbb1ef1ad"><div class="ttname"><a href="unit1398_8c.html#aee5a1edd73e85934dcbe27ccbb1ef1ad">buf</a></div><div class="ttdeci">char buf[3]</div><div class="ttdef"><b>Definition:</b> <a href="unit1398_8c_source.html#l00032">unit1398.c:32</a></div></div>
<div class="ttc" id="curl_8h_html_ace655e3633b6533591283994d6b5cdda"><div class="ttname"><a href="curl_8h.html#ace655e3633b6533591283994d6b5cdda">CURL</a></div><div class="ttdeci">void CURL</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00102">curl.h:102</a></div></div>
<div class="ttc" id="mime_8h_html_aaebb2a8b4bf26dfb612ce460b4328c85"><div class="ttname"><a href="mime_8h.html#aaebb2a8b4bf26dfb612ce460b4328c85">MULTIPART_CONTENTTYPE_DEFAULT</a></div><div class="ttdeci">#define MULTIPART_CONTENTTYPE_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00034">mime.h:34</a></div></div>
<div class="ttc" id="curl_8h_html_a8a6431fcced5944dec01685f14de2540"><div class="ttname"><a href="curl_8h.html#a8a6431fcced5944dec01685f14de2540">CURL_READFUNC_PAUSE</a></div><div class="ttdeci">#define CURL_READFUNC_PAUSE</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00356">curl.h:356</a></div></div>
<div class="ttc" id="unit1602_8c_html_a1f81d06f9ccd5ec47176a7fc466b6030"><div class="ttname"><a href="unit1602_8c.html#a1f81d06f9ccd5ec47176a7fc466b6030">value</a></div><div class="ttdeci">UNITTEST_START int * value</div><div class="ttdef"><b>Definition:</b> <a href="unit1602_8c_source.html#l00051">unit1602.c:51</a></div></div>
<div class="ttc" id="structmime__encoder_html"><div class="ttname"><a href="structmime__encoder.html">mime_encoder</a></div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00069">mime.h:69</a></div></div>
<div class="ttc" id="structcurl__mime__s_html_ac3b95a42477f9be5f2e3743d642ea95b"><div class="ttname"><a href="structcurl__mime__s.html#ac3b95a42477f9be5f2e3743d642ea95b">curl_mime_s::lastpart</a></div><div class="ttdeci">curl_mimepart * lastpart</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00096">mime.h:96</a></div></div>
<div class="ttc" id="structcurl__mimepart__s_html_a42982347c730039d3f9a131a80e0b80b"><div class="ttname"><a href="structcurl__mimepart__s.html#a42982347c730039d3f9a131a80e0b80b">curl_mimepart_s::datasize</a></div><div class="ttdeci">curl_off_t datasize</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00118">mime.h:118</a></div></div>
<div class="ttc" id="slist_8c_html_a2afaf12410051438ab54ee4c404d541d"><div class="ttname"><a href="slist_8c.html#a2afaf12410051438ab54ee4c404d541d">Curl_slist_duplicate</a></div><div class="ttdeci">struct curl_slist * Curl_slist_duplicate(struct curl_slist *inlist)</div><div class="ttdef"><b>Definition:</b> <a href="slist_8c_source.html#l00109">slist.c:109</a></div></div>
<div class="ttc" id="curl_8h_html_a66f815e87e631a890391a725fb060456"><div class="ttname"><a href="curl_8h.html#a66f815e87e631a890391a725fb060456">CURL_ZERO_TERMINATED</a></div><div class="ttdeci">#define CURL_ZERO_TERMINATED</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l02025">curl.h:2025</a></div></div>
<div class="ttc" id="mime_8c_html_a8ad2d6cfaf72770716c4baa3d766df1d"><div class="ttname"><a href="mime_8c.html#a8ad2d6cfaf72770716c4baa3d766df1d">fopen_read</a></div><div class="ttdeci">#define fopen_read</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l00126">mime.c:126</a></div></div>
<div class="ttc" id="structcurl__mimepart__s_html_ab141edbb310a7bdcd1edc0cb53cd946c"><div class="ttname"><a href="structcurl__mimepart__s.html#ab141edbb310a7bdcd1edc0cb53cd946c">curl_mimepart_s::arg</a></div><div class="ttdeci">void * arg</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00111">mime.h:111</a></div></div>
<div class="ttc" id="mime_8c_html_aa7e20c5da987772b1867070180844105"><div class="ttname"><a href="mime_8c.html#aa7e20c5da987772b1867070180844105">Curl_mime_set_subparts</a></div><div class="ttdeci">CURLcode Curl_mime_set_subparts(curl_mimepart *part, curl_mime *subparts, int take_ownership)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l01477">mime.c:1477</a></div></div>
<div class="ttc" id="structcurl__mime__s_html_a2bbcc6173ba4d6c08503a26aafec008c"><div class="ttname"><a href="structcurl__mime__s.html#a2bbcc6173ba4d6c08503a26aafec008c">curl_mime_s::easy</a></div><div class="ttdeci">struct Curl_easy * easy</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00093">mime.h:93</a></div></div>
<div class="ttc" id="mime_8c_html_ac41734365e76e2fcab439c31c28ea28c"><div class="ttname"><a href="mime_8c.html#ac41734365e76e2fcab439c31c28ea28c">READ_ERROR</a></div><div class="ttdeci">#define READ_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l00054">mime.c:54</a></div></div>
<div class="ttc" id="structcurl__mimepart__s_html_aad2b3222f2f3fc96225783d81ddcf7a6"><div class="ttname"><a href="structcurl__mimepart__s.html#aad2b3222f2f3fc96225783d81ddcf7a6">curl_mimepart_s::userheaders</a></div><div class="ttdeci">struct curl_slist * userheaders</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00114">mime.h:114</a></div></div>
<div class="ttc" id="urldata_8h_html"><div class="ttname"><a href="urldata_8h.html">urldata.h</a></div></div>
<div class="ttc" id="multi-debugcallback_8c_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="multi-debugcallback_8c.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition:</b> <a href="multi-debugcallback_8c_source.html#l00038">multi-debugcallback.c:38</a></div></div>
<div class="ttc" id="mime_8h_html_aa5c7e54854ee53fcaeef2e3d826f15e6"><div class="ttname"><a href="mime_8h.html#aa5c7e54854ee53fcaeef2e3d826f15e6">DISPOSITION_DEFAULT</a></div><div class="ttdeci">#define DISPOSITION_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00035">mime.h:35</a></div></div>
<div class="ttc" id="mime_8c_html_a5277ce27b3802d3e11c47ec2040e0a0f"><div class="ttname"><a href="mime_8c.html#a5277ce27b3802d3e11c47ec2040e0a0f">Curl_mime_duppart</a></div><div class="ttdeci">CURLcode Curl_mime_duppart(curl_mimepart *dst, const curl_mimepart *src)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l01131">mime.c:1131</a></div></div>
<div class="ttc" id="memdebug_8h_html"><div class="ttname"><a href="memdebug_8h.html">memdebug.h</a></div></div>
<div class="ttc" id="mprintf_8h_html_a261c9a5d90b67ece71b5a1b358524d2e"><div class="ttname"><a href="mprintf_8h.html#a261c9a5d90b67ece71b5a1b358524d2e">curl_mvaprintf</a></div><div class="ttdeci">CURL_EXTERN char * curl_mvaprintf(const char *format, va_list args)</div><div class="ttdef"><b>Definition:</b> <a href="mprintf_8c_source.html#l01092">mprintf.c:1092</a></div></div>
<div class="ttc" id="curl_8h_html_ad7ff72bc35b39df6cca31d944c585add"><div class="ttname"><a href="curl_8h.html#ad7ff72bc35b39df6cca31d944c585add">curl_free_callback</a></div><div class="ttdeci">void(* curl_free_callback)(void *ptr)</div><div class="ttdef"><b>Definition:</b> <a href="curl_8h_source.html#l00423">curl.h:423</a></div></div>
<div class="ttc" id="curl_8h_html_a3a28c84e40db0ef30859b680281c9d36"><div class="ttname"><a href="curl_8h.html#a3a28c84e40db0ef30859b680281c9d36">curl_slist_free_all</a></div><div class="ttdeci">CURL_EXTERN void curl_slist_free_all(struct curl_slist *)</div><div class="ttdef"><b>Definition:</b> <a href="slist_8c_source.html#l00129">slist.c:129</a></div></div>
<div class="ttc" id="structcurl__mimepart__s_html_a3b1a7b335221d5a6c4830a46896ef36e"><div class="ttname"><a href="structcurl__mimepart__s.html#a3b1a7b335221d5a6c4830a46896ef36e">curl_mimepart_s::encoder</a></div><div class="ttdeci">const mime_encoder * encoder</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00121">mime.h:121</a></div></div>
<div class="ttc" id="mime_8c_html_aa02fd78d6c0afac9cffdd3ef6d109e24"><div class="ttname"><a href="mime_8c.html#aa02fd78d6c0afac9cffdd3ef6d109e24">Curl_mime_contenttype</a></div><div class="ttdeci">const char * Curl_mime_contenttype(const char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l01640">mime.c:1640</a></div></div>
<div class="ttc" id="mime_8c_html_ac305b8d2c653ca50fa292823795d5f68"><div class="ttname"><a href="mime_8c.html#ac305b8d2c653ca50fa292823795d5f68">curl_mime_headers</a></div><div class="ttdeci">CURLcode curl_mime_headers(curl_mimepart *part, struct curl_slist *headers, int take_ownership)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l01436">mime.c:1436</a></div></div>
<div class="ttc" id="structdata_html"><div class="ttname"><a href="structdata.html">data</a></div><div class="ttdef"><b>Definition:</b> <a href="debug_8c_source.html#l00029">debug.c:29</a></div></div>
<div class="ttc" id="mime_8h_html_a3f7ea952d37b502d03fb5d8f8b9d7101ae008e417ccf479abfb3d3117c330df4b"><div class="ttname"><a href="mime_8h.html#a3f7ea952d37b502d03fb5d8f8b9d7101ae008e417ccf479abfb3d3117c330df4b">MIMEKIND_FILE</a></div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00041">mime.h:41</a></div></div>
<div class="ttc" id="structmime__encoder__state_html_a648137b0d19c885943492450644c5c2e"><div class="ttname"><a href="structmime__encoder__state.html#a648137b0d19c885943492450644c5c2e">mime_encoder_state::bufend</a></div><div class="ttdeci">size_t bufend</div><div class="ttdef"><b>Definition:</b> <a href="mime_8h_source.html#l00080">mime.h:80</a></div></div>
<div class="ttc" id="curl__setup_8h_html_a1c6e64692c9b7c6e7dc70adb398b3115"><div class="ttname"><a href="curl__setup_8h.html#a1c6e64692c9b7c6e7dc70adb398b3115">struct_stat</a></div><div class="ttdeci">#define struct_stat</div><div class="ttdef"><b>Definition:</b> <a href="curl__setup_8h_source.html#l00389">curl_setup.h:389</a></div></div>
<div class="ttc" id="mime_8c_html_aea3a0f9a996315bcf17cce4ec0b378a2"><div class="ttname"><a href="mime_8c.html#aea3a0f9a996315bcf17cce4ec0b378a2">curl_mime_free</a></div><div class="ttdeci">void curl_mime_free(curl_mime *mime)</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l01113">mime.c:1113</a></div></div>
<div class="ttc" id="util_8c_html_a3b02c6de5c049804444a246f7fdf46b4"><div class="ttname"><a href="util_8c.html#a3b02c6de5c049804444a246f7fdf46b4">path</a></div><div class="ttdeci">const char * path</div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00194">util.c:194</a></div></div>
<div class="ttc" id="structpart_html"><div class="ttname"><a href="structpart.html">part</a></div><div class="ttdef"><b>Definition:</b> <a href="lib1560_8c_source.html#l00037">lib1560.c:37</a></div></div>
<div class="ttc" id="mime_8c_html_a5b87a3fc8bd5d005c1859665581775e1"><div class="ttname"><a href="mime_8c.html#a5b87a3fc8bd5d005c1859665581775e1">QP_LF</a></div><div class="ttdeci">#define QP_LF</div><div class="ttdef"><b>Definition:</b> <a href="mime_8c_source.html#l00089">mime.c:89</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_409f97388efe006bc3438b95e9edef48.html">components</a></li><li class="navelem"><a class="el" href="dir_e9014474357f0c50c4c87dd9066e36b7.html">curl</a></li><li class="navelem"><a class="el" href="dir_efb6013f246e7f8b3181c5014844a411.html">lib</a></li><li class="navelem"><a class="el" href="mime_8c.html">mime.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
